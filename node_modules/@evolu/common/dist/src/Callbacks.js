import { createId } from "./Type.js";
/** Creates a {@link Callbacks} registry for managing callbacks. */
export const createCallbacks = (deps) => {
    const callbackMap = new Map();
    return {
        register: (callback) => {
            const id = createId(deps);
            callbackMap.set(id, callback);
            return id;
        },
        execute: (id, ...args) => {
            const callback = callbackMap.get(id);
            if (!callback)
                return;
            callbackMap.delete(id);
            if (args.length === 0) {
                // Called without argument (undefined case)
                callback();
            }
            else {
                callback(args[0]);
            }
        },
    };
};
