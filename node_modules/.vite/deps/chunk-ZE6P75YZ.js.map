{
  "version": 3,
  "sources": ["../../@evolu/common/dist/src/Array.js", "../../@evolu/common/dist/src/Assert.js", "../../@evolu/common/dist/src/BigInt.js", "../../msgpackr/unpack.js", "../../msgpackr/pack.js", "../../@evolu/common/dist/src/Object.js", "../../@evolu/common/dist/src/Platform.js", "../../@evolu/common/dist/src/Result.js", "../../@evolu/common/dist/src/String.js", "../../@evolu/common/dist/src/Type.js", "../../@evolu/common/dist/src/Buffer.js", "../../@evolu/common/dist/src/Cache.js", "../../@evolu/common/dist/src/Callbacks.js", "../../@evolu/common/dist/src/Console.js", "../../@evolu/common/dist/src/Crypto.js", "../../@evolu/common/dist/src/Eq.js", "../../@evolu/common/dist/src/Error.js", "../../@evolu/common/dist/src/Function.js", "../../@evolu/common/dist/src/Identicon.js", "../../@evolu/common/dist/src/Instances.js", "../../@evolu/common/dist/src/Sqlite.js", "../../@evolu/common/dist/src/Store.js", "../../@evolu/common/dist/src/Worker.js", "../../@evolu/common/dist/src/local-first/Owner.js", "../../@evolu/common/dist/src/Number.js", "../../kysely/dist/esm/util/object-utils.js", "../../kysely/dist/esm/operation-node/alter-table-node.js", "../../kysely/dist/esm/operation-node/identifier-node.js", "../../kysely/dist/esm/operation-node/create-index-node.js", "../../kysely/dist/esm/operation-node/create-schema-node.js", "../../kysely/dist/esm/operation-node/create-table-node.js", "../../kysely/dist/esm/operation-node/schemable-identifier-node.js", "../../kysely/dist/esm/operation-node/drop-index-node.js", "../../kysely/dist/esm/operation-node/drop-schema-node.js", "../../kysely/dist/esm/operation-node/drop-table-node.js", "../../kysely/dist/esm/operation-node/alias-node.js", "../../kysely/dist/esm/operation-node/table-node.js", "../../kysely/dist/esm/operation-node/operation-node-source.js", "../../kysely/dist/esm/expression/expression.js", "../../kysely/dist/esm/operation-node/select-modifier-node.js", "../../kysely/dist/esm/operation-node/and-node.js", "../../kysely/dist/esm/operation-node/or-node.js", "../../kysely/dist/esm/operation-node/on-node.js", "../../kysely/dist/esm/operation-node/join-node.js", "../../kysely/dist/esm/operation-node/binary-operation-node.js", "../../kysely/dist/esm/operation-node/operator-node.js", "../../kysely/dist/esm/operation-node/column-node.js", "../../kysely/dist/esm/operation-node/select-all-node.js", "../../kysely/dist/esm/operation-node/reference-node.js", "../../kysely/dist/esm/dynamic/dynamic-reference-builder.js", "../../kysely/dist/esm/operation-node/order-by-item-node.js", "../../kysely/dist/esm/operation-node/raw-node.js", "../../kysely/dist/esm/operation-node/collate-node.js", "../../kysely/dist/esm/query-builder/order-by-item-builder.js", "../../kysely/dist/esm/util/log-once.js", "../../kysely/dist/esm/parser/order-by-parser.js", "../../kysely/dist/esm/operation-node/json-reference-node.js", "../../kysely/dist/esm/operation-node/json-operator-chain-node.js", "../../kysely/dist/esm/operation-node/json-path-node.js", "../../kysely/dist/esm/parser/reference-parser.js", "../../kysely/dist/esm/operation-node/primitive-value-list-node.js", "../../kysely/dist/esm/operation-node/value-list-node.js", "../../kysely/dist/esm/operation-node/value-node.js", "../../kysely/dist/esm/parser/value-parser.js", "../../kysely/dist/esm/operation-node/parens-node.js", "../../kysely/dist/esm/parser/binary-operation-parser.js", "../../kysely/dist/esm/operation-node/order-by-node.js", "../../kysely/dist/esm/operation-node/partition-by-node.js", "../../kysely/dist/esm/operation-node/over-node.js", "../../kysely/dist/esm/operation-node/from-node.js", "../../kysely/dist/esm/operation-node/group-by-node.js", "../../kysely/dist/esm/operation-node/having-node.js", "../../kysely/dist/esm/operation-node/insert-query-node.js", "../../kysely/dist/esm/operation-node/list-node.js", "../../kysely/dist/esm/operation-node/update-query-node.js", "../../kysely/dist/esm/operation-node/using-node.js", "../../kysely/dist/esm/operation-node/delete-query-node.js", "../../kysely/dist/esm/operation-node/where-node.js", "../../kysely/dist/esm/operation-node/returning-node.js", "../../kysely/dist/esm/operation-node/explain-node.js", "../../kysely/dist/esm/operation-node/when-node.js", "../../kysely/dist/esm/operation-node/merge-query-node.js", "../../kysely/dist/esm/operation-node/output-node.js", "../../kysely/dist/esm/operation-node/query-node.js", "../../kysely/dist/esm/operation-node/select-query-node.js", "../../kysely/dist/esm/query-builder/join-builder.js", "../../kysely/dist/esm/operation-node/partition-by-item-node.js", "../../kysely/dist/esm/parser/partition-by-parser.js", "../../kysely/dist/esm/query-builder/over-builder.js", "../../kysely/dist/esm/operation-node/selection-node.js", "../../kysely/dist/esm/parser/select-parser.js", "../../kysely/dist/esm/operation-node/values-node.js", "../../kysely/dist/esm/operation-node/default-insert-value-node.js", "../../kysely/dist/esm/parser/insert-values-parser.js", "../../kysely/dist/esm/operation-node/column-update-node.js", "../../kysely/dist/esm/parser/update-set-parser.js", "../../kysely/dist/esm/operation-node/on-duplicate-key-node.js", "../../kysely/dist/esm/query-builder/insert-result.js", "../../kysely/dist/esm/query-builder/no-result-error.js", "../../kysely/dist/esm/operation-node/on-conflict-node.js", "../../kysely/dist/esm/query-builder/on-conflict-builder.js", "../../kysely/dist/esm/operation-node/top-node.js", "../../kysely/dist/esm/parser/top-parser.js", "../../kysely/dist/esm/operation-node/or-action-node.js", "../../kysely/dist/esm/query-builder/insert-query-builder.js", "../../kysely/dist/esm/query-builder/delete-result.js", "../../kysely/dist/esm/operation-node/limit-node.js", "../../kysely/dist/esm/query-builder/delete-query-builder.js", "../../kysely/dist/esm/query-builder/update-result.js", "../../kysely/dist/esm/query-builder/update-query-builder.js", "../../kysely/dist/esm/operation-node/common-table-expression-name-node.js", "../../kysely/dist/esm/operation-node/common-table-expression-node.js", "../../kysely/dist/esm/query-builder/cte-builder.js", "../../kysely/dist/esm/parser/with-parser.js", "../../kysely/dist/esm/operation-node/with-node.js", "../../kysely/dist/esm/util/random-string.js", "../../kysely/dist/esm/util/query-id.js", "../../kysely/dist/esm/util/require-all-props.js", "../../kysely/dist/esm/operation-node/operation-node-transformer.js", "../../kysely/dist/esm/plugin/with-schema/with-schema-transformer.js", "../../kysely/dist/esm/plugin/with-schema/with-schema-plugin.js", "../../kysely/dist/esm/operation-node/matched-node.js", "../../kysely/dist/esm/parser/merge-parser.js", "../../kysely/dist/esm/util/deferred.js", "../../kysely/dist/esm/util/provide-controlled-connection.js", "../../kysely/dist/esm/query-executor/query-executor-base.js", "../../kysely/dist/esm/query-executor/noop-query-executor.js", "../../kysely/dist/esm/query-builder/merge-result.js", "../../kysely/dist/esm/query-builder/merge-query-builder.js", "../../kysely/dist/esm/query-creator.js", "../../kysely/dist/esm/parser/parse-utils.js", "../../kysely/dist/esm/parser/join-parser.js", "../../kysely/dist/esm/operation-node/offset-node.js", "../../kysely/dist/esm/operation-node/group-by-item-node.js", "../../kysely/dist/esm/parser/group-by-parser.js", "../../kysely/dist/esm/operation-node/set-operation-node.js", "../../kysely/dist/esm/parser/set-operation-parser.js", "../../kysely/dist/esm/expression/expression-wrapper.js", "../../kysely/dist/esm/operation-node/fetch-node.js", "../../kysely/dist/esm/parser/fetch-parser.js", "../../kysely/dist/esm/query-builder/select-query-builder.js", "../../kysely/dist/esm/operation-node/aggregate-function-node.js", "../../kysely/dist/esm/operation-node/function-node.js", "../../kysely/dist/esm/query-builder/aggregate-function-builder.js", "../../kysely/dist/esm/query-builder/function-module.js", "../../kysely/dist/esm/operation-node/unary-operation-node.js", "../../kysely/dist/esm/parser/unary-operation-parser.js", "../../kysely/dist/esm/operation-node/case-node.js", "../../kysely/dist/esm/query-builder/case-builder.js", "../../kysely/dist/esm/operation-node/json-path-leg-node.js", "../../kysely/dist/esm/query-builder/json-path-builder.js", "../../kysely/dist/esm/operation-node/tuple-node.js", "../../kysely/dist/esm/operation-node/data-type-node.js", "../../kysely/dist/esm/parser/data-type-parser.js", "../../kysely/dist/esm/operation-node/cast-node.js", "../../kysely/dist/esm/expression/expression-builder.js", "../../kysely/dist/esm/parser/expression-parser.js", "../../kysely/dist/esm/dynamic/dynamic-table-builder.js", "../../kysely/dist/esm/parser/table-parser.js", "../../kysely/dist/esm/operation-node/add-column-node.js", "../../kysely/dist/esm/operation-node/column-definition-node.js", "../../kysely/dist/esm/operation-node/drop-column-node.js", "../../kysely/dist/esm/operation-node/rename-column-node.js", "../../kysely/dist/esm/operation-node/check-constraint-node.js", "../../kysely/dist/esm/operation-node/references-node.js", "../../kysely/dist/esm/parser/default-value-parser.js", "../../kysely/dist/esm/operation-node/generated-node.js", "../../kysely/dist/esm/operation-node/default-value-node.js", "../../kysely/dist/esm/parser/on-modify-action-parser.js", "../../kysely/dist/esm/schema/column-definition-builder.js", "../../kysely/dist/esm/operation-node/modify-column-node.js", "../../kysely/dist/esm/operation-node/foreign-key-constraint-node.js", "../../kysely/dist/esm/schema/foreign-key-constraint-builder.js", "../../kysely/dist/esm/operation-node/add-constraint-node.js", "../../kysely/dist/esm/operation-node/unique-constraint-node.js", "../../kysely/dist/esm/operation-node/drop-constraint-node.js", "../../kysely/dist/esm/operation-node/alter-column-node.js", "../../kysely/dist/esm/schema/alter-column-builder.js", "../../kysely/dist/esm/schema/alter-table-executor.js", "../../kysely/dist/esm/schema/alter-table-add-foreign-key-constraint-builder.js", "../../kysely/dist/esm/schema/alter-table-drop-constraint-builder.js", "../../kysely/dist/esm/operation-node/primary-key-constraint-node.js", "../../kysely/dist/esm/operation-node/add-index-node.js", "../../kysely/dist/esm/schema/alter-table-add-index-builder.js", "../../kysely/dist/esm/schema/unique-constraint-builder.js", "../../kysely/dist/esm/schema/primary-key-constraint-builder.js", "../../kysely/dist/esm/schema/check-constraint-builder.js", "../../kysely/dist/esm/operation-node/rename-constraint-node.js", "../../kysely/dist/esm/schema/alter-table-builder.js", "../../kysely/dist/esm/plugin/immediate-value/immediate-value-transformer.js", "../../kysely/dist/esm/schema/create-index-builder.js", "../../kysely/dist/esm/schema/create-schema-builder.js", "../../kysely/dist/esm/parser/on-commit-action-parse.js", "../../kysely/dist/esm/schema/create-table-builder.js", "../../kysely/dist/esm/schema/drop-index-builder.js", "../../kysely/dist/esm/schema/drop-schema-builder.js", "../../kysely/dist/esm/schema/drop-table-builder.js", "../../kysely/dist/esm/operation-node/create-view-node.js", "../../kysely/dist/esm/plugin/immediate-value/immediate-value-plugin.js", "../../kysely/dist/esm/schema/create-view-builder.js", "../../kysely/dist/esm/operation-node/drop-view-node.js", "../../kysely/dist/esm/schema/drop-view-builder.js", "../../kysely/dist/esm/operation-node/create-type-node.js", "../../kysely/dist/esm/schema/create-type-builder.js", "../../kysely/dist/esm/operation-node/drop-type-node.js", "../../kysely/dist/esm/schema/drop-type-builder.js", "../../kysely/dist/esm/parser/identifier-parser.js", "../../kysely/dist/esm/operation-node/refresh-materialized-view-node.js", "../../kysely/dist/esm/schema/refresh-materialized-view-builder.js", "../../kysely/dist/esm/schema/schema.js", "../../kysely/dist/esm/dynamic/dynamic.js", "../../kysely/dist/esm/driver/default-connection-provider.js", "../../kysely/dist/esm/query-executor/default-query-executor.js", "../../kysely/dist/esm/util/performance-now.js", "../../kysely/dist/esm/driver/runtime-driver.js", "../../kysely/dist/esm/driver/single-connection-provider.js", "../../kysely/dist/esm/driver/driver.js", "../../kysely/dist/esm/util/log.js", "../../kysely/dist/esm/util/compilable.js", "../../kysely/dist/esm/kysely.js", "../../kysely/dist/esm/raw-builder/raw-builder.js", "../../kysely/dist/esm/raw-builder/sql.js", "../../kysely/dist/esm/operation-node/operation-node-visitor.js", "../../kysely/dist/esm/query-compiler/default-query-compiler.js", "../../kysely/dist/esm/query-compiler/compiled-query.js", "../../kysely/dist/esm/driver/dummy-driver.js", "../../kysely/dist/esm/dialect/dialect-adapter-base.js", "../../kysely/dist/esm/dialect/sqlite/sqlite-query-compiler.js", "../../kysely/dist/esm/migration/migrator.js", "../../kysely/dist/esm/dialect/sqlite/sqlite-adapter.js", "../../kysely/dist/esm/dialect/postgres/postgres-adapter.js", "../../kysely/dist/esm/util/stack-trace-utils.js", "../../kysely/dist/esm/dialect/mysql/mysql-driver.js", "../../kysely/dist/esm/dialect/mysql/mysql-adapter.js", "../../kysely/dist/esm/dialect/postgres/postgres-driver.js", "../../kysely/dist/esm/dialect/mssql/mssql-driver.js", "../../@evolu/common/dist/src/local-first/Schema.js", "../../@evolu/common/dist/src/Order.js", "../../@evolu/common/dist/src/local-first/Timestamp.js", "../../@evolu/common/dist/src/local-first/Storage.js", "../../@evolu/common/dist/src/local-first/Protocol.js", "../../@evolu/common/dist/src/local-first/Query.js", "../../@evolu/common/dist/src/Resources.js", "../../@evolu/common/dist/src/Time.js", "../../@evolu/common/dist/src/Task.js", "../../@evolu/common/dist/src/local-first/Sync.js", "../../@evolu/common/dist/src/local-first/Db.js", "../../@evolu/common/dist/src/local-first/Evolu.js", "../../@evolu/common/dist/src/local-first/LocalAuth.js", "../../@evolu/common/dist/src/local-first/PublicKysely.js", "../../random/src/rng.ts", "../../random/src/generators/function.ts", "../../random/src/utils.ts", "../../random/src/generators/arc4.ts", "../../random/src/generators/math-random.ts", "../../random/src/generators/xor128.ts", "../../random/src/validation.ts", "../../random/src/distributions/bates.ts", "../../random/src/distributions/bernoulli.ts", "../../random/src/distributions/binomial.ts", "../../random/src/distributions/exponential.ts", "../../random/src/distributions/geometric.ts", "../../random/src/distributions/irwin-hall.ts", "../../random/src/distributions/log-normal.ts", "../../random/src/distributions/normal.ts", "../../random/src/distributions/pareto.ts", "../../random/src/distributions/poisson.ts", "../../random/src/distributions/uniform.ts", "../../random/src/distributions/uniform-boolean.ts", "../../random/src/distributions/uniform-int.ts", "../../random/src/distributions/weibull.ts", "../../random/src/random.ts", "../../@evolu/common/dist/src/Random.js", "../../@evolu/common/dist/src/Redacted.js", "../../@evolu/common/dist/src/Ref.js", "../../@evolu/common/dist/src/Relation.js", "../../@evolu/common/dist/src/WebSocket.js"],
  "sourcesContent": ["/**\n * Array types, type guards, operations, transformations, accessors, and (rare)\n * mutations\n *\n * ### Example\n *\n * ```ts\n * // Types - compile-time guarantee of at least one element\n * const _valid: NonEmptyReadonlyArray<number> = [1, 2, 3];\n * // ts-expect-error - empty array is not a valid NonEmptyReadonlyArray\n * const _invalid: NonEmptyReadonlyArray<number> = [];\n *\n * // Type guards\n * const arr: ReadonlyArray<number> = [1, 2, 3];\n * if (isNonEmptyReadonlyArray(arr)) {\n *   firstInArray(arr);\n * }\n *\n * // Operations\n * const appended = appendToArray([1, 2, 3], 4); // [1, 2, 3, 4]\n * const prepended = prependToArray([2, 3], 1); // [1, 2, 3]\n *\n * // Transformations\n * const readonly: ReadonlyArray<number> = [1, 2, 3];\n * const mapped = mapArray(readonly, (x) => x * 2); // [2, 4, 6]\n * const filtered = filterArray(readonly, (x) => x > 1); // [2, 3]\n * const deduped = dedupeArray([1, 2, 1, 3, 2]); // [1, 2, 3]\n * const [evens, odds] = partitionArray(\n *   [1, 2, 3, 4, 5],\n *   (x) => x % 2 === 0,\n * ); // [[2, 4], [1, 3, 5]]\n *\n * // Accessors\n * const first = firstInArray([\"a\", \"b\", \"c\"]); // \"a\"\n * const last = lastInArray([\"a\", \"b\", \"c\"]); // \"c\"\n *\n * // Mutations\n * const mutable: NonEmptyArray<number> = [1, 2, 3];\n * shiftArray(mutable); // 1 (guaranteed to exist)\n * mutable; // [2, 3]\n * ```\n *\n * Functions are intentionally data-first to be prepared for the upcoming\n * JavaScript pipe operator.\n *\n * ```ts\n * // Data-first is natural for single operations.\n * const timestamps = mapArray(messages, (m) => m.timestamp);\n *\n * // But data-first can be hard to read for nested calls.\n * const result = firstInArray(\n *   mapArray(dedupeArray(appendToArray(value, 2)), (x) => x * 2),\n * );\n *\n * // With the upcoming pipe operator, it's clear.\n * // const result = value\n * //   |> appendToArray(%, 2)\n * //   |> dedupeArray(%)\n * //   |> mapArray(%, (x) => x * 2)\n * //   |> firstInArray(%);\n *\n * // Until the pipe operator lands, use nested calls or name each step:\n * const appended = appendToArray(value, 2);\n * const deduped = dedupeArray(appended);\n * const mapped = mapArray(deduped, (x) => x * 2);\n * const result = firstInArray(mapped);\n * ```\n *\n * ### Why data-first?\n *\n * Evolu optimizes for consistent code style. We can't have both data-first\n * single operations and curried data-last helpers without sacrificing\n * consistency. We chose data-first because:\n *\n * - It's natural for single operations (for example `mapArray(messages, (m) =>\n *   m.timestamp)`).\n * - It aligns with the upcoming JavaScript pipe operator.\n *\n * **Note**: Feel free to use Array instance methods (mutation) if you think\n * it's better (performance, local scope, etc.).\n *\n * @module\n */\n/**\n * Checks if an array is non-empty and narrows its type to {@link NonEmptyArray}.\n *\n * Use `if (!isNonEmptyArray(arr))` for empty checks.\n *\n * ### Example\n *\n * ```ts\n * const arr: Array<number> = [1, 2, 3];\n * if (isNonEmptyArray(arr)) {\n *   firstInArray(arr); // arr is NonEmptyArray<number>\n * }\n * ```\n *\n * @category Type Guards\n */\nexport const isNonEmptyArray = (array) => array.length > 0;\n/**\n * Checks if a readonly array is non-empty and narrows its type to\n * {@link NonEmptyReadonlyArray}.\n *\n * Use `if (!isNonEmptyReadonlyArray(arr))` for empty checks.\n *\n * ### Example\n *\n * ```ts\n * const arr: ReadonlyArray<number> = [1, 2, 3];\n * if (isNonEmptyReadonlyArray(arr)) {\n *   firstInArray(arr); // arr is NonEmptyReadonlyArray<number>\n * }\n * ```\n *\n * @category Type Guards\n */\nexport const isNonEmptyReadonlyArray = (array) => array.length > 0;\n/**\n * Appends an item to an array, returning a new non-empty readonly array.\n *\n * Accepts both mutable and readonly arrays. Does not mutate the original array.\n *\n * ### Example\n *\n * ```ts\n * appendToArray([1, 2, 3], 4); // [1, 2, 3, 4]\n * ```\n *\n * @category Operations\n */\nexport const appendToArray = (array, item) => [...array, item];\n/**\n * Prepends an item to an array, returning a new non-empty readonly array.\n *\n * Accepts both mutable and readonly arrays. Does not mutate the original array.\n *\n * ### Example\n *\n * ```ts\n * prependToArray([2, 3], 1); // [1, 2, 3]\n * ```\n *\n * @category Operations\n */\nexport const prependToArray = (array, item) => [item, ...array];\nexport function mapArray(array, mapper) {\n    return array.map(mapper);\n}\nexport function filterArray(array, predicate) {\n    return array.filter(predicate);\n}\nexport function dedupeArray(array, by) {\n    if (by == null) {\n        return Array.from(new Set(array));\n    }\n    const seen = new Set();\n    return array.filter((item) => {\n        const key = by(item);\n        if (seen.has(key))\n            return false;\n        seen.add(key);\n        return true;\n    });\n}\nexport function partitionArray(array, predicate) {\n    const trueArray = [];\n    const falseArray = [];\n    for (let i = 0; i < array.length; i++) {\n        if (predicate(array[i], i)) {\n            trueArray.push(array[i]);\n        }\n        else {\n            falseArray.push(array[i]);\n        }\n    }\n    return [trueArray, falseArray];\n}\n/**\n * Returns the first element of a non-empty array.\n *\n * Accepts both mutable and readonly arrays. Does not mutate the original array.\n *\n * ### Example\n *\n * ```ts\n * firstInArray([\"a\", \"b\", \"c\"]); // \"a\"\n * ```\n *\n * @category Accessors\n */\nexport const firstInArray = (array) => array[0];\n/**\n * Returns the last element of a non-empty array.\n *\n * Accepts both mutable and readonly arrays. Does not mutate the original array.\n *\n * ### Example\n *\n * ```ts\n * lastInArray([\"a\", \"b\", \"c\"]); // \"c\"\n * ```\n *\n * @category Accessors\n */\nexport const lastInArray = (array) => array[array.length - 1];\n/**\n * Shifts an item from a non-empty mutable array, guaranteed to return T.\n *\n * **Mutates** the original array.\n *\n * ### Example\n *\n * ```ts\n * const arr: NonEmptyArray<number> = [1, 2, 3];\n * shiftArray(arr); // 1\n * arr; // [2, 3]\n * ```\n *\n * @category Mutations\n */\nexport const shiftArray = (array) => array.shift();\n/**\n * Pops an item from a non-empty mutable array, guaranteed to return T.\n *\n * **Mutates** the original array.\n *\n * ### Example\n *\n * ```ts\n * const arr: NonEmptyArray<number> = [1, 2, 3];\n * popArray(arr); // 3\n * arr; // [1, 2]\n * ```\n *\n * @category Mutations\n */\nexport const popArray = (array) => array.pop();\n", "/**\n * Ensures a condition is true, throwing an error with the provided message if\n * not.\n *\n * Prevents invalid states from propagating through the system by halting\n * execution when a condition fails, improving reliability and debuggability.\n *\n * **Warning**: Do not use this instead of {@link Type}. Assertions are intended\n * for conditions that are logically guaranteed but not statically known by\n * TypeScript, or for catching and signaling developer mistakes eagerly (e.g.,\n * invalid configuration).\n *\n * ### Example\n *\n * ```ts\n * assert(true, \"true is not true\"); // no-op\n * assert(false, \"true is not true\"); // throws Error\n *\n * const length = buffer.getLength();\n * // We know length is logically non-negative, but TypeScript doesn't\n * assert(\n *   NonNegativeInt.is(length),\n *   \"buffer length should be non-negative\",\n * );\n * ```\n */\nexport const assert = (condition, message) => {\n    if (!condition) {\n        throw new Error(message);\n    }\n};\n/**\n * Asserts that an array is non-empty.\n *\n * Ensures the provided array has at least one element, helping TypeScript infer\n * the array as non-empty when this is logically guaranteed but not statically\n * known.\n *\n * ### Example\n *\n * ```ts\n * assertNonEmptyArray([1, 2, 3]); // no-op\n * assertNonEmptyArray([]); // throws Error\n * ```\n */\nexport const assertNonEmptyArray = (arr, message = \"Expected a non-empty array.\") => {\n    assert(arr.length > 0, message);\n};\n/**\n * Asserts that a readonly array is non-empty.\n *\n * Ensures the provided readonly array has at least one element, helping\n * TypeScript infer non-emptiness when this is logically guaranteed but not\n * statically known.\n *\n * ### Example\n *\n * ```ts\n * assertNonEmptyReadonlyArray([1, 2, 3]); // no-op\n * assertNonEmptyReadonlyArray([]); // throws Error\n * ```\n */\nexport const assertNonEmptyReadonlyArray = (arr, message = \"Expected a non-empty readonly array.\") => {\n    assert(arr.length > 0, message);\n};\n", "/** Increments a bigint by 1. */\nexport const incrementBigInt = (n) => n + 1n;\n/** Decrements a bigint by 1. */\nexport const decrementBigInt = (n) => n - 1n;\n/** Clamps a bigint within a given range. */\nexport const clampBigInt = (min, max) => (n) => n < min ? min : n > max ? max : n;\n/**\n * Creates a predicate that checks if a BigInt is within a range, inclusive.\n *\n * ### Example\n *\n * ```ts\n * const isBetween10And20 = isBetweenBigInt(10n, 20n);\n * console.log(isBetween10And20(15n)); // true\n * console.log(isBetween10And20(25n)); // false\n * ```\n */\nexport const isBetweenBigInt = (min, max) => (value) => value >= min && value <= max;\n", "var decoder\ntry {\n\tdecoder = new TextDecoder()\n} catch(error) {}\nvar src\nvar srcEnd\nvar position = 0\nvar alreadySet\nconst EMPTY_ARRAY = []\nvar strings = EMPTY_ARRAY\nvar stringPosition = 0\nvar currentUnpackr = {}\nvar currentStructures\nvar srcString\nvar srcStringStart = 0\nvar srcStringEnd = 0\nvar bundledStrings\nvar referenceMap\nvar currentExtensions = []\nvar dataView\nvar defaultOptions = {\n\tuseRecords: false,\n\tmapsAsObjects: true\n}\nexport class C1Type {}\nexport const C1 = new C1Type()\nC1.name = 'MessagePack 0xC1'\nvar sequentialMode = false\nvar inlineObjectReadThreshold = 2\nvar readStruct, onLoadedStructures, onSaveState\nvar BlockedFunction // we use search and replace to change the next call to BlockedFunction to avoid CSP issues for\n// no-eval build\ntry {\n\tnew Function('')\n} catch(error) {\n\t// if eval variants are not supported, do not create inline object readers ever\n\tinlineObjectReadThreshold = Infinity\n}\n\nexport class Unpackr {\n\tconstructor(options) {\n\t\tif (options) {\n\t\t\tif (options.useRecords === false && options.mapsAsObjects === undefined)\n\t\t\t\toptions.mapsAsObjects = true\n\t\t\tif (options.sequential && options.trusted !== false) {\n\t\t\t\toptions.trusted = true;\n\t\t\t\tif (!options.structures && options.useRecords != false) {\n\t\t\t\t\toptions.structures = []\n\t\t\t\t\tif (!options.maxSharedStructures)\n\t\t\t\t\t\toptions.maxSharedStructures = 0\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (options.structures)\n\t\t\t\toptions.structures.sharedLength = options.structures.length\n\t\t\telse if (options.getStructures) {\n\t\t\t\t(options.structures = []).uninitialized = true // this is what we use to denote an uninitialized structures\n\t\t\t\toptions.structures.sharedLength = 0\n\t\t\t}\n\t\t\tif (options.int64AsNumber) {\n\t\t\t\toptions.int64AsType = 'number'\n\t\t\t}\n\t\t}\n\t\tObject.assign(this, options)\n\t}\n\tunpack(source, options) {\n\t\tif (src) {\n\t\t\t// re-entrant execution, save the state and restore it after we do this unpack\n\t\t\treturn saveState(() => {\n\t\t\t\tclearSource()\n\t\t\t\treturn this ? this.unpack(source, options) : Unpackr.prototype.unpack.call(defaultOptions, source, options)\n\t\t\t})\n\t\t}\n\t\tif (!source.buffer && source.constructor === ArrayBuffer)\n\t\t\tsource = typeof Buffer !== 'undefined' ? Buffer.from(source) : new Uint8Array(source);\n\t\tif (typeof options === 'object') {\n\t\t\tsrcEnd = options.end || source.length\n\t\t\tposition = options.start || 0\n\t\t} else {\n\t\t\tposition = 0\n\t\t\tsrcEnd = options > -1 ? options : source.length\n\t\t}\n\t\tstringPosition = 0\n\t\tsrcStringEnd = 0\n\t\tsrcString = null\n\t\tstrings = EMPTY_ARRAY\n\t\tbundledStrings = null\n\t\tsrc = source\n\t\t// this provides cached access to the data view for a buffer if it is getting reused, which is a recommend\n\t\t// technique for getting data from a database where it can be copied into an existing buffer instead of creating\n\t\t// new ones\n\t\ttry {\n\t\t\tdataView = source.dataView || (source.dataView = new DataView(source.buffer, source.byteOffset, source.byteLength))\n\t\t} catch(error) {\n\t\t\t// if it doesn't have a buffer, maybe it is the wrong type of object\n\t\t\tsrc = null\n\t\t\tif (source instanceof Uint8Array)\n\t\t\t\tthrow error\n\t\t\tthrow new Error('Source must be a Uint8Array or Buffer but was a ' + ((source && typeof source == 'object') ? source.constructor.name : typeof source))\n\t\t}\n\t\tif (this instanceof Unpackr) {\n\t\t\tcurrentUnpackr = this\n\t\t\tif (this.structures) {\n\t\t\t\tcurrentStructures = this.structures\n\t\t\t\treturn checkedRead(options)\n\t\t\t} else if (!currentStructures || currentStructures.length > 0) {\n\t\t\t\tcurrentStructures = []\n\t\t\t}\n\t\t} else {\n\t\t\tcurrentUnpackr = defaultOptions\n\t\t\tif (!currentStructures || currentStructures.length > 0)\n\t\t\t\tcurrentStructures = []\n\t\t}\n\t\treturn checkedRead(options)\n\t}\n\tunpackMultiple(source, forEach) {\n\t\tlet values, lastPosition = 0\n\t\ttry {\n\t\t\tsequentialMode = true\n\t\t\tlet size = source.length\n\t\t\tlet value = this ? this.unpack(source, size) : defaultUnpackr.unpack(source, size)\n\t\t\tif (forEach) {\n\t\t\t\tif (forEach(value, lastPosition, position) === false) return;\n\t\t\t\twhile(position < size) {\n\t\t\t\t\tlastPosition = position\n\t\t\t\t\tif (forEach(checkedRead(), lastPosition, position) === false) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvalues = [ value ]\n\t\t\t\twhile(position < size) {\n\t\t\t\t\tlastPosition = position\n\t\t\t\t\tvalues.push(checkedRead())\n\t\t\t\t}\n\t\t\t\treturn values\n\t\t\t}\n\t\t} catch(error) {\n\t\t\terror.lastPosition = lastPosition\n\t\t\terror.values = values\n\t\t\tthrow error\n\t\t} finally {\n\t\t\tsequentialMode = false\n\t\t\tclearSource()\n\t\t}\n\t}\n\t_mergeStructures(loadedStructures, existingStructures) {\n\t\tif (onLoadedStructures)\n\t\t\tloadedStructures = onLoadedStructures.call(this, loadedStructures);\n\t\tloadedStructures = loadedStructures || []\n\t\tif (Object.isFrozen(loadedStructures))\n\t\t\tloadedStructures = loadedStructures.map(structure => structure.slice(0))\n\t\tfor (let i = 0, l = loadedStructures.length; i < l; i++) {\n\t\t\tlet structure = loadedStructures[i]\n\t\t\tif (structure) {\n\t\t\t\tstructure.isShared = true\n\t\t\t\tif (i >= 32)\n\t\t\t\t\tstructure.highByte = (i - 32) >> 5\n\t\t\t}\n\t\t}\n\t\tloadedStructures.sharedLength = loadedStructures.length\n\t\tfor (let id in existingStructures || []) {\n\t\t\tif (id >= 0) {\n\t\t\t\tlet structure = loadedStructures[id]\n\t\t\t\tlet existing = existingStructures[id]\n\t\t\t\tif (existing) {\n\t\t\t\t\tif (structure)\n\t\t\t\t\t\t(loadedStructures.restoreStructures || (loadedStructures.restoreStructures = []))[id] = structure\n\t\t\t\t\tloadedStructures[id] = existing\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.structures = loadedStructures\n\t}\n\tdecode(source, options) {\n\t\treturn this.unpack(source, options)\n\t}\n}\nexport function getPosition() {\n\treturn position\n}\nexport function checkedRead(options) {\n\ttry {\n\t\tif (!currentUnpackr.trusted && !sequentialMode) {\n\t\t\tlet sharedLength = currentStructures.sharedLength || 0\n\t\t\tif (sharedLength < currentStructures.length)\n\t\t\t\tcurrentStructures.length = sharedLength\n\t\t}\n\t\tlet result\n\t\tif (currentUnpackr.randomAccessStructure && src[position] < 0x40 && src[position] >= 0x20 && readStruct) {\n\t\t\tresult = readStruct(src, position, srcEnd, currentUnpackr)\n\t\t\tsrc = null // dispose of this so that recursive unpack calls don't save state\n\t\t\tif (!(options && options.lazy) && result)\n\t\t\t\tresult = result.toJSON()\n\t\t\tposition = srcEnd\n\t\t} else\n\t\t\tresult = read()\n\t\tif (bundledStrings) { // bundled strings to skip past\n\t\t\tposition = bundledStrings.postBundlePosition\n\t\t\tbundledStrings = null\n\t\t}\n\t\tif (sequentialMode)\n\t\t\t// we only need to restore the structures if there was an error, but if we completed a read,\n\t\t\t// we can clear this out and keep the structures we read\n\t\t\tcurrentStructures.restoreStructures = null\n\n\t\tif (position == srcEnd) {\n\t\t\t// finished reading this source, cleanup references\n\t\t\tif (currentStructures && currentStructures.restoreStructures)\n\t\t\t\trestoreStructures()\n\t\t\tcurrentStructures = null\n\t\t\tsrc = null\n\t\t\tif (referenceMap)\n\t\t\t\treferenceMap = null\n\t\t} else if (position > srcEnd) {\n\t\t\t// over read\n\t\t\tthrow new Error('Unexpected end of MessagePack data')\n\t\t} else if (!sequentialMode) {\n\t\t\tlet jsonView;\n\t\t\ttry {\n\t\t\t\tjsonView = JSON.stringify(result, (_, value) => typeof value === \"bigint\" ? `${value}n` : value).slice(0, 100)\n\t\t\t} catch(error) {\n\t\t\t\tjsonView = '(JSON view not available ' + error + ')'\n\t\t\t}\n\t\t\tthrow new Error('Data read, but end of buffer not reached ' + jsonView)\n\t\t}\n\t\t// else more to read, but we are reading sequentially, so don't clear source yet\n\t\treturn result\n\t} catch(error) {\n\t\tif (currentStructures && currentStructures.restoreStructures)\n\t\t\trestoreStructures()\n\t\tclearSource()\n\t\tif (error instanceof RangeError || error.message.startsWith('Unexpected end of buffer') || position > srcEnd) {\n\t\t\terror.incomplete = true\n\t\t}\n\t\tthrow error\n\t}\n}\n\nfunction restoreStructures() {\n\tfor (let id in currentStructures.restoreStructures) {\n\t\tcurrentStructures[id] = currentStructures.restoreStructures[id]\n\t}\n\tcurrentStructures.restoreStructures = null\n}\n\nexport function read() {\n\tlet token = src[position++]\n\tif (token < 0xa0) {\n\t\tif (token < 0x80) {\n\t\t\tif (token < 0x40)\n\t\t\t\treturn token\n\t\t\telse {\n\t\t\t\tlet structure = currentStructures[token & 0x3f] ||\n\t\t\t\t\tcurrentUnpackr.getStructures && loadStructures()[token & 0x3f]\n\t\t\t\tif (structure) {\n\t\t\t\t\tif (!structure.read) {\n\t\t\t\t\t\tstructure.read = createStructureReader(structure, token & 0x3f)\n\t\t\t\t\t}\n\t\t\t\t\treturn structure.read()\n\t\t\t\t} else\n\t\t\t\t\treturn token\n\t\t\t}\n\t\t} else if (token < 0x90) {\n\t\t\t// map\n\t\t\ttoken -= 0x80\n\t\t\tif (currentUnpackr.mapsAsObjects) {\n\t\t\t\tlet object = {}\n\t\t\t\tfor (let i = 0; i < token; i++) {\n\t\t\t\t\tlet key = readKey()\n\t\t\t\t\tif (key === '__proto__')\n\t\t\t\t\t\tkey = '__proto_'\n\t\t\t\t\tobject[key] = read()\n\t\t\t\t}\n\t\t\t\treturn object\n\t\t\t} else {\n\t\t\t\tlet map = new Map()\n\t\t\t\tfor (let i = 0; i < token; i++) {\n\t\t\t\t\tmap.set(read(), read())\n\t\t\t\t}\n\t\t\t\treturn map\n\t\t\t}\n\t\t} else {\n\t\t\ttoken -= 0x90\n\t\t\tlet array = new Array(token)\n\t\t\tfor (let i = 0; i < token; i++) {\n\t\t\t\tarray[i] = read()\n\t\t\t}\n\t\t\tif (currentUnpackr.freezeData)\n\t\t\t\treturn Object.freeze(array)\n\t\t\treturn array\n\t\t}\n\t} else if (token < 0xc0) {\n\t\t// fixstr\n\t\tlet length = token - 0xa0\n\t\tif (srcStringEnd >= position) {\n\t\t\treturn srcString.slice(position - srcStringStart, (position += length) - srcStringStart)\n\t\t}\n\t\tif (srcStringEnd == 0 && srcEnd < 140) {\n\t\t\t// for small blocks, avoiding the overhead of the extract call is helpful\n\t\t\tlet string = length < 16 ? shortStringInJS(length) : longStringInJS(length)\n\t\t\tif (string != null)\n\t\t\t\treturn string\n\t\t}\n\t\treturn readFixedString(length)\n\t} else {\n\t\tlet value\n\t\tswitch (token) {\n\t\t\tcase 0xc0: return null\n\t\t\tcase 0xc1:\n\t\t\t\tif (bundledStrings) {\n\t\t\t\t\tvalue = read() // followed by the length of the string in characters (not bytes!)\n\t\t\t\t\tif (value > 0)\n\t\t\t\t\t\treturn bundledStrings[1].slice(bundledStrings.position1, bundledStrings.position1 += value)\n\t\t\t\t\telse\n\t\t\t\t\t\treturn bundledStrings[0].slice(bundledStrings.position0, bundledStrings.position0 -= value)\n\t\t\t\t}\n\t\t\t\treturn C1; // \"never-used\", return special object to denote that\n\t\t\tcase 0xc2: return false\n\t\t\tcase 0xc3: return true\n\t\t\tcase 0xc4:\n\t\t\t\t// bin 8\n\t\t\t\tvalue = src[position++]\n\t\t\t\tif (value === undefined)\n\t\t\t\t\tthrow new Error('Unexpected end of buffer')\n\t\t\t\treturn readBin(value)\n\t\t\tcase 0xc5:\n\t\t\t\t// bin 16\n\t\t\t\tvalue = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\treturn readBin(value)\n\t\t\tcase 0xc6:\n\t\t\t\t// bin 32\n\t\t\t\tvalue = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\treturn readBin(value)\n\t\t\tcase 0xc7:\n\t\t\t\t// ext 8\n\t\t\t\treturn readExt(src[position++])\n\t\t\tcase 0xc8:\n\t\t\t\t// ext 16\n\t\t\t\tvalue = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\treturn readExt(value)\n\t\t\tcase 0xc9:\n\t\t\t\t// ext 32\n\t\t\t\tvalue = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\treturn readExt(value)\n\t\t\tcase 0xca:\n\t\t\t\tvalue = dataView.getFloat32(position)\n\t\t\t\tif (currentUnpackr.useFloat32 > 2) {\n\t\t\t\t\t// this does rounding of numbers that were encoded in 32-bit float to nearest significant decimal digit that could be preserved\n\t\t\t\t\tlet multiplier = mult10[((src[position] & 0x7f) << 1) | (src[position + 1] >> 7)]\n\t\t\t\t\tposition += 4\n\t\t\t\t\treturn ((multiplier * value + (value > 0 ? 0.5 : -0.5)) >> 0) / multiplier\n\t\t\t\t}\n\t\t\t\tposition += 4\n\t\t\t\treturn value\n\t\t\tcase 0xcb:\n\t\t\t\tvalue = dataView.getFloat64(position)\n\t\t\t\tposition += 8\n\t\t\t\treturn value\n\t\t\t// uint handlers\n\t\t\tcase 0xcc:\n\t\t\t\treturn src[position++]\n\t\t\tcase 0xcd:\n\t\t\t\tvalue = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\treturn value\n\t\t\tcase 0xce:\n\t\t\t\tvalue = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\treturn value\n\t\t\tcase 0xcf:\n\t\t\t\tif (currentUnpackr.int64AsType === 'number') {\n\t\t\t\t\tvalue = dataView.getUint32(position) * 0x100000000\n\t\t\t\t\tvalue += dataView.getUint32(position + 4)\n\t\t\t\t} else if (currentUnpackr.int64AsType === 'string') {\n\t\t\t\t\tvalue = dataView.getBigUint64(position).toString()\n\t\t\t\t} else if (currentUnpackr.int64AsType === 'auto') {\n\t\t\t\t\tvalue = dataView.getBigUint64(position)\n\t\t\t\t\tif (value<=BigInt(2)<<BigInt(52)) value=Number(value)\n\t\t\t\t} else\n\t\t\t\t\tvalue = dataView.getBigUint64(position)\n\t\t\t\tposition += 8\n\t\t\t\treturn value\n\n\t\t\t// int handlers\n\t\t\tcase 0xd0:\n\t\t\t\treturn dataView.getInt8(position++)\n\t\t\tcase 0xd1:\n\t\t\t\tvalue = dataView.getInt16(position)\n\t\t\t\tposition += 2\n\t\t\t\treturn value\n\t\t\tcase 0xd2:\n\t\t\t\tvalue = dataView.getInt32(position)\n\t\t\t\tposition += 4\n\t\t\t\treturn value\n\t\t\tcase 0xd3:\n\t\t\t\tif (currentUnpackr.int64AsType === 'number') {\n\t\t\t\t\tvalue = dataView.getInt32(position) * 0x100000000\n\t\t\t\t\tvalue += dataView.getUint32(position + 4)\n\t\t\t\t} else if (currentUnpackr.int64AsType === 'string') {\n\t\t\t\t\tvalue = dataView.getBigInt64(position).toString()\n\t\t\t\t} else if (currentUnpackr.int64AsType === 'auto') {\n\t\t\t\t\tvalue = dataView.getBigInt64(position)\n\t\t\t\t\tif (value>=BigInt(-2)<<BigInt(52)&&value<=BigInt(2)<<BigInt(52)) value=Number(value)\n\t\t\t\t} else\n\t\t\t\t\tvalue = dataView.getBigInt64(position)\n\t\t\t\tposition += 8\n\t\t\t\treturn value\n\n\t\t\tcase 0xd4:\n\t\t\t\t// fixext 1\n\t\t\t\tvalue = src[position++]\n\t\t\t\tif (value == 0x72) {\n\t\t\t\t\treturn recordDefinition(src[position++] & 0x3f)\n\t\t\t\t} else {\n\t\t\t\t\tlet extension = currentExtensions[value]\n\t\t\t\t\tif (extension) {\n\t\t\t\t\t\tif (extension.read) {\n\t\t\t\t\t\t\tposition++ // skip filler byte\n\t\t\t\t\t\t\treturn extension.read(read())\n\t\t\t\t\t\t} else if (extension.noBuffer) {\n\t\t\t\t\t\t\tposition++ // skip filler byte\n\t\t\t\t\t\t\treturn extension()\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\treturn extension(src.subarray(position, ++position))\n\t\t\t\t\t} else\n\t\t\t\t\t\tthrow new Error('Unknown extension ' + value)\n\t\t\t\t}\n\t\t\tcase 0xd5:\n\t\t\t\t// fixext 2\n\t\t\t\tvalue = src[position]\n\t\t\t\tif (value == 0x72) {\n\t\t\t\t\tposition++\n\t\t\t\t\treturn recordDefinition(src[position++] & 0x3f, src[position++])\n\t\t\t\t} else\n\t\t\t\t\treturn readExt(2)\n\t\t\tcase 0xd6:\n\t\t\t\t// fixext 4\n\t\t\t\treturn readExt(4)\n\t\t\tcase 0xd7:\n\t\t\t\t// fixext 8\n\t\t\t\treturn readExt(8)\n\t\t\tcase 0xd8:\n\t\t\t\t// fixext 16\n\t\t\t\treturn readExt(16)\n\t\t\tcase 0xd9:\n\t\t\t// str 8\n\t\t\t\tvalue = src[position++]\n\t\t\t\tif (srcStringEnd >= position) {\n\t\t\t\t\treturn srcString.slice(position - srcStringStart, (position += value) - srcStringStart)\n\t\t\t\t}\n\t\t\t\treturn readString8(value)\n\t\t\tcase 0xda:\n\t\t\t// str 16\n\t\t\t\tvalue = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\tif (srcStringEnd >= position) {\n\t\t\t\t\treturn srcString.slice(position - srcStringStart, (position += value) - srcStringStart)\n\t\t\t\t}\n\t\t\t\treturn readString16(value)\n\t\t\tcase 0xdb:\n\t\t\t// str 32\n\t\t\t\tvalue = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\tif (srcStringEnd >= position) {\n\t\t\t\t\treturn srcString.slice(position - srcStringStart, (position += value) - srcStringStart)\n\t\t\t\t}\n\t\t\t\treturn readString32(value)\n\t\t\tcase 0xdc:\n\t\t\t// array 16\n\t\t\t\tvalue = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\treturn readArray(value)\n\t\t\tcase 0xdd:\n\t\t\t// array 32\n\t\t\t\tvalue = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\treturn readArray(value)\n\t\t\tcase 0xde:\n\t\t\t// map 16\n\t\t\t\tvalue = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\treturn readMap(value)\n\t\t\tcase 0xdf:\n\t\t\t// map 32\n\t\t\t\tvalue = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\treturn readMap(value)\n\t\t\tdefault: // negative int\n\t\t\t\tif (token >= 0xe0)\n\t\t\t\t\treturn token - 0x100\n\t\t\t\tif (token === undefined) {\n\t\t\t\t\tlet error = new Error('Unexpected end of MessagePack data')\n\t\t\t\t\terror.incomplete = true\n\t\t\t\t\tthrow error\n\t\t\t\t}\n\t\t\t\tthrow new Error('Unknown MessagePack token ' + token)\n\n\t\t}\n\t}\n}\nconst validName = /^[a-zA-Z_$][a-zA-Z\\d_$]*$/\nfunction createStructureReader(structure, firstId) {\n\tfunction readObject() {\n\t\t// This initial function is quick to instantiate, but runs slower. After several iterations pay the cost to build the faster function\n\t\tif (readObject.count++ > inlineObjectReadThreshold) {\n\t\t\tlet readObject = structure.read = (new Function('r', 'return function(){return ' + (currentUnpackr.freezeData ? 'Object.freeze' : '') +\n\t\t\t\t'({' + structure.map(key => key === '__proto__' ? '__proto_:r()' : validName.test(key) ? key + ':r()' : ('[' + JSON.stringify(key) + ']:r()')).join(',') + '})}'))(read)\n\t\t\tif (structure.highByte === 0)\n\t\t\t\tstructure.read = createSecondByteReader(firstId, structure.read)\n\t\t\treturn readObject() // second byte is already read, if there is one so immediately read object\n\t\t}\n\t\tlet object = {}\n\t\tfor (let i = 0, l = structure.length; i < l; i++) {\n\t\t\tlet key = structure[i]\n\t\t\tif (key === '__proto__')\n\t\t\t\tkey = '__proto_'\n\t\t\tobject[key] = read()\n\t\t}\n\t\tif (currentUnpackr.freezeData)\n\t\t\treturn Object.freeze(object);\n\t\treturn object\n\t}\n\treadObject.count = 0\n\tif (structure.highByte === 0) {\n\t\treturn createSecondByteReader(firstId, readObject)\n\t}\n\treturn readObject\n}\n\nconst createSecondByteReader = (firstId, read0) => {\n\treturn function() {\n\t\tlet highByte = src[position++]\n\t\tif (highByte === 0)\n\t\t\treturn read0()\n\t\tlet id = firstId < 32 ? -(firstId + (highByte << 5)) : firstId + (highByte << 5)\n\t\tlet structure = currentStructures[id] || loadStructures()[id]\n\t\tif (!structure) {\n\t\t\tthrow new Error('Record id is not defined for ' + id)\n\t\t}\n\t\tif (!structure.read)\n\t\t\tstructure.read = createStructureReader(structure, firstId)\n\t\treturn structure.read()\n\t}\n}\n\nexport function loadStructures() {\n\tlet loadedStructures = saveState(() => {\n\t\t// save the state in case getStructures modifies our buffer\n\t\tsrc = null\n\t\treturn currentUnpackr.getStructures()\n\t})\n\treturn currentStructures = currentUnpackr._mergeStructures(loadedStructures, currentStructures)\n}\n\nvar readFixedString = readStringJS\nvar readString8 = readStringJS\nvar readString16 = readStringJS\nvar readString32 = readStringJS\nexport let isNativeAccelerationEnabled = false\n\nexport function setExtractor(extractStrings) {\n\tisNativeAccelerationEnabled = true\n\treadFixedString = readString(1)\n\treadString8 = readString(2)\n\treadString16 = readString(3)\n\treadString32 = readString(5)\n\tfunction readString(headerLength) {\n\t\treturn function readString(length) {\n\t\t\tlet string = strings[stringPosition++]\n\t\t\tif (string == null) {\n\t\t\t\tif (bundledStrings)\n\t\t\t\t\treturn readStringJS(length)\n\t\t\t\tlet byteOffset = src.byteOffset\n\t\t\t\tlet extraction = extractStrings(position - headerLength + byteOffset, srcEnd + byteOffset, src.buffer)\n\t\t\t\tif (typeof extraction == 'string') {\n\t\t\t\t\tstring = extraction\n\t\t\t\t\tstrings = EMPTY_ARRAY\n\t\t\t\t} else {\n\t\t\t\t\tstrings = extraction\n\t\t\t\t\tstringPosition = 1\n\t\t\t\t\tsrcStringEnd = 1 // even if a utf-8 string was decoded, must indicate we are in the midst of extracted strings and can't skip strings\n\t\t\t\t\tstring = strings[0]\n\t\t\t\t\tif (string === undefined)\n\t\t\t\t\t\tthrow new Error('Unexpected end of buffer')\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet srcStringLength = string.length\n\t\t\tif (srcStringLength <= length) {\n\t\t\t\tposition += length\n\t\t\t\treturn string\n\t\t\t}\n\t\t\tsrcString = string\n\t\t\tsrcStringStart = position\n\t\t\tsrcStringEnd = position + srcStringLength\n\t\t\tposition += length\n\t\t\treturn string.slice(0, length) // we know we just want the beginning\n\t\t}\n\t}\n}\nfunction readStringJS(length) {\n\tlet result\n\tif (length < 16) {\n\t\tif (result = shortStringInJS(length))\n\t\t\treturn result\n\t}\n\tif (length > 64 && decoder)\n\t\treturn decoder.decode(src.subarray(position, position += length))\n\tconst end = position + length\n\tconst units = []\n\tresult = ''\n\twhile (position < end) {\n\t\tconst byte1 = src[position++]\n\t\tif ((byte1 & 0x80) === 0) {\n\t\t\t// 1 byte\n\t\t\tunits.push(byte1)\n\t\t} else if ((byte1 & 0xe0) === 0xc0) {\n\t\t\t// 2 bytes\n\t\t\tconst byte2 = src[position++] & 0x3f\n\t\t\tunits.push(((byte1 & 0x1f) << 6) | byte2)\n\t\t} else if ((byte1 & 0xf0) === 0xe0) {\n\t\t\t// 3 bytes\n\t\t\tconst byte2 = src[position++] & 0x3f\n\t\t\tconst byte3 = src[position++] & 0x3f\n\t\t\tunits.push(((byte1 & 0x1f) << 12) | (byte2 << 6) | byte3)\n\t\t} else if ((byte1 & 0xf8) === 0xf0) {\n\t\t\t// 4 bytes\n\t\t\tconst byte2 = src[position++] & 0x3f\n\t\t\tconst byte3 = src[position++] & 0x3f\n\t\t\tconst byte4 = src[position++] & 0x3f\n\t\t\tlet unit = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0c) | (byte3 << 0x06) | byte4\n\t\t\tif (unit > 0xffff) {\n\t\t\t\tunit -= 0x10000\n\t\t\t\tunits.push(((unit >>> 10) & 0x3ff) | 0xd800)\n\t\t\t\tunit = 0xdc00 | (unit & 0x3ff)\n\t\t\t}\n\t\t\tunits.push(unit)\n\t\t} else {\n\t\t\tunits.push(byte1)\n\t\t}\n\n\t\tif (units.length >= 0x1000) {\n\t\t\tresult += fromCharCode.apply(String, units)\n\t\t\tunits.length = 0\n\t\t}\n\t}\n\n\tif (units.length > 0) {\n\t\tresult += fromCharCode.apply(String, units)\n\t}\n\n\treturn result\n}\nexport function readString(source, start, length) {\n\tlet existingSrc = src;\n\tsrc = source;\n\tposition = start;\n\ttry {\n\t\treturn readStringJS(length);\n\t} finally {\n\t\tsrc = existingSrc;\n\t}\n}\n\nfunction readArray(length) {\n\tlet array = new Array(length)\n\tfor (let i = 0; i < length; i++) {\n\t\tarray[i] = read()\n\t}\n\tif (currentUnpackr.freezeData)\n\t\treturn Object.freeze(array)\n\treturn array\n}\n\nfunction readMap(length) {\n\tif (currentUnpackr.mapsAsObjects) {\n\t\tlet object = {}\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tlet key = readKey()\n\t\t\tif (key === '__proto__')\n\t\t\t\tkey = '__proto_';\n\t\t\tobject[key] = read()\n\t\t}\n\t\treturn object\n\t} else {\n\t\tlet map = new Map()\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tmap.set(read(), read())\n\t\t}\n\t\treturn map\n\t}\n}\n\nvar fromCharCode = String.fromCharCode\nfunction longStringInJS(length) {\n\tlet start = position\n\tlet bytes = new Array(length)\n\tfor (let i = 0; i < length; i++) {\n\t\tconst byte = src[position++];\n\t\tif ((byte & 0x80) > 0) {\n\t\t\t\tposition = start\n\t\t\t\treturn\n\t\t\t}\n\t\t\tbytes[i] = byte\n\t\t}\n\t\treturn fromCharCode.apply(String, bytes)\n}\nfunction shortStringInJS(length) {\n\tif (length < 4) {\n\t\tif (length < 2) {\n\t\t\tif (length === 0)\n\t\t\t\treturn ''\n\t\t\telse {\n\t\t\t\tlet a = src[position++]\n\t\t\t\tif ((a & 0x80) > 1) {\n\t\t\t\t\tposition -= 1\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\treturn fromCharCode(a)\n\t\t\t}\n\t\t} else {\n\t\t\tlet a = src[position++]\n\t\t\tlet b = src[position++]\n\t\t\tif ((a & 0x80) > 0 || (b & 0x80) > 0) {\n\t\t\t\tposition -= 2\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (length < 3)\n\t\t\t\treturn fromCharCode(a, b)\n\t\t\tlet c = src[position++]\n\t\t\tif ((c & 0x80) > 0) {\n\t\t\t\tposition -= 3\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn fromCharCode(a, b, c)\n\t\t}\n\t} else {\n\t\tlet a = src[position++]\n\t\tlet b = src[position++]\n\t\tlet c = src[position++]\n\t\tlet d = src[position++]\n\t\tif ((a & 0x80) > 0 || (b & 0x80) > 0 || (c & 0x80) > 0 || (d & 0x80) > 0) {\n\t\t\tposition -= 4\n\t\t\treturn\n\t\t}\n\t\tif (length < 6) {\n\t\t\tif (length === 4)\n\t\t\t\treturn fromCharCode(a, b, c, d)\n\t\t\telse {\n\t\t\t\tlet e = src[position++]\n\t\t\t\tif ((e & 0x80) > 0) {\n\t\t\t\t\tposition -= 5\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\treturn fromCharCode(a, b, c, d, e)\n\t\t\t}\n\t\t} else if (length < 8) {\n\t\t\tlet e = src[position++]\n\t\t\tlet f = src[position++]\n\t\t\tif ((e & 0x80) > 0 || (f & 0x80) > 0) {\n\t\t\t\tposition -= 6\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (length < 7)\n\t\t\t\treturn fromCharCode(a, b, c, d, e, f)\n\t\t\tlet g = src[position++]\n\t\t\tif ((g & 0x80) > 0) {\n\t\t\t\tposition -= 7\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn fromCharCode(a, b, c, d, e, f, g)\n\t\t} else {\n\t\t\tlet e = src[position++]\n\t\t\tlet f = src[position++]\n\t\t\tlet g = src[position++]\n\t\t\tlet h = src[position++]\n\t\t\tif ((e & 0x80) > 0 || (f & 0x80) > 0 || (g & 0x80) > 0 || (h & 0x80) > 0) {\n\t\t\t\tposition -= 8\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (length < 10) {\n\t\t\t\tif (length === 8)\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h)\n\t\t\t\telse {\n\t\t\t\t\tlet i = src[position++]\n\t\t\t\t\tif ((i & 0x80) > 0) {\n\t\t\t\t\t\tposition -= 9\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i)\n\t\t\t\t}\n\t\t\t} else if (length < 12) {\n\t\t\t\tlet i = src[position++]\n\t\t\t\tlet j = src[position++]\n\t\t\t\tif ((i & 0x80) > 0 || (j & 0x80) > 0) {\n\t\t\t\t\tposition -= 10\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (length < 11)\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j)\n\t\t\t\tlet k = src[position++]\n\t\t\t\tif ((k & 0x80) > 0) {\n\t\t\t\t\tposition -= 11\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k)\n\t\t\t} else {\n\t\t\t\tlet i = src[position++]\n\t\t\t\tlet j = src[position++]\n\t\t\t\tlet k = src[position++]\n\t\t\t\tlet l = src[position++]\n\t\t\t\tif ((i & 0x80) > 0 || (j & 0x80) > 0 || (k & 0x80) > 0 || (l & 0x80) > 0) {\n\t\t\t\t\tposition -= 12\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (length < 14) {\n\t\t\t\t\tif (length === 12)\n\t\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l)\n\t\t\t\t\telse {\n\t\t\t\t\t\tlet m = src[position++]\n\t\t\t\t\t\tif ((m & 0x80) > 0) {\n\t\t\t\t\t\t\tposition -= 13\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l, m)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet m = src[position++]\n\t\t\t\t\tlet n = src[position++]\n\t\t\t\t\tif ((m & 0x80) > 0 || (n & 0x80) > 0) {\n\t\t\t\t\t\tposition -= 14\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tif (length < 15)\n\t\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l, m, n)\n\t\t\t\t\tlet o = src[position++]\n\t\t\t\t\tif ((o & 0x80) > 0) {\n\t\t\t\t\t\tposition -= 15\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction readOnlyJSString() {\n\tlet token = src[position++]\n\tlet length\n\tif (token < 0xc0) {\n\t\t// fixstr\n\t\tlength = token - 0xa0\n\t} else {\n\t\tswitch(token) {\n\t\t\tcase 0xd9:\n\t\t\t// str 8\n\t\t\t\tlength = src[position++]\n\t\t\t\tbreak\n\t\t\tcase 0xda:\n\t\t\t// str 16\n\t\t\t\tlength = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\tbreak\n\t\t\tcase 0xdb:\n\t\t\t// str 32\n\t\t\t\tlength = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tthrow new Error('Expected string')\n\t\t}\n\t}\n\treturn readStringJS(length)\n}\n\n\nfunction readBin(length) {\n\treturn currentUnpackr.copyBuffers ?\n\t\t// specifically use the copying slice (not the node one)\n\t\tUint8Array.prototype.slice.call(src, position, position += length) :\n\t\tsrc.subarray(position, position += length)\n}\nfunction readExt(length) {\n\tlet type = src[position++]\n\tif (currentExtensions[type]) {\n\t\tlet end\n\t\treturn currentExtensions[type](src.subarray(position, end = (position += length)), (readPosition) => {\n\t\t\tposition = readPosition;\n\t\t\ttry {\n\t\t\t\treturn read();\n\t\t\t} finally {\n\t\t\t\tposition = end;\n\t\t\t}\n\t\t})\n\t}\n\telse\n\t\tthrow new Error('Unknown extension type ' + type)\n}\n\nvar keyCache = new Array(4096)\nfunction readKey() {\n\tlet length = src[position++]\n\tif (length >= 0xa0 && length < 0xc0) {\n\t\t// fixstr, potentially use key cache\n\t\tlength = length - 0xa0\n\t\tif (srcStringEnd >= position) // if it has been extracted, must use it (and faster anyway)\n\t\t\treturn srcString.slice(position - srcStringStart, (position += length) - srcStringStart)\n\t\telse if (!(srcStringEnd == 0 && srcEnd < 180))\n\t\t\treturn readFixedString(length)\n\t} else { // not cacheable, go back and do a standard read\n\t\tposition--\n\t\treturn asSafeString(read())\n\t}\n\tlet key = ((length << 5) ^ (length > 1 ? dataView.getUint16(position) : length > 0 ? src[position] : 0)) & 0xfff\n\tlet entry = keyCache[key]\n\tlet checkPosition = position\n\tlet end = position + length - 3\n\tlet chunk\n\tlet i = 0\n\tif (entry && entry.bytes == length) {\n\t\twhile (checkPosition < end) {\n\t\t\tchunk = dataView.getUint32(checkPosition)\n\t\t\tif (chunk != entry[i++]) {\n\t\t\t\tcheckPosition = 0x70000000\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcheckPosition += 4\n\t\t}\n\t\tend += 3\n\t\twhile (checkPosition < end) {\n\t\t\tchunk = src[checkPosition++]\n\t\t\tif (chunk != entry[i++]) {\n\t\t\t\tcheckPosition = 0x70000000\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif (checkPosition === end) {\n\t\t\tposition = checkPosition\n\t\t\treturn entry.string\n\t\t}\n\t\tend -= 3\n\t\tcheckPosition = position\n\t}\n\tentry = []\n\tkeyCache[key] = entry\n\tentry.bytes = length\n\twhile (checkPosition < end) {\n\t\tchunk = dataView.getUint32(checkPosition)\n\t\tentry.push(chunk)\n\t\tcheckPosition += 4\n\t}\n\tend += 3\n\twhile (checkPosition < end) {\n\t\tchunk = src[checkPosition++]\n\t\tentry.push(chunk)\n\t}\n\t// for small blocks, avoiding the overhead of the extract call is helpful\n\tlet string = length < 16 ? shortStringInJS(length) : longStringInJS(length)\n\tif (string != null)\n\t\treturn entry.string = string\n\treturn entry.string = readFixedString(length)\n}\n\nfunction asSafeString(property) {\n\t// protect against expensive (DoS) string conversions\n\tif (typeof property === 'string') return property;\n\tif (typeof property === 'number' || typeof property === 'boolean' || typeof property === 'bigint') return property.toString();\n\tif (property == null) return property + '';\n\tif (currentUnpackr.allowArraysInMapKeys && Array.isArray(property) && property.flat().every(item => ['string', 'number', 'boolean', 'bigint'].includes(typeof item))) {\n\t\treturn property.flat().toString();\n\t}\n\tthrow new Error(`Invalid property type for record: ${typeof property}`);\n}\n// the registration of the record definition extension (as \"r\")\nconst recordDefinition = (id, highByte) => {\n\tlet structure = read().map(asSafeString) // ensure that all keys are strings and\n\t// that the array is mutable\n\tlet firstByte = id\n\tif (highByte !== undefined) {\n\t\tid = id < 32 ? -((highByte << 5) + id) : ((highByte << 5) + id)\n\t\tstructure.highByte = highByte\n\t}\n\tlet existingStructure = currentStructures[id]\n\t// If it is a shared structure, we need to restore any changes after reading.\n\t// Also in sequential mode, we may get incomplete reads and thus errors, and we need to restore\n\t// to the state prior to an incomplete read in order to properly resume.\n\tif (existingStructure && (existingStructure.isShared || sequentialMode)) {\n\t\t(currentStructures.restoreStructures || (currentStructures.restoreStructures = []))[id] = existingStructure\n\t}\n\tcurrentStructures[id] = structure\n\tstructure.read = createStructureReader(structure, firstByte)\n\treturn structure.read()\n}\ncurrentExtensions[0] = () => {} // notepack defines extension 0 to mean undefined, so use that as the default here\ncurrentExtensions[0].noBuffer = true\n\ncurrentExtensions[0x42] = data => {\n\tlet headLength = (data.byteLength % 8) || 8\n\tlet head = BigInt(data[0] & 0x80 ? data[0] - 0x100 : data[0])\n\tfor (let i = 1; i < headLength; i++) {\n\t\thead <<= BigInt(8)\n\t\thead += BigInt(data[i])\n\t}\n\tif (data.byteLength !== headLength) {\n\t\tlet view = new DataView(data.buffer, data.byteOffset, data.byteLength)\n\t\tlet decode = (start, end) => {\n\t\t\tlet length = end - start\n\t\t\tif (length <= 40) {\n\t\t\t\tlet out = view.getBigUint64(start)\n\t\t\t\tfor (let i = start + 8; i < end; i += 8) {\n\t\t\t\t\tout <<= BigInt(64n)\n\t\t\t\t\tout |= view.getBigUint64(i)\n\t\t\t\t}\n\t\t\t\treturn out\n\t\t\t}\n\t\t\t// if (length === 8) return view.getBigUint64(start)\n\t\t\tlet middle = start + (length >> 4 << 3)\n\t\t\tlet left = decode(start, middle)\n\t\t\tlet right = decode(middle, end)\n\t\t\treturn (left << BigInt((end - middle) * 8)) | right\n\t\t}\n\t\thead = (head << BigInt((view.byteLength - headLength) * 8)) | decode(headLength, view.byteLength)\n\t}\n\treturn head\n}\n\nlet errors = {\n\tError, EvalError, RangeError, ReferenceError, SyntaxError, TypeError, URIError, AggregateError: typeof AggregateError === 'function' ? AggregateError : null,\n}\ncurrentExtensions[0x65] = () => {\n\tlet data = read()\n\tif (!errors[data[0]]) {\n\t\tlet error = Error(data[1], { cause: data[2] })\n\t\terror.name = data[0]\n\t\treturn error\n\t}\n\treturn errors[data[0]](data[1], { cause: data[2] })\n}\n\ncurrentExtensions[0x69] = (data) => {\n\t// id extension (for structured clones)\n\tif (currentUnpackr.structuredClone === false) throw new Error('Structured clone extension is disabled')\n\tlet id = dataView.getUint32(position - 4)\n\tif (!referenceMap)\n\t\treferenceMap = new Map()\n\tlet token = src[position]\n\tlet target\n\t// TODO: handle any other types that can cycle and make the code more robust if there are other extensions\n\tif (token >= 0x90 && token < 0xa0 || token == 0xdc || token == 0xdd)\n\t\ttarget = []\n\telse if (token >= 0x80 && token < 0x90 || token == 0xde || token == 0xdf)\n\t\ttarget = new Map()\n\telse if ((token >= 0xc7 && token <= 0xc9 || token >= 0xd4 && token <= 0xd8) && src[position + 1] === 0x73)\n\t\ttarget = new Set()\n\telse\n\t\ttarget = {}\n\n\tlet refEntry = { target } // a placeholder object\n\treferenceMap.set(id, refEntry)\n\tlet targetProperties = read() // read the next value as the target object to id\n\tif (!refEntry.used) {\n\t\t// no cycle, can just use the returned read object\n\t\treturn refEntry.target = targetProperties // replace the placeholder with the real one\n\t} else {\n\t\t// there is a cycle, so we have to assign properties to original target\n\t\tObject.assign(target, targetProperties)\n\t}\n\n\t// copy over map/set entries if we're able to\n\tif (target instanceof Map)\n\t\tfor (let [k, v] of targetProperties.entries()) target.set(k, v)\n\tif (target instanceof Set)\n\t\tfor (let i of Array.from(targetProperties)) target.add(i)\n\treturn target\n}\n\ncurrentExtensions[0x70] = (data) => {\n\t// pointer extension (for structured clones)\n\tif (currentUnpackr.structuredClone === false) throw new Error('Structured clone extension is disabled')\n\tlet id = dataView.getUint32(position - 4)\n\tlet refEntry = referenceMap.get(id)\n\trefEntry.used = true\n\treturn refEntry.target\n}\n\ncurrentExtensions[0x73] = () => new Set(read())\n\nexport const typedArrays = ['Int8','Uint8','Uint8Clamped','Int16','Uint16','Int32','Uint32','Float32','Float64','BigInt64','BigUint64'].map(type => type + 'Array')\n\nlet glbl = typeof globalThis === 'object' ? globalThis : window;\ncurrentExtensions[0x74] = (data) => {\n\tlet typeCode = data[0]\n\t// we always have to slice to get a new ArrayBuffer that is aligned\n\tlet buffer = Uint8Array.prototype.slice.call(data, 1).buffer\n\n\tlet typedArrayName = typedArrays[typeCode]\n\tif (!typedArrayName) {\n\t\tif (typeCode === 16) return buffer\n\t\tif (typeCode === 17) return new DataView(buffer)\n\t\tthrow new Error('Could not find typed array for code ' + typeCode)\n\t}\n\treturn new glbl[typedArrayName](buffer)\n}\ncurrentExtensions[0x78] = () => {\n\tlet data = read()\n\treturn new RegExp(data[0], data[1])\n}\nconst TEMP_BUNDLE = []\ncurrentExtensions[0x62] = (data) => {\n\tlet dataSize = (data[0] << 24) + (data[1] << 16) + (data[2] << 8) + data[3]\n\tlet dataPosition = position\n\tposition += dataSize - data.length\n\tbundledStrings = TEMP_BUNDLE\n\tbundledStrings = [readOnlyJSString(), readOnlyJSString()]\n\tbundledStrings.position0 = 0\n\tbundledStrings.position1 = 0\n\tbundledStrings.postBundlePosition = position\n\tposition = dataPosition\n\treturn read()\n}\n\ncurrentExtensions[0xff] = (data) => {\n\t// 32-bit date extension\n\tif (data.length == 4)\n\t\treturn new Date((data[0] * 0x1000000 + (data[1] << 16) + (data[2] << 8) + data[3]) * 1000)\n\telse if (data.length == 8)\n\t\treturn new Date(\n\t\t\t((data[0] << 22) + (data[1] << 14) + (data[2] << 6) + (data[3] >> 2)) / 1000000 +\n\t\t\t((data[3] & 0x3) * 0x100000000 + data[4] * 0x1000000 + (data[5] << 16) + (data[6] << 8) + data[7]) * 1000)\n\telse if (data.length == 12)\n\t\treturn new Date(\n\t\t\t((data[0] << 24) + (data[1] << 16) + (data[2] << 8) + data[3]) / 1000000 +\n\t\t\t(((data[4] & 0x80) ? -0x1000000000000 : 0) + data[6] * 0x10000000000 + data[7] * 0x100000000 + data[8] * 0x1000000 + (data[9] << 16) + (data[10] << 8) + data[11]) * 1000)\n\telse\n\t\treturn new Date('invalid')\n}\n// registration of bulk record definition?\n// currentExtensions[0x52] = () =>\n\nfunction saveState(callback) {\n\tif (onSaveState)\n\t\tonSaveState();\n\tlet savedSrcEnd = srcEnd\n\tlet savedPosition = position\n\tlet savedStringPosition = stringPosition\n\tlet savedSrcStringStart = srcStringStart\n\tlet savedSrcStringEnd = srcStringEnd\n\tlet savedSrcString = srcString\n\tlet savedStrings = strings\n\tlet savedReferenceMap = referenceMap\n\tlet savedBundledStrings = bundledStrings\n\n\t// TODO: We may need to revisit this if we do more external calls to user code (since it could be slow)\n\tlet savedSrc = new Uint8Array(src.slice(0, srcEnd)) // we copy the data in case it changes while external data is processed\n\tlet savedStructures = currentStructures\n\tlet savedStructuresContents = currentStructures.slice(0, currentStructures.length)\n\tlet savedPackr = currentUnpackr\n\tlet savedSequentialMode = sequentialMode\n\tlet value = callback()\n\tsrcEnd = savedSrcEnd\n\tposition = savedPosition\n\tstringPosition = savedStringPosition\n\tsrcStringStart = savedSrcStringStart\n\tsrcStringEnd = savedSrcStringEnd\n\tsrcString = savedSrcString\n\tstrings = savedStrings\n\treferenceMap = savedReferenceMap\n\tbundledStrings = savedBundledStrings\n\tsrc = savedSrc\n\tsequentialMode = savedSequentialMode\n\tcurrentStructures = savedStructures\n\tcurrentStructures.splice(0, currentStructures.length, ...savedStructuresContents)\n\tcurrentUnpackr = savedPackr\n\tdataView = new DataView(src.buffer, src.byteOffset, src.byteLength)\n\treturn value\n}\nexport function clearSource() {\n\tsrc = null\n\treferenceMap = null\n\tcurrentStructures = null\n}\n\nexport function addExtension(extension) {\n\tif (extension.unpack)\n\t\tcurrentExtensions[extension.type] = extension.unpack\n\telse\n\t\tcurrentExtensions[extension.type] = extension\n}\n\nexport const mult10 = new Array(147) // this is a table matching binary exponents to the multiplier to determine significant digit rounding\nfor (let i = 0; i < 256; i++) {\n\tmult10[i] = +('1e' + Math.floor(45.15 - i * 0.30103))\n}\nexport const Decoder = Unpackr\nvar defaultUnpackr = new Unpackr({ useRecords: false })\nexport const unpack = defaultUnpackr.unpack\nexport const unpackMultiple = defaultUnpackr.unpackMultiple\nexport const decode = defaultUnpackr.unpack\nexport const FLOAT32_OPTIONS = {\n\tNEVER: 0,\n\tALWAYS: 1,\n\tDECIMAL_ROUND: 3,\n\tDECIMAL_FIT: 4\n}\nlet f32Array = new Float32Array(1)\nlet u8Array = new Uint8Array(f32Array.buffer, 0, 4)\nexport function roundFloat32(float32Number) {\n\tf32Array[0] = float32Number\n\tlet multiplier = mult10[((u8Array[3] & 0x7f) << 1) | (u8Array[2] >> 7)]\n\treturn ((multiplier * float32Number + (float32Number > 0 ? 0.5 : -0.5)) >> 0) / multiplier\n}\nexport function setReadStruct(updatedReadStruct, loadedStructs, saveState) {\n\treadStruct = updatedReadStruct;\n\tonLoadedStructures = loadedStructs;\n\tonSaveState = saveState;\n}\n", "import { Unpackr, mult10, C1Type, typedArrays, addExtension as unpackAddExtension } from './unpack.js'\nlet textEncoder\ntry {\n\ttextEncoder = new TextEncoder()\n} catch (error) {}\nlet extensions, extensionClasses\nconst hasNodeBuffer = typeof Buffer !== 'undefined'\nconst ByteArrayAllocate = hasNodeBuffer ?\n\tfunction(length) { return Buffer.allocUnsafeSlow(length) } : Uint8Array\nconst ByteArray = hasNodeBuffer ? Buffer : Uint8Array\nconst MAX_BUFFER_SIZE = hasNodeBuffer ? 0x100000000 : 0x7fd00000\nlet target, keysTarget\nlet targetView\nlet position = 0\nlet safeEnd\nlet bundledStrings = null\nlet writeStructSlots\nconst MAX_BUNDLE_SIZE = 0x5500 // maximum characters such that the encoded bytes fits in 16 bits.\nconst hasNonLatin = /[\\u0080-\\uFFFF]/\nexport const RECORD_SYMBOL = Symbol('record-id')\nexport class Packr extends Unpackr {\n\tconstructor(options) {\n\t\tsuper(options)\n\t\tthis.offset = 0\n\t\tlet typeBuffer\n\t\tlet start\n\t\tlet hasSharedUpdate\n\t\tlet structures\n\t\tlet referenceMap\n\t\tlet encodeUtf8 = ByteArray.prototype.utf8Write ? function(string, position) {\n\t\t\treturn target.utf8Write(string, position, target.byteLength - position)\n\t\t} : (textEncoder && textEncoder.encodeInto) ?\n\t\t\tfunction(string, position) {\n\t\t\t\treturn textEncoder.encodeInto(string, target.subarray(position)).written\n\t\t\t} : false\n\n\t\tlet packr = this\n\t\tif (!options)\n\t\t\toptions = {}\n\t\tlet isSequential = options && options.sequential\n\t\tlet hasSharedStructures = options.structures || options.saveStructures\n\t\tlet maxSharedStructures = options.maxSharedStructures\n\t\tif (maxSharedStructures == null)\n\t\t\tmaxSharedStructures = hasSharedStructures ? 32 : 0\n\t\tif (maxSharedStructures > 8160)\n\t\t\tthrow new Error('Maximum maxSharedStructure is 8160')\n\t\tif (options.structuredClone && options.moreTypes == undefined) {\n\t\t\tthis.moreTypes = true\n\t\t}\n\t\tlet maxOwnStructures = options.maxOwnStructures\n\t\tif (maxOwnStructures == null)\n\t\t\tmaxOwnStructures = hasSharedStructures ? 32 : 64\n\t\tif (!this.structures && options.useRecords != false)\n\t\t\tthis.structures = []\n\t\t// two byte record ids for shared structures\n\t\tlet useTwoByteRecords = maxSharedStructures > 32 || (maxOwnStructures + maxSharedStructures > 64)\n\t\tlet sharedLimitId = maxSharedStructures + 0x40\n\t\tlet maxStructureId = maxSharedStructures + maxOwnStructures + 0x40\n\t\tif (maxStructureId > 8256) {\n\t\t\tthrow new Error('Maximum maxSharedStructure + maxOwnStructure is 8192')\n\t\t}\n\t\tlet recordIdsToRemove = []\n\t\tlet transitionsCount = 0\n\t\tlet serializationsSinceTransitionRebuild = 0\n\n\t\tthis.pack = this.encode = function(value, encodeOptions) {\n\t\t\tif (!target) {\n\t\t\t\ttarget = new ByteArrayAllocate(8192)\n\t\t\t\ttargetView = target.dataView || (target.dataView = new DataView(target.buffer, 0, 8192))\n\t\t\t\tposition = 0\n\t\t\t}\n\t\t\tsafeEnd = target.length - 10\n\t\t\tif (safeEnd - position < 0x800) {\n\t\t\t\t// don't start too close to the end,\n\t\t\t\ttarget = new ByteArrayAllocate(target.length)\n\t\t\t\ttargetView = target.dataView || (target.dataView = new DataView(target.buffer, 0, target.length))\n\t\t\t\tsafeEnd = target.length - 10\n\t\t\t\tposition = 0\n\t\t\t} else\n\t\t\t\tposition = (position + 7) & 0x7ffffff8 // Word align to make any future copying of this buffer faster\n\t\t\tstart = position\n\t\t\tif (encodeOptions & RESERVE_START_SPACE) position += (encodeOptions & 0xff)\n\t\t\treferenceMap = packr.structuredClone ? new Map() : null\n\t\t\tif (packr.bundleStrings && typeof value !== 'string') {\n\t\t\t\tbundledStrings = []\n\t\t\t\tbundledStrings.size = Infinity // force a new bundle start on first string\n\t\t\t} else\n\t\t\t\tbundledStrings = null\n\t\t\tstructures = packr.structures\n\t\t\tif (structures) {\n\t\t\t\tif (structures.uninitialized)\n\t\t\t\t\tstructures = packr._mergeStructures(packr.getStructures())\n\t\t\t\tlet sharedLength = structures.sharedLength || 0\n\t\t\t\tif (sharedLength > maxSharedStructures) {\n\t\t\t\t\t//if (maxSharedStructures <= 32 && structures.sharedLength > 32) // TODO: could support this, but would need to update the limit ids\n\t\t\t\t\tthrow new Error('Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to ' + structures.sharedLength)\n\t\t\t\t}\n\t\t\t\tif (!structures.transitions) {\n\t\t\t\t\t// rebuild our structure transitions\n\t\t\t\t\tstructures.transitions = Object.create(null)\n\t\t\t\t\tfor (let i = 0; i < sharedLength; i++) {\n\t\t\t\t\t\tlet keys = structures[i]\n\t\t\t\t\t\tif (!keys)\n\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\tlet nextTransition, transition = structures.transitions\n\t\t\t\t\t\tfor (let j = 0, l = keys.length; j < l; j++) {\n\t\t\t\t\t\t\tlet key = keys[j]\n\t\t\t\t\t\t\tnextTransition = transition[key]\n\t\t\t\t\t\t\tif (!nextTransition) {\n\t\t\t\t\t\t\t\tnextTransition = transition[key] = Object.create(null)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransition = nextTransition\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttransition[RECORD_SYMBOL] = i + 0x40\n\t\t\t\t\t}\n\t\t\t\t\tthis.lastNamedStructuresLength = sharedLength\n\t\t\t\t}\n\t\t\t\tif (!isSequential) {\n\t\t\t\t\tstructures.nextId = sharedLength + 0x40\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hasSharedUpdate)\n\t\t\t\thasSharedUpdate = false\n\t\t\tlet encodingError;\n\t\t\ttry {\n\t\t\t\tif (packr.randomAccessStructure && value && typeof value === 'object') {\n\t\t\t\t\tif (value.constructor === Object) writeStruct(value); // simple object\n\t\t\t\t\telse if (value.constructor !== Map && !Array.isArray(value) && !extensionClasses.some(extClass => value instanceof extClass)) {\n\t\t\t\t\t\t// allow user classes, if they don't need special handling (but do use toJSON if available)\n\t\t\t\t\t\twriteStruct(value.toJSON ? value.toJSON() : value);\n\t\t\t\t\t} else pack(value)\n\t\t\t\t} else\n\t\t\t\t\tpack(value)\n\t\t\t\tlet lastBundle = bundledStrings;\n\t\t\t\tif (bundledStrings)\n\t\t\t\t\twriteBundles(start, pack, 0)\n\t\t\t\tif (referenceMap && referenceMap.idsToInsert) {\n\t\t\t\t\tlet idsToInsert = referenceMap.idsToInsert.sort((a, b) => a.offset > b.offset ? 1 : -1);\n\t\t\t\t\tlet i = idsToInsert.length;\n\t\t\t\t\tlet incrementPosition = -1;\n\t\t\t\t\twhile (lastBundle && i > 0) {\n\t\t\t\t\t\tlet insertionPoint = idsToInsert[--i].offset + start;\n\t\t\t\t\t\tif (insertionPoint < (lastBundle.stringsPosition + start) && incrementPosition === -1)\n\t\t\t\t\t\t\tincrementPosition = 0;\n\t\t\t\t\t\tif (insertionPoint > (lastBundle.position + start)) {\n\t\t\t\t\t\t\tif (incrementPosition >= 0)\n\t\t\t\t\t\t\t\tincrementPosition += 6;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (incrementPosition >= 0) {\n\t\t\t\t\t\t\t\t// update the bundle reference now\n\t\t\t\t\t\t\t\ttargetView.setUint32(lastBundle.position + start,\n\t\t\t\t\t\t\t\t\ttargetView.getUint32(lastBundle.position + start) + incrementPosition)\n\t\t\t\t\t\t\t\tincrementPosition = -1; // reset\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlastBundle = lastBundle.previous;\n\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (incrementPosition >= 0 && lastBundle) {\n\t\t\t\t\t\t// update the bundle reference now\n\t\t\t\t\t\ttargetView.setUint32(lastBundle.position + start,\n\t\t\t\t\t\t\ttargetView.getUint32(lastBundle.position + start) + incrementPosition)\n\t\t\t\t\t}\n\t\t\t\t\tposition += idsToInsert.length * 6;\n\t\t\t\t\tif (position > safeEnd)\n\t\t\t\t\t\tmakeRoom(position)\n\t\t\t\t\tpackr.offset = position\n\t\t\t\t\tlet serialized = insertIds(target.subarray(start, position), idsToInsert)\n\t\t\t\t\treferenceMap = null\n\t\t\t\t\treturn serialized\n\t\t\t\t}\n\t\t\t\tpackr.offset = position // update the offset so next serialization doesn't write over our buffer, but can continue writing to same buffer sequentially\n\t\t\t\tif (encodeOptions & REUSE_BUFFER_MODE) {\n\t\t\t\t\ttarget.start = start\n\t\t\t\t\ttarget.end = position\n\t\t\t\t\treturn target\n\t\t\t\t}\n\t\t\t\treturn target.subarray(start, position) // position can change if we call pack again in saveStructures, so we get the buffer now\n\t\t\t} catch(error) {\n\t\t\t\tencodingError = error;\n\t\t\t\tthrow error;\n\t\t\t} finally {\n\t\t\t\tif (structures) {\n\t\t\t\t\tresetStructures();\n\t\t\t\t\tif (hasSharedUpdate && packr.saveStructures) {\n\t\t\t\t\t\tlet sharedLength = structures.sharedLength || 0\n\t\t\t\t\t\t// we can't rely on start/end with REUSE_BUFFER_MODE since they will (probably) change when we save\n\t\t\t\t\t\tlet returnBuffer = target.subarray(start, position)\n\t\t\t\t\t\tlet newSharedData = prepareStructures(structures, packr);\n\t\t\t\t\t\tif (!encodingError) { // TODO: If there is an encoding error, should make the structures as uninitialized so they get rebuilt next time\n\t\t\t\t\t\t\tif (packr.saveStructures(newSharedData, newSharedData.isCompatible) === false) {\n\t\t\t\t\t\t\t\t// get updated structures and try again if the update failed\n\t\t\t\t\t\t\t\treturn packr.pack(value, encodeOptions)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpackr.lastNamedStructuresLength = sharedLength\n\t\t\t\t\t\t\t// don't keep large buffers around\n\t\t\t\t\t\t\tif (target.length > 0x40000000) target = null\n\t\t\t\t\t\t\treturn returnBuffer\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// don't keep large buffers around, they take too much memory and cause problems (limit at 1GB)\n\t\t\t\tif (target.length > 0x40000000) target = null\n\t\t\t\tif (encodeOptions & RESET_BUFFER_MODE)\n\t\t\t\t\tposition = start\n\t\t\t}\n\t\t}\n\t\tconst resetStructures = () => {\n\t\t\tif (serializationsSinceTransitionRebuild < 10)\n\t\t\t\tserializationsSinceTransitionRebuild++\n\t\t\tlet sharedLength = structures.sharedLength || 0\n\t\t\tif (structures.length > sharedLength && !isSequential)\n\t\t\t\tstructures.length = sharedLength\n\t\t\tif (transitionsCount > 10000) {\n\t\t\t\t// force a rebuild occasionally after a lot of transitions so it can get cleaned up\n\t\t\t\tstructures.transitions = null\n\t\t\t\tserializationsSinceTransitionRebuild = 0\n\t\t\t\ttransitionsCount = 0\n\t\t\t\tif (recordIdsToRemove.length > 0)\n\t\t\t\t\trecordIdsToRemove = []\n\t\t\t} else if (recordIdsToRemove.length > 0 && !isSequential) {\n\t\t\t\tfor (let i = 0, l = recordIdsToRemove.length; i < l; i++) {\n\t\t\t\t\trecordIdsToRemove[i][RECORD_SYMBOL] = 0\n\t\t\t\t}\n\t\t\t\trecordIdsToRemove = []\n\t\t\t}\n\t\t}\n\t\tconst packArray = (value) => {\n\t\t\tvar length = value.length\n\t\t\tif (length < 0x10) {\n\t\t\t\ttarget[position++] = 0x90 | length\n\t\t\t} else if (length < 0x10000) {\n\t\t\t\ttarget[position++] = 0xdc\n\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t} else {\n\t\t\t\ttarget[position++] = 0xdd\n\t\t\t\ttargetView.setUint32(position, length)\n\t\t\t\tposition += 4\n\t\t\t}\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tpack(value[i])\n\t\t\t}\n\t\t}\n\t\tconst pack = (value) => {\n\t\t\tif (position > safeEnd)\n\t\t\t\ttarget = makeRoom(position)\n\n\t\t\tvar type = typeof value\n\t\t\tvar length\n\t\t\tif (type === 'string') {\n\t\t\t\tlet strLength = value.length\n\t\t\t\tif (bundledStrings && strLength >= 4 && strLength < 0x1000) {\n\t\t\t\t\tif ((bundledStrings.size += strLength) > MAX_BUNDLE_SIZE) {\n\t\t\t\t\t\tlet extStart\n\t\t\t\t\t\tlet maxBytes = (bundledStrings[0] ? bundledStrings[0].length * 3 + bundledStrings[1].length : 0) + 10\n\t\t\t\t\t\tif (position + maxBytes > safeEnd)\n\t\t\t\t\t\t\ttarget = makeRoom(position + maxBytes)\n\t\t\t\t\t\tlet lastBundle\n\t\t\t\t\t\tif (bundledStrings.position) { // here we use the 0x62 extension to write the last bundle and reserve space for the reference pointer to the next/current bundle\n\t\t\t\t\t\t\tlastBundle = bundledStrings\n\t\t\t\t\t\t\ttarget[position] = 0xc8 // ext 16\n\t\t\t\t\t\t\tposition += 3 // reserve for the writing bundle size\n\t\t\t\t\t\t\ttarget[position++] = 0x62 // 'b'\n\t\t\t\t\t\t\textStart = position - start\n\t\t\t\t\t\t\tposition += 4 // reserve for writing bundle reference\n\t\t\t\t\t\t\twriteBundles(start, pack, 0) // write the last bundles\n\t\t\t\t\t\t\ttargetView.setUint16(extStart + start - 3, position - start - extStart)\n\t\t\t\t\t\t} else { // here we use the 0x62 extension just to reserve the space for the reference pointer to the bundle (will be updated once the bundle is written)\n\t\t\t\t\t\t\ttarget[position++] = 0xd6 // fixext 4\n\t\t\t\t\t\t\ttarget[position++] = 0x62 // 'b'\n\t\t\t\t\t\t\textStart = position - start\n\t\t\t\t\t\t\tposition += 4 // reserve for writing bundle reference\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbundledStrings = ['', ''] // create new ones\n\t\t\t\t\t\tbundledStrings.previous = lastBundle;\n\t\t\t\t\t\tbundledStrings.size = 0\n\t\t\t\t\t\tbundledStrings.position = extStart\n\t\t\t\t\t}\n\t\t\t\t\tlet twoByte = hasNonLatin.test(value)\n\t\t\t\t\tbundledStrings[twoByte ? 0 : 1] += value\n\t\t\t\t\ttarget[position++] = 0xc1\n\t\t\t\t\tpack(twoByte ? -strLength : strLength);\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tlet headerSize\n\t\t\t\t// first we estimate the header size, so we can write to the correct location\n\t\t\t\tif (strLength < 0x20) {\n\t\t\t\t\theaderSize = 1\n\t\t\t\t} else if (strLength < 0x100) {\n\t\t\t\t\theaderSize = 2\n\t\t\t\t} else if (strLength < 0x10000) {\n\t\t\t\t\theaderSize = 3\n\t\t\t\t} else {\n\t\t\t\t\theaderSize = 5\n\t\t\t\t}\n\t\t\t\tlet maxBytes = strLength * 3\n\t\t\t\tif (position + maxBytes > safeEnd)\n\t\t\t\t\ttarget = makeRoom(position + maxBytes)\n\n\t\t\t\tif (strLength < 0x40 || !encodeUtf8) {\n\t\t\t\t\tlet i, c1, c2, strPosition = position + headerSize\n\t\t\t\t\tfor (i = 0; i < strLength; i++) {\n\t\t\t\t\t\tc1 = value.charCodeAt(i)\n\t\t\t\t\t\tif (c1 < 0x80) {\n\t\t\t\t\t\t\ttarget[strPosition++] = c1\n\t\t\t\t\t\t} else if (c1 < 0x800) {\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 6 | 0xc0\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 & 0x3f | 0x80\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t(c1 & 0xfc00) === 0xd800 &&\n\t\t\t\t\t\t\t((c2 = value.charCodeAt(i + 1)) & 0xfc00) === 0xdc00\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tc1 = 0x10000 + ((c1 & 0x03ff) << 10) + (c2 & 0x03ff)\n\t\t\t\t\t\t\ti++\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 18 | 0xf0\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 12 & 0x3f | 0x80\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 6 & 0x3f | 0x80\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 & 0x3f | 0x80\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 12 | 0xe0\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 6 & 0x3f | 0x80\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 & 0x3f | 0x80\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlength = strPosition - position - headerSize\n\t\t\t\t} else {\n\t\t\t\t\tlength = encodeUtf8(value, position + headerSize)\n\t\t\t\t}\n\n\t\t\t\tif (length < 0x20) {\n\t\t\t\t\ttarget[position++] = 0xa0 | length\n\t\t\t\t} else if (length < 0x100) {\n\t\t\t\t\tif (headerSize < 2) {\n\t\t\t\t\t\ttarget.copyWithin(position + 2, position + 1, position + 1 + length)\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0xd9\n\t\t\t\t\ttarget[position++] = length\n\t\t\t\t} else if (length < 0x10000) {\n\t\t\t\t\tif (headerSize < 3) {\n\t\t\t\t\t\ttarget.copyWithin(position + 3, position + 2, position + 2 + length)\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0xda\n\t\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t\t} else {\n\t\t\t\t\tif (headerSize < 5) {\n\t\t\t\t\t\ttarget.copyWithin(position + 5, position + 3, position + 3 + length)\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0xdb\n\t\t\t\t\ttargetView.setUint32(position, length)\n\t\t\t\t\tposition += 4\n\t\t\t\t}\n\t\t\t\tposition += length\n\t\t\t} else if (type === 'number') {\n\t\t\t\tif (value >>> 0 === value) {// positive integer, 32-bit or less\n\t\t\t\t\t// positive uint\n\t\t\t\t\tif (value < 0x20 || (value < 0x80 && this.useRecords === false) || (value < 0x40 && !this.randomAccessStructure)) {\n\t\t\t\t\t\ttarget[position++] = value\n\t\t\t\t\t} else if (value < 0x100) {\n\t\t\t\t\t\ttarget[position++] = 0xcc\n\t\t\t\t\t\ttarget[position++] = value\n\t\t\t\t\t} else if (value < 0x10000) {\n\t\t\t\t\t\ttarget[position++] = 0xcd\n\t\t\t\t\t\ttarget[position++] = value >> 8\n\t\t\t\t\t\ttarget[position++] = value & 0xff\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarget[position++] = 0xce\n\t\t\t\t\t\ttargetView.setUint32(position, value)\n\t\t\t\t\t\tposition += 4\n\t\t\t\t\t}\n\t\t\t\t} else if (value >> 0 === value) { // negative integer\n\t\t\t\t\tif (value >= -0x20) {\n\t\t\t\t\t\ttarget[position++] = 0x100 + value\n\t\t\t\t\t} else if (value >= -0x80) {\n\t\t\t\t\t\ttarget[position++] = 0xd0\n\t\t\t\t\t\ttarget[position++] = value + 0x100\n\t\t\t\t\t} else if (value >= -0x8000) {\n\t\t\t\t\t\ttarget[position++] = 0xd1\n\t\t\t\t\t\ttargetView.setInt16(position, value)\n\t\t\t\t\t\tposition += 2\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarget[position++] = 0xd2\n\t\t\t\t\t\ttargetView.setInt32(position, value)\n\t\t\t\t\t\tposition += 4\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet useFloat32\n\t\t\t\t\tif ((useFloat32 = this.useFloat32) > 0 && value < 0x100000000 && value >= -0x80000000) {\n\t\t\t\t\t\ttarget[position++] = 0xca\n\t\t\t\t\t\ttargetView.setFloat32(position, value)\n\t\t\t\t\t\tlet xShifted\n\t\t\t\t\t\tif (useFloat32 < 4 ||\n\t\t\t\t\t\t\t\t// this checks for rounding of numbers that were encoded in 32-bit float to nearest significant decimal digit that could be preserved\n\t\t\t\t\t\t\t\t((xShifted = value * mult10[((target[position] & 0x7f) << 1) | (target[position + 1] >> 7)]) >> 0) === xShifted) {\n\t\t\t\t\t\t\tposition += 4\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\tposition-- // move back into position for writing a double\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0xcb\n\t\t\t\t\ttargetView.setFloat64(position, value)\n\t\t\t\t\tposition += 8\n\t\t\t\t}\n\t\t\t} else if (type === 'object' || type === 'function') {\n\t\t\t\tif (!value)\n\t\t\t\t\ttarget[position++] = 0xc0\n\t\t\t\telse {\n\t\t\t\t\tif (referenceMap) {\n\t\t\t\t\t\tlet referee = referenceMap.get(value)\n\t\t\t\t\t\tif (referee) {\n\t\t\t\t\t\t\tif (!referee.id) {\n\t\t\t\t\t\t\t\tlet idsToInsert = referenceMap.idsToInsert || (referenceMap.idsToInsert = [])\n\t\t\t\t\t\t\t\treferee.id = idsToInsert.push(referee)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttarget[position++] = 0xd6 // fixext 4\n\t\t\t\t\t\t\ttarget[position++] = 0x70 // \"p\" for pointer\n\t\t\t\t\t\t\ttargetView.setUint32(position, referee.id)\n\t\t\t\t\t\t\tposition += 4\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\treferenceMap.set(value, { offset: position - start })\n\t\t\t\t\t}\n\t\t\t\t\tlet constructor = value.constructor\n\t\t\t\t\tif (constructor === Object) {\n\t\t\t\t\t\twriteObject(value)\n\t\t\t\t\t} else if (constructor === Array) {\n\t\t\t\t\t\tpackArray(value)\n\t\t\t\t\t} else if (constructor === Map) {\n\t\t\t\t\t\tif (this.mapAsEmptyObject) target[position++] = 0x80\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tlength = value.size\n\t\t\t\t\t\t\tif (length < 0x10) {\n\t\t\t\t\t\t\t\ttarget[position++] = 0x80 | length\n\t\t\t\t\t\t\t} else if (length < 0x10000) {\n\t\t\t\t\t\t\t\ttarget[position++] = 0xde\n\t\t\t\t\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\t\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttarget[position++] = 0xdf\n\t\t\t\t\t\t\t\ttargetView.setUint32(position, length)\n\t\t\t\t\t\t\t\tposition += 4\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor (let [key, entryValue] of value) {\n\t\t\t\t\t\t\t\tpack(key)\n\t\t\t\t\t\t\t\tpack(entryValue)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (let i = 0, l = extensions.length; i < l; i++) {\n\t\t\t\t\t\t\tlet extensionClass = extensionClasses[i]\n\t\t\t\t\t\t\tif (value instanceof extensionClass) {\n\t\t\t\t\t\t\t\tlet extension = extensions[i]\n\t\t\t\t\t\t\t\tif (extension.write) {\n\t\t\t\t\t\t\t\t\tif (extension.type) {\n\t\t\t\t\t\t\t\t\t\ttarget[position++] = 0xd4 // one byte \"tag\" extension\n\t\t\t\t\t\t\t\t\t\ttarget[position++] = extension.type\n\t\t\t\t\t\t\t\t\t\ttarget[position++] = 0\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tlet writeResult = extension.write.call(this, value)\n\t\t\t\t\t\t\t\t\tif (writeResult === value) { // avoid infinite recursion\n\t\t\t\t\t\t\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\t\t\t\t\t\t\tpackArray(value)\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\twriteObject(value)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tpack(writeResult)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlet currentTarget = target\n\t\t\t\t\t\t\t\tlet currentTargetView = targetView\n\t\t\t\t\t\t\t\tlet currentPosition = position\n\t\t\t\t\t\t\t\ttarget = null\n\t\t\t\t\t\t\t\tlet result\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tresult = extension.pack.call(this, value, (size) => {\n\t\t\t\t\t\t\t\t\t\t// restore target and use it\n\t\t\t\t\t\t\t\t\t\ttarget = currentTarget\n\t\t\t\t\t\t\t\t\t\tcurrentTarget = null\n\t\t\t\t\t\t\t\t\t\tposition += size\n\t\t\t\t\t\t\t\t\t\tif (position > safeEnd)\n\t\t\t\t\t\t\t\t\t\t\tmakeRoom(position)\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\ttarget, targetView, position: position - size\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}, pack)\n\t\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\t\t// restore current target information (unless already restored)\n\t\t\t\t\t\t\t\t\tif (currentTarget) {\n\t\t\t\t\t\t\t\t\t\ttarget = currentTarget\n\t\t\t\t\t\t\t\t\t\ttargetView = currentTargetView\n\t\t\t\t\t\t\t\t\t\tposition = currentPosition\n\t\t\t\t\t\t\t\t\t\tsafeEnd = target.length - 10\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\t\tif (result.length + position > safeEnd)\n\t\t\t\t\t\t\t\t\t\tmakeRoom(result.length + position)\n\t\t\t\t\t\t\t\t\tposition = writeExtensionData(result, target, position, extension.type)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// check isArray after extensions, because extensions can extend Array\n\t\t\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\t\t\tpackArray(value)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// use this as an alternate mechanism for expressing how to serialize\n\t\t\t\t\t\t\tif (value.toJSON) {\n\t\t\t\t\t\t\t\tconst json = value.toJSON()\n\t\t\t\t\t\t\t\t// if for some reason value.toJSON returns itself it'll loop forever\n\t\t\t\t\t\t\t\tif (json !== value)\n\t\t\t\t\t\t\t\t\treturn pack(json)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// if there is a writeFunction, use it, otherwise just encode as undefined\n\t\t\t\t\t\t\tif (type === 'function')\n\t\t\t\t\t\t\t\treturn pack(this.writeFunction && this.writeFunction(value));\n\n\t\t\t\t\t\t\t// no extension found, write as plain object\n\t\t\t\t\t\t\twriteObject(value)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'boolean') {\n\t\t\t\ttarget[position++] = value ? 0xc3 : 0xc2\n\t\t\t} else if (type === 'bigint') {\n\t\t\t\tif (value < 0x8000000000000000 && value >= -0x8000000000000000) {\n\t\t\t\t\t// use a signed int as long as it fits\n\t\t\t\t\ttarget[position++] = 0xd3\n\t\t\t\t\ttargetView.setBigInt64(position, value)\n\t\t\t\t} else if (value < 0x10000000000000000 && value > 0) {\n\t\t\t\t\t// if we can fit an unsigned int, use that\n\t\t\t\t\ttarget[position++] = 0xcf\n\t\t\t\t\ttargetView.setBigUint64(position, value)\n\t\t\t\t} else {\n\t\t\t\t\t// overflow\n\t\t\t\t\tif (this.largeBigIntToFloat) {\n\t\t\t\t\t\ttarget[position++] = 0xcb\n\t\t\t\t\t\ttargetView.setFloat64(position, Number(value))\n\t\t\t\t\t} else if (this.largeBigIntToString) {\n\t\t\t\t\t\treturn pack(value.toString());\n\t\t\t\t\t} else if (this.useBigIntExtension || this.moreTypes) {\n\t\t\t\t\t\tlet empty = value < 0 ? BigInt(-1) : BigInt(0)\n\n\t\t\t\t\t\tlet array\n\t\t\t\t\t\tif (value >> BigInt(0x10000) === empty) {\n\t\t\t\t\t\t\tlet mask = BigInt(0x10000000000000000) - BigInt(1) // literal would overflow\n\t\t\t\t\t\t\tlet chunks = []\n\t\t\t\t\t\t\twhile (true) {\n\t\t\t\t\t\t\t\tchunks.push(value & mask)\n\t\t\t\t\t\t\t\tif ((value >> BigInt(63)) === empty) break\n\t\t\t\t\t\t\t\tvalue >>= BigInt(64)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tarray = new Uint8Array(new BigUint64Array(chunks).buffer)\n\t\t\t\t\t\t\tarray.reverse()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet invert = value < 0\n\t\t\t\t\t\t\tlet string = (invert ? ~value : value).toString(16)\n\t\t\t\t\t\t\tif (string.length % 2) {\n\t\t\t\t\t\t\t\tstring = '0' + string\n\t\t\t\t\t\t\t} else if (parseInt(string.charAt(0), 16) >= 8) {\n\t\t\t\t\t\t\t\tstring = '00' + string\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (hasNodeBuffer) {\n\t\t\t\t\t\t\t\tarray = Buffer.from(string, 'hex')\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tarray = new Uint8Array(string.length / 2)\n\t\t\t\t\t\t\t\tfor (let i = 0; i < array.length; i++) {\n\t\t\t\t\t\t\t\t\tarray[i] = parseInt(string.slice(i * 2, i * 2 + 2), 16)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (invert) {\n\t\t\t\t\t\t\t\tfor (let i = 0; i < array.length; i++) array[i] = ~array[i]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (array.length + position > safeEnd)\n\t\t\t\t\t\t\tmakeRoom(array.length + position)\n\t\t\t\t\t\tposition = writeExtensionData(array, target, position, 0x42)\n\t\t\t\t\t\treturn\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new RangeError(value + ' was too large to fit in MessagePack 64-bit integer format, use' +\n\t\t\t\t\t\t\t' useBigIntExtension, or set largeBigIntToFloat to convert to float-64, or set' +\n\t\t\t\t\t\t\t' largeBigIntToString to convert to string')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tposition += 8\n\t\t\t} else if (type === 'undefined') {\n\t\t\t\tif (this.encodeUndefinedAsNil)\n\t\t\t\t\ttarget[position++] = 0xc0\n\t\t\t\telse {\n\t\t\t\t\ttarget[position++] = 0xd4 // a number of implementations use fixext1 with type 0, data 0 to denote undefined, so we follow suite\n\t\t\t\t\ttarget[position++] = 0\n\t\t\t\t\ttarget[position++] = 0\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error('Unknown type: ' + type)\n\t\t\t}\n\t\t}\n\n\t\tconst writePlainObject = (this.variableMapSize || this.coercibleKeyAsNumber || this.skipValues) ? (object) => {\n\t\t\t// this method is slightly slower, but generates \"preferred serialization\" (optimally small for smaller objects)\n\t\t\tlet keys;\n\t\t\tif (this.skipValues) {\n\t\t\t\tkeys = [];\n\t\t\t\tfor (let key in object) {\n\t\t\t\t\tif ((typeof object.hasOwnProperty !== 'function' || object.hasOwnProperty(key)) &&\n\t\t\t\t\t\t!this.skipValues.includes(object[key]))\n\t\t\t\t\t\tkeys.push(key);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tkeys = Object.keys(object)\n\t\t\t}\n\t\t\tlet length = keys.length\n\t\t\tif (length < 0x10) {\n\t\t\t\ttarget[position++] = 0x80 | length\n\t\t\t} else if (length < 0x10000) {\n\t\t\t\ttarget[position++] = 0xde\n\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t} else {\n\t\t\t\ttarget[position++] = 0xdf\n\t\t\t\ttargetView.setUint32(position, length)\n\t\t\t\tposition += 4\n\t\t\t}\n\t\t\tlet key\n\t\t\tif (this.coercibleKeyAsNumber) {\n\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\tkey = keys[i]\n\t\t\t\t\tlet num = Number(key)\n\t\t\t\t\tpack(isNaN(num) ? key : num)\n\t\t\t\t\tpack(object[key])\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\tpack(key = keys[i])\n\t\t\t\t\tpack(object[key])\n\t\t\t\t}\n\t\t\t}\n\t\t} :\n\t\t(object) => {\n\t\t\ttarget[position++] = 0xde // always using map 16, so we can preallocate and set the length afterwards\n\t\t\tlet objectOffset = position - start\n\t\t\tposition += 2\n\t\t\tlet size = 0\n\t\t\tfor (let key in object) {\n\t\t\t\tif (typeof object.hasOwnProperty !== 'function' || object.hasOwnProperty(key)) {\n\t\t\t\t\tpack(key)\n\t\t\t\t\tpack(object[key])\n\t\t\t\t\tsize++\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (size > 0xffff) {\n\t\t\t\tthrow new Error('Object is too large to serialize with fast 16-bit map size,' +\n\t\t\t\t' use the \"variableMapSize\" option to serialize this object');\n\t\t\t}\n\t\t\ttarget[objectOffset++ + start] = size >> 8\n\t\t\ttarget[objectOffset + start] = size & 0xff\n\t\t}\n\n\t\tconst writeRecord = this.useRecords === false ? writePlainObject :\n\t\t(options.progressiveRecords && !useTwoByteRecords) ?  // this is about 2% faster for highly stable structures, since it only requires one for-in loop (but much more expensive when new structure needs to be written)\n\t\t(object) => {\n\t\t\tlet nextTransition, transition = structures.transitions || (structures.transitions = Object.create(null))\n\t\t\tlet objectOffset = position++ - start\n\t\t\tlet wroteKeys\n\t\t\tfor (let key in object) {\n\t\t\t\tif (typeof object.hasOwnProperty !== 'function' || object.hasOwnProperty(key)) {\n\t\t\t\t\tnextTransition = transition[key]\n\t\t\t\t\tif (nextTransition)\n\t\t\t\t\t\ttransition = nextTransition\n\t\t\t\t\telse {\n\t\t\t\t\t\t// record doesn't exist, create full new record and insert it\n\t\t\t\t\t\tlet keys = Object.keys(object)\n\t\t\t\t\t\tlet lastTransition = transition\n\t\t\t\t\t\ttransition = structures.transitions\n\t\t\t\t\t\tlet newTransitions = 0\n\t\t\t\t\t\tfor (let i = 0, l = keys.length; i < l; i++) {\n\t\t\t\t\t\t\tlet key = keys[i]\n\t\t\t\t\t\t\tnextTransition = transition[key]\n\t\t\t\t\t\t\tif (!nextTransition) {\n\t\t\t\t\t\t\t\tnextTransition = transition[key] = Object.create(null)\n\t\t\t\t\t\t\t\tnewTransitions++\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransition = nextTransition\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (objectOffset + start + 1 == position) {\n\t\t\t\t\t\t\t// first key, so we don't need to insert, we can just write record directly\n\t\t\t\t\t\t\tposition--\n\t\t\t\t\t\t\tnewRecord(transition, keys, newTransitions)\n\t\t\t\t\t\t} else // otherwise we need to insert the record, moving existing data after the record\n\t\t\t\t\t\t\tinsertNewRecord(transition, keys, objectOffset, newTransitions)\n\t\t\t\t\t\twroteKeys = true\n\t\t\t\t\t\ttransition = lastTransition[key]\n\t\t\t\t\t}\n\t\t\t\t\tpack(object[key])\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!wroteKeys) {\n\t\t\t\tlet recordId = transition[RECORD_SYMBOL]\n\t\t\t\tif (recordId)\n\t\t\t\t\ttarget[objectOffset + start] = recordId\n\t\t\t\telse\n\t\t\t\t\tinsertNewRecord(transition, Object.keys(object), objectOffset, 0)\n\t\t\t}\n\t\t} :\n\t\t(object) => {\n\t\t\tlet nextTransition, transition = structures.transitions || (structures.transitions = Object.create(null))\n\t\t\tlet newTransitions = 0\n\t\t\tfor (let key in object) if (typeof object.hasOwnProperty !== 'function' || object.hasOwnProperty(key)) {\n\t\t\t\tnextTransition = transition[key]\n\t\t\t\tif (!nextTransition) {\n\t\t\t\t\tnextTransition = transition[key] = Object.create(null)\n\t\t\t\t\tnewTransitions++\n\t\t\t\t}\n\t\t\t\ttransition = nextTransition\n\t\t\t}\n\t\t\tlet recordId = transition[RECORD_SYMBOL]\n\t\t\tif (recordId) {\n\t\t\t\tif (recordId >= 0x60 && useTwoByteRecords) {\n\t\t\t\t\ttarget[position++] = ((recordId -= 0x60) & 0x1f) + 0x60\n\t\t\t\t\ttarget[position++] = recordId >> 5\n\t\t\t\t} else\n\t\t\t\t\ttarget[position++] = recordId\n\t\t\t} else {\n\t\t\t\tnewRecord(transition, transition.__keys__ || Object.keys(object), newTransitions)\n\t\t\t}\n\t\t\t// now write the values\n\t\t\tfor (let key in object)\n\t\t\t\tif (typeof object.hasOwnProperty !== 'function' || object.hasOwnProperty(key)) {\n\t\t\t\t\tpack(object[key])\n\t\t\t\t}\n\t\t}\n\n\t\t// create reference to useRecords if useRecords is a function\n\t\tconst checkUseRecords = typeof this.useRecords == 'function' && this.useRecords;\n\n\t\tconst writeObject = checkUseRecords ? (object) => {\n\t\t\tcheckUseRecords(object) ? writeRecord(object) : writePlainObject(object)\n\t\t} : writeRecord\n\n\t\tconst makeRoom = (end) => {\n\t\t\tlet newSize\n\t\t\tif (end > 0x1000000) {\n\t\t\t\t// special handling for really large buffers\n\t\t\t\tif ((end - start) > MAX_BUFFER_SIZE)\n\t\t\t\t\tthrow new Error('Packed buffer would be larger than maximum buffer size')\n\t\t\t\tnewSize = Math.min(MAX_BUFFER_SIZE,\n\t\t\t\t\tMath.round(Math.max((end - start) * (end > 0x4000000 ? 1.25 : 2), 0x400000) / 0x1000) * 0x1000)\n\t\t\t} else // faster handling for smaller buffers\n\t\t\t\tnewSize = ((Math.max((end - start) << 2, target.length - 1) >> 12) + 1) << 12\n\t\t\tlet newBuffer = new ByteArrayAllocate(newSize)\n\t\t\ttargetView = newBuffer.dataView || (newBuffer.dataView = new DataView(newBuffer.buffer, 0, newSize))\n\t\t\tend = Math.min(end, target.length)\n\t\t\tif (target.copy)\n\t\t\t\ttarget.copy(newBuffer, 0, start, end)\n\t\t\telse\n\t\t\t\tnewBuffer.set(target.slice(start, end))\n\t\t\tposition -= start\n\t\t\tstart = 0\n\t\t\tsafeEnd = newBuffer.length - 10\n\t\t\treturn target = newBuffer\n\t\t}\n\t\tconst newRecord = (transition, keys, newTransitions) => {\n\t\t\tlet recordId = structures.nextId\n\t\t\tif (!recordId)\n\t\t\t\trecordId = 0x40\n\t\t\tif (recordId < sharedLimitId && this.shouldShareStructure && !this.shouldShareStructure(keys)) {\n\t\t\t\trecordId = structures.nextOwnId\n\t\t\t\tif (!(recordId < maxStructureId))\n\t\t\t\t\trecordId = sharedLimitId\n\t\t\t\tstructures.nextOwnId = recordId + 1\n\t\t\t} else {\n\t\t\t\tif (recordId >= maxStructureId)// cycle back around\n\t\t\t\t\trecordId = sharedLimitId\n\t\t\t\tstructures.nextId = recordId + 1\n\t\t\t}\n\t\t\tlet highByte = keys.highByte = recordId >= 0x60 && useTwoByteRecords ? (recordId - 0x60) >> 5 : -1\n\t\t\ttransition[RECORD_SYMBOL] = recordId\n\t\t\ttransition.__keys__ = keys\n\t\t\tstructures[recordId - 0x40] = keys\n\n\t\t\tif (recordId < sharedLimitId) {\n\t\t\t\tkeys.isShared = true\n\t\t\t\tstructures.sharedLength = recordId - 0x3f\n\t\t\t\thasSharedUpdate = true\n\t\t\t\tif (highByte >= 0) {\n\t\t\t\t\ttarget[position++] = (recordId & 0x1f) + 0x60\n\t\t\t\t\ttarget[position++] = highByte\n\t\t\t\t} else {\n\t\t\t\t\ttarget[position++] = recordId\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (highByte >= 0) {\n\t\t\t\t\ttarget[position++] = 0xd5 // fixext 2\n\t\t\t\t\ttarget[position++] = 0x72 // \"r\" record defintion extension type\n\t\t\t\t\ttarget[position++] = (recordId & 0x1f) + 0x60\n\t\t\t\t\ttarget[position++] = highByte\n\t\t\t\t} else {\n\t\t\t\t\ttarget[position++] = 0xd4 // fixext 1\n\t\t\t\t\ttarget[position++] = 0x72 // \"r\" record defintion extension type\n\t\t\t\t\ttarget[position++] = recordId\n\t\t\t\t}\n\n\t\t\t\tif (newTransitions)\n\t\t\t\t\ttransitionsCount += serializationsSinceTransitionRebuild * newTransitions\n\t\t\t\t// record the removal of the id, we can maintain our shared structure\n\t\t\t\tif (recordIdsToRemove.length >= maxOwnStructures)\n\t\t\t\t\trecordIdsToRemove.shift()[RECORD_SYMBOL] = 0 // we are cycling back through, and have to remove old ones\n\t\t\t\trecordIdsToRemove.push(transition)\n\t\t\t\tpack(keys)\n\t\t\t}\n\t\t}\n\t\tconst insertNewRecord = (transition, keys, insertionOffset, newTransitions) => {\n\t\t\tlet mainTarget = target\n\t\t\tlet mainPosition = position\n\t\t\tlet mainSafeEnd = safeEnd\n\t\t\tlet mainStart = start\n\t\t\ttarget = keysTarget\n\t\t\tposition = 0\n\t\t\tstart = 0\n\t\t\tif (!target)\n\t\t\t\tkeysTarget = target = new ByteArrayAllocate(8192)\n\t\t\tsafeEnd = target.length - 10\n\t\t\tnewRecord(transition, keys, newTransitions)\n\t\t\tkeysTarget = target\n\t\t\tlet keysPosition = position\n\t\t\ttarget = mainTarget\n\t\t\tposition = mainPosition\n\t\t\tsafeEnd = mainSafeEnd\n\t\t\tstart = mainStart\n\t\t\tif (keysPosition > 1) {\n\t\t\t\tlet newEnd = position + keysPosition - 1\n\t\t\t\tif (newEnd > safeEnd)\n\t\t\t\t\tmakeRoom(newEnd)\n\t\t\t\tlet insertionPosition = insertionOffset + start\n\t\t\t\ttarget.copyWithin(insertionPosition + keysPosition, insertionPosition + 1, position)\n\t\t\t\ttarget.set(keysTarget.slice(0, keysPosition), insertionPosition)\n\t\t\t\tposition = newEnd\n\t\t\t} else {\n\t\t\t\ttarget[insertionOffset + start] = keysTarget[0]\n\t\t\t}\n\t\t}\n\t\tconst writeStruct = (object) => {\n\t\t\tlet newPosition = writeStructSlots(object, target, start, position, structures, makeRoom, (value, newPosition, notifySharedUpdate) => {\n\t\t\t\tif (notifySharedUpdate)\n\t\t\t\t\treturn hasSharedUpdate = true;\n\t\t\t\tposition = newPosition;\n\t\t\t\tlet startTarget = target;\n\t\t\t\tpack(value);\n\t\t\t\tresetStructures();\n\t\t\t\tif (startTarget !== target) {\n\t\t\t\t\treturn { position, targetView, target }; // indicate the buffer was re-allocated\n\t\t\t\t}\n\t\t\t\treturn position;\n\t\t\t}, this);\n\t\t\tif (newPosition === 0) // bail and go to a msgpack object\n\t\t\t\treturn writeObject(object);\n\t\t\tposition = newPosition;\n\t\t}\n\t}\n\tuseBuffer(buffer) {\n\t\t// this means we are finished using our own buffer and we can write over it safely\n\t\ttarget = buffer\n\t\ttarget.dataView || (target.dataView = new DataView(target.buffer, target.byteOffset, target.byteLength))\n\t\ttargetView = target.dataView;\n\t\tposition = 0\n\t}\n\tset position (value) {\n\t\tposition = value;\n\t}\n\tget position() {\n\t\treturn position;\n\t}\n\tclearSharedData() {\n\t\tif (this.structures)\n\t\t\tthis.structures = []\n\t\tif (this.typedStructs)\n\t\t\tthis.typedStructs = []\n\t}\n}\n\nextensionClasses = [ Date, Set, Error, RegExp, ArrayBuffer, Object.getPrototypeOf(Uint8Array.prototype).constructor /*TypedArray*/, DataView, C1Type ]\nextensions = [{\n\tpack(date, allocateForWrite, pack) {\n\t\tlet seconds = date.getTime() / 1000\n\t\tif ((this.useTimestamp32 || date.getMilliseconds() === 0) && seconds >= 0 && seconds < 0x100000000) {\n\t\t\t// Timestamp 32\n\t\t\tlet { target, targetView, position} = allocateForWrite(6)\n\t\t\ttarget[position++] = 0xd6\n\t\t\ttarget[position++] = 0xff\n\t\t\ttargetView.setUint32(position, seconds)\n\t\t} else if (seconds > 0 && seconds < 0x100000000) {\n\t\t\t// Timestamp 64\n\t\t\tlet { target, targetView, position} = allocateForWrite(10)\n\t\t\ttarget[position++] = 0xd7\n\t\t\ttarget[position++] = 0xff\n\t\t\ttargetView.setUint32(position, date.getMilliseconds() * 4000000 + ((seconds / 1000 / 0x100000000) >> 0))\n\t\t\ttargetView.setUint32(position + 4, seconds)\n\t\t} else if (isNaN(seconds)) {\n\t\t\tif (this.onInvalidDate) {\n\t\t\t\tallocateForWrite(0)\n\t\t\t\treturn pack(this.onInvalidDate())\n\t\t\t}\n\t\t\t// Intentionally invalid timestamp\n\t\t\tlet { target, targetView, position} = allocateForWrite(3)\n\t\t\ttarget[position++] = 0xd4\n\t\t\ttarget[position++] = 0xff\n\t\t\ttarget[position++] = 0xff\n\t\t} else {\n\t\t\t// Timestamp 96\n\t\t\tlet { target, targetView, position} = allocateForWrite(15)\n\t\t\ttarget[position++] = 0xc7\n\t\t\ttarget[position++] = 12\n\t\t\ttarget[position++] = 0xff\n\t\t\ttargetView.setUint32(position, date.getMilliseconds() * 1000000)\n\t\t\ttargetView.setBigInt64(position + 4, BigInt(Math.floor(seconds)))\n\t\t}\n\t}\n}, {\n\tpack(set, allocateForWrite, pack) {\n\t\tif (this.setAsEmptyObject) {\n\t\t\tallocateForWrite(0);\n\t\t\treturn pack({})\n\t\t}\n\t\tlet array = Array.from(set)\n\t\tlet { target, position} = allocateForWrite(this.moreTypes ? 3 : 0)\n\t\tif (this.moreTypes) {\n\t\t\ttarget[position++] = 0xd4\n\t\t\ttarget[position++] = 0x73 // 's' for Set\n\t\t\ttarget[position++] = 0\n\t\t}\n\t\tpack(array)\n\t}\n}, {\n\tpack(error, allocateForWrite, pack) {\n\t\tlet { target, position} = allocateForWrite(this.moreTypes ? 3 : 0)\n\t\tif (this.moreTypes) {\n\t\t\ttarget[position++] = 0xd4\n\t\t\ttarget[position++] = 0x65 // 'e' for error\n\t\t\ttarget[position++] = 0\n\t\t}\n\t\tpack([ error.name, error.message, error.cause ])\n\t}\n}, {\n\tpack(regex, allocateForWrite, pack) {\n\t\tlet { target, position} = allocateForWrite(this.moreTypes ? 3 : 0)\n\t\tif (this.moreTypes) {\n\t\t\ttarget[position++] = 0xd4\n\t\t\ttarget[position++] = 0x78 // 'x' for regeXp\n\t\t\ttarget[position++] = 0\n\t\t}\n\t\tpack([ regex.source, regex.flags ])\n\t}\n}, {\n\tpack(arrayBuffer, allocateForWrite) {\n\t\tif (this.moreTypes)\n\t\t\twriteExtBuffer(arrayBuffer, 0x10, allocateForWrite)\n\t\telse\n\t\t\twriteBuffer(hasNodeBuffer ? Buffer.from(arrayBuffer) : new Uint8Array(arrayBuffer), allocateForWrite)\n\t}\n}, {\n\tpack(typedArray, allocateForWrite) {\n\t\tlet constructor = typedArray.constructor\n\t\tif (constructor !== ByteArray && this.moreTypes)\n\t\t\twriteExtBuffer(typedArray, typedArrays.indexOf(constructor.name), allocateForWrite)\n\t\telse\n\t\t\twriteBuffer(typedArray, allocateForWrite)\n\t}\n}, {\n\tpack(arrayBuffer, allocateForWrite) {\n\t\tif (this.moreTypes)\n\t\t\twriteExtBuffer(arrayBuffer, 0x11, allocateForWrite)\n\t\telse\n\t\t\twriteBuffer(hasNodeBuffer ? Buffer.from(arrayBuffer) : new Uint8Array(arrayBuffer), allocateForWrite)\n\t}\n}, {\n\tpack(c1, allocateForWrite) { // specific 0xC1 object\n\t\tlet { target, position} = allocateForWrite(1)\n\t\ttarget[position] = 0xc1\n\t}\n}]\n\nfunction writeExtBuffer(typedArray, type, allocateForWrite, encode) {\n\tlet length = typedArray.byteLength\n\tif (length + 1 < 0x100) {\n\t\tvar { target, position } = allocateForWrite(4 + length)\n\t\ttarget[position++] = 0xc7\n\t\ttarget[position++] = length + 1\n\t} else if (length + 1 < 0x10000) {\n\t\tvar { target, position } = allocateForWrite(5 + length)\n\t\ttarget[position++] = 0xc8\n\t\ttarget[position++] = (length + 1) >> 8\n\t\ttarget[position++] = (length + 1) & 0xff\n\t} else {\n\t\tvar { target, position, targetView } = allocateForWrite(7 + length)\n\t\ttarget[position++] = 0xc9\n\t\ttargetView.setUint32(position, length + 1) // plus one for the type byte\n\t\tposition += 4\n\t}\n\ttarget[position++] = 0x74 // \"t\" for typed array\n\ttarget[position++] = type\n\tif (!typedArray.buffer) typedArray = new Uint8Array(typedArray)\n\ttarget.set(new Uint8Array(typedArray.buffer, typedArray.byteOffset, typedArray.byteLength), position)\n}\nfunction writeBuffer(buffer, allocateForWrite) {\n\tlet length = buffer.byteLength\n\tvar target, position\n\tif (length < 0x100) {\n\t\tvar { target, position } = allocateForWrite(length + 2)\n\t\ttarget[position++] = 0xc4\n\t\ttarget[position++] = length\n\t} else if (length < 0x10000) {\n\t\tvar { target, position } = allocateForWrite(length + 3)\n\t\ttarget[position++] = 0xc5\n\t\ttarget[position++] = length >> 8\n\t\ttarget[position++] = length & 0xff\n\t} else {\n\t\tvar { target, position, targetView } = allocateForWrite(length + 5)\n\t\ttarget[position++] = 0xc6\n\t\ttargetView.setUint32(position, length)\n\t\tposition += 4\n\t}\n\ttarget.set(buffer, position)\n}\n\nfunction writeExtensionData(result, target, position, type) {\n\tlet length = result.length\n\tswitch (length) {\n\t\tcase 1:\n\t\t\ttarget[position++] = 0xd4\n\t\t\tbreak\n\t\tcase 2:\n\t\t\ttarget[position++] = 0xd5\n\t\t\tbreak\n\t\tcase 4:\n\t\t\ttarget[position++] = 0xd6\n\t\t\tbreak\n\t\tcase 8:\n\t\t\ttarget[position++] = 0xd7\n\t\t\tbreak\n\t\tcase 16:\n\t\t\ttarget[position++] = 0xd8\n\t\t\tbreak\n\t\tdefault:\n\t\t\tif (length < 0x100) {\n\t\t\t\ttarget[position++] = 0xc7\n\t\t\t\ttarget[position++] = length\n\t\t\t} else if (length < 0x10000) {\n\t\t\t\ttarget[position++] = 0xc8\n\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t} else {\n\t\t\t\ttarget[position++] = 0xc9\n\t\t\t\ttarget[position++] = length >> 24\n\t\t\t\ttarget[position++] = (length >> 16) & 0xff\n\t\t\t\ttarget[position++] = (length >> 8) & 0xff\n\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t}\n\t}\n\ttarget[position++] = type\n\ttarget.set(result, position)\n\tposition += length\n\treturn position\n}\n\nfunction insertIds(serialized, idsToInsert) {\n\t// insert the ids that need to be referenced for structured clones\n\tlet nextId\n\tlet distanceToMove = idsToInsert.length * 6\n\tlet lastEnd = serialized.length - distanceToMove\n\twhile (nextId = idsToInsert.pop()) {\n\t\tlet offset = nextId.offset\n\t\tlet id = nextId.id\n\t\tserialized.copyWithin(offset + distanceToMove, offset, lastEnd)\n\t\tdistanceToMove -= 6\n\t\tlet position = offset + distanceToMove\n\t\tserialized[position++] = 0xd6\n\t\tserialized[position++] = 0x69 // 'i'\n\t\tserialized[position++] = id >> 24\n\t\tserialized[position++] = (id >> 16) & 0xff\n\t\tserialized[position++] = (id >> 8) & 0xff\n\t\tserialized[position++] = id & 0xff\n\t\tlastEnd = offset\n\t}\n\treturn serialized\n}\n\nfunction writeBundles(start, pack, incrementPosition) {\n\tif (bundledStrings.length > 0) {\n\t\ttargetView.setUint32(bundledStrings.position + start, position + incrementPosition - bundledStrings.position - start)\n\t\tbundledStrings.stringsPosition = position - start;\n\t\tlet writeStrings = bundledStrings\n\t\tbundledStrings = null\n\t\tpack(writeStrings[0])\n\t\tpack(writeStrings[1])\n\t}\n}\n\nexport function addExtension(extension) {\n\tif (extension.Class) {\n\t\tif (!extension.pack && !extension.write)\n\t\t\tthrow new Error('Extension has no pack or write function')\n\t\tif (extension.pack && !extension.type)\n\t\t\tthrow new Error('Extension has no type (numeric code to identify the extension)')\n\t\textensionClasses.unshift(extension.Class)\n\t\textensions.unshift(extension)\n\t}\n\tunpackAddExtension(extension)\n}\nfunction prepareStructures(structures, packr) {\n\tstructures.isCompatible = (existingStructures) => {\n\t\tlet compatible = !existingStructures || ((packr.lastNamedStructuresLength || 0) === existingStructures.length)\n\t\tif (!compatible) // we want to merge these existing structures immediately since we already have it and we are in the right transaction\n\t\t\tpackr._mergeStructures(existingStructures);\n\t\treturn compatible;\n\t}\n\treturn structures\n}\nexport function setWriteStructSlots(writeSlots, makeStructures) {\n\twriteStructSlots = writeSlots;\n\tprepareStructures = makeStructures;\n}\n\nlet defaultPackr = new Packr({ useRecords: false })\nexport const pack = defaultPackr.pack\nexport const encode = defaultPackr.pack\nexport const Encoder = Packr\nexport { FLOAT32_OPTIONS } from './unpack.js'\nimport { FLOAT32_OPTIONS } from './unpack.js'\nexport const { NEVER, ALWAYS, DECIMAL_ROUND, DECIMAL_FIT } = FLOAT32_OPTIONS\nexport const REUSE_BUFFER_MODE = 512\nexport const RESET_BUFFER_MODE = 1024\nexport const RESERVE_START_SPACE = 2048\n", "/**\n * Checks if a value is a plain object (e.g., created with `{}` or `Object`).\n *\n * ### Example\n *\n * ```ts\n * isPlainObject({}); // true\n * isPlainObject(new Date()); // false\n * isPlainObject([]); // false\n * isPlainObject(null); // false\n * ```\n */\nexport const isPlainObject = (value) => Object.prototype.toString.call(value) === \"[object Object]\";\n/**\n * Like `Object.entries` but preserves branded keys.\n *\n * ### Example\n *\n * ```ts\n * type UserId = string & { readonly __brand: \"UserId\" };\n * const users = createRecord<UserId, string>();\n * const entries = objectToEntries(users); // [UserId, string][]\n * ```\n */\nexport const objectToEntries = (record) => Object.entries(record);\n/**\n * Maps a `ReadonlyRecord<K, V>` to a new `ReadonlyRecord<K, U>`, preserving\n * branded key types (e.g., `type Id = 'id' & string`) lost by `Object.entries`.\n * Uses `K extends string` for precision.\n */\nexport const mapObject = (record, fn) => Object.fromEntries(Object.entries(record).map(([key, value]) => [\n    key,\n    fn(value, key),\n]));\n/** Conditionally excludes a property from an object. */\nexport const excludeProp = (obj, prop, condition) => {\n    if (condition) {\n        return { ...obj };\n    }\n    const { [prop]: _, ...rest } = obj;\n    return rest;\n};\n/**\n * Creates a prototype-less object typed as `Record<K, V>`.\n *\n * Use this function when you need a plain record without a prototype chain\n * (e.g. when keys are controlled by external sources) to avoid prototype\n * pollution and accidental collisions with properties like `__proto__`.\n *\n * Example:\n *\n * ```ts\n * const values = createRecord<string, SqliteValue>();\n * values[\"__proto__\"] = someValue; // safe, no prototype pollution\n * ```\n */\nexport const createRecord = () => Object.create(null);\n/**\n * Safely gets a property from a record, returning `undefined` if the key\n * doesn't exist.\n *\n * TypeScript's `Record<K, V>` type assumes all keys exist, but at runtime\n * accessing a non-existent key returns `undefined`. This helper provides proper\n * typing for that case without needing a type assertion.\n *\n * ### Example\n *\n * ```ts\n * const users: Record<string, User> = { alice: { name: \"Alice\" } };\n * const user = getProperty(users, \"bob\"); // User | undefined\n * ```\n */\nexport const getProperty = (record, key) => (key in record ? record[key] : undefined);\n", "/** Detects if the code is running in React Native environment. */\nexport const isReactNative = typeof navigator !== \"undefined\" &&\n    \"product\" in navigator &&\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    navigator.product === \"ReactNative\";\n/**\n * Detects if Node.js Buffer is available and should be used.\n *\n * React Native apps often polyfill Node.js APIs like Buffer, but we want to use\n * native methods when available for better performance.\n *\n * Returns false in React Native even if Buffer is polyfilled, as we prefer\n * native methods in that environment.\n *\n * @see https://github.com/craftzdog/react-native-quick-base64#installation\n */\nexport const hasNodeBuffer = !isReactNative && typeof globalThis.Buffer !== \"undefined\";\n", "export function ok(value = undefined) {\n    return { ok: true, value: value };\n}\n/**\n * Creates an {@link Err} result.\n *\n * ### Example\n *\n * ```ts\n * const failure = err(\"Something went wrong\");\n * console.log(failure); // { ok: false, error: \"Something went wrong\" }\n * ```\n */\nexport const err = (error) => ({ ok: false, error });\n/**\n * Extracts the value from a {@link Result} if it is an `Ok`, or throws an error\n * if it is an `Err`.\n *\n * **Intended usage:**\n *\n * - For critical code paths (e.g., app startup, config values) where failure\n *   should crash the app.\n * - Not recommended for general error handling in application logicprefer\n *   explicit checks.\n *\n * ### Example\n *\n * ```ts\n * // At app startup, crash if config is invalid:\n * const config = getOrThrow(loadConfig());\n * // Safe to use config here\n * ```\n *\n * Throws: `Error` with the original error attached as `cause`.\n */\nexport const getOrThrow = (result) => {\n    if (result.ok) {\n        return result.value;\n    }\n    else {\n        throw new Error(\"getOrThrow\", { cause: result.error });\n    }\n};\n/**\n * Extracts the value from a {@link Result} if it is an `Ok`, or returns `null`\n * if it is an `Err`.\n *\n * **Intended usage:**\n *\n * - When you need to convert a `Result` to a nullable value for APIs that expect\n *   `T | null`.\n * - When the error is not important and you just want the value or nothing.\n *\n * ### Example\n *\n * ```ts\n * const parseResult = parseJson('{\"key\": \"value\"}');\n * const value = getOrNull(parseResult);\n * // value is unknown | null\n *\n * if (value != null) {\n *   console.log(\"Parsed value:\", value);\n * }\n * ```\n */\nexport const getOrNull = (result) => result.ok ? result.value : null;\n/**\n * Wraps synchronous functions that may throw exceptions, returning a\n * {@link Result}.\n *\n * The `trySync` function is designed to handle synchronous code safely by\n * wrapping the execution in a try-catch block. If the function succeeds, it\n * returns an `Ok` result. If an exception is thrown, it maps the error to a\n * custom type and returns an `Err` result.\n *\n * ### Example\n *\n * ```ts\n * interface ParseJsonError {\n *   readonly type: \"ParseJsonError\";\n *   readonly message: string;\n * }\n *\n * const parseJson = (value: string): Result<unknown, ParseJsonError> =>\n *   trySync(\n *     () => JSON.parse(value) as unknown,\n *     (error): ParseJsonError => ({\n *       type: \"ParseJsonError\",\n *       message: String(error),\n *     }),\n *   );\n * ```\n */\nexport const trySync = (fn, mapError) => {\n    try {\n        return ok(fn());\n    }\n    catch (error) {\n        return err(mapError(error));\n    }\n};\n/**\n * Wraps async functions or any operation returning a promise, returning a\n * {@link Result}.\n *\n * The `tryAsync` function provides a way to handle asynchronous code safely by\n * catching any rejected promises and mapping errors to a custom type. If the\n * promise resolves, it returns an `Ok` result. If the promise rejects, it maps\n * the error and returns an `Err` result.\n *\n * ### Example\n *\n * ```ts\n * interface FetchError {\n *   readonly type: \"FetchError\";\n *   readonly message: string;\n * }\n *\n * const tryFetch = async (\n *   url: string,\n * ): Promise<Result<unknown, FetchError>> =>\n *   tryAsync(\n *     async () => {\n *       const response = await fetch(url);\n *       if (!response.ok) {\n *         throw new Error(`Request failed with status ${response.status}`);\n *       }\n *       return response.json();\n *     },\n *     (error) => ({\n *       type: \"FetchError\",\n *       message: String(error),\n *     }),\n *   );\n *\n * const result = await tryFetch(\n *   \"https://jsonplaceholder.typicode.com/posts/1\",\n * );\n * if (result.ok) {\n *   console.log(\"Data:\", result.value);\n * } else {\n *   console.error(\"Error:\", result.error);\n * }\n * ```\n */\nexport const tryAsync = async (promiseFn, mapError) => promiseFn().then((value) => ok(value), (error) => err(mapError(error)));\n", "export const safelyStringifyUnknownValue = (value) => {\n    if (value === null)\n        return \"null\";\n    if (value === undefined)\n        return \"undefined\";\n    if (typeof value === \"string\")\n        return `\"${value}\"`;\n    try {\n        return JSON.stringify(value);\n    }\n    catch {\n        return globalThis.String(value);\n    }\n};\n", "import { utf8ToBytes } from \"@noble/ciphers/utils.js\";\nimport { sha256 } from \"@noble/hashes/sha2.js\";\nimport * as bip39 from \"@scure/bip39\";\nimport { wordlist } from \"@scure/bip39/wordlists/english.js\";\nimport { pack } from \"msgpackr\";\nimport { isPlainObject } from \"./Object.js\";\nimport { hasNodeBuffer } from \"./Platform.js\";\nimport { err, getOrNull, getOrThrow, ok, trySync } from \"./Result.js\";\nimport { safelyStringifyUnknownValue } from \"./String.js\";\nconst EvoluTypeSymbol = Symbol(\"evolu.Type\");\n/**\n * Checks if the given value is an {@link Type}.\n *\n * @category Utilities\n */\nexport const isType = (value) => typeof value === \"object\" && value !== null && EvoluTypeSymbol in value;\nconst createType = (name, definition) => ({\n    ...definition,\n    name,\n    is: (value) => definition.fromUnknown(value).ok,\n    from: definition.fromUnknown,\n    orThrow: (value) => getOrThrow(definition.fromUnknown(value)),\n    orNull: (value) => getOrNull(definition.fromUnknown(value)),\n    [EvoluTypeSymbol]: true,\n    Type: undefined,\n    Input: undefined,\n    Error: undefined,\n    Parent: undefined,\n    ParentError: undefined,\n    Errors: undefined,\n    \"~standard\": {\n        version: 1,\n        vendor: \"evolu\",\n        validate: (value) => {\n            const result = definition.fromUnknown(value);\n            if (result.ok) {\n                return { value: result.value };\n            }\n            cachedStandardSchemaFormatTypeError ??= createFormatTypeError();\n            return {\n                issues: typeErrorToStandardSchemaIssues(result.error, cachedStandardSchemaFormatTypeError),\n            };\n        },\n        types: {\n            input: undefined,\n            output: undefined,\n        },\n    },\n});\n/**\n * Creates a formatter function for {@link TypeError}.\n *\n * The formatter generates human-readable error messages using a custom\n * formatting function and a safely stringified error value.\n *\n * ### Example\n *\n * ```ts\n * const formatStringError = createTypeErrorFormatter<StringError>(\n *   (value) => `A value ${value} is not a string.`,\n * );\n * ```\n *\n * @category Utilities\n */\nexport const createTypeErrorFormatter = (format) => (error) => format({ ...error, value: safelyStringifyUnknownValue(error.value) });\n/**\n * Base {@link Type}.\n *\n * A Base Type validates that a value conforms to a specific TypeScript type.\n *\n * ### Example\n *\n * ```ts\n * const String = base(\"String\", (value) =>\n *   typeof value === \"string\"\n *     ? ok(value)\n *     : err<StringError>({ type: \"String\", value }),\n * );\n *\n * interface StringError extends TypeError<\"String\"> {}\n *\n * const formatStringError = createTypeErrorFormatter<StringError>(\n *   (error) => `A value ${error.value} is not a string`,\n * );\n * ```\n *\n * @category Base Factories\n */\nexport const base = (name, fromUnknown) => createType(name, {\n    fromUnknown,\n    fromParent: (ok), // `fromParent` relies on types, so it can't fail for the Base Type\n});\n/**\n * Creates a formatter function for a base {@link TypeError}.\n *\n * This formatter is specifically for Base Types that only need a simple error\n * message indicating that the value is not of the expected type.\n *\n * ### Example\n *\n * ```ts\n * export const formatStringError =\n *   createBaseTypeErrorFormatter<StringError>();\n * ```\n *\n * @category Utilities\n */\nexport const createBaseTypeErrorFormatter = () => createTypeErrorFormatter((error) => `A value ${error.value} is not a ${error.type.toLowerCase()}.`);\n/** @category Base Types */\nexport const Unknown = base(\"Unknown\", ok);\n/**\n * @category Base Types\n * @category String\n */\nexport const String = base(\"String\", (value) => typeof value === \"string\"\n    ? ok(value)\n    : err({ type: \"String\", value }));\nexport const formatStringError = createBaseTypeErrorFormatter();\n/** @category Base Types */\nexport const Number = base(\"Number\", (value) => typeof value === \"number\"\n    ? ok(value)\n    : err({ type: \"Number\", value }));\nexport const formatNumberError = createBaseTypeErrorFormatter();\n/** @category Base Types */\nexport const BigInt = base(\"BigInt\", (value) => typeof value === \"bigint\"\n    ? ok(value)\n    : err({ type: \"BigInt\", value }));\nexport const formatBigIntError = createBaseTypeErrorFormatter();\n/** @category Base Types */\nexport const Boolean = base(\"Boolean\", (value) => typeof value === \"boolean\"\n    ? ok(value)\n    : err({ type: \"Boolean\", value }));\nexport const formatBooleanError = createBaseTypeErrorFormatter();\n/** @category Base Types */\nexport const Undefined = base(\"Undefined\", (value) => value === undefined\n    ? ok(value)\n    : err({ type: \"Undefined\", value }));\nexport const formatUndefinedError = createBaseTypeErrorFormatter();\n/** @category Base Types */\nexport const Null = base(\"Null\", (value) => value === null ? ok(value) : err({ type: \"Null\", value }));\nexport const formatNullError = createBaseTypeErrorFormatter();\n/** @category Base Types */\nexport const Function = base(\"Function\", (value) => typeof value === \"function\"\n    ? ok(value)\n    : err({ type: \"Function\", value }));\nexport const formatFunctionError = createBaseTypeErrorFormatter();\n/** @category Base Types */\nexport const Uint8Array = base(\"Uint8Array\", (value) => value instanceof globalThis.Uint8Array\n    ? ok(value)\n    : err({ type: \"Uint8Array\", value }));\nexport const formatUint8ArrayError = createBaseTypeErrorFormatter();\n/**\n * `instanceof` {@link Type}.\n *\n * Ensures that a value is an instance of the given class constructor.\n *\n * ### Example\n *\n * ```ts\n * class User {\n *   constructor(public name: string) {}\n * }\n *\n * const UserInstance = instanceOf(User);\n *\n * const result = UserInstance.from(new User(\"Alice\")); // ok\n * const error = UserInstance.from({}); // err\n * ```\n *\n * @category Base Factories\n */\nexport const instanceOf = (ctor) => ({\n    ...base(\"InstanceOf\", (value) => value instanceof ctor\n        ? ok(value)\n        : err({ type: \"InstanceOf\", value, ctor: ctor.name })),\n    ctor,\n});\nexport const formatInstanceOfError = createTypeErrorFormatter((error) => `The value ${error.value} is not an instance of ${error.ctor}.`);\n/**\n * JavaScript Date.\n *\n * @category Base Types\n */\nexport const Date = instanceOf(globalThis.Date);\n/**\n * Validates that an unknown value is an Evolu {@link Type} (i.e., satisfies\n * `AnyType`).\n *\n * ### Example\n *\n * ```ts\n * const result = EvoluType.from(String); // ok(String)\n * const error = EvoluType.from(\"not a Type\"); // err\n * ```\n */\n// TODO: Rename to TypeInstance or something like that.\nexport const EvoluType = base(\"EvoluType\", (value) => isType(value)\n    ? ok(value)\n    : err({\n        type: \"EvoluType\",\n        value,\n    }));\nexport const formatIsTypeError = createTypeErrorFormatter((error) => `Value ${error.value} is not a valid Evolu Type.`);\nexport function brand(name, parent, refine) {\n    const fromUnknown = refine\n        ? (value) => {\n            const parentResult = parent.fromUnknown(value);\n            if (!parentResult.ok)\n                return parentResult;\n            return refine(parentResult.value);\n        }\n        : (value) => {\n            const parentResult = parent.fromUnknown(value);\n            if (!parentResult.ok)\n                return err({\n                    type: name,\n                    value,\n                    parentError: parentResult.error,\n                });\n            return ok(parentResult.value);\n        };\n    return {\n        ...createType(\"Brand\", {\n            fromUnknown,\n            fromParent: (refine ?? ok),\n        }),\n        brand: name,\n        parentType: parent,\n    };\n}\n/**\n * A three-letter ISO 4217 currency code (e.g., USD, EUR).\n *\n * @category String\n */\nexport const CurrencyCode = brand(\"CurrencyCode\", String, (value) => /^[A-Z]{3}$/.test(value)\n    ? ok(value)\n    : err({ type: \"CurrencyCode\", value }));\nexport const formatCurrencyCodeError = createTypeErrorFormatter((error) => `Invalid currency code: ${error.value}.`);\n/**\n * ISO 8601 date-time string.\n *\n * This {@link Type} represents a date-time string that follows the ISO 8601\n * format and is compatible with SQLite, which lacks a native date type and\n * relies on ISO 8601 strings for sorting. Enforcing a 24-character format\n * ensures correct lexicographic ordering.\n *\n * It must be a valid JavaScript Date string that can be parsed.\n *\n * Valid range: `\"0000-01-01T00:00:00.000Z\"` to `\"9999-12-31T23:59:59.999Z\"`.\n *\n * ### Example\n *\n * ```ts\n * const result = DateIso.from(\"2023-01-01T12:00:00.000Z\"); // ok\n * const error = DateIso.from(\"10000-01-01T00:00:00.000Z\"); // err\n * ```\n *\n * @category String\n */\nexport const DateIso = brand(\"DateIso\", String, (value) => {\n    if (value.length !== 24) {\n        return err({ type: \"DateIso\", value });\n    }\n    const parsed = globalThis.Date.parse(value);\n    if (isNaN(parsed)) {\n        return err({ type: \"DateIso\", value });\n    }\n    // Round-trip test: ensure the string is actually a proper ISO format\n    const roundTrip = new globalThis.Date(parsed).toISOString();\n    if (roundTrip !== value) {\n        return err({ type: \"DateIso\", value });\n    }\n    return ok(value);\n});\nexport const formatDateIsoError = createTypeErrorFormatter((error) => `The value ${error.value} is not a valid ISO 8601 date string.`);\nexport const dateToDateIso = (value) => DateIso.fromParent(value.toISOString());\nexport const dateIsoToDate = (value) => new globalThis.Date(value);\n/**\n * Trimmed string.\n *\n * This Type Factory validates whether a string has no leading or trailing\n * whitespaces.\n *\n * ### Example\n *\n * ```ts\n * const TrimmedNonEmptyString = trimmed(minLength(1)(String));\n * // string & Brand<\"MinLength1\"> & Brand<\"Trimmed\">\n * type TrimmedNonEmptyString = typeof TrimmedNonEmptyString.Type;\n * ```\n *\n * @category String\n */\nexport const trimmed = (parent) => brand(\"Trimmed\", parent, (value) => value.trim().length === value.length\n    ? ok(value)\n    : err({ type: \"Trimmed\", value }));\nexport const formatTrimmedError = createTypeErrorFormatter((error) => `The value ${error.value} must be trimmed.`);\n/**\n * Trimmed string\n *\n * - Use `TrimmedString.is` to check if an unknown value is trimmed.\n * - Use `TrimmedString.from` to check if a string is trimmed.\n *\n * @category String\n */\nexport const TrimmedString = trimmed(String);\nexport const trim = (value) => value.trim();\n/**\n * Minimum length.\n *\n * ### Example\n *\n * ```ts\n * // string & Brand<\"MinLength1\">\n * const NonEmptyString = minLength(1)(String);\n * ```\n *\n * @category String\n * @category Array\n */\nexport const minLength = (min) => (parent) => brand(`MinLength${min}`, parent, (value) => value.length >= min ? ok(value) : err({ type: \"MinLength\", value, min }));\nexport const formatMinLengthError = createTypeErrorFormatter((error) => `The value ${error.value} does not meet the minimum length of ${error.min}.`);\n/**\n * Maximum length.\n *\n * ### Example\n *\n * ```ts\n * // string & Brand<\"MaxLength100\">\n * const String100 = maxLength(100)(String);\n * ```\n *\n * @category String\n * @category Array\n */\nexport const maxLength = (max) => (parent) => brand(`MaxLength${max}`, parent, (value) => value.length <= max ? ok(value) : err({ type: \"MaxLength\", value, max }));\nexport const formatMaxLengthError = createTypeErrorFormatter((error) => `The value ${error.value} exceeds the maximum length of ${error.max}.`);\n/**\n * Exact length.\n *\n * ### Example\n *\n * ```ts\n * // string & Brand<\"Length1\">\n * const Length1String = length(1)(String);\n * ```\n *\n * @category String\n * @category Array\n */\nexport const length = (exact) => (parent) => brand(`Length${exact}`, parent, (value) => value.length === exact\n    ? ok(value)\n    : err({ type: \"Length\", value, exact }));\nexport const formatLengthError = createTypeErrorFormatter((error) => `The value ${error.value} does not have the required length of ${error.exact}.`);\n/** @category String */\nexport const NonEmptyString = minLength(1)(String);\n/** @category String */\nexport const String100 = maxLength(100)(String);\n/** @category String */\nexport const String1000 = maxLength(1000)(String);\n/** @category String */\nexport const NonEmptyString100 = minLength(1)(String100);\n/** @category String */\nexport const NonEmptyString1000 = minLength(1)(String1000);\n/** @category String */\nexport const NonEmptyTrimmedString = minLength(1)(TrimmedString);\n/** @category String */\nexport const TrimmedString100 = maxLength(100)(TrimmedString);\n/** @category String */\nexport const TrimmedString1000 = maxLength(1000)(TrimmedString);\n/** @category String */\nexport const NonEmptyTrimmedString100 = minLength(1)(TrimmedString100);\n/** @category String */\nexport const NonEmptyTrimmedString1000 = minLength(1)(TrimmedString1000);\n/**\n * The mnemonic, also known as a \"seed phrase,\" is a set of 12 words in a\n * specific order chosen from a predefined list (BIP39). It provides a\n * human-readable way to store a private key securely. The mnemonic is generated\n * safely on the user's device using cryptographically secure random number\n * generation, ensuring it remains private and unique.\n *\n * @category String\n */\nexport const Mnemonic = brand(\"Mnemonic\", NonEmptyTrimmedString, (value) => bip39.validateMnemonic(value, wordlist)\n    ? ok(value)\n    : err({ type: \"Mnemonic\", value }));\nexport const formatMnemonicError = createTypeErrorFormatter((error) => `Invalid BIP39 mnemonic: ${error.value}.`);\n/**\n * String matching a regular expression.\n *\n * ### Example\n *\n * ```ts\n * const Alphanumeric = regex(\"Alphanumeric\", /^[a-z0-9]+$/i)(String);\n * ```\n *\n * @category String\n */\nexport const regex = (name, pattern) => {\n    // Clone the regex to avoid shared state.\n    const clonedPattern = new RegExp(pattern.source, pattern.flags);\n    return (parent) => brand(name, parent, (value) => {\n        // Reset `lastIndex` before each use to ensure the regex starts matching\n        // from the beginning of the string.\n        clonedPattern.lastIndex = 0;\n        return clonedPattern.test(value)\n            ? ok(value)\n            : err({ type: \"Regex\", name, value, pattern });\n    });\n};\nexport const formatRegexError = createTypeErrorFormatter((error) => `The value ${error.value} does not match the pattern for ${error.name}: ${error.pattern}.`);\n/**\n * URL-safe string.\n *\n * A `UrlSafeString` uses a limited alphabet that is safe for URLs:\n *\n * - Uppercase letters (`A-Z`)\n * - Lowercase letters (`a-z`)\n * - Digits (`0-9`)\n * - Dash (`-`)\n * - Underscore (`_`)\n *\n * This is the same character set used by Base64Url encoding, but this type does\n * not validate that the string is actually Base64Url-encoded data.\n *\n * ### Example\n *\n * ```ts\n * const result = UrlSafeString.from(\"abc123_-\");\n * if (result.ok) {\n *   console.log(\"Valid URL-safe string:\", result.value);\n * } else {\n *   console.error(\"Invalid URL-safe string:\", result.error);\n * }\n * ```\n *\n * @category String\n */\nexport const UrlSafeString = regex(\"UrlSafeString\", /^[A-Za-z0-9_-]+$/)(String);\n/**\n * Base64Url without padding.\n *\n * Encode with {@link uint8ArrayToBase64Url}, decode with\n * {@link base64UrlToUint8Array}.\n *\n * @category String\n */\nexport const Base64Url = brand(\"Base64Url\", String, (value) => {\n    // Round-trip validation ensures consistency across different base64url\n    // implementations (Node.js Buffer, native browser API, manual fallback).\n    // Only strings that decode and encode identically are accepted.\n    let roundTrip;\n    try {\n        roundTrip = uint8ArrayToBase64Url(base64UrlToUint8Array(value));\n    }\n    catch {\n        //\n    }\n    return roundTrip === value\n        ? ok(value)\n        : err({ type: \"Base64Url\", value });\n});\nexport const formatBase64UrlError = createTypeErrorFormatter((error) => `The value ${error.value} is not a valid Base64Url string.`);\nconst base64UrlOptions = { alphabet: \"base64url\", omitPadding: true };\n/** Encodes a Uint8Array to a {@link Base64Url} string. */\nexport const uint8ArrayToBase64Url = hasNodeBuffer\n    ? (bytes) => globalThis.Buffer.from(bytes).toString(\"base64url\")\n    : // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        typeof globalThis.Uint8Array.prototype?.toBase64 !== \"undefined\"\n            ? (bytes) => \n            // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n            bytes.toBase64(base64UrlOptions)\n            : (bytes) => {\n                const binaryString = Array.from(bytes, (byte) => globalThis.String.fromCodePoint(byte)).join(\"\");\n                const base64 = globalThis.btoa(binaryString);\n                return base64\n                    .replace(/\\+/g, \"-\")\n                    .replace(/\\//g, \"_\")\n                    .replace(/=/g, \"\");\n            };\n/** Decodes a {@link Base64Url} string to a Uint8Array. */\nexport const base64UrlToUint8Array = hasNodeBuffer\n    ? (str) => {\n        const nodeBuffer = globalThis.Buffer.from(str, \"base64url\");\n        return new globalThis.Uint8Array(nodeBuffer);\n    }\n    : // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        typeof globalThis.Uint8Array?.fromBase64 !== \"undefined\"\n            ? (str) => \n            // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n            globalThis.Uint8Array.fromBase64(str, base64UrlOptions)\n            : (str) => {\n                let base64 = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n                while (base64.length % 4 !== 0) {\n                    base64 += \"=\";\n                }\n                const binaryString = globalThis.atob(base64);\n                return globalThis.Uint8Array.from(binaryString, (c) => c.charCodeAt(0));\n            };\n/**\n * Simple alphanumeric string for naming in file systems, URLs, and identifiers.\n *\n * Uses the same safe alphabet as {@link UrlSafeString} (letters, digits, `-`,\n * `_`). See `UrlSafeString` for details.\n *\n * The string must be between 1 and 64 characters.\n *\n * ### Example\n *\n * ```ts\n * const result = SimpleName.from(\"data-report-123\");\n * if (result.ok) {\n *   console.log(\"Valid SimpleName string:\", result.value);\n * } else {\n *   console.error(\"Invalid SimpleName string:\", result.error);\n * }\n * ```\n *\n * @category String\n */\nexport const SimpleName = brand(\"SimpleName\", UrlSafeString, (value) => value.length >= 1 && value.length <= 64\n    ? ok(value)\n    : err({ type: \"SimpleName\", value }));\n/**\n * Trimmed string between 8 and 64 characters, branded as `SimplePassword`.\n *\n * Take a look how `SimplePassword` is defined:\n *\n * ```ts\n * export const SimplePassword = brand(\n *   \"SimplePassword\",\n *   minLength(8)(maxLength(64)(TrimmedString)),\n * );\n * ```\n *\n * Nested functions are often OK (if not, make a helper), but with TC39 Hack\n * pipes it would be clearer:\n *\n * ```ts\n * // TrimmedString\n * //   |> minLength(8)(%)\n * //   |> maxLength(64)(%)\n * //   |> brand(\"SimplePassword\", %)\n * ```\n *\n * @category String\n */\nexport const SimplePassword = brand(\"SimplePassword\", minLength(8)(maxLength(64)(TrimmedString)));\nexport const formatSimplePasswordError = (formatTypeError) => createTypeErrorFormatter((error) => `Invalid password: ${formatTypeError(error.parentError)}`);\n/**\n * Evolu Id: 16 bytes encoded as a 22character Base64Url string.\n *\n * There are three ways to create an Evolu Id:\n *\n * - {@link createId}  default cryptographically secure random bytes\n *   (privacypreserving)\n * - {@link createIdFromString}  deterministic: first 16 bytes of SHA256 of a\n *   string\n * - {@link createIdAsUuidv7}  optional: embeds timestamp bits (UUID v7 layout)\n *\n * Privacy: the default random Id does not leak creation time and is safe to\n * share or log. The UUID v7 variant leaks creation time anywhere the Id is\n * copied (logs, URLs, exports); only use it when you explicitly want insertion\n * locality for very large writeheavy tables and accept timestamp exposure.\n *\n * ### Future\n *\n * A possible hybrid maskedtime approach (`timestamp ^ H(cluster_id, timestamp\n *\n * > > N)`) could provide locality without exposing raw creation time. See\n * > > https://brooker.co.za/blog/2025/10/22/uuidv7.html\n *\n * @category String\n */\nexport const Id = brand(\"Id\", String, (value) => value.length === 22 && Base64Url.fromParent(value).ok\n    ? ok(value)\n    : err({ type: \"Id\", value }));\nexport const formatIdError = createTypeErrorFormatter((error) => `The value ${error.value} is not a valid Id.`);\n/**\n * Creates a random {@link Id}. This is the recommended default.\n *\n * Use {@link createIdFromString} for deterministic mapping of external IDs or\n * {@link createIdAsUuidv7} when you accept timestamp leakage for index\n * locality.\n *\n * ### Example\n *\n * ```ts\n * const id = createId(deps);\n * const todoId = createId<\"Todo\">(deps);\n * ```\n */\nexport const createId = (deps) => {\n    const id = uint8ArrayToBase64Url(deps.randomBytes.create(16));\n    return id;\n};\n/**\n * Creates an {@link Id} from a string using SHA-256.\n *\n * When integrating with external systems that use different ID formats, use\n * this function to convert external IDs into valid Evolu IDs.\n *\n * In Evolu's CRDT, the ID serves as the unique identifier for conflict\n * resolution across distributed clients. When multiple clients create records\n * with the same external identifier, they must resolve to the same Evolu ID to\n * ensure data consistency.\n *\n * ### Example\n *\n * ```ts\n * // Both clients will generate the same ID\n * const id1 = createIdFromString(\"user-api-123\");\n * const id2 = createIdFromString(\"user-api-123\");\n * console.log(id1 === id2); // true\n *\n * upsert(\"todo\", {\n *   id: createIdFromString(\"external-todo-456\"),\n *   title: \"Synced from external system\",\n * });\n * ```\n *\n * **Important**: This transformation uses the first 16 bytes of SHA-256 hash of\n * the string bytes, therefore it's not possible to recover the original\n * external string from the generated {@link Id}. If you need to preserve the\n * original external ID, store it in a separate column.\n *\n * @category String\n */\nexport const createIdFromString = (value) => {\n    const hash = sha256(utf8ToBytes(value));\n    // Take first 16 bytes of hash and convert to Id\n    const id = idBytesToId(hash.slice(0, 16));\n    return id;\n};\n/**\n * Creates an {@link Id} embedding timestamp bits (UUID v7 layout) before\n * Base64Url encoding.\n *\n * Tradeoff: better insertion locality / index performance for huge datasets vs\n * leaking creation time everywhere the Id appears. Evolu uses {@link createId}\n * by default to avoid activity leakage; choose this only if you explicitly\n * accept timestamp exposure.\n *\n * ### Example\n *\n * ```ts\n * const id = createIdAsUuidv7({ randomBytes, time });\n * const todoId = createIdAsUuidv7<\"Todo\">({ randomBytes, time });\n * ```\n */\nexport const createIdAsUuidv7 = (deps) => {\n    const id = deps.randomBytes.create(16);\n    const timestamp = globalThis.BigInt(deps.time.now());\n    id[0] = globalThis.Number((timestamp >> 40n) & 0xffn);\n    id[1] = globalThis.Number((timestamp >> 32n) & 0xffn);\n    id[2] = globalThis.Number((timestamp >> 24n) & 0xffn);\n    id[3] = globalThis.Number((timestamp >> 16n) & 0xffn);\n    id[4] = globalThis.Number((timestamp >> 8n) & 0xffn);\n    id[5] = globalThis.Number(timestamp & 0xffn);\n    id[6] = (id[6] & 0x0f) | 0x70;\n    id[8] = (id[8] & 0x3f) | 0x80;\n    return id;\n};\n/**\n * Creates a branded {@link Id} Type for a table's primary key.\n *\n * The table name becomes an additional brand for type safety.\n *\n * ### Example\n *\n * ```ts\n * const TodoId = id(\"Todo\");\n * // string & Brand<\"Id\"> & Brand<\"Todo\">\n * type TodoId = typeof TodoId.Type;\n * ```\n *\n * @category String\n */\nexport const id = (table) => {\n    const fromUnknown = (value) => {\n        const parentResult = String.fromUnknown(value);\n        if (!parentResult.ok)\n            return parentResult;\n        return fromParent(parentResult.value);\n    };\n    const fromParent = (value) => {\n        const idResult = Id.fromParent(value);\n        if (!idResult.ok) {\n            return err({ type: \"TableId\", value, table });\n        }\n        return ok(idResult.value);\n    };\n    return {\n        ...createType(\"Id\", { fromUnknown, fromParent }),\n        table,\n    };\n};\nexport const formatTableIdError = createTypeErrorFormatter((error) => `Invalid Id for table ${error.table}: ${error.value}.`);\n/** Binary representation of an {@link Id}. */\nexport const IdBytes = brand(\"IdBytes\", length(16)(Uint8Array));\nexport const idBytesTypeValueLength = 16;\nexport const idToIdBytes = (id) => \n// Id is Base64Url (validated by Id.from), cast is safe\nbase64UrlToUint8Array(id);\nexport const idBytesToId = (idBytes) => \n// Base64Url encoding of 16 bytes always produces valid Id (22 chars)\nuint8ArrayToBase64Url(idBytes);\n/**\n * Positive number (> 0).\n *\n * ### Example\n *\n * ```ts\n * const PositiveNumber = positive(Number);\n *\n * const result = PositiveNumber.from(42); // ok\n * const errorResult = PositiveNumber.from(-5); // err\n * ```\n *\n * @category Number\n */\nexport const positive = (parent) => brand(\"Positive\", parent, (value) => value > 0 ? ok(value) : err({ type: \"Positive\", value }));\nexport const formatPositiveError = createTypeErrorFormatter((error) => `The value ${error.value} must be positive (> 0).`);\n/**\n * Negative number (< 0).\n *\n * ### Example\n *\n * ```ts\n * const NegativeNumber = negative(Number);\n * ```\n *\n * @category Number\n */\nexport const negative = (parent) => brand(\"Negative\", parent, (value) => value < 0 ? ok(value) : err({ type: \"Negative\", value }));\nexport const formatNegativeError = createTypeErrorFormatter((error) => `The value ${error.value} must be negative (< 0).`);\n/**\n * Non-positive number ( 0).\n *\n * ### Example\n *\n * ```ts\n * const NonPositiveNumber = nonPositive(Number);\n * ```\n *\n * @category Number\n */\nexport const nonPositive = (parent) => brand(\"NonPositive\", parent, (value) => value <= 0\n    ? ok(value)\n    : err({ type: \"NonPositive\", value }));\nexport const formatNonPositiveError = createTypeErrorFormatter((error) => `The value ${error.value} must be non-positive ( 0).`);\n/**\n * Non-negative number ( 0).\n *\n * ### Example\n *\n * ```ts\n * const NonNegativeNumber = nonNegative(Number);\n * ```\n *\n * @category Number\n */\nexport const nonNegative = (parent) => brand(\"NonNegative\", parent, (value) => value >= 0\n    ? ok(value)\n    : err({ type: \"NonNegative\", value }));\nexport const formatNonNegativeError = createTypeErrorFormatter((error) => `The value ${error.value} must be non-negative ( 0).`);\n/**\n * Non-negative number ( 0).\n *\n * @category Number\n */\nexport const NonNegativeNumber = nonNegative(Number);\n/**\n * Positive number (> 0).\n *\n * @category Number\n */\nexport const PositiveNumber = positive(NonNegativeNumber);\n/**\n * Non-positive number ( 0).\n *\n * @category Number\n */\nexport const NonPositiveNumber = nonPositive(Number);\n/**\n * Negative number (< 0).\n *\n * @category Number\n */\nexport const NegativeNumber = negative(NonPositiveNumber);\n/**\n * Integer within the safe range of JavaScript numbers.\n *\n * ### Example\n *\n * ```ts\n * const Int = int(Number);\n * ```\n *\n * @category Number\n */\nexport const int = (parent) => brand(\"Int\", parent, (value) => globalThis.Number.isSafeInteger(value)\n    ? ok(value)\n    : err({ type: \"Int\", value }));\nexport const formatIntError = createTypeErrorFormatter((error) => `The value ${error.value} must be an integer.`);\n/**\n * Integer within the safe range of JavaScript numbers.\n *\n * @category Number\n */\nexport const Int = int(Number);\n/**\n * Non-negative integer ( 0).\n *\n * @category Number\n */\nexport const NonNegativeInt = nonNegative(Int);\n/**\n * Positive integer (> 0).\n *\n * @category Number\n */\nexport const PositiveInt = positive(NonNegativeInt);\n/** Maximum safe positive integer value for practically infinite operations. */\nexport const maxPositiveInt = PositiveInt.orThrow(globalThis.Number.MAX_SAFE_INTEGER);\n/**\n * Non-positive integer ( 0).\n *\n * @category Number\n */\nexport const NonPositiveInt = nonPositive(Int);\n/**\n * Negative integer (< 0).\n *\n * @category Number\n */\nexport const NegativeInt = negative(NonPositiveInt);\n/**\n * Number greater than a specified value.\n *\n * @category Number\n */\nexport const greaterThan = (min) => (parent) => brand(`GreaterThan${min}`, parent, (value) => value > min ? ok(value) : err({ type: \"GreaterThan\", value, min }));\nexport const formatGreaterThanError = createTypeErrorFormatter((error) => `The value ${error.value} is not > ${error.min}.`);\n/**\n * Number less than a specified value.\n *\n * @category Number\n */\nexport const lessThan = (max) => (parent) => brand(`LessThan${max}`, parent, (value) => value < max ? ok(value) : err({ type: \"LessThan\", value, max }));\nexport const formatLessThanError = createTypeErrorFormatter((error) => `The value ${error.value} is not < ${error.max}.`);\n/**\n * Number  a specified value.\n *\n * @category Number\n */\nexport const greaterThanOrEqualTo = (min) => (parent) => brand(`GreaterThanOrEqualTo${min}`, parent, (value) => value >= min\n    ? ok(value)\n    : err({ type: \"GreaterThanOrEqualTo\", value, min }));\nexport const formatGreaterThanOrEqualToError = createTypeErrorFormatter((error) => `The value ${error.value} is not >= ${error.min}.`);\n/**\n * Number  a specified value.\n *\n * @category Number\n */\nexport const lessThanOrEqualTo = (max) => (parent) => brand(`LessThanOrEqualTo${max}`, parent, (value) => value <= max ? ok(value) : err({ type: \"LessThanOrEqualTo\", value, max }));\nexport const formatLessThanOrEqualToError = createTypeErrorFormatter((error) => `The value ${error.value} is not <= ${error.max}.`);\n/**\n * Number that is not NaN.\n *\n * @category Number\n */\nexport const nonNaN = (parent) => brand(\"NonNaN\", parent, (value) => !globalThis.Number.isNaN(value)\n    ? ok(value)\n    : err({ type: \"NonNaN\", value }));\nexport const formatNonNaNError = createTypeErrorFormatter(() => `The value must not be NaN.`);\n/** @category Number */\nexport const NonNaNNumber = nonNaN(Number);\n/**\n * Finite number.\n *\n * @category Number\n */\nexport const finite = (parent) => brand(\"Finite\", parent, (value) => globalThis.Number.isFinite(value)\n    ? ok(value)\n    : err({ type: \"Finite\", value }));\nexport const formatFiniteError = createTypeErrorFormatter((error) => `The value ${error.value} must be finite.`);\n/**\n * Finite number.\n *\n * This Type ensures that a number is finite.\n *\n * **Why is this important?**\n *\n * `JSON.stringify` serializes JavaScript numbers into `null` if they are not\n * finite (e.g., `Infinity`, `-Infinity`, or `NaN`). Using `FiniteNumber` helps\n * prevent these unexpected behaviors when working with JSON serialization.\n *\n * @category Number\n */\nexport const FiniteNumber = finite(Number);\n/**\n * Number that is a multiple of a divisor.\n *\n * @category Number\n */\nexport const multipleOf = (divisor) => (parent) => brand(`MultipleOf${divisor}`, parent, (value) => value % divisor === 0\n    ? ok(value)\n    : err({ type: \"MultipleOf\", value, divisor }));\nexport const formatMultipleOfError = createTypeErrorFormatter((error) => `The value ${error.value} is not a multiple of ${error.divisor}.`);\n/**\n * Number within a range, inclusive.\n *\n * ### Example\n *\n * ```ts\n * const Between1And10 = between(1, 10)(PositiveNumber);\n * const result = Between1And10.from(5); // ok(5)\n * const errorResult = Between1And10.from(11); // err\n * ```\n *\n * @category Number\n */\nexport const between = (min, max) => (parent) => brand(`Between${min}-${max}`, parent, (value) => value >= min && value <= max\n    ? ok(value)\n    : err({ type: \"Between\", value, min, max }));\nexport const formatBetweenError = createTypeErrorFormatter((error) => `The value ${error.value} is not between ${error.min} and ${error.max}, inclusive.`);\n/**\n * Literal {@link Type}.\n *\n * https://www.typescriptlang.org/docs/handbook/2/everyday-types.html#literal-types\n *\n * ### Example\n *\n * ```ts\n * const LiteralHello = literal(\"Hello\");\n * const result = LiteralHello.from(\"Hello\"); // ok(\"Hello\")\n * const errorResult = LiteralHello.from(\"World\"); // err\n * ```\n *\n * TODO: Add JsonValue\n *\n * @category Base Factories\n */\nexport const literal = (expected) => {\n    const fromUnknown = (value) => value === expected\n        ? ok(expected)\n        : err({ type: \"Literal\", value, expected });\n    return {\n        ...createType(\"Literal\", {\n            fromUnknown,\n            fromParent: ok,\n        }),\n        expected,\n    };\n};\nexport const formatLiteralError = createTypeErrorFormatter((error) => `The value ${error.value} is not strictly equal to the expected literal: ${globalThis.String(error.expected)}.`);\n/**\n * Array of a specific {@link Type}.\n *\n * Usage:\n *\n * ```ts\n * const NumberArray = array(Number);\n *\n * const result1 = NumberArray.from([1, 2, 3]); // ok([1, 2, 3])\n * const result2 = NumberArray.from([\"a\", \"b\"]); // err(...)\n * ```\n *\n * @category Base Factories\n * @category Array\n */\nexport const array = (element) => {\n    const fromUnknown = (value) => {\n        if (!Array.isArray(value)) {\n            return err({\n                type: \"Array\",\n                value,\n                reason: { kind: \"NotArray\" },\n            });\n        }\n        const result = [];\n        for (let i = 0; i < value.length; i++) {\n            const elementResult = element.fromUnknown(value[i]);\n            if (!elementResult.ok) {\n                return err({\n                    type: \"Array\",\n                    value,\n                    reason: {\n                        kind: \"Element\",\n                        index: i,\n                        error: elementResult.error,\n                    },\n                });\n            }\n            result.push(elementResult.value);\n        }\n        return ok(result);\n    };\n    const fromParent = (value) => {\n        const result = [];\n        for (let i = 0; i < value.length; i++) {\n            const elementResult = element.fromParent(value[i]);\n            if (!elementResult.ok) {\n                return err({\n                    type: \"Array\",\n                    value,\n                    reason: {\n                        kind: \"Element\",\n                        index: i,\n                        error: elementResult.error,\n                    },\n                });\n            }\n            result.push(elementResult.value);\n        }\n        return ok(result);\n    };\n    return {\n        ...createType(\"Array\", { fromUnknown, fromParent }),\n        element,\n    };\n};\nexport const formatArrayError = (formatTypeError) => createTypeErrorFormatter((error) => {\n    switch (error.reason.kind) {\n        case \"NotArray\":\n            return `Expected an array but received ${error.value}.`;\n        case \"Element\":\n            return `Invalid element at index ${error.reason.index}: ${formatTypeError(error.reason.error)}`;\n    }\n});\n/**\n * Set of a specific {@link Type}.\n *\n * ### Example\n *\n * ```ts\n * const NumberSet = set(Number);\n *\n * const result1 = NumberSet.from(new Set([1, 2, 3])); // ok(Set { 1, 2, 3 })\n * const result2 = NumberSet.from(new Set([\"a\", \"b\"])); // err(...)\n * ```\n *\n * @category Base Factories\n */\nexport const set = (element) => {\n    const fromUnknown = (value) => {\n        if (!(value instanceof globalThis.Set)) {\n            return err({\n                type: \"Set\",\n                value,\n                reason: { kind: \"NotSet\" },\n            });\n        }\n        let index = 0;\n        for (const item of value) {\n            const elementResult = element.fromUnknown(item);\n            if (!elementResult.ok) {\n                return err({\n                    type: \"Set\",\n                    value,\n                    reason: {\n                        kind: \"Element\",\n                        index,\n                        error: elementResult.error,\n                    },\n                });\n            }\n            index++;\n        }\n        return ok(value);\n    };\n    const fromParent = (value) => {\n        let index = 0;\n        for (const item of value) {\n            const elementResult = element.fromParent(item);\n            if (!elementResult.ok) {\n                return err({\n                    type: \"Set\",\n                    value,\n                    reason: {\n                        kind: \"Element\",\n                        index,\n                        error: elementResult.error,\n                    },\n                });\n            }\n            index++;\n        }\n        return ok(value);\n    };\n    return {\n        ...createType(\"Set\", { fromUnknown, fromParent }),\n        element,\n    };\n};\nexport const formatSetError = (formatTypeError) => createTypeErrorFormatter((error) => {\n    switch (error.reason.kind) {\n        case \"NotSet\":\n            return `Expected a Set but received ${error.value}.`;\n        case \"Element\":\n            return `Invalid element at index ${error.reason.index}: ${formatTypeError(error.reason.error)}`;\n    }\n});\n/**\n * Record of a key {@link Type} and value {@link Type}.\n *\n * - The input must be a plain object (validated by {@link isPlainObject}).\n * - Each key is validated/transformed by the `key` Type.\n * - Each value is validated/transformed by the `value` Type.\n *\n * The resulting type is `Readonly<Record<KeyT, ValueT>>`.\n *\n * ### Example\n *\n * ```ts\n * const StringToNumberRecord = record(String, Number);\n *\n * // ok({ \"a\": 1, \"b\": 2 })\n * StringToNumberRecord.from({ a: 1, b: 2 });\n *\n * // err => \"Key\" because 42 is not a string key\n * StringToNumberRecord.from({ 42: 1, b: 2 });\n *\n * // err => \"Value\" because \"x\" is not a number\n * StringToNumberRecord.from({ a: \"x\", b: 2 });\n * ```\n *\n * @category Base Factories\n * @category Object\n */\nexport const record = (keyType, valueType) => {\n    const fromUnknown = (value) => {\n        if (!isPlainObject(value)) {\n            return err({\n                type: \"Record\",\n                value,\n                reason: { kind: \"NotRecord\" },\n            });\n        }\n        const result = {};\n        for (const [rawKey, rawValue] of Object.entries(value)) {\n            const keyResult = keyType.fromUnknown(rawKey);\n            if (!keyResult.ok) {\n                return err({\n                    type: \"Record\",\n                    value,\n                    reason: { kind: \"Key\", key: rawKey, error: keyResult.error },\n                });\n            }\n            const valueResult = valueType.fromUnknown(rawValue);\n            if (!valueResult.ok) {\n                return err({\n                    type: \"Record\",\n                    value,\n                    reason: {\n                        kind: \"Value\",\n                        key: rawKey,\n                        error: valueResult.error,\n                    },\n                });\n            }\n            result[keyResult.value] = valueResult.value;\n        }\n        return ok(result);\n    };\n    const fromParent = (value) => {\n        const result = {};\n        for (const [rawKey, rawValue] of Object.entries(value)) {\n            const keyResult = keyType.fromParent(rawKey);\n            if (!keyResult.ok) {\n                return err({\n                    type: \"Record\",\n                    value,\n                    reason: {\n                        kind: \"Key\",\n                        key: rawKey,\n                        error: keyResult.error,\n                    },\n                });\n            }\n            const valueResult = valueType.fromParent(rawValue);\n            if (!valueResult.ok) {\n                return err({\n                    type: \"Record\",\n                    value,\n                    reason: {\n                        kind: \"Value\",\n                        key: keyResult.value,\n                        error: valueResult.error,\n                    },\n                });\n            }\n            result[keyResult.value] = valueResult.value;\n        }\n        return ok(result);\n    };\n    return {\n        ...createType(\"Record\", {\n            fromUnknown,\n            fromParent,\n        }),\n        key: keyType,\n        value: valueType,\n    };\n};\nexport const formatRecordError = (formatTypeError) => createTypeErrorFormatter((error) => {\n    switch (error.reason.kind) {\n        case \"NotRecord\":\n            return `Expected a record (plain object) but received ${error.value}.`;\n        case \"Key\":\n            return `Invalid key ${error.reason.key}: ${formatTypeError(error.reason.error)}`;\n        case \"Value\":\n            return `Invalid value for key ${error.reason.key}: ${formatTypeError(error.reason.error)}`;\n    }\n});\nexport function object(props, record) {\n    /* eslint-disable */\n    const propKeys = Object.keys(props);\n    const fromUnknown = (value) => {\n        if (!isPlainObject(value)) {\n            return err({\n                type: record ? \"ObjectWithRecord\" : \"Object\",\n                value,\n                reason: { kind: \"NotObject\" },\n            });\n        }\n        const errors = {};\n        const result = {};\n        for (const key of propKeys) {\n            if (!(key in value) && isOptionalType(props[key])) {\n                continue;\n            }\n            const propResult = props[key].fromUnknown(value[key]);\n            if (!propResult.ok) {\n                errors[key] = propResult.error;\n            }\n            else {\n                result[key] = propResult.value;\n            }\n        }\n        const extraKeys = Object.keys(value).filter((key) => !propKeys.includes(key));\n        if (record) {\n            for (const key of extraKeys) {\n                const keyResult = record.key.fromUnknown(key);\n                if (!keyResult.ok) {\n                    return err({\n                        type: \"ObjectWithRecord\",\n                        value,\n                        reason: {\n                            kind: \"IndexKey\",\n                            key,\n                            error: keyResult.error,\n                        },\n                    });\n                }\n                const valueResult = record.value.fromUnknown(value[key]);\n                if (!valueResult.ok) {\n                    return err({\n                        type: \"ObjectWithRecord\",\n                        value,\n                        reason: {\n                            kind: \"IndexValue\",\n                            key,\n                            error: valueResult.error,\n                        },\n                    });\n                }\n                result[keyResult.value] = valueResult.value;\n            }\n        }\n        else if (extraKeys.length > 0) {\n            return err({\n                type: \"Object\",\n                value,\n                reason: { kind: \"ExtraKeys\", extraKeys },\n            });\n        }\n        if (Object.keys(errors).length > 0) {\n            return err({\n                type: record ? \"ObjectWithRecord\" : \"Object\",\n                value,\n                reason: { kind: \"Props\", errors },\n            });\n        }\n        return ok(result);\n    };\n    const fromParent = (value) => {\n        const errors = {};\n        const result = {};\n        for (const key of propKeys) {\n            if (!(key in value) && isOptionalType(props[key])) {\n                continue;\n            }\n            const propResult = props[key].fromParent(value[key]);\n            if (!propResult.ok) {\n                errors[key] = propResult.error;\n            }\n            else {\n                result[key] = propResult.value;\n            }\n        }\n        if (record) {\n            for (const [key, val] of Object.entries(value)) {\n                if (!propKeys.includes(key)) {\n                    const keyResult = record.key.fromParent(key);\n                    if (!keyResult.ok) {\n                        return err({\n                            type: \"ObjectWithRecord\",\n                            value,\n                            reason: { kind: \"IndexKey\", key, error: keyResult.error },\n                        });\n                    }\n                    const valueResult = record.value.fromParent(val);\n                    if (!valueResult.ok) {\n                        return err({\n                            type: \"ObjectWithRecord\",\n                            value,\n                            reason: { kind: \"IndexValue\", key, error: valueResult.error },\n                        });\n                    }\n                    result[keyResult.value] = valueResult.value;\n                }\n            }\n        }\n        if (Object.keys(errors).length > 0) {\n            return err({\n                type: record ? \"ObjectWithRecord\" : \"Object\",\n                value,\n                reason: { kind: \"Props\", errors },\n            });\n        }\n        return ok(result);\n    };\n    return {\n        ...createType(record ? \"ObjectWithRecord\" : \"Object\", {\n            fromUnknown,\n            fromParent,\n        }),\n        props,\n        ...(record ? { record } : {}),\n    };\n    /* eslint-enable */\n}\nexport const formatObjectError = (formatTypeError) => createTypeErrorFormatter((error) => {\n    switch (error.reason.kind) {\n        case \"NotObject\":\n            return `Expected a plain object but received ${error.value}`;\n        case \"ExtraKeys\":\n            return `Unexpected extra keys: ${error.reason.extraKeys.join(\", \")}`;\n        case \"Props\": {\n            const formattedErrors = Object.entries(error.reason.errors)\n                .filter(([, error]) => error !== undefined)\n                .map(([key, error]) => `- ${key}: ${formatTypeError(error)}`)\n                .join(\"\\n\");\n            return `Invalid object properties:\\n${formattedErrors}`;\n        }\n    }\n});\nexport const formatObjectWithRecordError = (formatTypeError) => createTypeErrorFormatter((error) => {\n    switch (error.reason.kind) {\n        case \"NotObject\":\n            return `Expected an object, but received ${error.value}.`;\n        case \"Props\":\n            return formatObjectError(formatTypeError)({\n                type: \"Object\",\n                value: error.value,\n                reason: { kind: \"Props\", errors: error.reason.errors },\n            });\n        case \"IndexKey\":\n            return `Invalid index key ${error.reason.key}: ${formatTypeError(error.reason.error)}`;\n        case \"IndexValue\":\n            return `Invalid value at index key ${error.reason.key}: ${formatTypeError(error.reason.error)}`;\n    }\n});\nexport function union(...args) {\n    /**\n     * Good First Issue:\n     *\n     * 1. Optimize for microbenchmarks:\n     *\n     *    - Detect if all arguments are literals and generate a fast-check function.\n     *    - This could significantly improve performance for unions of literals.\n     * 2. Enhance tagged union support:\n     *\n     *    - Detect if all arguments are objects with the same property but different\n     *         literal values (tagged unions).\n     *    - Generate a specialized function to improve validation performance for such\n     *         cases.\n     */\n    const members = args.map((arg) => (isType(arg) ? arg : literal(arg)));\n    const fromUnknown = (value) => {\n        const errors = [];\n        for (const member of members) {\n            const result = member.fromUnknown(value);\n            if (result.ok)\n                return result;\n            errors.push(result.error);\n        }\n        return err({\n            type: \"Union\",\n            value,\n            errors,\n        });\n    };\n    return {\n        ...createType(\"Union\", {\n            fromUnknown,\n            fromParent: fromUnknown,\n        }),\n        members,\n    };\n}\nexport const formatUnionError = (formatTypeError) => createTypeErrorFormatter((error) => {\n    const formattedErrors = error.errors\n        .map((e, i) => `  ${i + 1}. ${formatTypeError(e)}`)\n        .join(\"\\n\");\n    return `Value ${error.value} does not match any member of the union.\\nErrors:\\n${formattedErrors}`;\n});\nexport const isUnionType = (t) => t.name === \"Union\" && Array.isArray(t.members);\n/**\n * Recursive {@link Type}.\n *\n * Recursive types can't be inferred, so we must define them using an interface\n * and `recursive` Type Factory that returns a {@link Type}.\n *\n * ### Example\n *\n * ```ts\n * interface Category {\n *   readonly name: string;\n *   readonly subcategories: ReadonlyArray<Category>;\n * }\n *\n * interface CategoryInput {\n *   readonly name: string;\n *   readonly subcategories: ReadonlyArray<CategoryInput>;\n * }\n *\n * type CategoryError = ObjectError<{\n *   readonly name: typeof String.Error;\n *   readonly subcategories: ArrayError<CategoryError>;\n * }>;\n *\n * const Category = recursive(\n *   (): Type<\"Object\", Category, CategoryInput, CategoryError> =>\n *     object({\n *       name: String,\n *       subcategories: array(Category),\n *     }),\n * );\n * ```\n *\n * @category Base Factories\n */\nexport const recursive = (create) => {\n    let type;\n    return {\n        name: \"Recursive\",\n        from: (value) => {\n            type ??= create();\n            return type.from(value);\n        },\n        fromUnknown: (value) => {\n            type ??= create();\n            return type.fromUnknown(value);\n        },\n        fromParent: (value) => {\n            type ??= create();\n            return type.fromParent(value);\n        },\n        is: (value) => {\n            type ??= create();\n            return type.is(value);\n        },\n        [EvoluTypeSymbol]: true,\n        getParentType: () => {\n            type ??= create();\n            return type;\n        },\n    };\n};\n/**\n * `union(null, T)` {@link Type}.\n *\n * ### Example\n *\n * ```ts\n * const NullOrString = nullOr(String);\n * NullOrString.from(\"hello\"); // ok(\"hello\")\n * NullOrString.from(null); // ok(null)\n * NullOrString.from(42); // err(...)\n * ```\n *\n * @category Base Factories\n */\nexport const nullOr = (type) => union(Null, type);\n/**\n * `union(undefined, T)` {@link Type}.\n *\n * ### Example\n *\n * ```ts\n * const UndefinedOrString = undefinedOr(String);\n * UndefinedOrString.from(\"world\"); // ok(\"world\")\n * UndefinedOrString.from(undefined); // ok()\n * UndefinedOrString.from(42); // err(...)\n * ```\n *\n * @category Base Factories\n */\nexport const undefinedOr = (type) => union(Undefined, type);\n/**\n * `union(undefined, null, T)` {@link Type}.\n *\n * Learn more:\n * https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#nullish-coalescing\n *\n * ### Example\n *\n * ```ts\n * const NullishOrString = nullishOr(String);\n * NullishOrString.from(\"test\"); // ok(\"test\")\n * NullishOrString.from(null); // ok(null)\n * NullishOrString.from(undefined); // ok()\n * NullishOrString.from(42); // err(...)\n * ```\n *\n * @category Base Factories\n */\nexport const nullishOr = (type) => union(Undefined, Null, type);\n/**\n * Tuple {@link Type}.\n *\n * Represents a tuple of specific Types.\n *\n * ### Example\n *\n * ```ts\n * const NameAndAge = tuple(NonEmptyTrimmedString, PositiveNumber);\n *\n * const result = NameAndAge.from([\"Alice\", 25]); // ok([\"Alice\", 25])\n * const error = NameAndAge.from([\"Alice\", -10]); // err\n * ```\n *\n * @category Base Factories\n */\nexport const tuple = (...elements) => {\n    const fromUnknown = (value) => {\n        if (!Array.isArray(value) || value.length !== elements.length) {\n            return err({\n                type: \"Tuple\",\n                value,\n                reason: { kind: \"InvalidLength\", expected: elements.length },\n            });\n        }\n        const result = [];\n        for (let i = 0; i < elements.length; i++) {\n            const elementResult = elements[i].fromUnknown(value[i]);\n            if (!elementResult.ok) {\n                return err({\n                    type: \"Tuple\",\n                    value,\n                    reason: {\n                        kind: \"Element\",\n                        index: i,\n                        error: elementResult.error,\n                    },\n                });\n            }\n            result[i] = elementResult.value;\n        }\n        return ok(result);\n    };\n    const fromParent = (value) => {\n        if (!Array.isArray(value) || value.length !== elements.length) {\n            return err({\n                type: \"Tuple\",\n                value,\n                reason: { kind: \"InvalidLength\", expected: elements.length },\n            });\n        }\n        const result = [];\n        for (let i = 0; i < elements.length; i++) {\n            const elementResult = elements[i].fromParent(value[i]);\n            if (!elementResult.ok) {\n                return err({\n                    type: \"Tuple\",\n                    value,\n                    reason: {\n                        kind: \"Element\",\n                        index: i,\n                        error: elementResult.error,\n                    },\n                });\n            }\n            result.push(elementResult.value);\n        }\n        return ok(result);\n    };\n    return {\n        ...createType(\"Tuple\", {\n            fromUnknown,\n            fromParent,\n        }),\n        elements,\n    };\n};\nexport const formatTupleError = (formatTypeError) => createTypeErrorFormatter((error) => {\n    switch (error.reason.kind) {\n        case \"InvalidLength\":\n            return `Expected a tuple of length ${error.reason.expected}, but received ${error.value}.`;\n        case \"Element\":\n            return `Invalid element at index ${error.reason.index}:\\n  ${formatTypeError(error.reason.error)}`;\n    }\n});\n/**\n * 64-bit signed integer.\n *\n * `Int64` represents a `BigInt` constrained to a 64-bit signed integer range,\n * which is useful for platforms that do not support the `bigint` type, such as\n * SQLite.\n *\n * Because SQLite lacks a dedicated `bigint` type, it may return `number` or\n * 'Int64` depending on the stored value or even a wrong value if a platform\n * wrapper does not support it. A workaround for SQLite is to insert 'Int64`\n * serialized as a string (SQLite will convert it to int) and manually cast the\n * result to a string in SQL query and then to `Int64` in JS.\n *\n * https://www.sqlite.org/c3ref/int64.html\n *\n * @category Number\n */\nexport const Int64 = brand(\"Int64\", BigInt, (value) => value >= -9223372036854775808n && value <= 9223372036854775807n\n    ? ok(value)\n    : err({ type: \"Int64\", value }));\nexport const formatInt64Error = createTypeErrorFormatter((error) => `The value ${error.value} is not a valid 64-bit signed integer (Int64).`);\n/**\n * Stringified {@link Int64}.\n *\n * @category String\n */\nexport const Int64String = brand(\"Int64\", NonEmptyTrimmedString, (value) => trySync(() => {\n    const maybeInt = globalThis.BigInt(value);\n    Int64.orThrow(maybeInt);\n    return value;\n}, () => ({ type: \"Int64String\", value })));\nexport const formatInt64StringError = createTypeErrorFormatter((error) => `The value ${error.value} is not a valid Int64 string.`);\n/**\n * JSON-compatible value: string, {@link FiniteNumber}, boolean, null,\n * {@link JsonArray}, or {@link JsonObject}.\n *\n * @category Base Types\n */\nexport const JsonValue = recursive(() => union(String, FiniteNumber, Boolean, Null, JsonArray, JsonObject));\n/**\n * JSON-compatible array of {@link JsonValue} elements.\n *\n * @category Array\n */\nexport const JsonArray = array(JsonValue);\n/**\n * JSON-compatible object with string keys and {@link JsonValue} values.\n *\n * @category Object\n */\nexport const JsonObject = record(String, JsonValue);\nexport const parseJson = (value) => trySync(() => JSON.parse(value), (error) => ({\n    type: `Json`,\n    value,\n    message: globalThis.String(error),\n}));\n/**\n * JSON-string {@link Type}.\n *\n * ### Example\n *\n * ```ts\n * const result = Json.from('{\"key\":\"value\"}'); // ok\n * const error = Json.from(\"invalid json\"); // err\n * ```\n *\n * @category String\n */\nexport const Json = brand(\"Json\", String, (value) => {\n    const result = parseJson(value);\n    if (!result.ok)\n        return result;\n    return ok(value);\n});\nexport const formatJsonError = createTypeErrorFormatter((error) => `Invalid JSON: ${error.value}. Error: ${error.message}`);\nexport const jsonValueToJson = (value) => JSON.stringify(value);\nexport const jsonToJsonValue = (value) => JSON.parse(value);\n/**\n * Creates a branded JSON string {@link Type} and type-safe conversion functions\n * for a given Type.\n *\n * This factory creates:\n *\n * 1. A branded string Type that validates JSON parsing and structural conformity\n * 2. A serialization function (Type  branded JSON string)\n * 3. A parsing function (branded JSON string  Type, skipping validation)\n *\n * Optimized for Evolu's SQLite workflow where we store typed JSON strings and\n * need type-safe conversions without double parsing.\n *\n * ### Example\n *\n * ```ts\n * const Person = object({\n *   name: NonEmptyString100,\n *   age: FiniteNumber,\n * });\n * type Person = typeof Person.Type;\n *\n * const [PersonJson, personToPersonJson, personJsonToPerson] = json(\n *   Person,\n *   \"PersonJson\",\n * );\n * // string & Brand<\"PersonJson\">\n * type PersonJson = typeof PersonJson.Type;\n *\n * // Usage:\n * const person: Person = { name: \"Alice\", age: 30 };\n * const jsonString = personToPersonJson(person); // PersonJson\n * const backToPerson = personJsonToPerson(jsonString); // Person\n * ```\n */\nexport const json = (type, name) => {\n    const BrandedJsonType = brand(name, String, (value) => {\n        const parseResult = parseJson(value);\n        if (!parseResult.ok)\n            return parseResult;\n        const validationResult = type.fromUnknown(parseResult.value);\n        if (!validationResult.ok)\n            return validationResult;\n        return ok(value);\n    });\n    return [\n        BrandedJsonType,\n        jsonValueToJson,\n        jsonToJsonValue,\n    ];\n};\n/**\n * Optional {@link Type}.\n *\n * Marks a `Type` as **optional**, meaning:\n *\n * - If the value is **present**, it must match the given `Type`.\n * - If the value is **absent**, it is **not included** in the final object.\n *\n * This is different from {@link undefinedOr}, which allows explicit `undefined`\n * but **still requires the key to exist**.\n *\n * ### Example:\n *\n * ```ts\n * const Todo = object({\n *   id: TodoId,\n *   title: NonEmptyString1000,\n *   isCompleted: optional(SqliteBoolean),\n * });\n * ```\n */\nexport const optional = (type) => ({\n    ...createType(\"Optional\", {\n        fromUnknown: type.fromUnknown,\n        fromParent: type.fromParent,\n    }),\n    parent: type,\n});\n/** Determines if a given type is an {@link OptionalType}. */\nexport const isOptionalType = (x) => typeof x === \"object\" && x != null && \"name\" in x && x.name === \"Optional\";\n/**\n * Creates a partial object type where all properties are optional.\n *\n * This is useful when we want to validate an object in which none of the keys\n * are required, but if they are present they must conform to their\n * corresponding Types.\n *\n * ### Example\n *\n * ```ts\n * const PartialUser = partial({\n *   name: NonEmptyString,\n *   age: PositiveNumber,\n * });\n *\n * // Valid: an empty object is accepted\n * PartialUser.from({});\n *\n * // Valid: when provided, the properties must validate correctly\n * PartialUser.from({ name: \"Alice\" });\n *\n * // Invalid: if a property is present but fails validation it returns an error\n * PartialUser.from({ age: -5 });\n * ```\n *\n * @category Object\n */\nexport const partial = (props) => {\n    const optionalProps = {};\n    for (const key in props) {\n        if (Object.prototype.hasOwnProperty.call(props, key)) {\n            optionalProps[key] = optional(props[key]);\n        }\n    }\n    return object(optionalProps);\n};\n/**\n * Converts each nullable property (a union that includes {@link Null}) into an\n * {@link optional} property. This means consumers can omit the property\n * entirely, or set it to `null`, or set it to the non-null member of the\n * union.\n *\n * @category Object\n */\nexport const nullableToOptional = (props) => {\n    const transformedProps = {};\n    for (const key in props) {\n        const type = props[key];\n        if (isUnionType(type)) {\n            const hasNull = type.members.some((m) => m === Null);\n            if (hasNull) {\n                transformedProps[key] = optional(type);\n                continue;\n            }\n        }\n        transformedProps[key] = type;\n    }\n    return object(transformedProps);\n};\n/**\n * Create a new `object` {@link Type} by omitting some keys.\n *\n * @category Object\n */\nexport function omit(objectType, ...keys) {\n    const newProps = {};\n    for (const key in objectType.props) {\n        if (!keys.includes(key)) {\n            // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\n            newProps[key] = objectType.props[key];\n        }\n    }\n    return object(newProps);\n}\nexport const maxMutationSize = 655360;\n/**\n * Evolu has to limit the maximum mutation size. Otherwise, sync couldn't use\n * the `maxProtocolMessageRangesSize`. The max size is 640KB in bytes, measured\n * via MessagePack. Evolu Protocol DbChange will be smaller thanks to various\n * optimizations.\n */\nexport const validMutationSize = (type) => brand(\"ValidMutationSize\", type, (value) => pack(value).byteLength <= maxMutationSize\n    ? ok(value)\n    : err({ type: \"ValidMutationSize\", value }));\nexport const formatValidMutationSizeError = createTypeErrorFormatter((error) => `The mutation size exceeds the maximum limit of ${maxMutationSize} bytes. The provided mutation has a size of ${pack(error.value).byteLength} bytes.`);\n/**\n * Formats Evolu Type errors into user-friendly messages.\n *\n * Evolu Type typed errors ensure every error type must have a formatter.\n * TypeScript enforces this at compile-time, preventing unhandled validation\n * errors from reaching users.\n *\n * The `createFormatTypeError` function handles both built-in {@link TypeErrors}\n * and custom errors, and lets us override default formatting for specific\n * errors.\n *\n * ### Example\n *\n * ```ts\n * const formatTypeError = createFormatTypeError<\n *   MinLengthError | MaxLengthError\n * >((error): string => {\n *   switch (error.type) {\n *     case \"MinLength\":\n *       return `Text must be at least ${error.min} character${error.min === 1 ? \"\" : \"s\"} long`;\n *     case \"MaxLength\":\n *       return `Text is too long (maximum ${error.max} characters)`;\n *   }\n * });\n * ```\n *\n * Alternatively, write a custom formatter from scratch without using\n * `createFormatTypeError`. This gives us full control over error formatting:\n *\n * ```ts\n * const Person = object({\n *   name: NonEmptyTrimmedString100,\n *   age: optional(PositiveInt),\n * });\n *\n * // Define only the errors actually used by Person Type\n * type PersonErrors =\n *   | StringError\n *   | MaxLengthError\n *   | MinLengthError\n *   | TrimmedError\n *   | PositiveError\n *   | NonNegativeError\n *   | IntError\n *   | NumberError\n *   | ObjectError<Record<string, PersonErrors>>;\n *\n * const formatTypeError: TypeErrorFormatter<PersonErrors> = (error) => {\n *   switch (error.type) {\n *     case \"String\":\n *       return formatStringError(error);\n *     case \"Number\":\n *       return \"Must be a number\";\n *     case \"MinLength\":\n *       return `Must be at least ${error.min} characters`;\n *     case \"MaxLength\":\n *       return `Cannot exceed ${error.max} characters`;\n *     case \"Trimmed\":\n *       return \"Cannot have leading or trailing spaces\";\n *     case \"Positive\":\n *       return \"Must be a positive number\";\n *     case \"NonNegative\":\n *       return \"Must be zero or positive\";\n *     case \"Int\":\n *       return \"Must be an integer\";\n *     case \"Object\": {\n *       if (error.reason.kind === \"NotObject\") return \"Must be an object\";\n *       if (error.reason.kind === \"ExtraKeys\")\n *         return \"Contains unexpected fields\";\n *       const firstError = Object.values(error.reason.errors).find(\n *         (e) => e !== undefined,\n *       )!;\n *       return formatTypeError(firstError);\n *     }\n *   }\n * };\n * ```\n *\n * @category Utilities\n */\nexport const createFormatTypeError = (extraFormatter) => {\n    const formatTypeError = (error) => {\n        const extraMessage = extraFormatter?.(error);\n        if (extraMessage != null)\n            return extraMessage;\n        error = error;\n        switch (error.type) {\n            case \"String\":\n                return formatStringError(error);\n            case \"Number\":\n                return formatNumberError(error);\n            case \"BigInt\":\n                return formatBigIntError(error);\n            case \"Boolean\":\n                return formatBooleanError(error);\n            case \"Undefined\":\n                return formatUndefinedError(error);\n            case \"Null\":\n                return formatNullError(error);\n            case \"Function\":\n                return formatFunctionError(error);\n            case \"Uint8Array\":\n                return formatUint8ArrayError(error);\n            case \"InstanceOf\":\n                return formatInstanceOfError(error);\n            case \"EvoluType\":\n                return formatIsTypeError(error);\n            case \"CurrencyCode\":\n                return formatCurrencyCodeError(error);\n            case \"DateIso\":\n                return formatDateIsoError(error);\n            case \"Trimmed\":\n                return formatTrimmedError(error);\n            case \"MinLength\":\n                return formatMinLengthError(error);\n            case \"MaxLength\":\n                return formatMaxLengthError(error);\n            case \"Length\":\n                return formatLengthError(error);\n            case \"Mnemonic\":\n                return formatMnemonicError(error);\n            case \"Regex\":\n                return formatRegexError(error);\n            case \"Id\":\n                return formatIdError(error);\n            case \"TableId\":\n                return formatTableIdError(error);\n            case \"Positive\":\n                return formatPositiveError(error);\n            case \"Negative\":\n                return formatNegativeError(error);\n            case \"NonPositive\":\n                return formatNonPositiveError(error);\n            case \"NonNegative\":\n                return formatNonNegativeError(error);\n            case \"Int\":\n                return formatIntError(error);\n            case \"GreaterThan\":\n                return formatGreaterThanError(error);\n            case \"LessThan\":\n                return formatLessThanError(error);\n            case \"GreaterThanOrEqualTo\":\n                return formatGreaterThanOrEqualToError(error);\n            case \"LessThanOrEqualTo\":\n                return formatLessThanOrEqualToError(error);\n            case \"NonNaN\":\n                return formatNonNaNError(error);\n            case \"Finite\":\n                return formatFiniteError(error);\n            case \"MultipleOf\":\n                return formatMultipleOfError(error);\n            case \"Between\":\n                return formatBetweenError(error);\n            case \"Literal\":\n                return formatLiteralError(error);\n            case \"Int64\":\n                return formatInt64Error(error);\n            case \"Int64String\":\n                return formatInt64StringError(error);\n            case \"Json\":\n                return formatJsonError(error);\n            case \"ValidMutationSize\":\n                return formatValidMutationSizeError(error);\n            // Composite Types\n            case \"SimplePassword\":\n                return formatSimplePasswordError(formatTypeError)(error);\n            case \"Array\":\n                return formatArrayError(formatTypeError)(error);\n            case \"Set\":\n                return formatSetError(formatTypeError)(error);\n            case \"Record\":\n                return formatRecordError(formatTypeError)(error);\n            case \"Object\":\n                return formatObjectError(formatTypeError)(error);\n            case \"ObjectWithRecord\":\n                return formatObjectWithRecordError(formatTypeError)(error);\n            case \"Union\":\n                return formatUnionError(formatTypeError)(error);\n            case \"Tuple\":\n                return formatTupleError(formatTypeError)(error);\n            default: {\n                // Fallback for unknown error types\n                const unknownError = error;\n                return `A value ${safelyStringifyUnknownValue(unknownError.value)} is not valid for type ${unknownError.type}.`;\n            }\n        }\n    };\n    return formatTypeError;\n};\n/**\n * Converts an Evolu {@link TypeError} to Standard Schema V1 issues format.\n *\n * This function recursively converts Evolu's typed errors into the Standard\n * Schema issue format with proper path tracking for nested structures.\n *\n * @category Utilities\n */\nexport const typeErrorToStandardSchemaIssues = (error, formatTypeError, path = []) => {\n    if (error.type === \"Array\") {\n        const arrayError = error;\n        if (arrayError.reason.kind === \"NotArray\") {\n            return [{ message: formatTypeError(error), path }];\n        }\n        return typeErrorToStandardSchemaIssues(arrayError.reason.error, formatTypeError, [...path, arrayError.reason.index]);\n    }\n    if (error.type === \"Set\") {\n        const setError = error;\n        if (setError.reason.kind === \"NotSet\") {\n            return [{ message: formatTypeError(error), path }];\n        }\n        return typeErrorToStandardSchemaIssues(setError.reason.error, formatTypeError, [...path, setError.reason.index]);\n    }\n    if (error.type === \"Object\") {\n        const objectError = error;\n        if (objectError.reason.kind === \"NotObject\" ||\n            objectError.reason.kind === \"ExtraKeys\") {\n            return [{ message: formatTypeError(error), path }];\n        }\n        const issues = [];\n        for (const [key, propError] of Object.entries(objectError.reason.errors)) {\n            issues.push(...typeErrorToStandardSchemaIssues(propError, formatTypeError, [...path, key]));\n        }\n        return issues;\n    }\n    if (error.type === \"ObjectWithRecord\") {\n        const objectWithRecordError = error;\n        if (objectWithRecordError.reason.kind === \"NotObject\") {\n            return [{ message: formatTypeError(error), path }];\n        }\n        if (objectWithRecordError.reason.kind === \"IndexKey\" ||\n            objectWithRecordError.reason.kind === \"IndexValue\") {\n            return typeErrorToStandardSchemaIssues(objectWithRecordError.reason.error, formatTypeError, [...path, objectWithRecordError.reason.key]);\n        }\n        const issues = [];\n        for (const [key, propError] of Object.entries(objectWithRecordError.reason.errors)) {\n            issues.push(...typeErrorToStandardSchemaIssues(propError, formatTypeError, [...path, key]));\n        }\n        return issues;\n    }\n    if (error.type === \"Record\") {\n        const recordError = error;\n        if (recordError.reason.kind === \"NotRecord\") {\n            return [{ message: formatTypeError(error), path }];\n        }\n        return typeErrorToStandardSchemaIssues(recordError.reason.error, formatTypeError, [...path, recordError.reason.key]);\n    }\n    if (error.type === \"Tuple\") {\n        const tupleError = error;\n        if (tupleError.reason.kind === \"InvalidLength\") {\n            return [{ message: formatTypeError(error), path }];\n        }\n        return typeErrorToStandardSchemaIssues(tupleError.reason.error, formatTypeError, [...path, tupleError.reason.index]);\n    }\n    if (error.type === \"Union\") {\n        const unionError = error;\n        return unionError.errors.flatMap((err) => typeErrorToStandardSchemaIssues(err, formatTypeError, path));\n    }\n    if (error.type === \"Brand\") {\n        const brandError = error;\n        if (\"parentError\" in brandError) {\n            return typeErrorToStandardSchemaIssues(brandError.parentError, formatTypeError, path);\n        }\n        return [{ message: formatTypeError(error), path }];\n    }\n    return [{ message: formatTypeError(error), path }];\n};\n/**\n * Shared formatter cache for Standard Schema integration - avoids circular\n * dependency by lazily creating the formatter on first use rather than during\n * module initialization.\n */\nlet cachedStandardSchemaFormatTypeError;\n", "import { NonNegativeInt } from \"./Type.js\";\nexport { bytesToHex, bytesToUtf8, concatBytes, hexToBytes, utf8ToBytes, } from \"@noble/ciphers/utils.js\";\n/**\n * Custom error for {@link Buffer}-related failures like premature end of data.\n * Provides better stack traces for debugging binary protocol issues.\n */\nexport class BufferError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = this.constructor.name;\n        Error.captureStackTrace(this, this.constructor);\n    }\n}\n/** Creates a {@link Buffer} for efficient byte operations. */\nexport const createBuffer = (arrayLike) => {\n    let value = arrayLike\n        ? new globalThis.Uint8Array(arrayLike)\n        : new globalThis.Uint8Array(512);\n    let length = NonNegativeInt.orThrow(arrayLike ? arrayLike.length : 0);\n    const buffer = {\n        getCapacity: () => NonNegativeInt.orThrow(value.length),\n        getLength: () => length,\n        extend: (arg) => {\n            const targetSize = length + arg.length;\n            if (value.length < targetSize) {\n                const oldValue = value;\n                const newCapacity = Math.max(value.length * 2, targetSize);\n                value = new globalThis.Uint8Array(newCapacity);\n                value.set(oldValue);\n            }\n            value.set(arg, length);\n            length = NonNegativeInt.orThrow(length + arg.length);\n        },\n        shift: () => {\n            if (length === 0) {\n                throw new BufferError(\"Buffer parse ended prematurely\");\n            }\n            const first = value[0];\n            value = value.subarray(1);\n            length--;\n            return NonNegativeInt.orThrow(first);\n        },\n        shiftN: (n) => {\n            if (length < n) {\n                throw new BufferError(\"Buffer parse ended prematurely\");\n            }\n            const subarray = value.subarray(0, n);\n            value = value.subarray(n);\n            length = NonNegativeInt.orThrow(length - n);\n            return subarray;\n        },\n        truncate: (newLength) => {\n            if (newLength > length) {\n                throw new BufferError(\"Cannot truncate to a length greater than current\");\n            }\n            length = newLength;\n        },\n        reset: () => {\n            length = NonNegativeInt.orThrow(0);\n        },\n        unwrap: () => value.subarray(0, length),\n    };\n    return buffer;\n};\n", "/**\n * Creates an LRU (least recently used) cache with a maximum capacity.\n *\n * When the cache reaches capacity, the least recently used entry is evicted.\n * Both `get` and `set` operations update the access order.\n *\n * ### Example\n *\n * ```ts\n * const cache = createLruCache<string, number>(2);\n * cache.set(\"a\", 1);\n * cache.set(\"b\", 2);\n * cache.set(\"c\", 3); // Evicts \"a\"\n * cache.has(\"a\"); // false\n * ```\n */\nexport const createLruCache = (capacity) => {\n    const internalMap = new Map();\n    return {\n        has: (key) => internalMap.has(key),\n        get: (key) => {\n            const value = internalMap.get(key);\n            if (value === undefined)\n                return undefined;\n            // Move to end (most recently used)\n            internalMap.delete(key);\n            internalMap.set(key, value);\n            return value;\n        },\n        set: (key, val) => {\n            // If key exists, delete it first to update order\n            if (internalMap.has(key)) {\n                internalMap.delete(key);\n            }\n            else if (internalMap.size === capacity) {\n                // Evict least recently used (first entry)\n                const firstKey = internalMap.keys().next().value;\n                internalMap.delete(firstKey);\n            }\n            internalMap.set(key, val);\n        },\n        delete: (key) => {\n            internalMap.delete(key);\n        },\n        map: internalMap,\n    };\n};\n", "import { createId } from \"./Type.js\";\n/** Creates a {@link Callbacks} registry for managing callbacks. */\nexport const createCallbacks = (deps) => {\n    const callbackMap = new Map();\n    return {\n        register: (callback) => {\n            const id = createId(deps);\n            callbackMap.set(id, callback);\n            return id;\n        },\n        execute: (id, ...args) => {\n            const callback = callbackMap.get(id);\n            if (!callback)\n                return;\n            callbackMap.delete(id);\n            if (args.length === 0) {\n                // Called without argument (undefined case)\n                callback();\n            }\n            else {\n                callback(args[0]);\n            }\n        },\n    };\n};\n", "/** Creates a {@link Console} for logging with configurable output. */\nexport const createConsole = (config = {}) => {\n    const instance = {\n        enabled: config.enableLogging ?? false,\n        log: (...args) => {\n            // eslint-disable-next-line no-console, @typescript-eslint/no-unsafe-argument\n            if (instance.enabled)\n                console.log(...args);\n        },\n        info: (...args) => {\n            // eslint-disable-next-line no-console, @typescript-eslint/no-unsafe-argument\n            if (instance.enabled)\n                console.info(...args);\n        },\n        warn: (...args) => {\n            // eslint-disable-next-line no-console, @typescript-eslint/no-unsafe-argument\n            if (instance.enabled)\n                console.warn(...args);\n        },\n        error: (...args) => {\n            // Always log errors, even if disabled\n            // eslint-disable-next-line no-console, @typescript-eslint/no-unsafe-argument\n            console.error(...args);\n        },\n        debug: (...args) => {\n            // eslint-disable-next-line no-console, @typescript-eslint/no-unsafe-argument\n            if (instance.enabled)\n                console.debug(...args);\n        },\n        time: (label) => {\n            // eslint-disable-next-line no-console\n            if (instance.enabled)\n                console.time(label);\n        },\n        timeLog: (label, ...data) => {\n            // eslint-disable-next-line no-console, @typescript-eslint/no-unsafe-argument\n            if (instance.enabled)\n                console.timeLog(label, ...data);\n        },\n        timeEnd: (label) => {\n            // eslint-disable-next-line no-console\n            if (instance.enabled)\n                console.timeEnd(label);\n        },\n        dir: (object, options) => {\n            // eslint-disable-next-line no-console\n            if (instance.enabled)\n                console.dir(object, options);\n        },\n        table: (tabularData, properties) => {\n            // eslint-disable-next-line no-console\n            if (instance.enabled)\n                console.table(tabularData, properties);\n        },\n        count: (label) => {\n            // eslint-disable-next-line no-console\n            if (instance.enabled)\n                console.count(label);\n        },\n        countReset: (label) => {\n            // eslint-disable-next-line no-console\n            if (instance.enabled)\n                console.countReset(label);\n        },\n        assert: (value, message, ...optionalParams) => {\n            // eslint-disable-next-line no-console, @typescript-eslint/no-unsafe-argument\n            if (instance.enabled)\n                console.assert(value, message, ...optionalParams);\n        },\n        trace: (message, ...optionalParams) => {\n            // eslint-disable-next-line no-console, @typescript-eslint/no-unsafe-argument\n            if (instance.enabled)\n                console.trace(message, ...optionalParams);\n        },\n    };\n    return instance;\n};\n/** Creates a console instance with timestamp prefixes. */\nexport const createConsoleWithTime = (config = { timestampType: \"relative\" }) => {\n    const console = createConsole(config);\n    const startTime = performance.now();\n    const getTimestamp = () => {\n        if (config.timestampType === \"relative\") {\n            const elapsed = (performance.now() - startTime) / 1000;\n            // Format for better readability at different time scales\n            if (elapsed < 60) {\n                // Under 1 minute: show seconds with millisecond precision\n                return `+${elapsed.toFixed(3)}s`;\n            }\n            else if (elapsed < 3600) {\n                // 1 minute to 1 hour: show minutes and seconds with millisecond precision\n                const minutes = Math.floor(elapsed / 60);\n                const seconds = (elapsed % 60).toFixed(3);\n                return `+${minutes}m${seconds}s`;\n            }\n            else {\n                // Over 1 hour: show hours, minutes, and seconds with millisecond precision\n                const hours = Math.floor(elapsed / 3600);\n                const minutes = Math.floor((elapsed % 3600) / 60);\n                const seconds = ((elapsed % 3600) % 60).toFixed(3);\n                return `+${hours}h${minutes}m${seconds}s`;\n            }\n        }\n        else {\n            // Absolute time - format as HH:MM:SS.mmm\n            const now = new Date();\n            const hours = now.getHours().toString().padStart(2, \"0\");\n            const minutes = now.getMinutes().toString().padStart(2, \"0\");\n            const seconds = now.getSeconds().toString().padStart(2, \"0\");\n            const milliseconds = now.getMilliseconds().toString().padStart(3, \"0\");\n            return `${hours}:${minutes}:${seconds}.${milliseconds}`;\n        }\n    };\n    const withTimestamp = (fn) => (...args) => {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        fn(`[${getTimestamp()}]`, ...args);\n    };\n    // Override methods that should have timestamps\n    console.log = withTimestamp(console.log);\n    console.info = withTimestamp(console.info);\n    console.warn = withTimestamp(console.warn);\n    console.error = withTimestamp(console.error);\n    console.debug = withTimestamp(console.debug);\n    console.trace = withTimestamp(console.trace);\n    return console;\n};\n", "/**\n * Cryptographic utilities\n *\n * Type-safe cryptographic operations including random number generation, SLIP21\n * key derivation, XChaCha20-Poly1305 symmetric encryption, PADM padding, and\n * timing-safe comparisons.\n *\n * @module\n */\nimport { xchacha20poly1305 } from \"@noble/ciphers/chacha.js\";\nimport { hmac } from \"@noble/hashes/hmac.js\";\nimport { sha512 } from \"@noble/hashes/sha2.js\";\nimport { randomBytes, utf8ToBytes } from \"@noble/hashes/utils.js\";\nimport { trySync } from \"./Result.js\";\nimport { brand, length, NonNegativeInt, Uint8Array } from \"./Type.js\";\nconst Entropy = brand(\"Entropy\", Uint8Array);\nexport const Entropy16 = length(16)(Entropy);\nexport const Entropy32 = length(32)(Entropy);\nexport const Entropy64 = length(64)(Entropy);\nexport const createRandomBytes = () => ({\n    create: randomBytes,\n});\n/**\n * SLIP21.\n *\n * https://github.com/satoshilabs/slips/blob/master/slip-0021.md\n */\nexport const createSlip21 = (seed, path) => {\n    let currentNode = hmac(sha512, utf8ToBytes(\"Symmetric key seed\"), seed);\n    for (const element of path) {\n        const label = typeof element === \"number\" ? element.toString() : element;\n        currentNode = deriveSlip21Node(label, currentNode);\n    }\n    return currentNode.slice(32, 64);\n};\n/**\n * Derives a single node in the SLIP-21 hierarchical key derivation.\n *\n * @see {@link createSlip21}\n */\nexport const deriveSlip21Node = (label, parentNode) => {\n    const labelBytes = utf8ToBytes(label);\n    const message = new globalThis.Uint8Array(labelBytes.byteLength + 1);\n    message[0] = 0;\n    message.set(labelBytes, 1);\n    return hmac(sha512, parentNode.slice(0, 32), message);\n};\n/** The encryption key for {@link SymmetricCrypto}. */\nexport const EncryptionKey = brand(\"EncryptionKey\", Entropy32);\n/**\n * XChaCha20-Poly1305 encryption\n *\n * https://github.com/paulmillr/noble-ciphers?tab=readme-ov-file#which-cipher-should-i-pick\n */\nexport const createSymmetricCrypto = (deps) => {\n    const nonceLength = NonNegativeInt.orThrow(24);\n    const symmetricCrypto = {\n        nonceLength,\n        encrypt: (plaintext, encryptionKey) => {\n            const nonce = deps.randomBytes.create(nonceLength);\n            const ciphertext = xchacha20poly1305(encryptionKey, nonce).encrypt(plaintext);\n            return { nonce, ciphertext };\n        },\n        decrypt: (ciphertext, encryptionKey, nonce) => trySync(() => xchacha20poly1305(encryptionKey, nonce).decrypt(ciphertext), (error) => ({\n            type: \"SymmetricCryptoDecryptError\",\n            error,\n        })),\n    };\n    return symmetricCrypto;\n};\n/**\n * Returns the PADM padded length for a given input length.\n *\n * PADM limits information leakage about the length of the plain-text for a\n * wide range of encrypted data sizes.\n *\n * See the PURBs paper for details: https://bford.info/pub/sec/purb.pdf\n */\nexport const createPadmePaddedLength = (length) => {\n    if (length <= 0)\n        return NonNegativeInt.orThrow(0);\n    const e = 31 - Math.clz32(length >>> 0);\n    const s = 32 - Math.clz32(e >>> 0);\n    const z = Math.max(0, e - s);\n    const mask = (1 << z) - 1;\n    return NonNegativeInt.orThrow((length + mask) & ~mask);\n};\n/** Creates a PADM padding array of zeros for the given input length. */\nexport const createPadmePadding = (length) => {\n    const paddedLength = createPadmePaddedLength(length);\n    const paddingLength = NonNegativeInt.orThrow(paddedLength - length);\n    return new globalThis.Uint8Array(paddingLength);\n};\n", "export const eqStrict = (x, y) => x === y;\nexport const eqString = eqStrict;\nexport const eqNumber = eqStrict;\nexport const eqBigInt = eqStrict;\nexport const eqBoolean = eqStrict;\nexport const eqUndefined = eqStrict;\nexport const eqNull = eqStrict;\n/** Derives an {@link Eq} from an {@link Order}. */\nexport const eqFromOrder = (order) => (x, y) => order(x, y) === 0;\n/**\n * Creates an equivalence function for array-like structures based on an\n * equivalence for their elements.\n *\n * ### Example\n *\n * ```ts\n * const eqArrayNumber = createEqArrayLike(eqNumber);\n * eqArrayNumber([1, 2, 3], [1, 2, 3]); // true (works with regular arrays)\n * eqArrayNumber(new Uint8Array([1, 2, 3]), new Uint8Array([1, 2, 3])); // true (works with Uint8Array)\n * eqArrayNumber([1, 2, 3], [1, 2, 4]); // false\n * ```\n */\nexport const createEqArrayLike = (item) => (x, y) => {\n    if (x === y)\n        return true;\n    if (x.length !== y.length)\n        return false;\n    for (let i = 0; i < x.length; i++) {\n        if (!item(x[i], y[i]))\n            return false;\n    }\n    return true;\n};\n/**\n * Compares two array-like structures of numbers for equality.\n *\n * ### Example\n *\n * ```ts\n * eqArrayNumber([1, 2, 3], [1, 2, 3]); // true (works with regular arrays)\n * eqArrayNumber(new Uint8Array([1, 2, 3]), new Uint8Array([1, 2, 3])); // true (works with Uint8Array)\n * eqArrayNumber([1, 2, 3], [1, 2, 4]); // false\n * ```\n */\nexport const eqArrayNumber = createEqArrayLike(eqNumber);\n/**\n * Creates an equivalence function for objects based on an equivalence for their\n * fields.\n *\n * ### Example\n *\n * ```ts\n * const eqObjectNumber = createEqObject({ a: eqNumber });\n * eqObjectNumber({ a: 1 }, { a: 1 }); // true\n * eqObjectNumber({ a: 1 }, { a: 2 }); // false\n * ```\n */\nexport const createEqObject = (eqs) => (x, y) => {\n    if (x === y)\n        return true;\n    for (const key in eqs) {\n        if (!eqs[key](x[key], y[key])) {\n            return false;\n        }\n    }\n    return true;\n};\n/**\n * Deeply compares two {@link JsonValue} values for equality.\n *\n * - Uses an iterative approach with a stack to handle large or deeply nested\n *   objects without risking stack overflow.\n * - Handles circular references with a WeakMap to prevent infinite loops.\n * - Unlike JSON.stringify, this function directly compares values, avoiding\n *   serialization overhead and leveraging short-circuit evaluation for faster\n *   failure on mismatched structures.\n *\n * ### Example\n *\n * ```ts\n * const obj1: Json = { name: \"Alice\", hobbies: [\"reading\", \"hiking\"] };\n * const obj2: Json = { name: \"Alice\", hobbies: [\"reading\", \"hiking\"] };\n * console.log(eqJson(obj1, obj2)); // true\n * ```\n */\nexport const eqJsonValue = (a, b) => {\n    const stack = [[a, b]];\n    const seen = new WeakMap();\n    while (stack.length > 0) {\n        const [x, y] = stack.pop();\n        if (x === y)\n            continue;\n        const typeX = typeof x;\n        const typeY = typeof y;\n        if (typeX !== typeY || x === null || y === null)\n            return false;\n        if (typeX === \"number\" && isNaN(x) && isNaN(y)) {\n            continue;\n        }\n        if (typeX === \"object\") {\n            const isArrayX = Array.isArray(x);\n            const isArrayY = Array.isArray(y);\n            if (isArrayX !== isArrayY)\n                return false;\n            const xObj = x;\n            const yObj = y;\n            if (seen.has(xObj)) {\n                const ySet = seen.get(xObj);\n                if (ySet.has(yObj)) {\n                    continue;\n                }\n                ySet.add(yObj);\n            }\n            else {\n                const ySet = new WeakSet();\n                ySet.add(yObj);\n                seen.set(xObj, ySet);\n            }\n            if (isArrayX && isArrayY) {\n                const xArr = x;\n                const yArr = y;\n                if (xArr.length !== yArr.length)\n                    return false;\n                for (let i = 0; i < xArr.length; i++) {\n                    stack.push([xArr[i], yArr[i]]);\n                }\n            }\n            else {\n                const xObjTyped = x;\n                const yObjTyped = y;\n                const xKeys = Object.keys(xObjTyped);\n                const yKeys = Object.keys(yObjTyped);\n                if (xKeys.length !== yKeys.length)\n                    return false;\n                const yKeySet = new Set(yKeys);\n                for (const key of xKeys) {\n                    if (!yKeySet.has(key))\n                        return false;\n                    stack.push([xObjTyped[key], yObjTyped[key]]);\n                }\n            }\n        }\n        else {\n            return false;\n        }\n    }\n    return true;\n};\n/**\n * Deeply compares two {@link JsonValueInput} values for equality.\n *\n * - Uses an iterative approach with a stack to handle large or deeply nested\n *   objects without risking stack overflow.\n * - Handles circular references with a WeakMap to prevent infinite loops.\n * - Unlike JSON.stringify, this function directly compares values, avoiding\n *   serialization overhead and leveraging short-circuit evaluation for faster\n *   failure on mismatched structures.\n *\n * ### Example\n *\n * ```ts\n * const obj1: Json = { name: \"Alice\", hobbies: [\"reading\", \"hiking\"] };\n * const obj2: Json = { name: \"Alice\", hobbies: [\"reading\", \"hiking\"] };\n * console.log(eqJson(obj1, obj2)); // true\n * ```\n */\nexport const eqJsonValueInput = (a, b) => eqJsonValue(a, b);\n", "/** Creates a {@link TransferableError} from an unknown error. */\nexport const createTransferableError = (error) => {\n    const convertError = (err) => {\n        const transferableError = Object.getOwnPropertyNames(err).reduce((acc, key) => {\n            const value = err[key];\n            if (key === \"cause\" && value instanceof Error) {\n                // Recursively process the `cause` property\n                acc[key] = convertError(value);\n            }\n            else if (typeof value !== \"function\") {\n                acc[key] = value;\n            }\n            return acc;\n        }, {});\n        return transferableError;\n    };\n    if (error instanceof Error) {\n        return {\n            type: \"TransferableError\",\n            error: convertError(error),\n        };\n    }\n    try {\n        // Clone other values that are transferable\n        return {\n            type: \"TransferableError\",\n            error: structuredClone(error),\n        };\n    }\n    catch {\n        // Fallback for non-transferable or problematic values\n        try {\n            return {\n                type: \"TransferableError\",\n                error: String(error), // Attempt to convert to a string\n            };\n        }\n        catch {\n            // Final fallback if even `String(error)` fails\n            return {\n                type: \"TransferableError\",\n                error: \"[Unserializable Object]\",\n            };\n        }\n    }\n};\n", "/**\n * Helper function to ensure exhaustive matching in a switch statement. Throws\n * an error if an unhandled case is encountered.\n *\n * Remember, it's useful only when we don't return anything from the switch\n * statement. Otherwise, a return type of a function is enough.\n *\n * ### Example\n *\n * ```ts\n * type Color = \"red\" | \"green\" | \"blue\";\n *\n * function handleColor(color: Color): void {\n *   switch (color) {\n *     case \"red\":\n *       console.log(\"Handling red\");\n *       break;\n *     case \"green\":\n *       console.log(\"Handling green\");\n *       break;\n *     case \"blue\":\n *       console.log(\"Handling blue\");\n *       break;\n *     default:\n *       exhaustiveCheck(color); // Ensures all cases are handled\n *   }\n * }\n * ```\n */\nexport const exhaustiveCheck = (value) => {\n    throw new Error(`exhaustiveCheck unhandled case: ${JSON.stringify(value)}`);\n};\n/**\n * Returns the input value unchanged.\n *\n * Useful as a default transformation, placeholder callback, or when a function\n * is required but no transformation is needed.\n *\n * ### Example\n *\n * ```ts\n * const values = [1, 2, 3];\n * const same = values.map(identity); // [1, 2, 3]\n *\n * const getTransform = (shouldDouble: boolean) =>\n *   shouldDouble ? (x: number) => x * 2 : identity;\n * ```\n */\nexport const identity = (a) => a;\nexport function readonly(value) {\n    return value;\n}\nexport const constVoid = () => undefined;\nexport const constUndefined = () => undefined;\nexport const constNull = () => null;\nexport const constTrue = () => true;\nexport const constFalse = () => false;\n", "import { idToIdBytes } from \"./Type.js\";\nimport { md5 } from \"@noble/hashes/legacy.js\";\n/**\n * Creates a deterministic identicon SVG from an {@link Id}.\n *\n * Works with any {@link Id} including branded IDs like `OwnerId`, etc.\n *\n * Available styles:\n *\n * - `\"github\"` (default): 5x5 grid with horizontal mirroring (GitHub-style)\n * - `\"quadrant\"`: 2x2 grid with direct RGB color mapping from bytes\n * - `\"gradient\"`: Diagonal stripes with smooth color gradients\n * - `\"sutnar\"`: Three compositional variants with adaptive colors\n *\n * ### Example\n *\n * ```ts\n * const svg = createIdenticon(id);\n * const quadrantStyle = createIdenticon(id, \"quadrant\");\n * const gradientStyle = createIdenticon(id, \"gradient\");\n * const sutnarStyle = createIdenticon(id, \"sutnar\");\n *\n * // Works with branded IDs\n * const ownerSvg = createIdenticon(ownerId);\n * ```\n */\nexport const createIdenticon = (id, style = \"github\") => {\n    const bytes = idToIdBytes(id);\n    switch (style) {\n        case \"github\": {\n            // GitHub-style identicon: MD5 hash the bytes first\n            const hashedBytes = md5(bytes);\n            // Map function for value ranges\n            const map = (value, inMin, inMax, outMin, outMax) => ((value - inMin) * (outMax - outMin)) / (inMax - inMin) + outMin;\n            // Extract 12-bit hue from bytes[12] (lower 4 bits) + bytes[13]\n            const h = ((hashedBytes[12] & 0x0f) << 8) | hashedBytes[13];\n            const hue = map(h, 0, 4095, 0, 360);\n            const saturation = 65 - map(hashedBytes[14], 0, 255, 0, 20);\n            const lightness = 75 - map(hashedBytes[15], 0, 255, 0, 20);\n            const fgColor = `hsl(${hue},${saturation}%,${lightness}%)`;\n            const bgColor = `hsl(${hue},${saturation}%,90%)`;\n            let rects = `<rect width=\"5\" height=\"5\" fill=\"${bgColor}\"/>`;\n            // Extract nibbles and generate pattern\n            let nibbleIndex = 0;\n            for (let x = 2; x >= 0; x--) {\n                for (let y = 0; y < 5; y++) {\n                    const byte = hashedBytes[Math.floor(nibbleIndex / 2)];\n                    const nibble = nibbleIndex % 2 === 0 ? byte >> 4 : byte & 0x0f;\n                    const paint = nibble % 2 === 0;\n                    nibbleIndex++;\n                    if (paint) {\n                        rects += `<rect x=\"${x}\" y=\"${y}\" width=\"1\" height=\"1\" fill=\"${fgColor}\"/>`;\n                        const mx = 4 - x;\n                        if (mx !== x) {\n                            rects += `<rect x=\"${mx}\" y=\"${y}\" width=\"1\" height=\"1\" fill=\"${fgColor}\"/>`;\n                        }\n                    }\n                }\n            }\n            return `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 5 5\" shape-rendering=\"crispEdges\">${rects}</svg>`;\n        }\n        case \"quadrant\": {\n            const toHex = (b) => b.toString(16).padStart(2, \"0\");\n            let rects = \"\";\n            for (let i = 0; i < 4; i++) {\n                const x = i % 2;\n                const y = Math.floor(i / 2);\n                const r = bytes[i * 3];\n                const g = bytes[i * 3 + 1];\n                const b = bytes[i * 3 + 2];\n                const color = `#${toHex(r)}${toHex(g)}${toHex(b)}`;\n                rects += `<rect x=\"${x}\" y=\"${y}\" width=\"1\" height=\"1\" fill=\"${color}\"/>`;\n            }\n            return `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 2 2\">${rects}</svg>`;\n        }\n        case \"gradient\": {\n            // Smooth color gradients with diagonal stripes.\n            const toHex = (b) => b.toString(16).padStart(2, \"0\");\n            // Generate colors from bytes.\n            const color1 = `#${toHex(bytes[0])}${toHex(bytes[1])}${toHex(bytes[2])}`;\n            const color2 = `#${toHex(bytes[3])}${toHex(bytes[4])}${toHex(bytes[5])}`;\n            const color3 = `#${toHex(bytes[6])}${toHex(bytes[7])}${toHex(bytes[8])}`;\n            let defs = \"\";\n            let shapes = \"\";\n            // Diagonal stripes with gradient.\n            defs += `<linearGradient id=\"grad1-${id}\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">`;\n            defs += `<stop offset=\"0%\" style=\"stop-color:${color1};stop-opacity:1\" />`;\n            defs += `<stop offset=\"100%\" style=\"stop-color:${color2};stop-opacity:1\" />`;\n            defs += `</linearGradient>`;\n            defs += `<linearGradient id=\"grad2-${id}\" x1=\"0%\" y1=\"0%\" x2=\"0%\" y2=\"100%\">`;\n            defs += `<stop offset=\"0%\" style=\"stop-color:${color2};stop-opacity:1\" />`;\n            defs += `<stop offset=\"100%\" style=\"stop-color:${color3};stop-opacity:1\" />`;\n            defs += `</linearGradient>`;\n            shapes += `<rect width=\"100\" height=\"100\" fill=\"url(#grad1-${id})\"/>`;\n            const stripeWidth = 15 + (bytes[9] / 255) * 20;\n            const angle = 30 + (bytes[10] / 255) * 60;\n            shapes += `<rect x=\"20\" y=\"-50\" width=\"${stripeWidth}\" height=\"200\" fill=\"url(#grad2-${id})\" transform=\"rotate(${angle} 50 50)\" opacity=\"0.7\"/>`;\n            shapes += `<rect x=\"60\" y=\"-50\" width=\"${stripeWidth}\" height=\"200\" fill=\"url(#grad2-${id})\" transform=\"rotate(${angle} 50 50)\" opacity=\"0.5\"/>`;\n            return `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><defs>${defs}</defs>${shapes}</svg>`;\n        }\n        case \"sutnar\": {\n            // Three compositional variants with adaptive colors.\n            const hue = (bytes[0] / 255) * 360;\n            const saturation = 50 + (bytes[1] / 255) * 30;\n            const lightness = 50 + (bytes[2] / 255) * 20;\n            // Generate palette from base hue with variations\n            const toHsl = (h, s, l) => `hsl(${h},${s}%,${l}%)`;\n            const color1 = toHsl(hue, saturation, lightness);\n            const color2 = toHsl((hue + 120) % 360, saturation, lightness);\n            const color3 = toHsl((hue + 240) % 360, saturation, lightness);\n            const color4 = toHsl(hue, saturation * 0.3, lightness * 0.5);\n            const color5 = toHsl(hue, saturation * 0.5, Math.min(lightness * 1.3, 90));\n            const palette = [color1, color2, color3, color4, color5];\n            // Layout variant based on first byte.\n            const variant = bytes[3] % 3;\n            let shapes = \"\";\n            // Almost white background with subtle tint.\n            shapes += `<rect width=\"100\" height=\"100\" fill=\"${toHsl(hue, 10, 95)}\"/>`;\n            if (variant === 0) {\n                // Composition A: Circle + horizontal bar.\n                const circleColor = palette[bytes[4] % palette.length];\n                const barColor = palette[(bytes[4] + 1) % palette.length];\n                shapes += `<circle cx=\"30\" cy=\"50\" r=\"22\" fill=\"${circleColor}\"/>`;\n                shapes += `<rect x=\"60\" y=\"40\" width=\"35\" height=\"20\" fill=\"${barColor}\"/>`;\n            }\n            else if (variant === 1) {\n                // Composition B: Vertical bar + circle.\n                const barColor = palette[bytes[5] % palette.length];\n                const circleColor = palette[(bytes[5] + 1) % palette.length];\n                shapes += `<rect x=\"15\" y=\"10\" width=\"18\" height=\"80\" fill=\"${barColor}\"/>`;\n                shapes += `<circle cx=\"70\" cy=\"50\" r=\"15\" fill=\"${circleColor}\"/>`;\n            }\n            else {\n                // Composition C: Square + circle.\n                const squareColor = palette[bytes[6] % palette.length];\n                const circleColor = palette[(bytes[6] + 1) % palette.length];\n                shapes += `<rect x=\"20\" y=\"20\" width=\"30\" height=\"30\" fill=\"${squareColor}\"/>`;\n                shapes += `<circle cx=\"70\" cy=\"70\" r=\"18\" fill=\"${circleColor}\"/>`;\n            }\n            return `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\">${shapes}</svg>`;\n        }\n    }\n};\n", "/** Creates an {@link Instances}. */\nexport const createInstances = () => {\n    const instances = new Map();\n    return {\n        ensure: (key, create, onCacheHit) => {\n            let instance = instances.get(key);\n            if (instance == null) {\n                instance = create();\n                instances.set(key, instance);\n            }\n            else if (onCacheHit) {\n                onCacheHit(instance);\n            }\n            return instance;\n        },\n        get: (key) => instances.get(key) ?? null,\n        has: (key) => instances.has(key),\n        delete: (key) => {\n            const instance = instances.get(key);\n            if (instance == null)\n                return false;\n            instances.delete(key);\n            instance[Symbol.dispose]();\n            return true;\n        },\n        [Symbol.dispose]: () => {\n            const errors = [];\n            for (const instance of instances.values()) {\n                try {\n                    instance[Symbol.dispose]();\n                }\n                catch (error) {\n                    errors.push(error);\n                }\n            }\n            instances.clear();\n            if (errors.length === 1)\n                throw errors[0];\n            if (errors.length > 1) {\n                throw new AggregateError(errors, \"Multiple disposal errors occurred\");\n            }\n        },\n    };\n};\n", "import { createLruCache } from \"./Cache.js\";\nimport { eqArrayNumber } from \"./Eq.js\";\nimport { createTransferableError } from \"./Error.js\";\nimport { err, ok, tryAsync, trySync } from \"./Result.js\";\nimport { Null, Number, PositiveInt, String, Uint8Array, union, } from \"./Type.js\";\n/**\n * A value that can be stored in Sqlite.\n *\n * Note that Evolu can't support Int64 because expo-sqlite (and some others) do\n * not support it.\n */\nexport const SqliteValue = union(Null, String, Number, Uint8Array);\nexport const eqSqliteValue = (x, y) => {\n    if (x instanceof globalThis.Uint8Array &&\n        y instanceof globalThis.Uint8Array) {\n        return eqArrayNumber(x, y);\n    }\n    return x === y;\n};\n/**\n * Creates a fully featured {@link Sqlite} instance from a {@link SqliteDriver}\n * implementation.\n */\nexport const createSqlite = (deps) => async (name, options) => tryAsync(async () => {\n    const driver = await deps.createSqliteDriver(name, options);\n    let isDisposed = false;\n    const doRollback = () => trySync(() => {\n        deps.console?.log(\"[sql] rollback\");\n        driver.exec(sql `rollback;`, true);\n    }, createSqliteError);\n    const sqlite = {\n        exec: (query) => trySync(() => {\n            deps.console?.log(\"[sql]\", { query });\n            const result = maybeLogSqliteQueryExecutionTime(query, () => driver.exec(query, isSqlMutation(query.sql)));\n            deps.console?.log(\"[sql]\", { result });\n            return result;\n        }, (error) => ({\n            type: \"SqliteError\",\n            error: createTransferableError(error),\n        })),\n        transaction: (callback) => {\n            const transactionResult = trySync(() => {\n                deps.console?.log(\"[sql] begin\");\n                driver.exec(sql `begin;`, true);\n                const result = callback();\n                if (!result.ok)\n                    return result;\n                deps.console?.log(\"[sql] commit\");\n                driver.exec(sql `commit;`, true);\n                return result;\n            }, createSqliteError);\n            // There was an SqliteError during begin, callback, or commit\n            if (!transactionResult.ok) {\n                const rollback = doRollback();\n                if (!rollback.ok) {\n                    deps.console?.log(\"[sql] rollback failed\", rollback.error);\n                    return err({\n                        type: \"SqliteError\",\n                        error: transactionResult.error.error,\n                        rollbackError: rollback.error.error,\n                    });\n                }\n                return transactionResult;\n            }\n            // Callback returned an error\n            if (!transactionResult.value.ok) {\n                const rollback = doRollback();\n                if (!rollback.ok) {\n                    deps.console?.log(\"[sql] rollback failed\", rollback.error);\n                    return err({\n                        type: \"SqliteError\",\n                        error: createTransferableError(transactionResult.value.error),\n                        rollbackError: rollback.error.error,\n                    });\n                }\n                return transactionResult.value;\n            }\n            return ok(transactionResult.value.value);\n        },\n        export: () => trySync(() => {\n            return driver.export();\n        }, (error) => ({\n            type: \"SqliteError\",\n            error: createTransferableError(error),\n        })),\n        [Symbol.dispose]: () => {\n            if (isDisposed)\n                return;\n            isDisposed = true;\n            driver[Symbol.dispose]();\n        },\n    };\n    return sqlite;\n}, createSqliteError);\nconst createSqliteError = (error) => ({\n    type: \"SqliteError\",\n    error: createTransferableError(error),\n});\nconst maybeLogSqliteQueryExecutionTime = (query, callback) => {\n    if (!query.options?.logQueryExecutionTime) {\n        return callback();\n    }\n    const start = performance.now();\n    const result = callback();\n    const elapsed = performance.now() - start;\n    // eslint-disable-next-line no-console\n    console.log(`SqliteQueryExecutionTime: ${elapsed.toString()}ms`, query);\n    return result;\n};\nexport const createPreparedStatementsCache = (factory, disposeFn) => {\n    let isDisposed = false;\n    const cache = new Map();\n    return {\n        get: (query, alwaysPrepare) => {\n            if (alwaysPrepare !== true && !query.options?.prepare)\n                return null;\n            let statement = cache.get(query.sql);\n            if (!statement) {\n                statement = factory(query.sql);\n                cache.set(query.sql, statement);\n            }\n            return statement;\n        },\n        [Symbol.dispose]: () => {\n            if (isDisposed)\n                return;\n            isDisposed = true;\n            cache.forEach(disposeFn);\n            cache.clear();\n        },\n    };\n};\n/**\n * Creates a safe SQL query using a tagged template literal.\n *\n * Parameters are automatically escaped and bound as SQLite values. Use\n * `sql.identifier` for column/table names and `sql.raw` for unescaped SQL.\n *\n * ### Example\n *\n * ```ts\n * const id = 42;\n * const name = \"Alice\";\n *\n * const result = sqlite.exec(sql`\n *   select *\n *   from users\n *   where id = ${id} and name = ${name};\n * `);\n *\n * // For identifiers\n * const tableName = \"users\";\n * sqlite.exec(sql`\n *   create table ${sql.identifier(tableName)} (\n *     \"id\" text primary key,\n *     \"name\" text not null\n *   );\n * `);\n *\n * // For raw SQL (use with caution)\n * const orderBy = \"created_at desc\";\n * sqlite.exec(sql`select * from users order by ${sql.raw(orderBy)};`);\n * ```\n *\n * ### TIP\n *\n * Use `prettier-plugin-sql-cst` for SQL formatting. Like Prettier for\n * JavaScript, this plugin formats SQL expressions differently depending on\n * their length.\n */\nexport const sql = (strings, ...parameters) => {\n    let sql = \"\";\n    const values = [];\n    for (let i = 0; i < strings.length; i++) {\n        sql += strings[i];\n        if (i < parameters.length) {\n            const param = parameters[i];\n            if (typeof param === \"object\" && param != null && \"type\" in param) {\n                sql += param.sql;\n            }\n            else {\n                sql += \"?\";\n                values.push(param);\n            }\n        }\n    }\n    return { sql: sql, parameters: values };\n};\nsql.identifier = (identifier) => ({\n    type: \"SqlIdentifier\",\n    // From Kysely\n    sql: `\"${identifier.replace(/\"/g, '\"\"')}\"`,\n});\n/**\n * Insert any string.\n *\n * Sql.raw sometimes breaks auto-formatting because the parser does not consider\n * it valid SQL. A workaround is to remove it, format it, and put it back.\n *\n * **Warning**: This is not escaped.\n */\nsql.raw = (raw) => ({ type: \"RawSql\", sql: raw });\nsql.prepared = (strings, ...parameters) => {\n    const query = sql(strings, ...parameters);\n    return { ...query, options: { prepare: true } };\n};\n/**\n * Checks if a SQL string contains mutation keywords (insert, update, delete,\n * etc.). Results are cached for performance.\n */\nexport const isSqlMutation = (sql) => {\n    /**\n     * Without cache, \"insert 1_000_000\" Storage test dropped from 57742\n     * inserts/sec to 34k. Regex we used was fast, but CodeQL flagged it as a\n     * potential ReDoS vulnerability, so manual comment removal was the only\n     * option. LRU cache restores performance.\n     */\n    const cached = isSqlMutationCache.get(sql);\n    if (cached !== undefined)\n        return cached;\n    const result = isSqlMutationRegEx.test(removeSqlComments(sql));\n    isSqlMutationCache.set(sql, result);\n    return result;\n};\nconst isSqlMutationCache = createLruCache(PositiveInt.orThrow(10_000));\nconst isSqlMutationRegEx = new RegExp(`\\\\b(${[\n    \"alter\",\n    \"create\",\n    \"delete\",\n    \"drop\",\n    \"insert\",\n    \"replace\",\n    \"update\",\n    \"begin\",\n    \"commit\",\n    \"rollback\",\n    \"pragma\",\n    \"vacuum\",\n].join(\"|\")})\\\\b`, \"i\");\n/**\n * Removes SQL line comments (--) from a SQL string without using regex to avoid\n * ReDoS vulnerabilities.\n */\nconst removeSqlComments = (sql) => {\n    // Fast path: if there are no comments, return the original string\n    if (!sql.includes(\"--\"))\n        return sql;\n    let result = \"\";\n    let i = 0;\n    while (i < sql.length) {\n        // Check for comment start\n        if (i < sql.length - 1 && sql[i] === \"-\" && sql[i + 1] === \"-\") {\n            // Skip until end of line or end of string\n            i += 2;\n            while (i < sql.length && sql[i] !== \"\\n\") {\n                i++;\n            }\n            // Keep the newline if present\n            if (i < sql.length && sql[i] === \"\\n\") {\n                result += \"\\n\";\n                i++;\n            }\n        }\n        else {\n            result += sql[i];\n            i++;\n        }\n    }\n    return result;\n};\nexport const explainSqliteQueryPlan = (deps) => (query) => {\n    const result = deps.sqlite.exec({\n        ...query,\n        sql: `EXPLAIN QUERY PLAN ${query.sql}`,\n    });\n    if (!result.ok)\n        return result;\n    // eslint-disable-next-line no-console\n    console.log(\"[explainSqliteQueryPlan]\", query);\n    // eslint-disable-next-line no-console\n    console.log(drawSqliteQueryPlan(result.value.rows));\n    return ok();\n};\nconst drawSqliteQueryPlan = (rows) => rows\n    .map((row) => {\n    let parentId = row.parent;\n    let indent = 0;\n    do {\n        const parent = rows.find((r) => r.id === parentId);\n        if (!parent)\n            break;\n        parentId = parent.parent;\n        indent++;\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition, no-constant-condition\n    } while (true);\n    return `${\"  \".repeat(indent)}${row.detail}`;\n})\n    .join(\"\\n\");\n/**\n * SQLite represents boolean values using `0` (false) and `1` (true) instead of\n * a dedicated boolean type.\n *\n * See: https://www.sqlite.org/quirks.html#no_separate_boolean_datatype\n *\n * ### Tips\n *\n * - Use {@link sqliteTrue} and {@link sqliteFalse} constants for better\n *   readability.\n * - Use {@link booleanToSqliteBoolean} and {@link sqliteBooleanToBoolean} for\n *   converting between JavaScript booleans and SQLite boolean values.\n */\nexport const SqliteBoolean = union(0, 1);\n/**\n * Represents the {@link SqliteBoolean} value for `true`.\n *\n * See {@link SqliteBoolean}.\n */\nexport const sqliteTrue = 1;\n/**\n * Represents the {@link SqliteBoolean} value for `false`.\n *\n * See {@link SqliteBoolean}.\n */\nexport const sqliteFalse = 0;\n/**\n * Converts a JavaScript boolean to a {@link SqliteBoolean}.\n *\n * ### Example\n *\n * ```ts\n * const isActive = true;\n * const sqlValue = booleanToSqliteBoolean(isActive); // Returns 1\n * ```\n */\nexport const booleanToSqliteBoolean = (value) => value ? sqliteTrue : sqliteFalse;\n/**\n * Converts a {@link SqliteBoolean} to a JavaScript boolean.\n *\n * ### Example\n *\n * ```ts\n * const sqlValue: SqliteBoolean = 1;\n * const bool = sqliteBooleanToBoolean(sqlValue); // Returns true\n * ```\n */\nexport const sqliteBooleanToBoolean = (value) => value === sqliteTrue;\n", "import { eqStrict } from \"./Eq.js\";\n/**\n * Creates a store with the given initial state. The store encapsulates its\n * state, which can be read with `get` and updated with `set` or `modify`. All\n * changes are broadcast to subscribers.\n *\n * By default, state changes are detected using `===` (shallow equality). You\n * can provide a custom equality function as the second argument.\n */\nexport const createStore = (initialState, eq = eqStrict) => {\n    const listeners = new Set();\n    let currentState = initialState;\n    const updateState = (newState) => {\n        if (eq(newState, currentState))\n            return;\n        currentState = newState;\n        listeners.forEach((listener) => {\n            listener();\n        });\n    };\n    return {\n        subscribe: (listener) => {\n            listeners.add(listener);\n            return () => listeners.delete(listener);\n        },\n        get: () => currentState,\n        set: (state) => {\n            updateState(state);\n        },\n        modify: (updater) => {\n            updateState(updater(currentState));\n        },\n    };\n};\n", "import { assert } from \"./Assert.js\";\nimport { createTransferableError } from \"./Error.js\";\n/**\n * Creates a {@link Worker} that supports initialization with dependencies and\n * safe error handling.\n */\nexport const createInitializedWorker = ({ init, onMessage, }) => {\n    let onMessageCallback = null;\n    let deps = null;\n    const pendingMessages = [];\n    let initializing = false;\n    const postMessage = (msg) => {\n        assert(onMessageCallback != null, \"The onMessage wasn't set\");\n        onMessageCallback(msg);\n    };\n    const postMessageTransferableError = (error) => {\n        postMessage({\n            type: \"onError\",\n            error: createTransferableError(error),\n        });\n    };\n    /**\n     * Wraps function to catch errors and send them to the main thread instead of\n     * crashing the worker.\n     */\n    const withErrorReporting = (handler) => (...args) => {\n        try {\n            handler(...args);\n        }\n        catch (error) {\n            postMessageTransferableError(error);\n        }\n    };\n    const worker = {\n        postMessage: (message) => {\n            if (message.type !== \"init\") {\n                if (!deps) {\n                    pendingMessages.push(message);\n                }\n                else {\n                    withErrorReporting(onMessage(deps))(message);\n                }\n                return;\n            }\n            if (initializing)\n                return;\n            initializing = true;\n            init(message, postMessage, withErrorReporting)\n                .then((_deps) => {\n                if (_deps == null)\n                    return;\n                deps = _deps;\n                for (const message of pendingMessages) {\n                    withErrorReporting(onMessage(deps))(message);\n                }\n                pendingMessages.length = 0;\n            })\n                .catch(postMessageTransferableError);\n        },\n        onMessage: (callback) => {\n            onMessageCallback = callback;\n        },\n    };\n    return worker;\n};\n/**\n * Creates a {@link Worker} with type-safe message handlers for each message\n * type. This provides better type safety and organization compared to a single\n * onMessage handler.\n */\nexport const createInitializedWorkerWithHandlers = ({ init, handlers, }) => createInitializedWorker({\n    init,\n    onMessage: (deps) => (message) => {\n        const messageType = message.type;\n        const handler = handlers[messageType];\n        // TypeScript knows handler exists because handlers covers all non-init message types\n        handler(deps)(message);\n    },\n});\n", "import * as bip39 from \"@scure/bip39\";\nimport { wordlist } from \"@scure/bip39/wordlists/english.js\";\nimport { createSlip21, EncryptionKey, Entropy16, Entropy32, } from \"../Crypto.js\";\nimport { getOrNull } from \"../Result.js\";\nimport { brand, Id, IdBytes, idBytesToId, idToIdBytes, NonNegativeInt, } from \"../Type.js\";\n/** OwnerId is a branded {@link Id} that uniquely identifies an {@link Owner}. */\nexport const OwnerId = brand(\"OwnerId\", Id);\n/** Bytes representation of {@link OwnerId}. */\nexport const OwnerIdBytes = brand(\"OwnerIdBytes\", IdBytes);\n/** Converts {@link OwnerId} to {@link OwnerIdBytes}. */\nexport const ownerIdToOwnerIdBytes = (ownerId) => idToIdBytes(ownerId);\n/** Converts {@link OwnerIdBytes} to {@link OwnerId}. */\nexport const ownerIdBytesToOwnerId = (ownerIdBytes) => idBytesToId(ownerIdBytes);\nexport const ownerWriteKeyLength = NonNegativeInt.orThrow(16);\n/** Symmetric encryption key for {@link Owner} data protection. */\nexport const OwnerEncryptionKey = brand(\"OwnerEncryptionKey\", EncryptionKey);\n/**\n * A secure token for write operations. It's derived from {@link OwnerSecret} by\n * default and can be rotated via {@link createOwnerWriteKey}.\n */\nexport const OwnerWriteKey = brand(\"OwnerWriteKey\", Entropy16);\n/**\n * Creates a new random {@link OwnerWriteKey} for rotation.\n *\n * The initial OwnerWriteKey is deterministically derived from\n * {@link OwnerSecret}. Use `createOwnerWriteKey` to rotate (replace) the write\n * key without changing the owner identity.\n */\nexport const createOwnerWriteKey = (deps) => deps.randomBytes.create(16);\n/**\n * 32 bytes of cryptographic entropy used to derive {@link Owner} keys.\n *\n * Can be created using {@link createOwnerSecret} or converted from a\n * {@link Mnemonic} using {@link mnemonicToOwnerSecret}.\n */\nexport const OwnerSecret = brand(\"OwnerSecret\", Entropy32);\n/** Creates a {@link OwnerSecret}. */\nexport const createOwnerSecret = (deps) => deps.randomBytes.create(32);\n/** Converts an {@link OwnerSecret} to a {@link Mnemonic}. */\nexport const ownerSecretToMnemonic = (secret) => bip39.entropyToMnemonic(secret, wordlist);\n/** Converts a {@link Mnemonic} to an {@link OwnerSecret}. */\nexport const mnemonicToOwnerSecret = (mnemonic) => bip39.mnemonicToEntropy(mnemonic, wordlist);\n/**\n * Creates an {@link Owner} from a {@link OwnerSecret} using SLIP-21 key\n * derivation.\n */\nconst createOwner = (secret) => ({\n    id: ownerIdBytesToOwnerId(OwnerIdBytes.orThrow(createSlip21(secret, [\"Evolu\", \"OwnerIdBytes\"]).slice(0, 16))),\n    encryptionKey: OwnerEncryptionKey.orThrow(createSlip21(secret, [\"Evolu\", \"OwnerEncryptionKey\"])),\n    writeKey: OwnerWriteKey.orThrow(createSlip21(secret, [\"Evolu\", \"OwnerWriteKey\"]).slice(0, 16)),\n});\n/** Creates an {@link AppOwner} from an {@link OwnerSecret}. */\nexport const createAppOwner = (secret) => ({\n    ...createOwner(secret),\n    type: \"AppOwner\",\n    mnemonic: ownerSecretToMnemonic(secret),\n});\n/** Creates a {@link ShardOwner} from an {@link OwnerSecret}. */\nexport const createShardOwner = (secret) => {\n    return {\n        ...createOwner(secret),\n        type: \"ShardOwner\",\n    };\n};\n/**\n * Derives a {@link ShardOwner} from an {@link AppOwner} using the specified path.\n *\n * **Advantages of derived owners:**\n *\n * - **Deterministic**: Same path always produces the same ShardOwner across all\n *   devices\n * - **Immediate availability**: Can be hardcoded and used before sync occurs\n * - **Consistent setup**: All devices start with identical data structure\n * - **Lifecycle management**: Can implement epoch patterns for clean data\n *   deletion and recreation\n *\n * **Common patterns:**\n *\n * - Use paths like `[\"shard\", 1]` for versioned data lifecycle\n * - Use paths like `[\"project\", \"MyApp\", 1]` for named partitions with versions\n * - Each device can derive the same owners and set up initial structure\n */\nexport const deriveShardOwner = (owner, path) => {\n    const secret = createSlip21(owner.encryptionKey, path);\n    return {\n        ...createOwner(secret),\n        type: \"ShardOwner\",\n    };\n};\n/**\n * Creates a {@link SharedOwner} from an {@link OwnerSecret} for collaborative\n * write access.\n *\n * Use {@link createSharedReadonlyOwner} to create a read-only version for\n * sharing.\n */\nexport const createSharedOwner = (secret) => ({\n    ...createOwner(secret),\n    type: \"SharedOwner\",\n});\n/** Creates a {@link SharedReadonlyOwner} from a {@link SharedOwner}. */\nexport const createSharedReadonlyOwner = (sharedOwner) => ({\n    type: \"SharedReadonlyOwner\",\n    id: sharedOwner.id,\n    encryptionKey: sharedOwner.encryptionKey,\n});\n/**\n * Creates an {@link OwnerWebSocketTransport} for the given relay URL and\n * {@link OwnerId}.\n *\n * The URL must be a WebSocket base URL without query parameters or fragments\n * (e.g., `wss://relay.evolu.dev`, not `wss://relay.evolu.dev?foo=bar`). The\n * function appends the `ownerId` as a query parameter.\n *\n * ### Example\n *\n * ```ts\n * // Create transport \"wss://relay.evolu.dev?ownerId=...\"\n * const transport = createOwnerWebSocketTransport({\n *   url: \"wss://relay.evolu.dev\",\n *   ownerId: owner.id,\n * });\n *\n * // Use with createEvolu\n * const evolu = createEvolu(deps)(Schema, {\n *   transports: [transport],\n * });\n * ```\n */\nexport const createOwnerWebSocketTransport = (config) => ({\n    type: \"WebSocket\",\n    url: `${config.url}?ownerId=${config.ownerId}`,\n});\n/**\n * Extracts {@link OwnerId} from an {@link OwnerWebSocketTransport} URL query\n * string.\n *\n * Parses the query string `?ownerId=...` and validates that the extracted value\n * is a valid {@link OwnerId}.\n *\n * ### Example\n *\n * ```ts\n * parseOwnerIdFromOwnerWebSocketTransportUrl(\n *   \"/sync?ownerId=_12345678abcdefgh\",\n * );\n * // Returns: OwnerId or null\n * ```\n */\nexport const parseOwnerIdFromOwnerWebSocketTransportUrl = (url) => getOrNull(OwnerId.fromUnknown(url.split(\"=\")[1]));\n", "import { assertNonEmptyReadonlyArray } from \"./Assert.js\";\nimport { err, ok } from \"./Result.js\";\nimport { PositiveInt } from \"./Type.js\";\nexport const increment = (n) => n + 1;\nexport const decrement = (n) => n - 1;\n/** Clamps a number within a given range. */\nexport const clamp = (min, max) => (n) => Math.min(Math.max(n, min), max);\n/**\n * Creates a predicate that checks if a number is within a range, inclusive.\n *\n * ### Example\n *\n * ```ts\n * const isBetween10And20 = isBetween(10, 20);\n * console.log(isBetween10And20(15)); // true\n * console.log(isBetween10And20(25)); // false\n * ```\n */\nexport const isBetween = (min, max) => (value) => value >= min && value <= max;\n/** Returns the minimum value, preserving branded type if applicable. */\nexport const min = (...values) => values.reduce((a, b) => (a < b ? a : b));\n/** Returns the maximum value, preserving branded type if applicable. */\nexport const max = (...values) => values.reduce((a, b) => (a > b ? a : b));\n/**\n * Divides items into buckets as evenly as possible, ensuring each bucket has at\n * least the minimum number of items. Returns a success result if the minimum is\n * met, or an error result with the required number of items if not.\n *\n * ### Example\n *\n * ```ts\n * computeBalancedBuckets(10, 3, 2); // Returns ok([4, 7, 10])\n * computeBalancedBuckets(5, 3, 2); // Returns err(6)\n * ```\n */\nexport const computeBalancedBuckets = (numberOfItems, \n/** Default: 16 */\nnumberOfBuckets = PositiveInt.orThrow(16), \n/** Default: 2 */\nminNumberOfItemsPerBucket = PositiveInt.orThrow(2)) => {\n    const minRequiredItems = numberOfBuckets * minNumberOfItemsPerBucket;\n    if (numberOfItems < minRequiredItems)\n        return err(PositiveInt.orThrow(minRequiredItems));\n    const indexes = [];\n    const itemsPerBucket = Math.floor(numberOfItems / numberOfBuckets);\n    const extraItems = numberOfItems % numberOfBuckets;\n    let bucketBoundary = 0;\n    for (let i = 0; i < numberOfBuckets; i++) {\n        const hasExtraItem = i < extraItems;\n        const itemsInThisBucket = itemsPerBucket + (hasExtraItem ? 1 : 0);\n        bucketBoundary += itemsInThisBucket;\n        indexes.push(PositiveInt.orThrow(bucketBoundary));\n    }\n    assertNonEmptyReadonlyArray(indexes);\n    return ok(indexes);\n};\n", "/// <reference types=\"./object-utils.d.ts\" />\nexport function isEmpty(obj) {\n    if (Array.isArray(obj) || isString(obj) || isBuffer(obj)) {\n        return obj.length === 0;\n    }\n    else if (obj) {\n        return Object.keys(obj).length === 0;\n    }\n    return false;\n}\nexport function isUndefined(obj) {\n    return typeof obj === 'undefined' || obj === undefined;\n}\nexport function isString(obj) {\n    return typeof obj === 'string';\n}\nexport function isNumber(obj) {\n    return typeof obj === 'number';\n}\nexport function isBoolean(obj) {\n    return typeof obj === 'boolean';\n}\nexport function isNull(obj) {\n    return obj === null;\n}\nexport function isDate(obj) {\n    return obj instanceof Date;\n}\nexport function isBigInt(obj) {\n    return typeof obj === 'bigint';\n}\n// Don't change the returnd type to `obj is Buffer` to not create a\n// hard dependency to node.\nexport function isBuffer(obj) {\n    return typeof Buffer !== 'undefined' && Buffer.isBuffer(obj);\n}\nexport function isFunction(obj) {\n    return typeof obj === 'function';\n}\nexport function isObject(obj) {\n    return typeof obj === 'object' && obj !== null;\n}\nexport function isArrayBufferOrView(obj) {\n    return obj instanceof ArrayBuffer || ArrayBuffer.isView(obj);\n}\nexport function isPlainObject(obj) {\n    if (!isObject(obj) || getTag(obj) !== '[object Object]') {\n        return false;\n    }\n    if (Object.getPrototypeOf(obj) === null) {\n        return true;\n    }\n    let proto = obj;\n    while (Object.getPrototypeOf(proto) !== null) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    return Object.getPrototypeOf(obj) === proto;\n}\nexport function getLast(arr) {\n    return arr[arr.length - 1];\n}\nexport function freeze(obj) {\n    return Object.freeze(obj);\n}\nexport function asArray(arg) {\n    if (isReadonlyArray(arg)) {\n        return arg;\n    }\n    else {\n        return [arg];\n    }\n}\nexport function asReadonlyArray(arg) {\n    if (isReadonlyArray(arg)) {\n        return arg;\n    }\n    else {\n        return freeze([arg]);\n    }\n}\nexport function isReadonlyArray(arg) {\n    return Array.isArray(arg);\n}\nexport function noop(obj) {\n    return obj;\n}\nexport function compare(obj1, obj2) {\n    if (isReadonlyArray(obj1) && isReadonlyArray(obj2)) {\n        return compareArrays(obj1, obj2);\n    }\n    else if (isObject(obj1) && isObject(obj2)) {\n        return compareObjects(obj1, obj2);\n    }\n    return obj1 === obj2;\n}\nfunction compareArrays(arr1, arr2) {\n    if (arr1.length !== arr2.length) {\n        return false;\n    }\n    for (let i = 0; i < arr1.length; ++i) {\n        if (!compare(arr1[i], arr2[i])) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction compareObjects(obj1, obj2) {\n    if (isBuffer(obj1) && isBuffer(obj2)) {\n        return compareBuffers(obj1, obj2);\n    }\n    else if (isDate(obj1) && isDate(obj2)) {\n        return compareDates(obj1, obj2);\n    }\n    return compareGenericObjects(obj1, obj2);\n}\nfunction compareBuffers(buf1, buf2) {\n    return Buffer.compare(buf1, buf2) === 0;\n}\nfunction compareDates(date1, date2) {\n    return date1.getTime() === date2.getTime();\n}\nfunction compareGenericObjects(obj1, obj2) {\n    const keys1 = Object.keys(obj1);\n    const keys2 = Object.keys(obj2);\n    if (keys1.length !== keys2.length) {\n        return false;\n    }\n    for (const key of keys1) {\n        if (!compare(obj1[key], obj2[key])) {\n            return false;\n        }\n    }\n    return true;\n}\nconst toString = Object.prototype.toString;\nfunction getTag(value) {\n    if (value == null) {\n        return value === undefined ? '[object Undefined]' : '[object Null]';\n    }\n    return toString.call(value);\n}\n", "/// <reference types=\"./alter-table-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const AlterTableNode = freeze({\n    is(node) {\n        return node.kind === 'AlterTableNode';\n    },\n    create(table) {\n        return freeze({\n            kind: 'AlterTableNode',\n            table,\n        });\n    },\n    cloneWithTableProps(node, props) {\n        return freeze({\n            ...node,\n            ...props,\n        });\n    },\n    cloneWithColumnAlteration(node, columnAlteration) {\n        return freeze({\n            ...node,\n            columnAlterations: node.columnAlterations\n                ? [...node.columnAlterations, columnAlteration]\n                : [columnAlteration],\n        });\n    },\n});\n", "/// <reference types=\"./identifier-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const IdentifierNode = freeze({\n    is(node) {\n        return node.kind === 'IdentifierNode';\n    },\n    create(name) {\n        return freeze({\n            kind: 'IdentifierNode',\n            name,\n        });\n    },\n});\n", "/// <reference types=\"./create-index-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const CreateIndexNode = freeze({\n    is(node) {\n        return node.kind === 'CreateIndexNode';\n    },\n    create(name) {\n        return freeze({\n            kind: 'CreateIndexNode',\n            name: IdentifierNode.create(name),\n        });\n    },\n    cloneWith(node, props) {\n        return freeze({\n            ...node,\n            ...props,\n        });\n    },\n    cloneWithColumns(node, columns) {\n        return freeze({\n            ...node,\n            columns: [...(node.columns || []), ...columns],\n        });\n    },\n});\n", "/// <reference types=\"./create-schema-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const CreateSchemaNode = freeze({\n    is(node) {\n        return node.kind === 'CreateSchemaNode';\n    },\n    create(schema, params) {\n        return freeze({\n            kind: 'CreateSchemaNode',\n            schema: IdentifierNode.create(schema),\n            ...params,\n        });\n    },\n    cloneWith(createSchema, params) {\n        return freeze({\n            ...createSchema,\n            ...params,\n        });\n    },\n});\n", "/// <reference types=\"./create-table-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nexport const ON_COMMIT_ACTIONS = ['preserve rows', 'delete rows', 'drop'];\n/**\n * @internal\n */\nexport const CreateTableNode = freeze({\n    is(node) {\n        return node.kind === 'CreateTableNode';\n    },\n    create(table) {\n        return freeze({\n            kind: 'CreateTableNode',\n            table,\n            columns: freeze([]),\n        });\n    },\n    cloneWithColumn(createTable, column) {\n        return freeze({\n            ...createTable,\n            columns: freeze([...createTable.columns, column]),\n        });\n    },\n    cloneWithConstraint(createTable, constraint) {\n        return freeze({\n            ...createTable,\n            constraints: createTable.constraints\n                ? freeze([...createTable.constraints, constraint])\n                : freeze([constraint]),\n        });\n    },\n    cloneWithFrontModifier(createTable, modifier) {\n        return freeze({\n            ...createTable,\n            frontModifiers: createTable.frontModifiers\n                ? freeze([...createTable.frontModifiers, modifier])\n                : freeze([modifier]),\n        });\n    },\n    cloneWithEndModifier(createTable, modifier) {\n        return freeze({\n            ...createTable,\n            endModifiers: createTable.endModifiers\n                ? freeze([...createTable.endModifiers, modifier])\n                : freeze([modifier]),\n        });\n    },\n    cloneWith(createTable, params) {\n        return freeze({\n            ...createTable,\n            ...params,\n        });\n    },\n});\n", "/// <reference types=\"./schemable-identifier-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const SchemableIdentifierNode = freeze({\n    is(node) {\n        return node.kind === 'SchemableIdentifierNode';\n    },\n    create(identifier) {\n        return freeze({\n            kind: 'SchemableIdentifierNode',\n            identifier: IdentifierNode.create(identifier),\n        });\n    },\n    createWithSchema(schema, identifier) {\n        return freeze({\n            kind: 'SchemableIdentifierNode',\n            schema: IdentifierNode.create(schema),\n            identifier: IdentifierNode.create(identifier),\n        });\n    },\n});\n", "/// <reference types=\"./drop-index-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { SchemableIdentifierNode } from './schemable-identifier-node.js';\n/**\n * @internal\n */\nexport const DropIndexNode = freeze({\n    is(node) {\n        return node.kind === 'DropIndexNode';\n    },\n    create(name, params) {\n        return freeze({\n            kind: 'DropIndexNode',\n            name: SchemableIdentifierNode.create(name),\n            ...params,\n        });\n    },\n    cloneWith(dropIndex, props) {\n        return freeze({\n            ...dropIndex,\n            ...props,\n        });\n    },\n});\n", "/// <reference types=\"./drop-schema-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const DropSchemaNode = freeze({\n    is(node) {\n        return node.kind === 'DropSchemaNode';\n    },\n    create(schema, params) {\n        return freeze({\n            kind: 'DropSchemaNode',\n            schema: IdentifierNode.create(schema),\n            ...params,\n        });\n    },\n    cloneWith(dropSchema, params) {\n        return freeze({\n            ...dropSchema,\n            ...params,\n        });\n    },\n});\n", "/// <reference types=\"./drop-table-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const DropTableNode = freeze({\n    is(node) {\n        return node.kind === 'DropTableNode';\n    },\n    create(table, params) {\n        return freeze({\n            kind: 'DropTableNode',\n            table,\n            ...params,\n        });\n    },\n    cloneWith(dropIndex, params) {\n        return freeze({\n            ...dropIndex,\n            ...params,\n        });\n    },\n});\n", "/// <reference types=\"./alias-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const AliasNode = freeze({\n    is(node) {\n        return node.kind === 'AliasNode';\n    },\n    create(node, alias) {\n        return freeze({\n            kind: 'AliasNode',\n            node,\n            alias,\n        });\n    },\n});\n", "/// <reference types=\"./table-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { SchemableIdentifierNode } from './schemable-identifier-node.js';\n/**\n * @internal\n */\nexport const TableNode = freeze({\n    is(node) {\n        return node.kind === 'TableNode';\n    },\n    create(table) {\n        return freeze({\n            kind: 'TableNode',\n            table: SchemableIdentifierNode.create(table),\n        });\n    },\n    createWithSchema(schema, table) {\n        return freeze({\n            kind: 'TableNode',\n            table: SchemableIdentifierNode.createWithSchema(schema, table),\n        });\n    },\n});\n", "/// <reference types=\"./operation-node-source.d.ts\" />\nimport { isFunction, isObject } from '../util/object-utils.js';\nexport function isOperationNodeSource(obj) {\n    return isObject(obj) && isFunction(obj.toOperationNode);\n}\n", "/// <reference types=\"./expression.d.ts\" />\nimport { isOperationNodeSource, } from '../operation-node/operation-node-source.js';\nimport { isObject, isString } from '../util/object-utils.js';\nexport function isExpression(obj) {\n    return isObject(obj) && 'expressionType' in obj && isOperationNodeSource(obj);\n}\nexport function isAliasedExpression(obj) {\n    return (isObject(obj) &&\n        'expression' in obj &&\n        isString(obj.alias) &&\n        isOperationNodeSource(obj));\n}\n", "/// <reference types=\"./select-modifier-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const SelectModifierNode = freeze({\n    is(node) {\n        return node.kind === 'SelectModifierNode';\n    },\n    create(modifier, of) {\n        return freeze({\n            kind: 'SelectModifierNode',\n            modifier,\n            of,\n        });\n    },\n    createWithExpression(modifier) {\n        return freeze({\n            kind: 'SelectModifierNode',\n            rawModifier: modifier,\n        });\n    },\n});\n", "/// <reference types=\"./and-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const AndNode = freeze({\n    is(node) {\n        return node.kind === 'AndNode';\n    },\n    create(left, right) {\n        return freeze({\n            kind: 'AndNode',\n            left,\n            right,\n        });\n    },\n});\n", "/// <reference types=\"./or-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const OrNode = freeze({\n    is(node) {\n        return node.kind === 'OrNode';\n    },\n    create(left, right) {\n        return freeze({\n            kind: 'OrNode',\n            left,\n            right,\n        });\n    },\n});\n", "/// <reference types=\"./on-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { AndNode } from './and-node.js';\nimport { OrNode } from './or-node.js';\n/**\n * @internal\n */\nexport const OnNode = freeze({\n    is(node) {\n        return node.kind === 'OnNode';\n    },\n    create(filter) {\n        return freeze({\n            kind: 'OnNode',\n            on: filter,\n        });\n    },\n    cloneWithOperation(onNode, operator, operation) {\n        return freeze({\n            ...onNode,\n            on: operator === 'And'\n                ? AndNode.create(onNode.on, operation)\n                : OrNode.create(onNode.on, operation),\n        });\n    },\n});\n", "/// <reference types=\"./join-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { OnNode } from './on-node.js';\n/**\n * @internal\n */\nexport const JoinNode = freeze({\n    is(node) {\n        return node.kind === 'JoinNode';\n    },\n    create(joinType, table) {\n        return freeze({\n            kind: 'JoinNode',\n            joinType,\n            table,\n            on: undefined,\n        });\n    },\n    createWithOn(joinType, table, on) {\n        return freeze({\n            kind: 'JoinNode',\n            joinType,\n            table,\n            on: OnNode.create(on),\n        });\n    },\n    cloneWithOn(joinNode, operation) {\n        return freeze({\n            ...joinNode,\n            on: joinNode.on\n                ? OnNode.cloneWithOperation(joinNode.on, 'And', operation)\n                : OnNode.create(operation),\n        });\n    },\n});\n", "/// <reference types=\"./binary-operation-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const BinaryOperationNode = freeze({\n    is(node) {\n        return node.kind === 'BinaryOperationNode';\n    },\n    create(leftOperand, operator, rightOperand) {\n        return freeze({\n            kind: 'BinaryOperationNode',\n            leftOperand,\n            operator,\n            rightOperand,\n        });\n    },\n});\n", "/// <reference types=\"./operator-node.d.ts\" />\nimport { freeze, isString } from '../util/object-utils.js';\nexport const COMPARISON_OPERATORS = [\n    '=',\n    '==',\n    '!=',\n    '<>',\n    '>',\n    '>=',\n    '<',\n    '<=',\n    'in',\n    'not in',\n    'is',\n    'is not',\n    'like',\n    'not like',\n    'match',\n    'ilike',\n    'not ilike',\n    '@>',\n    '<@',\n    '^@',\n    '&&',\n    '?',\n    '?&',\n    '?|',\n    '!<',\n    '!>',\n    '<=>',\n    '!~',\n    '~',\n    '~*',\n    '!~*',\n    '@@',\n    '@@@',\n    '!!',\n    '<->',\n    'regexp',\n    'is distinct from',\n    'is not distinct from',\n];\nexport const ARITHMETIC_OPERATORS = [\n    '+',\n    '-',\n    '*',\n    '/',\n    '%',\n    '^',\n    '&',\n    '|',\n    '#',\n    '<<',\n    '>>',\n];\nexport const JSON_OPERATORS = ['->', '->>'];\nexport const BINARY_OPERATORS = [\n    ...COMPARISON_OPERATORS,\n    ...ARITHMETIC_OPERATORS,\n    '&&',\n    '||',\n];\nexport const UNARY_FILTER_OPERATORS = ['exists', 'not exists'];\nexport const UNARY_OPERATORS = ['not', '-', ...UNARY_FILTER_OPERATORS];\nexport const OPERATORS = [\n    ...BINARY_OPERATORS,\n    ...JSON_OPERATORS,\n    ...UNARY_OPERATORS,\n    'between',\n    'between symmetric',\n];\n/**\n * @internal\n */\nexport const OperatorNode = freeze({\n    is(node) {\n        return node.kind === 'OperatorNode';\n    },\n    create(operator) {\n        return freeze({\n            kind: 'OperatorNode',\n            operator,\n        });\n    },\n});\nexport function isOperator(op) {\n    return isString(op) && OPERATORS.includes(op);\n}\nexport function isBinaryOperator(op) {\n    return isString(op) && BINARY_OPERATORS.includes(op);\n}\nexport function isComparisonOperator(op) {\n    return isString(op) && COMPARISON_OPERATORS.includes(op);\n}\nexport function isArithmeticOperator(op) {\n    return isString(op) && ARITHMETIC_OPERATORS.includes(op);\n}\nexport function isJSONOperator(op) {\n    return isString(op) && JSON_OPERATORS.includes(op);\n}\n", "/// <reference types=\"./column-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const ColumnNode = freeze({\n    is(node) {\n        return node.kind === 'ColumnNode';\n    },\n    create(column) {\n        return freeze({\n            kind: 'ColumnNode',\n            column: IdentifierNode.create(column),\n        });\n    },\n});\n", "/// <reference types=\"./select-all-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const SelectAllNode = freeze({\n    is(node) {\n        return node.kind === 'SelectAllNode';\n    },\n    create() {\n        return freeze({\n            kind: 'SelectAllNode',\n        });\n    },\n});\n", "/// <reference types=\"./reference-node.d.ts\" />\nimport { SelectAllNode } from './select-all-node.js';\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ReferenceNode = freeze({\n    is(node) {\n        return node.kind === 'ReferenceNode';\n    },\n    create(column, table) {\n        return freeze({\n            kind: 'ReferenceNode',\n            table,\n            column,\n        });\n    },\n    createSelectAll(table) {\n        return freeze({\n            kind: 'ReferenceNode',\n            table,\n            column: SelectAllNode.create(),\n        });\n    },\n});\n", "/// <reference types=\"./dynamic-reference-builder.d.ts\" />\nimport { isOperationNodeSource, } from '../operation-node/operation-node-source.js';\nimport { parseSimpleReferenceExpression } from '../parser/reference-parser.js';\nimport { isObject, isString } from '../util/object-utils.js';\nexport class DynamicReferenceBuilder {\n    #dynamicReference;\n    get dynamicReference() {\n        return this.#dynamicReference;\n    }\n    /**\n     * @private\n     *\n     * This needs to be here just so that the typings work. Without this\n     * the generated .d.ts file contains no reference to the type param R\n     * which causes this type to be equal to DynamicReferenceBuilder with\n     * any R.\n     */\n    get refType() {\n        return undefined;\n    }\n    constructor(reference) {\n        this.#dynamicReference = reference;\n    }\n    toOperationNode() {\n        return parseSimpleReferenceExpression(this.#dynamicReference);\n    }\n}\nexport function isDynamicReferenceBuilder(obj) {\n    return (isObject(obj) &&\n        isOperationNodeSource(obj) &&\n        isString(obj.dynamicReference));\n}\n", "/// <reference types=\"./order-by-item-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const OrderByItemNode = freeze({\n    is(node) {\n        return node.kind === 'OrderByItemNode';\n    },\n    create(orderBy, direction) {\n        return freeze({\n            kind: 'OrderByItemNode',\n            orderBy,\n            direction,\n        });\n    },\n    cloneWith(node, props) {\n        return freeze({\n            ...node,\n            ...props,\n        });\n    },\n});\n", "/// <reference types=\"./raw-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const RawNode = freeze({\n    is(node) {\n        return node.kind === 'RawNode';\n    },\n    create(sqlFragments, parameters) {\n        return freeze({\n            kind: 'RawNode',\n            sqlFragments: freeze(sqlFragments),\n            parameters: freeze(parameters),\n        });\n    },\n    createWithSql(sql) {\n        return RawNode.create([sql], []);\n    },\n    createWithChild(child) {\n        return RawNode.create(['', ''], [child]);\n    },\n    createWithChildren(children) {\n        return RawNode.create(new Array(children.length + 1).fill(''), children);\n    },\n});\n", "/// <reference types=\"./collate-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const CollateNode = freeze({\n    is(node) {\n        return node.kind === 'CollateNode';\n    },\n    create(collation) {\n        return freeze({\n            kind: 'CollateNode',\n            collation: IdentifierNode.create(collation),\n        });\n    },\n});\n", "/// <reference types=\"./order-by-item-builder.d.ts\" />\nimport { CollateNode } from '../operation-node/collate-node.js';\nimport { OrderByItemNode } from '../operation-node/order-by-item-node.js';\nimport { RawNode } from '../operation-node/raw-node.js';\nimport { freeze } from '../util/object-utils.js';\nexport class OrderByItemBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Adds `desc` to the `order by` item.\n     *\n     * See {@link asc} for the opposite.\n     */\n    desc() {\n        return new OrderByItemBuilder({\n            node: OrderByItemNode.cloneWith(this.#props.node, {\n                direction: RawNode.createWithSql('desc'),\n            }),\n        });\n    }\n    /**\n     * Adds `asc` to the `order by` item.\n     *\n     * See {@link desc} for the opposite.\n     */\n    asc() {\n        return new OrderByItemBuilder({\n            node: OrderByItemNode.cloneWith(this.#props.node, {\n                direction: RawNode.createWithSql('asc'),\n            }),\n        });\n    }\n    /**\n     * Adds `nulls last` to the `order by` item.\n     *\n     * This is only supported by some dialects like PostgreSQL and SQLite.\n     *\n     * See {@link nullsFirst} for the opposite.\n     */\n    nullsLast() {\n        return new OrderByItemBuilder({\n            node: OrderByItemNode.cloneWith(this.#props.node, { nulls: 'last' }),\n        });\n    }\n    /**\n     * Adds `nulls first` to the `order by` item.\n     *\n     * This is only supported by some dialects like PostgreSQL and SQLite.\n     *\n     * See {@link nullsLast} for the opposite.\n     */\n    nullsFirst() {\n        return new OrderByItemBuilder({\n            node: OrderByItemNode.cloneWith(this.#props.node, { nulls: 'first' }),\n        });\n    }\n    /**\n     * Adds `collate <collationName>` to the `order by` item.\n     */\n    collate(collation) {\n        return new OrderByItemBuilder({\n            node: OrderByItemNode.cloneWith(this.#props.node, {\n                collation: CollateNode.create(collation),\n            }),\n        });\n    }\n    toOperationNode() {\n        return this.#props.node;\n    }\n}\n", "/// <reference types=\"./log-once.d.ts\" />\nconst LOGGED_MESSAGES = new Set();\n/**\n * Use for system-level logging, such as deprecation messages.\n * Logs a message and ensures it won't be logged again.\n */\nexport function logOnce(message) {\n    if (LOGGED_MESSAGES.has(message)) {\n        return;\n    }\n    LOGGED_MESSAGES.add(message);\n    console.log(message);\n}\n", "/// <reference types=\"./order-by-parser.d.ts\" />\nimport { isDynamicReferenceBuilder, } from '../dynamic/dynamic-reference-builder.js';\nimport { isExpression } from '../expression/expression.js';\nimport { OrderByItemNode } from '../operation-node/order-by-item-node.js';\nimport { RawNode } from '../operation-node/raw-node.js';\nimport { OrderByItemBuilder } from '../query-builder/order-by-item-builder.js';\nimport { logOnce } from '../util/log-once.js';\nimport { isExpressionOrFactory, parseExpression, } from './expression-parser.js';\nimport { parseStringReference, } from './reference-parser.js';\nexport function isOrderByDirection(thing) {\n    return thing === 'asc' || thing === 'desc';\n}\nexport function parseOrderBy(args) {\n    if (args.length === 2) {\n        return [parseOrderByItem(args[0], args[1])];\n    }\n    if (args.length === 1) {\n        const [orderBy] = args;\n        if (Array.isArray(orderBy)) {\n            logOnce('orderBy(array) is deprecated, use multiple orderBy calls instead.');\n            return orderBy.map((item) => parseOrderByItem(item));\n        }\n        return [parseOrderByItem(orderBy)];\n    }\n    throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${args.length}`);\n}\nexport function parseOrderByItem(expr, modifiers) {\n    const parsedRef = parseOrderByExpression(expr);\n    if (OrderByItemNode.is(parsedRef)) {\n        if (modifiers) {\n            throw new Error('Cannot specify direction twice!');\n        }\n        return parsedRef;\n    }\n    return parseOrderByWithModifiers(parsedRef, modifiers);\n}\nfunction parseOrderByExpression(expr) {\n    if (isExpressionOrFactory(expr)) {\n        return parseExpression(expr);\n    }\n    if (isDynamicReferenceBuilder(expr)) {\n        return expr.toOperationNode();\n    }\n    const [ref, direction] = expr.split(' ');\n    if (direction) {\n        logOnce(\"`orderBy('column asc')` is deprecated. Use `orderBy('column', 'asc')` instead.\");\n        return parseOrderByWithModifiers(parseStringReference(ref), direction);\n    }\n    return parseStringReference(expr);\n}\nfunction parseOrderByWithModifiers(expr, modifiers) {\n    if (typeof modifiers === 'string') {\n        if (!isOrderByDirection(modifiers)) {\n            throw new Error(`Invalid order by direction: ${modifiers}`);\n        }\n        return OrderByItemNode.create(expr, RawNode.createWithSql(modifiers));\n    }\n    if (isExpression(modifiers)) {\n        logOnce(\"`orderBy(..., expr)` is deprecated. Use `orderBy(..., 'asc')` or `orderBy(..., (ob) => ...)` instead.\");\n        return OrderByItemNode.create(expr, modifiers.toOperationNode());\n    }\n    const node = OrderByItemNode.create(expr);\n    if (!modifiers) {\n        return node;\n    }\n    return modifiers(new OrderByItemBuilder({ node })).toOperationNode();\n}\n", "/// <reference types=\"./json-reference-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const JSONReferenceNode = freeze({\n    is(node) {\n        return node.kind === 'JSONReferenceNode';\n    },\n    create(reference, traversal) {\n        return freeze({\n            kind: 'JSONReferenceNode',\n            reference,\n            traversal,\n        });\n    },\n    cloneWithTraversal(node, traversal) {\n        return freeze({\n            ...node,\n            traversal,\n        });\n    },\n});\n", "/// <reference types=\"./json-operator-chain-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const JSONOperatorChainNode = freeze({\n    is(node) {\n        return node.kind === 'JSONOperatorChainNode';\n    },\n    create(operator) {\n        return freeze({\n            kind: 'JSONOperatorChainNode',\n            operator,\n            values: freeze([]),\n        });\n    },\n    cloneWithValue(node, value) {\n        return freeze({\n            ...node,\n            values: freeze([...node.values, value]),\n        });\n    },\n});\n", "/// <reference types=\"./json-path-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const JSONPathNode = freeze({\n    is(node) {\n        return node.kind === 'JSONPathNode';\n    },\n    create(inOperator) {\n        return freeze({\n            kind: 'JSONPathNode',\n            inOperator,\n            pathLegs: freeze([]),\n        });\n    },\n    cloneWithLeg(jsonPathNode, pathLeg) {\n        return freeze({\n            ...jsonPathNode,\n            pathLegs: freeze([...jsonPathNode.pathLegs, pathLeg]),\n        });\n    },\n});\n", "/// <reference types=\"./reference-parser.d.ts\" />\nimport { AliasNode } from '../operation-node/alias-node.js';\nimport { ColumnNode } from '../operation-node/column-node.js';\nimport { ReferenceNode } from '../operation-node/reference-node.js';\nimport { TableNode } from '../operation-node/table-node.js';\nimport { isReadonlyArray, isString } from '../util/object-utils.js';\nimport { parseExpression, isExpressionOrFactory, } from './expression-parser.js';\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nimport { isOrderByDirection, parseOrderBy, } from './order-by-parser.js';\nimport { OperatorNode, isJSONOperator, } from '../operation-node/operator-node.js';\nimport { JSONReferenceNode } from '../operation-node/json-reference-node.js';\nimport { JSONOperatorChainNode } from '../operation-node/json-operator-chain-node.js';\nimport { JSONPathNode } from '../operation-node/json-path-node.js';\nexport function parseSimpleReferenceExpression(exp) {\n    if (isString(exp)) {\n        return parseStringReference(exp);\n    }\n    return exp.toOperationNode();\n}\nexport function parseReferenceExpressionOrList(arg) {\n    if (isReadonlyArray(arg)) {\n        return arg.map((it) => parseReferenceExpression(it));\n    }\n    else {\n        return [parseReferenceExpression(arg)];\n    }\n}\nexport function parseReferenceExpression(exp) {\n    if (isExpressionOrFactory(exp)) {\n        return parseExpression(exp);\n    }\n    return parseSimpleReferenceExpression(exp);\n}\nexport function parseJSONReference(ref, op) {\n    const referenceNode = parseStringReference(ref);\n    if (isJSONOperator(op)) {\n        return JSONReferenceNode.create(referenceNode, JSONOperatorChainNode.create(OperatorNode.create(op)));\n    }\n    const opWithoutLastChar = op.slice(0, -1);\n    if (isJSONOperator(opWithoutLastChar)) {\n        return JSONReferenceNode.create(referenceNode, JSONPathNode.create(OperatorNode.create(opWithoutLastChar)));\n    }\n    throw new Error(`Invalid JSON operator: ${op}`);\n}\nexport function parseStringReference(ref) {\n    const COLUMN_SEPARATOR = '.';\n    if (!ref.includes(COLUMN_SEPARATOR)) {\n        return ReferenceNode.create(ColumnNode.create(ref));\n    }\n    const parts = ref.split(COLUMN_SEPARATOR).map(trim);\n    if (parts.length === 3) {\n        return parseStringReferenceWithTableAndSchema(parts);\n    }\n    if (parts.length === 2) {\n        return parseStringReferenceWithTable(parts);\n    }\n    throw new Error(`invalid column reference ${ref}`);\n}\nexport function parseAliasedStringReference(ref) {\n    const ALIAS_SEPARATOR = ' as ';\n    if (ref.includes(ALIAS_SEPARATOR)) {\n        const [columnRef, alias] = ref.split(ALIAS_SEPARATOR).map(trim);\n        return AliasNode.create(parseStringReference(columnRef), IdentifierNode.create(alias));\n    }\n    else {\n        return parseStringReference(ref);\n    }\n}\nexport function parseColumnName(column) {\n    return ColumnNode.create(column);\n}\nexport function parseOrderedColumnName(column) {\n    const ORDER_SEPARATOR = ' ';\n    if (column.includes(ORDER_SEPARATOR)) {\n        const [columnName, order] = column.split(ORDER_SEPARATOR).map(trim);\n        if (!isOrderByDirection(order)) {\n            throw new Error(`invalid order direction \"${order}\" next to \"${columnName}\"`);\n        }\n        return parseOrderBy([columnName, order])[0];\n    }\n    else {\n        return parseColumnName(column);\n    }\n}\nfunction parseStringReferenceWithTableAndSchema(parts) {\n    const [schema, table, column] = parts;\n    return ReferenceNode.create(ColumnNode.create(column), TableNode.createWithSchema(schema, table));\n}\nfunction parseStringReferenceWithTable(parts) {\n    const [table, column] = parts;\n    return ReferenceNode.create(ColumnNode.create(column), TableNode.create(table));\n}\nfunction trim(str) {\n    return str.trim();\n}\n", "/// <reference types=\"./primitive-value-list-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const PrimitiveValueListNode = freeze({\n    is(node) {\n        return node.kind === 'PrimitiveValueListNode';\n    },\n    create(values) {\n        return freeze({\n            kind: 'PrimitiveValueListNode',\n            values: freeze([...values]),\n        });\n    },\n});\n", "/// <reference types=\"./value-list-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ValueListNode = freeze({\n    is(node) {\n        return node.kind === 'ValueListNode';\n    },\n    create(values) {\n        return freeze({\n            kind: 'ValueListNode',\n            values: freeze(values),\n        });\n    },\n});\n", "/// <reference types=\"./value-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ValueNode = freeze({\n    is(node) {\n        return node.kind === 'ValueNode';\n    },\n    create(value) {\n        return freeze({\n            kind: 'ValueNode',\n            value,\n        });\n    },\n    createImmediate(value) {\n        return freeze({\n            kind: 'ValueNode',\n            value,\n            immediate: true,\n        });\n    },\n});\n", "/// <reference types=\"./value-parser.d.ts\" />\nimport { PrimitiveValueListNode } from '../operation-node/primitive-value-list-node.js';\nimport { ValueListNode } from '../operation-node/value-list-node.js';\nimport { ValueNode } from '../operation-node/value-node.js';\nimport { isBoolean, isNull, isNumber, isReadonlyArray, } from '../util/object-utils.js';\nimport { parseExpression, isExpressionOrFactory, } from './expression-parser.js';\nexport function parseValueExpressionOrList(arg) {\n    if (isReadonlyArray(arg)) {\n        return parseValueExpressionList(arg);\n    }\n    return parseValueExpression(arg);\n}\nexport function parseValueExpression(exp) {\n    if (isExpressionOrFactory(exp)) {\n        return parseExpression(exp);\n    }\n    return ValueNode.create(exp);\n}\nexport function isSafeImmediateValue(value) {\n    return isNumber(value) || isBoolean(value) || isNull(value);\n}\nexport function parseSafeImmediateValue(value) {\n    if (!isSafeImmediateValue(value)) {\n        throw new Error(`unsafe immediate value ${JSON.stringify(value)}`);\n    }\n    return ValueNode.createImmediate(value);\n}\nfunction parseValueExpressionList(arg) {\n    if (arg.some(isExpressionOrFactory)) {\n        return ValueListNode.create(arg.map((it) => parseValueExpression(it)));\n    }\n    return PrimitiveValueListNode.create(arg);\n}\n", "/// <reference types=\"./parens-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ParensNode = freeze({\n    is(node) {\n        return node.kind === 'ParensNode';\n    },\n    create(node) {\n        return freeze({\n            kind: 'ParensNode',\n            node,\n        });\n    },\n});\n", "/// <reference types=\"./binary-operation-parser.d.ts\" />\nimport { BinaryOperationNode } from '../operation-node/binary-operation-node.js';\nimport { isBoolean, isNull, isString, isUndefined, } from '../util/object-utils.js';\nimport { isOperationNodeSource, } from '../operation-node/operation-node-source.js';\nimport { OperatorNode, OPERATORS, } from '../operation-node/operator-node.js';\nimport { parseReferenceExpression, } from './reference-parser.js';\nimport { parseValueExpression, parseValueExpressionOrList, } from './value-parser.js';\nimport { ValueNode } from '../operation-node/value-node.js';\nimport { AndNode } from '../operation-node/and-node.js';\nimport { ParensNode } from '../operation-node/parens-node.js';\nimport { OrNode } from '../operation-node/or-node.js';\nexport function parseValueBinaryOperationOrExpression(args) {\n    if (args.length === 3) {\n        return parseValueBinaryOperation(args[0], args[1], args[2]);\n    }\n    else if (args.length === 1) {\n        return parseValueExpression(args[0]);\n    }\n    throw new Error(`invalid arguments: ${JSON.stringify(args)}`);\n}\nexport function parseValueBinaryOperation(left, operator, right) {\n    if (isIsOperator(operator) && needsIsOperator(right)) {\n        return BinaryOperationNode.create(parseReferenceExpression(left), parseOperator(operator), ValueNode.createImmediate(right));\n    }\n    return BinaryOperationNode.create(parseReferenceExpression(left), parseOperator(operator), parseValueExpressionOrList(right));\n}\nexport function parseReferentialBinaryOperation(left, operator, right) {\n    return BinaryOperationNode.create(parseReferenceExpression(left), parseOperator(operator), parseReferenceExpression(right));\n}\nexport function parseFilterObject(obj, combinator) {\n    return parseFilterList(Object.entries(obj)\n        .filter(([, v]) => !isUndefined(v))\n        .map(([k, v]) => parseValueBinaryOperation(k, needsIsOperator(v) ? 'is' : '=', v)), combinator);\n}\nexport function parseFilterList(list, combinator, withParens = true) {\n    const combine = combinator === 'and' ? AndNode.create : OrNode.create;\n    if (list.length === 0) {\n        return BinaryOperationNode.create(ValueNode.createImmediate(1), OperatorNode.create('='), ValueNode.createImmediate(combinator === 'and' ? 1 : 0));\n    }\n    let node = toOperationNode(list[0]);\n    for (let i = 1; i < list.length; ++i) {\n        node = combine(node, toOperationNode(list[i]));\n    }\n    if (list.length > 1 && withParens) {\n        return ParensNode.create(node);\n    }\n    return node;\n}\nfunction isIsOperator(operator) {\n    return operator === 'is' || operator === 'is not';\n}\nfunction needsIsOperator(value) {\n    return isNull(value) || isBoolean(value);\n}\nfunction parseOperator(operator) {\n    if (isString(operator) && OPERATORS.includes(operator)) {\n        return OperatorNode.create(operator);\n    }\n    if (isOperationNodeSource(operator)) {\n        return operator.toOperationNode();\n    }\n    throw new Error(`invalid operator ${JSON.stringify(operator)}`);\n}\nfunction toOperationNode(nodeOrSource) {\n    return isOperationNodeSource(nodeOrSource)\n        ? nodeOrSource.toOperationNode()\n        : nodeOrSource;\n}\n", "/// <reference types=\"./order-by-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const OrderByNode = freeze({\n    is(node) {\n        return node.kind === 'OrderByNode';\n    },\n    create(items) {\n        return freeze({\n            kind: 'OrderByNode',\n            items: freeze([...items]),\n        });\n    },\n    cloneWithItems(orderBy, items) {\n        return freeze({\n            ...orderBy,\n            items: freeze([...orderBy.items, ...items]),\n        });\n    },\n});\n", "/// <reference types=\"./partition-by-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const PartitionByNode = freeze({\n    is(node) {\n        return node.kind === 'PartitionByNode';\n    },\n    create(items) {\n        return freeze({\n            kind: 'PartitionByNode',\n            items: freeze(items),\n        });\n    },\n    cloneWithItems(partitionBy, items) {\n        return freeze({\n            ...partitionBy,\n            items: freeze([...partitionBy.items, ...items]),\n        });\n    },\n});\n", "/// <reference types=\"./over-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { OrderByNode } from './order-by-node.js';\nimport { PartitionByNode } from './partition-by-node.js';\n/**\n * @internal\n */\nexport const OverNode = freeze({\n    is(node) {\n        return node.kind === 'OverNode';\n    },\n    create() {\n        return freeze({\n            kind: 'OverNode',\n        });\n    },\n    cloneWithOrderByItems(overNode, items) {\n        return freeze({\n            ...overNode,\n            orderBy: overNode.orderBy\n                ? OrderByNode.cloneWithItems(overNode.orderBy, items)\n                : OrderByNode.create(items),\n        });\n    },\n    cloneWithPartitionByItems(overNode, items) {\n        return freeze({\n            ...overNode,\n            partitionBy: overNode.partitionBy\n                ? PartitionByNode.cloneWithItems(overNode.partitionBy, items)\n                : PartitionByNode.create(items),\n        });\n    },\n});\n", "/// <reference types=\"./from-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const FromNode = freeze({\n    is(node) {\n        return node.kind === 'FromNode';\n    },\n    create(froms) {\n        return freeze({\n            kind: 'FromNode',\n            froms: freeze(froms),\n        });\n    },\n    cloneWithFroms(from, froms) {\n        return freeze({\n            ...from,\n            froms: freeze([...from.froms, ...froms]),\n        });\n    },\n});\n", "/// <reference types=\"./group-by-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const GroupByNode = freeze({\n    is(node) {\n        return node.kind === 'GroupByNode';\n    },\n    create(items) {\n        return freeze({\n            kind: 'GroupByNode',\n            items: freeze(items),\n        });\n    },\n    cloneWithItems(groupBy, items) {\n        return freeze({\n            ...groupBy,\n            items: freeze([...groupBy.items, ...items]),\n        });\n    },\n});\n", "/// <reference types=\"./having-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { AndNode } from './and-node.js';\nimport { OrNode } from './or-node.js';\n/**\n * @internal\n */\nexport const HavingNode = freeze({\n    is(node) {\n        return node.kind === 'HavingNode';\n    },\n    create(filter) {\n        return freeze({\n            kind: 'HavingNode',\n            having: filter,\n        });\n    },\n    cloneWithOperation(havingNode, operator, operation) {\n        return freeze({\n            ...havingNode,\n            having: operator === 'And'\n                ? AndNode.create(havingNode.having, operation)\n                : OrNode.create(havingNode.having, operation),\n        });\n    },\n});\n", "/// <reference types=\"./insert-query-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const InsertQueryNode = freeze({\n    is(node) {\n        return node.kind === 'InsertQueryNode';\n    },\n    create(into, withNode, replace) {\n        return freeze({\n            kind: 'InsertQueryNode',\n            into,\n            ...(withNode && { with: withNode }),\n            replace,\n        });\n    },\n    createWithoutInto() {\n        return freeze({\n            kind: 'InsertQueryNode',\n        });\n    },\n    cloneWith(insertQuery, props) {\n        return freeze({\n            ...insertQuery,\n            ...props,\n        });\n    },\n});\n", "/// <reference types=\"./list-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ListNode = freeze({\n    is(node) {\n        return node.kind === 'ListNode';\n    },\n    create(items) {\n        return freeze({\n            kind: 'ListNode',\n            items: freeze(items),\n        });\n    },\n});\n", "/// <reference types=\"./update-query-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { FromNode } from './from-node.js';\nimport { ListNode } from './list-node.js';\n/**\n * @internal\n */\nexport const UpdateQueryNode = freeze({\n    is(node) {\n        return node.kind === 'UpdateQueryNode';\n    },\n    create(tables, withNode) {\n        return freeze({\n            kind: 'UpdateQueryNode',\n            // For backwards compatibility, use the raw table node when there's only one table\n            // and don't rename the property to something like `tables`.\n            table: tables.length === 1 ? tables[0] : ListNode.create(tables),\n            ...(withNode && { with: withNode }),\n        });\n    },\n    createWithoutTable() {\n        return freeze({\n            kind: 'UpdateQueryNode',\n        });\n    },\n    cloneWithFromItems(updateQuery, fromItems) {\n        return freeze({\n            ...updateQuery,\n            from: updateQuery.from\n                ? FromNode.cloneWithFroms(updateQuery.from, fromItems)\n                : FromNode.create(fromItems),\n        });\n    },\n    cloneWithUpdates(updateQuery, updates) {\n        return freeze({\n            ...updateQuery,\n            updates: updateQuery.updates\n                ? freeze([...updateQuery.updates, ...updates])\n                : updates,\n        });\n    },\n    cloneWithLimit(updateQuery, limit) {\n        return freeze({\n            ...updateQuery,\n            limit,\n        });\n    },\n});\n", "/// <reference types=\"./using-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const UsingNode = freeze({\n    is(node) {\n        return node.kind === 'UsingNode';\n    },\n    create(tables) {\n        return freeze({\n            kind: 'UsingNode',\n            tables: freeze(tables),\n        });\n    },\n    cloneWithTables(using, tables) {\n        return freeze({\n            ...using,\n            tables: freeze([...using.tables, ...tables]),\n        });\n    },\n});\n", "/// <reference types=\"./delete-query-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { FromNode } from './from-node.js';\nimport { UsingNode } from './using-node.js';\nimport { QueryNode } from './query-node.js';\n/**\n * @internal\n */\nexport const DeleteQueryNode = freeze({\n    is(node) {\n        return node.kind === 'DeleteQueryNode';\n    },\n    create(fromItems, withNode) {\n        return freeze({\n            kind: 'DeleteQueryNode',\n            from: FromNode.create(fromItems),\n            ...(withNode && { with: withNode }),\n        });\n    },\n    // TODO: remove in v0.29\n    /**\n     * @deprecated Use `QueryNode.cloneWithoutOrderBy` instead.\n     */\n    cloneWithOrderByItems: (node, items) => QueryNode.cloneWithOrderByItems(node, items),\n    // TODO: remove in v0.29\n    /**\n     * @deprecated Use `QueryNode.cloneWithoutOrderBy` instead.\n     */\n    cloneWithoutOrderBy: (node) => QueryNode.cloneWithoutOrderBy(node),\n    cloneWithLimit(deleteNode, limit) {\n        return freeze({\n            ...deleteNode,\n            limit,\n        });\n    },\n    cloneWithoutLimit(deleteNode) {\n        return freeze({\n            ...deleteNode,\n            limit: undefined,\n        });\n    },\n    cloneWithUsing(deleteNode, tables) {\n        return freeze({\n            ...deleteNode,\n            using: deleteNode.using !== undefined\n                ? UsingNode.cloneWithTables(deleteNode.using, tables)\n                : UsingNode.create(tables),\n        });\n    },\n});\n", "/// <reference types=\"./where-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { AndNode } from './and-node.js';\nimport { OrNode } from './or-node.js';\n/**\n * @internal\n */\nexport const WhereNode = freeze({\n    is(node) {\n        return node.kind === 'WhereNode';\n    },\n    create(filter) {\n        return freeze({\n            kind: 'WhereNode',\n            where: filter,\n        });\n    },\n    cloneWithOperation(whereNode, operator, operation) {\n        return freeze({\n            ...whereNode,\n            where: operator === 'And'\n                ? AndNode.create(whereNode.where, operation)\n                : OrNode.create(whereNode.where, operation),\n        });\n    },\n});\n", "/// <reference types=\"./returning-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ReturningNode = freeze({\n    is(node) {\n        return node.kind === 'ReturningNode';\n    },\n    create(selections) {\n        return freeze({\n            kind: 'ReturningNode',\n            selections: freeze(selections),\n        });\n    },\n    cloneWithSelections(returning, selections) {\n        return freeze({\n            ...returning,\n            selections: returning.selections\n                ? freeze([...returning.selections, ...selections])\n                : freeze(selections),\n        });\n    },\n});\n", "/// <reference types=\"./explain-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ExplainNode = freeze({\n    is(node) {\n        return node.kind === 'ExplainNode';\n    },\n    create(format, options) {\n        return freeze({\n            kind: 'ExplainNode',\n            format,\n            options,\n        });\n    },\n});\n", "/// <reference types=\"./when-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const WhenNode = freeze({\n    is(node) {\n        return node.kind === 'WhenNode';\n    },\n    create(condition) {\n        return freeze({\n            kind: 'WhenNode',\n            condition,\n        });\n    },\n    cloneWithResult(whenNode, result) {\n        return freeze({\n            ...whenNode,\n            result,\n        });\n    },\n});\n", "/// <reference types=\"./merge-query-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { WhenNode } from './when-node.js';\n/**\n * @internal\n */\nexport const MergeQueryNode = freeze({\n    is(node) {\n        return node.kind === 'MergeQueryNode';\n    },\n    create(into, withNode) {\n        return freeze({\n            kind: 'MergeQueryNode',\n            into,\n            ...(withNode && { with: withNode }),\n        });\n    },\n    cloneWithUsing(mergeNode, using) {\n        return freeze({\n            ...mergeNode,\n            using,\n        });\n    },\n    cloneWithWhen(mergeNode, when) {\n        return freeze({\n            ...mergeNode,\n            whens: mergeNode.whens\n                ? freeze([...mergeNode.whens, when])\n                : freeze([when]),\n        });\n    },\n    cloneWithThen(mergeNode, then) {\n        return freeze({\n            ...mergeNode,\n            whens: mergeNode.whens\n                ? freeze([\n                    ...mergeNode.whens.slice(0, -1),\n                    WhenNode.cloneWithResult(mergeNode.whens[mergeNode.whens.length - 1], then),\n                ])\n                : undefined,\n        });\n    },\n});\n", "/// <reference types=\"./output-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const OutputNode = freeze({\n    is(node) {\n        return node.kind === 'OutputNode';\n    },\n    create(selections) {\n        return freeze({\n            kind: 'OutputNode',\n            selections: freeze(selections),\n        });\n    },\n    cloneWithSelections(output, selections) {\n        return freeze({\n            ...output,\n            selections: output.selections\n                ? freeze([...output.selections, ...selections])\n                : freeze(selections),\n        });\n    },\n});\n", "/// <reference types=\"./query-node.d.ts\" />\nimport { InsertQueryNode } from './insert-query-node.js';\nimport { SelectQueryNode } from './select-query-node.js';\nimport { UpdateQueryNode } from './update-query-node.js';\nimport { DeleteQueryNode } from './delete-query-node.js';\nimport { WhereNode } from './where-node.js';\nimport { freeze } from '../util/object-utils.js';\nimport { ReturningNode } from './returning-node.js';\nimport { ExplainNode } from './explain-node.js';\nimport { MergeQueryNode } from './merge-query-node.js';\nimport { OutputNode } from './output-node.js';\nimport { OrderByNode } from './order-by-node.js';\n/**\n * @internal\n */\nexport const QueryNode = freeze({\n    is(node) {\n        return (SelectQueryNode.is(node) ||\n            InsertQueryNode.is(node) ||\n            UpdateQueryNode.is(node) ||\n            DeleteQueryNode.is(node) ||\n            MergeQueryNode.is(node));\n    },\n    cloneWithEndModifier(node, modifier) {\n        return freeze({\n            ...node,\n            endModifiers: node.endModifiers\n                ? freeze([...node.endModifiers, modifier])\n                : freeze([modifier]),\n        });\n    },\n    cloneWithWhere(node, operation) {\n        return freeze({\n            ...node,\n            where: node.where\n                ? WhereNode.cloneWithOperation(node.where, 'And', operation)\n                : WhereNode.create(operation),\n        });\n    },\n    cloneWithJoin(node, join) {\n        return freeze({\n            ...node,\n            joins: node.joins ? freeze([...node.joins, join]) : freeze([join]),\n        });\n    },\n    cloneWithReturning(node, selections) {\n        return freeze({\n            ...node,\n            returning: node.returning\n                ? ReturningNode.cloneWithSelections(node.returning, selections)\n                : ReturningNode.create(selections),\n        });\n    },\n    cloneWithoutReturning(node) {\n        return freeze({\n            ...node,\n            returning: undefined,\n        });\n    },\n    cloneWithoutWhere(node) {\n        return freeze({\n            ...node,\n            where: undefined,\n        });\n    },\n    cloneWithExplain(node, format, options) {\n        return freeze({\n            ...node,\n            explain: ExplainNode.create(format, options?.toOperationNode()),\n        });\n    },\n    cloneWithTop(node, top) {\n        return freeze({\n            ...node,\n            top,\n        });\n    },\n    cloneWithOutput(node, selections) {\n        return freeze({\n            ...node,\n            output: node.output\n                ? OutputNode.cloneWithSelections(node.output, selections)\n                : OutputNode.create(selections),\n        });\n    },\n    cloneWithOrderByItems(node, items) {\n        return freeze({\n            ...node,\n            orderBy: node.orderBy\n                ? OrderByNode.cloneWithItems(node.orderBy, items)\n                : OrderByNode.create(items),\n        });\n    },\n    cloneWithoutOrderBy(node) {\n        return freeze({\n            ...node,\n            orderBy: undefined,\n        });\n    },\n});\n", "/// <reference types=\"./select-query-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { FromNode } from './from-node.js';\nimport { GroupByNode } from './group-by-node.js';\nimport { HavingNode } from './having-node.js';\nimport { QueryNode } from './query-node.js';\n/**\n * @internal\n */\nexport const SelectQueryNode = freeze({\n    is(node) {\n        return node.kind === 'SelectQueryNode';\n    },\n    create(withNode) {\n        return freeze({\n            kind: 'SelectQueryNode',\n            ...(withNode && { with: withNode }),\n        });\n    },\n    createFrom(fromItems, withNode) {\n        return freeze({\n            kind: 'SelectQueryNode',\n            from: FromNode.create(fromItems),\n            ...(withNode && { with: withNode }),\n        });\n    },\n    cloneWithSelections(select, selections) {\n        return freeze({\n            ...select,\n            selections: select.selections\n                ? freeze([...select.selections, ...selections])\n                : freeze(selections),\n        });\n    },\n    cloneWithDistinctOn(select, expressions) {\n        return freeze({\n            ...select,\n            distinctOn: select.distinctOn\n                ? freeze([...select.distinctOn, ...expressions])\n                : freeze(expressions),\n        });\n    },\n    cloneWithFrontModifier(select, modifier) {\n        return freeze({\n            ...select,\n            frontModifiers: select.frontModifiers\n                ? freeze([...select.frontModifiers, modifier])\n                : freeze([modifier]),\n        });\n    },\n    // TODO: remove in v0.29\n    /**\n     * @deprecated Use `QueryNode.cloneWithoutOrderBy` instead.\n     */\n    cloneWithOrderByItems: (node, items) => QueryNode.cloneWithOrderByItems(node, items),\n    cloneWithGroupByItems(selectNode, items) {\n        return freeze({\n            ...selectNode,\n            groupBy: selectNode.groupBy\n                ? GroupByNode.cloneWithItems(selectNode.groupBy, items)\n                : GroupByNode.create(items),\n        });\n    },\n    cloneWithLimit(selectNode, limit) {\n        return freeze({\n            ...selectNode,\n            limit,\n        });\n    },\n    cloneWithOffset(selectNode, offset) {\n        return freeze({\n            ...selectNode,\n            offset,\n        });\n    },\n    cloneWithFetch(selectNode, fetch) {\n        return freeze({\n            ...selectNode,\n            fetch,\n        });\n    },\n    cloneWithHaving(selectNode, operation) {\n        return freeze({\n            ...selectNode,\n            having: selectNode.having\n                ? HavingNode.cloneWithOperation(selectNode.having, 'And', operation)\n                : HavingNode.create(operation),\n        });\n    },\n    cloneWithSetOperations(selectNode, setOperations) {\n        return freeze({\n            ...selectNode,\n            setOperations: selectNode.setOperations\n                ? freeze([...selectNode.setOperations, ...setOperations])\n                : freeze([...setOperations]),\n        });\n    },\n    cloneWithoutSelections(select) {\n        return freeze({\n            ...select,\n            selections: [],\n        });\n    },\n    cloneWithoutLimit(select) {\n        return freeze({\n            ...select,\n            limit: undefined,\n        });\n    },\n    cloneWithoutOffset(select) {\n        return freeze({\n            ...select,\n            offset: undefined,\n        });\n    },\n    // TODO: remove in v0.29\n    /**\n     * @deprecated Use `QueryNode.cloneWithoutOrderBy` instead.\n     */\n    cloneWithoutOrderBy: (node) => QueryNode.cloneWithoutOrderBy(node),\n    cloneWithoutGroupBy(select) {\n        return freeze({\n            ...select,\n            groupBy: undefined,\n        });\n    },\n});\n", "/// <reference types=\"./join-builder.d.ts\" />\nimport { JoinNode } from '../operation-node/join-node.js';\nimport { RawNode } from '../operation-node/raw-node.js';\nimport { parseValueBinaryOperationOrExpression, parseReferentialBinaryOperation, } from '../parser/binary-operation-parser.js';\nimport { freeze } from '../util/object-utils.js';\nexport class JoinBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    on(...args) {\n        return new JoinBuilder({\n            ...this.#props,\n            joinNode: JoinNode.cloneWithOn(this.#props.joinNode, parseValueBinaryOperationOrExpression(args)),\n        });\n    }\n    /**\n     * Just like {@link WhereInterface.whereRef} but adds an item to the join's\n     * `on` clause instead.\n     *\n     * See {@link WhereInterface.whereRef} for documentation and examples.\n     */\n    onRef(lhs, op, rhs) {\n        return new JoinBuilder({\n            ...this.#props,\n            joinNode: JoinNode.cloneWithOn(this.#props.joinNode, parseReferentialBinaryOperation(lhs, op, rhs)),\n        });\n    }\n    /**\n     * Adds `on true`.\n     */\n    onTrue() {\n        return new JoinBuilder({\n            ...this.#props,\n            joinNode: JoinNode.cloneWithOn(this.#props.joinNode, RawNode.createWithSql('true')),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.joinNode;\n    }\n}\n", "/// <reference types=\"./partition-by-item-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const PartitionByItemNode = freeze({\n    is(node) {\n        return node.kind === 'PartitionByItemNode';\n    },\n    create(partitionBy) {\n        return freeze({\n            kind: 'PartitionByItemNode',\n            partitionBy,\n        });\n    },\n});\n", "/// <reference types=\"./partition-by-parser.d.ts\" />\nimport { PartitionByItemNode } from '../operation-node/partition-by-item-node.js';\nimport { parseReferenceExpressionOrList, } from './reference-parser.js';\nexport function parsePartitionBy(partitionBy) {\n    return parseReferenceExpressionOrList(partitionBy).map(PartitionByItemNode.create);\n}\n", "/// <reference types=\"./over-builder.d.ts\" />\nimport { OverNode } from '../operation-node/over-node.js';\nimport { QueryNode } from '../operation-node/query-node.js';\nimport { parseOrderBy, } from '../parser/order-by-parser.js';\nimport { parsePartitionBy, } from '../parser/partition-by-parser.js';\nimport { freeze } from '../util/object-utils.js';\nexport class OverBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    orderBy(...args) {\n        return new OverBuilder({\n            overNode: OverNode.cloneWithOrderByItems(this.#props.overNode, parseOrderBy(args)),\n        });\n    }\n    clearOrderBy() {\n        return new OverBuilder({\n            overNode: QueryNode.cloneWithoutOrderBy(this.#props.overNode),\n        });\n    }\n    partitionBy(partitionBy) {\n        return new OverBuilder({\n            overNode: OverNode.cloneWithPartitionByItems(this.#props.overNode, parsePartitionBy(partitionBy)),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.overNode;\n    }\n}\n", "/// <reference types=\"./selection-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ReferenceNode } from './reference-node.js';\nimport { SelectAllNode } from './select-all-node.js';\n/**\n * @internal\n */\nexport const SelectionNode = freeze({\n    is(node) {\n        return node.kind === 'SelectionNode';\n    },\n    create(selection) {\n        return freeze({\n            kind: 'SelectionNode',\n            selection: selection,\n        });\n    },\n    createSelectAll() {\n        return freeze({\n            kind: 'SelectionNode',\n            selection: SelectAllNode.create(),\n        });\n    },\n    createSelectAllFromTable(table) {\n        return freeze({\n            kind: 'SelectionNode',\n            selection: ReferenceNode.createSelectAll(table),\n        });\n    },\n});\n", "/// <reference types=\"./select-parser.d.ts\" />\nimport { isFunction, isReadonlyArray, isString } from '../util/object-utils.js';\nimport { SelectionNode } from '../operation-node/selection-node.js';\nimport { parseAliasedStringReference } from './reference-parser.js';\nimport { isDynamicReferenceBuilder, } from '../dynamic/dynamic-reference-builder.js';\nimport { parseAliasedExpression, } from './expression-parser.js';\nimport { parseTable } from './table-parser.js';\nimport { expressionBuilder, } from '../expression/expression-builder.js';\nexport function parseSelectArg(selection) {\n    if (isFunction(selection)) {\n        return parseSelectArg(selection(expressionBuilder()));\n    }\n    else if (isReadonlyArray(selection)) {\n        return selection.map((it) => parseSelectExpression(it));\n    }\n    else {\n        return [parseSelectExpression(selection)];\n    }\n}\nfunction parseSelectExpression(selection) {\n    if (isString(selection)) {\n        return SelectionNode.create(parseAliasedStringReference(selection));\n    }\n    else if (isDynamicReferenceBuilder(selection)) {\n        return SelectionNode.create(selection.toOperationNode());\n    }\n    else {\n        return SelectionNode.create(parseAliasedExpression(selection));\n    }\n}\nexport function parseSelectAll(table) {\n    if (!table) {\n        return [SelectionNode.createSelectAll()];\n    }\n    else if (Array.isArray(table)) {\n        return table.map(parseSelectAllArg);\n    }\n    else {\n        return [parseSelectAllArg(table)];\n    }\n}\nfunction parseSelectAllArg(table) {\n    if (isString(table)) {\n        return SelectionNode.createSelectAllFromTable(parseTable(table));\n    }\n    throw new Error(`invalid value selectAll expression: ${JSON.stringify(table)}`);\n}\n", "/// <reference types=\"./values-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ValuesNode = freeze({\n    is(node) {\n        return node.kind === 'ValuesNode';\n    },\n    create(values) {\n        return freeze({\n            kind: 'ValuesNode',\n            values: freeze(values),\n        });\n    },\n});\n", "/// <reference types=\"./default-insert-value-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const DefaultInsertValueNode = freeze({\n    is(node) {\n        return node.kind === 'DefaultInsertValueNode';\n    },\n    create() {\n        return freeze({\n            kind: 'DefaultInsertValueNode',\n        });\n    },\n});\n", "/// <reference types=\"./insert-values-parser.d.ts\" />\nimport { ColumnNode } from '../operation-node/column-node.js';\nimport { PrimitiveValueListNode } from '../operation-node/primitive-value-list-node.js';\nimport { ValueListNode } from '../operation-node/value-list-node.js';\nimport { freeze, isFunction, isReadonlyArray, isUndefined, } from '../util/object-utils.js';\nimport { parseValueExpression } from './value-parser.js';\nimport { ValuesNode } from '../operation-node/values-node.js';\nimport { isExpressionOrFactory } from './expression-parser.js';\nimport { DefaultInsertValueNode } from '../operation-node/default-insert-value-node.js';\nimport { expressionBuilder, } from '../expression/expression-builder.js';\nexport function parseInsertExpression(arg) {\n    const objectOrList = isFunction(arg) ? arg(expressionBuilder()) : arg;\n    const list = isReadonlyArray(objectOrList)\n        ? objectOrList\n        : freeze([objectOrList]);\n    return parseInsertColumnsAndValues(list);\n}\nfunction parseInsertColumnsAndValues(rows) {\n    const columns = parseColumnNamesAndIndexes(rows);\n    return [\n        freeze([...columns.keys()].map(ColumnNode.create)),\n        ValuesNode.create(rows.map((row) => parseRowValues(row, columns))),\n    ];\n}\nfunction parseColumnNamesAndIndexes(rows) {\n    const columns = new Map();\n    for (const row of rows) {\n        const cols = Object.keys(row);\n        for (const col of cols) {\n            if (!columns.has(col) && row[col] !== undefined) {\n                columns.set(col, columns.size);\n            }\n        }\n    }\n    return columns;\n}\nfunction parseRowValues(row, columns) {\n    const rowColumns = Object.keys(row);\n    const rowValues = Array.from({\n        length: columns.size,\n    });\n    let hasUndefinedOrComplexColumns = false;\n    let indexedRowColumns = rowColumns.length;\n    for (const col of rowColumns) {\n        const columnIdx = columns.get(col);\n        if (isUndefined(columnIdx)) {\n            indexedRowColumns--;\n            continue;\n        }\n        const value = row[col];\n        if (isUndefined(value) || isExpressionOrFactory(value)) {\n            hasUndefinedOrComplexColumns = true;\n        }\n        rowValues[columnIdx] = value;\n    }\n    const hasMissingColumns = indexedRowColumns < columns.size;\n    if (hasMissingColumns || hasUndefinedOrComplexColumns) {\n        const defaultValue = DefaultInsertValueNode.create();\n        return ValueListNode.create(rowValues.map((it) => isUndefined(it) ? defaultValue : parseValueExpression(it)));\n    }\n    return PrimitiveValueListNode.create(rowValues);\n}\n", "/// <reference types=\"./column-update-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ColumnUpdateNode = freeze({\n    is(node) {\n        return node.kind === 'ColumnUpdateNode';\n    },\n    create(column, value) {\n        return freeze({\n            kind: 'ColumnUpdateNode',\n            column,\n            value,\n        });\n    },\n});\n", "/// <reference types=\"./update-set-parser.d.ts\" />\nimport { ColumnNode } from '../operation-node/column-node.js';\nimport { ColumnUpdateNode } from '../operation-node/column-update-node.js';\nimport { expressionBuilder, } from '../expression/expression-builder.js';\nimport { isFunction } from '../util/object-utils.js';\nimport { parseValueExpression } from './value-parser.js';\nimport { parseReferenceExpression, } from './reference-parser.js';\nexport function parseUpdate(...args) {\n    if (args.length === 2) {\n        return [\n            ColumnUpdateNode.create(parseReferenceExpression(args[0]), parseValueExpression(args[1])),\n        ];\n    }\n    return parseUpdateObjectExpression(args[0]);\n}\nexport function parseUpdateObjectExpression(update) {\n    const updateObj = isFunction(update) ? update(expressionBuilder()) : update;\n    return Object.entries(updateObj)\n        .filter(([_, value]) => value !== undefined)\n        .map(([key, value]) => {\n        return ColumnUpdateNode.create(ColumnNode.create(key), parseValueExpression(value));\n    });\n}\n", "/// <reference types=\"./on-duplicate-key-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const OnDuplicateKeyNode = freeze({\n    is(node) {\n        return node.kind === 'OnDuplicateKeyNode';\n    },\n    create(updates) {\n        return freeze({\n            kind: 'OnDuplicateKeyNode',\n            updates,\n        });\n    },\n});\n", "/// <reference types=\"./insert-result.d.ts\" />\n/**\n * The result of an insert query.\n *\n * If the table has an auto incrementing primary key {@link insertId} will hold\n * the generated id on dialects that support it. For example PostgreSQL doesn't\n * return the id by default and {@link insertId} is undefined. On PostgreSQL you\n * need to use {@link ReturningInterface.returning} or {@link ReturningInterface.returningAll}\n * to get out the inserted id.\n *\n * {@link numInsertedOrUpdatedRows} holds the number of (actually) inserted rows.\n * On MySQL, updated rows are counted twice when using `on duplicate key update`.\n *\n * ### Examples\n *\n * ```ts\n * import type { NewPerson } from 'type-editor' // imaginary module\n *\n * async function insertPerson(person: NewPerson) {\n *   const result = await db\n *     .insertInto('person')\n *     .values(person)\n *     .executeTakeFirstOrThrow()\n *\n *   console.log(result.insertId) // relevant on MySQL\n *   console.log(result.numInsertedOrUpdatedRows) // always relevant\n * }\n * ```\n */\nexport class InsertResult {\n    /**\n     * The auto incrementing primary key of the inserted row.\n     *\n     * This property can be undefined when the query contains an `on conflict`\n     * clause that makes the query succeed even when nothing gets inserted.\n     *\n     * This property is always undefined on dialects like PostgreSQL that\n     * don't return the inserted id by default. On those dialects you need\n     * to use the {@link ReturningInterface.returning | returning} method.\n     */\n    insertId;\n    /**\n     * Affected rows count.\n     */\n    numInsertedOrUpdatedRows;\n    constructor(insertId, numInsertedOrUpdatedRows) {\n        this.insertId = insertId;\n        this.numInsertedOrUpdatedRows = numInsertedOrUpdatedRows;\n    }\n}\n", "/// <reference types=\"./no-result-error.d.ts\" />\nexport class NoResultError extends Error {\n    /**\n     * The operation node tree of the query that was executed.\n     */\n    node;\n    constructor(node) {\n        super('no result');\n        this.node = node;\n    }\n}\nexport function isNoResultErrorConstructor(fn) {\n    return Object.prototype.hasOwnProperty.call(fn, 'prototype');\n}\n", "/// <reference types=\"./on-conflict-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { WhereNode } from './where-node.js';\n/**\n * @internal\n */\nexport const OnConflictNode = freeze({\n    is(node) {\n        return node.kind === 'OnConflictNode';\n    },\n    create() {\n        return freeze({\n            kind: 'OnConflictNode',\n        });\n    },\n    cloneWith(node, props) {\n        return freeze({\n            ...node,\n            ...props,\n        });\n    },\n    cloneWithIndexWhere(node, operation) {\n        return freeze({\n            ...node,\n            indexWhere: node.indexWhere\n                ? WhereNode.cloneWithOperation(node.indexWhere, 'And', operation)\n                : WhereNode.create(operation),\n        });\n    },\n    cloneWithIndexOrWhere(node, operation) {\n        return freeze({\n            ...node,\n            indexWhere: node.indexWhere\n                ? WhereNode.cloneWithOperation(node.indexWhere, 'Or', operation)\n                : WhereNode.create(operation),\n        });\n    },\n    cloneWithUpdateWhere(node, operation) {\n        return freeze({\n            ...node,\n            updateWhere: node.updateWhere\n                ? WhereNode.cloneWithOperation(node.updateWhere, 'And', operation)\n                : WhereNode.create(operation),\n        });\n    },\n    cloneWithUpdateOrWhere(node, operation) {\n        return freeze({\n            ...node,\n            updateWhere: node.updateWhere\n                ? WhereNode.cloneWithOperation(node.updateWhere, 'Or', operation)\n                : WhereNode.create(operation),\n        });\n    },\n    cloneWithoutIndexWhere(node) {\n        return freeze({\n            ...node,\n            indexWhere: undefined,\n        });\n    },\n    cloneWithoutUpdateWhere(node) {\n        return freeze({\n            ...node,\n            updateWhere: undefined,\n        });\n    },\n});\n", "/// <reference types=\"./on-conflict-builder.d.ts\" />\nimport { ColumnNode } from '../operation-node/column-node.js';\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nimport { OnConflictNode } from '../operation-node/on-conflict-node.js';\nimport { parseValueBinaryOperationOrExpression, parseReferentialBinaryOperation, } from '../parser/binary-operation-parser.js';\nimport { parseUpdateObjectExpression, } from '../parser/update-set-parser.js';\nimport { freeze } from '../util/object-utils.js';\nexport class OnConflictBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Specify a single column as the conflict target.\n     *\n     * Also see the {@link columns}, {@link constraint} and {@link expression}\n     * methods for alternative ways to specify the conflict target.\n     */\n    column(column) {\n        const columnNode = ColumnNode.create(column);\n        return new OnConflictBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWith(this.#props.onConflictNode, {\n                columns: this.#props.onConflictNode.columns\n                    ? freeze([...this.#props.onConflictNode.columns, columnNode])\n                    : freeze([columnNode]),\n            }),\n        });\n    }\n    /**\n     * Specify a list of columns as the conflict target.\n     *\n     * Also see the {@link column}, {@link constraint} and {@link expression}\n     * methods for alternative ways to specify the conflict target.\n     */\n    columns(columns) {\n        const columnNodes = columns.map(ColumnNode.create);\n        return new OnConflictBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWith(this.#props.onConflictNode, {\n                columns: this.#props.onConflictNode.columns\n                    ? freeze([...this.#props.onConflictNode.columns, ...columnNodes])\n                    : freeze(columnNodes),\n            }),\n        });\n    }\n    /**\n     * Specify a specific constraint by name as the conflict target.\n     *\n     * Also see the {@link column}, {@link columns} and {@link expression}\n     * methods for alternative ways to specify the conflict target.\n     */\n    constraint(constraintName) {\n        return new OnConflictBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWith(this.#props.onConflictNode, {\n                constraint: IdentifierNode.create(constraintName),\n            }),\n        });\n    }\n    /**\n     * Specify an expression as the conflict target.\n     *\n     * This can be used if the unique index is an expression index.\n     *\n     * Also see the {@link column}, {@link columns} and {@link constraint}\n     * methods for alternative ways to specify the conflict target.\n     */\n    expression(expression) {\n        return new OnConflictBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWith(this.#props.onConflictNode, {\n                indexExpression: expression.toOperationNode(),\n            }),\n        });\n    }\n    where(...args) {\n        return new OnConflictBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWithIndexWhere(this.#props.onConflictNode, parseValueBinaryOperationOrExpression(args)),\n        });\n    }\n    whereRef(lhs, op, rhs) {\n        return new OnConflictBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWithIndexWhere(this.#props.onConflictNode, parseReferentialBinaryOperation(lhs, op, rhs)),\n        });\n    }\n    clearWhere() {\n        return new OnConflictBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWithoutIndexWhere(this.#props.onConflictNode),\n        });\n    }\n    /**\n     * Adds the \"do nothing\" conflict action.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const id = 1\n     * const first_name = 'John'\n     *\n     * await db\n     *   .insertInto('person')\n     *   .values({first_name, id })\n     *   .onConflict((oc) => oc\n     *     .column('id')\n     *     .doNothing()\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" (\"first_name\", \"id\")\n     * values ($1, $2)\n     * on conflict (\"id\") do nothing\n     * ```\n     */\n    doNothing() {\n        return new OnConflictDoNothingBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWith(this.#props.onConflictNode, {\n                doNothing: true,\n            }),\n        });\n    }\n    /**\n     * Adds the \"do update set\" conflict action.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const id = 1\n     * const first_name = 'John'\n     *\n     * await db\n     *   .insertInto('person')\n     *   .values({first_name, id })\n     *   .onConflict((oc) => oc\n     *     .column('id')\n     *     .doUpdateSet({ first_name })\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" (\"first_name\", \"id\")\n     * values ($1, $2)\n     * on conflict (\"id\")\n     * do update set \"first_name\" = $3\n     * ```\n     *\n     * In the next example we use the `ref` method to reference\n     * columns of the virtual table `excluded` in a type-safe way\n     * to create an upsert operation:\n     *\n     * ```ts\n     * import type { NewPerson } from 'type-editor' // imaginary module\n     *\n     * async function upsertPerson(person: NewPerson): Promise<void> {\n     *   await db.insertInto('person')\n     *     .values(person)\n     *     .onConflict((oc) => oc\n     *       .column('id')\n     *       .doUpdateSet((eb) => ({\n     *         first_name: eb.ref('excluded.first_name'),\n     *         last_name: eb.ref('excluded.last_name')\n     *       })\n     *     )\n     *   )\n     *   .execute()\n     * }\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" (\"first_name\", \"last_name\")\n     * values ($1, $2)\n     * on conflict (\"id\")\n     * do update set\n     *  \"first_name\" = excluded.\"first_name\",\n     *  \"last_name\" = excluded.\"last_name\"\n     * ```\n     */\n    doUpdateSet(update) {\n        return new OnConflictUpdateBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWith(this.#props.onConflictNode, {\n                updates: parseUpdateObjectExpression(update),\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n}\nexport class OnConflictDoNothingBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    toOperationNode() {\n        return this.#props.onConflictNode;\n    }\n}\nexport class OnConflictUpdateBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    where(...args) {\n        return new OnConflictUpdateBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWithUpdateWhere(this.#props.onConflictNode, parseValueBinaryOperationOrExpression(args)),\n        });\n    }\n    /**\n     * Specify a where condition for the update operation.\n     *\n     * See {@link WhereInterface.whereRef} for more info.\n     */\n    whereRef(lhs, op, rhs) {\n        return new OnConflictUpdateBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWithUpdateWhere(this.#props.onConflictNode, parseReferentialBinaryOperation(lhs, op, rhs)),\n        });\n    }\n    clearWhere() {\n        return new OnConflictUpdateBuilder({\n            ...this.#props,\n            onConflictNode: OnConflictNode.cloneWithoutUpdateWhere(this.#props.onConflictNode),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.onConflictNode;\n    }\n}\n", "/// <reference types=\"./top-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const TopNode = freeze({\n    is(node) {\n        return node.kind === 'TopNode';\n    },\n    create(expression, modifiers) {\n        return freeze({\n            kind: 'TopNode',\n            expression,\n            modifiers,\n        });\n    },\n});\n", "/// <reference types=\"./top-parser.d.ts\" />\nimport { TopNode } from '../operation-node/top-node.js';\nimport { isBigInt, isNumber, isUndefined } from '../util/object-utils.js';\nexport function parseTop(expression, modifiers) {\n    if (!isNumber(expression) && !isBigInt(expression)) {\n        throw new Error(`Invalid top expression: ${expression}`);\n    }\n    if (!isUndefined(modifiers) && !isTopModifiers(modifiers)) {\n        throw new Error(`Invalid top modifiers: ${modifiers}`);\n    }\n    return TopNode.create(expression, modifiers);\n}\nfunction isTopModifiers(modifiers) {\n    return (modifiers === 'percent' ||\n        modifiers === 'with ties' ||\n        modifiers === 'percent with ties');\n}\n", "/// <reference types=\"./or-action-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const OrActionNode = freeze({\n    is(node) {\n        return node.kind === 'OrActionNode';\n    },\n    create(action) {\n        return freeze({\n            kind: 'OrActionNode',\n            action,\n        });\n    },\n});\n", "/// <reference types=\"./insert-query-builder.d.ts\" />\nimport { parseSelectArg, parseSelectAll, } from '../parser/select-parser.js';\nimport { parseInsertExpression, } from '../parser/insert-values-parser.js';\nimport { InsertQueryNode } from '../operation-node/insert-query-node.js';\nimport { QueryNode } from '../operation-node/query-node.js';\nimport { parseUpdateObjectExpression, } from '../parser/update-set-parser.js';\nimport { freeze } from '../util/object-utils.js';\nimport { OnDuplicateKeyNode } from '../operation-node/on-duplicate-key-node.js';\nimport { InsertResult } from './insert-result.js';\nimport { isNoResultErrorConstructor, NoResultError, } from './no-result-error.js';\nimport { parseExpression, } from '../parser/expression-parser.js';\nimport { ColumnNode } from '../operation-node/column-node.js';\nimport { OnConflictBuilder, } from './on-conflict-builder.js';\nimport { OnConflictNode } from '../operation-node/on-conflict-node.js';\nimport { parseTop } from '../parser/top-parser.js';\nimport { OrActionNode } from '../operation-node/or-action-node.js';\nexport class InsertQueryBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Sets the values to insert for an {@link Kysely.insertInto | insert} query.\n     *\n     * This method takes an object whose keys are column names and values are\n     * values to insert. In addition to the column's type, the values can be\n     * raw {@link sql} snippets or select queries.\n     *\n     * You must provide all fields you haven't explicitly marked as nullable\n     * or optional using {@link Generated} or {@link ColumnType}.\n     *\n     * The return value of an `insert` query is an instance of {@link InsertResult}. The\n     * {@link InsertResult.insertId | insertId} field holds the auto incremented primary\n     * key if the database returned one.\n     *\n     * On PostgreSQL and some other dialects, you need to call `returning` to get\n     * something out of the query.\n     *\n     * Also see the {@link expression} method for inserting the result of a select\n     * query or any other expression.\n     *\n     * ### Examples\n     *\n     * <!-- siteExample(\"insert\", \"Single row\", 10) -->\n     *\n     * Insert a single row:\n     *\n     * ```ts\n     * const result = await db\n     *   .insertInto('person')\n     *   .values({\n     *     first_name: 'Jennifer',\n     *     last_name: 'Aniston',\n     *     age: 40\n     *   })\n     *   .executeTakeFirst()\n     *\n     * // `insertId` is only available on dialects that\n     * // automatically return the id of the inserted row\n     * // such as MySQL and SQLite. On PostgreSQL, for example,\n     * // you need to add a `returning` clause to the query to\n     * // get anything out. See the \"returning data\" example.\n     * console.log(result.insertId)\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * insert into `person` (`first_name`, `last_name`, `age`) values (?, ?, ?)\n     * ```\n     *\n     * <!-- siteExample(\"insert\", \"Multiple rows\", 20) -->\n     *\n     * On dialects that support it (for example PostgreSQL) you can insert multiple\n     * rows by providing an array. Note that the return value is once again very\n     * dialect-specific. Some databases may only return the id of the *last* inserted\n     * row and some return nothing at all unless you call `returning`.\n     *\n     * ```ts\n     * await db\n     *   .insertInto('person')\n     *   .values([{\n     *     first_name: 'Jennifer',\n     *     last_name: 'Aniston',\n     *     age: 40,\n     *   }, {\n     *     first_name: 'Arnold',\n     *     last_name: 'Schwarzenegger',\n     *     age: 70,\n     *   }])\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" (\"first_name\", \"last_name\", \"age\") values (($1, $2, $3), ($4, $5, $6))\n     * ```\n     *\n     * <!-- siteExample(\"insert\", \"Returning data\", 30) -->\n     *\n     * On supported dialects like PostgreSQL you need to chain `returning` to the query to get\n     * the inserted row's columns (or any other expression) as the return value. `returning`\n     * works just like `select`. Refer to `select` method's examples and documentation for\n     * more info.\n     *\n     * ```ts\n     * const result = await db\n     *   .insertInto('person')\n     *   .values({\n     *     first_name: 'Jennifer',\n     *     last_name: 'Aniston',\n     *     age: 40,\n     *   })\n     *   .returning(['id', 'first_name as name'])\n     *   .executeTakeFirstOrThrow()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" (\"first_name\", \"last_name\", \"age\") values ($1, $2, $3) returning \"id\", \"first_name\" as \"name\"\n     * ```\n     *\n     * <!-- siteExample(\"insert\", \"Complex values\", 40) -->\n     *\n     * In addition to primitives, the values can also be arbitrary expressions.\n     * You can build the expressions by using a callback and calling the methods\n     * on the expression builder passed to it:\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * const ani = \"Ani\"\n     * const ston = \"ston\"\n     *\n     * const result = await db\n     *   .insertInto('person')\n     *   .values(({ ref, selectFrom, fn }) => ({\n     *     first_name: 'Jennifer',\n     *     last_name: sql<string>`concat(${ani}, ${ston})`,\n     *     middle_name: ref('first_name'),\n     *     age: selectFrom('person')\n     *       .select(fn.avg<number>('age').as('avg_age')),\n     *   }))\n     *   .executeTakeFirst()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" (\n     *   \"first_name\",\n     *   \"last_name\",\n     *   \"middle_name\",\n     *   \"age\"\n     * )\n     * values (\n     *   $1,\n     *   concat($2, $3),\n     *   \"first_name\",\n     *   (select avg(\"age\") as \"avg_age\" from \"person\")\n     * )\n     * ```\n     *\n     * You can also use the callback version of subqueries or raw expressions:\n     *\n     * ```ts\n     * await db.with('jennifer', (db) => db\n     *   .selectFrom('person')\n     *   .where('first_name', '=', 'Jennifer')\n     *   .select(['id', 'first_name', 'gender'])\n     *   .limit(1)\n     * ).insertInto('pet').values((eb) => ({\n     *   owner_id: eb.selectFrom('jennifer').select('id'),\n     *   name: eb.selectFrom('jennifer').select('first_name'),\n     *   species: 'cat',\n     * }))\n     * .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * with \"jennifer\" as (\n     *   select \"id\", \"first_name\", \"gender\"\n     *   from \"person\"\n     *   where \"first_name\" = $1\n     *   limit $2\n     * )\n     * insert into \"pet\" (\"owner_id\", \"name\", \"species\")\n     * values (\n     *  (select \"id\" from \"jennifer\"),\n     *  (select \"first_name\" from \"jennifer\"),\n     *  $3\n     * )\n     * ```\n     */\n    values(insert) {\n        const [columns, values] = parseInsertExpression(insert);\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                columns,\n                values,\n            }),\n        });\n    }\n    /**\n     * Sets the columns to insert.\n     *\n     * The {@link values} method sets both the columns and the values and this method\n     * is not needed. But if you are using the {@link expression} method, you can use\n     * this method to set the columns to insert.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.insertInto('person')\n     *   .columns(['first_name'])\n     *   .expression((eb) => eb.selectFrom('pet').select('pet.name'))\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" (\"first_name\")\n     * select \"pet\".\"name\" from \"pet\"\n     * ```\n     */\n    columns(columns) {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                columns: freeze(columns.map(ColumnNode.create)),\n            }),\n        });\n    }\n    /**\n     * Insert an arbitrary expression. For example the result of a select query.\n     *\n     * ### Examples\n     *\n     * <!-- siteExample(\"insert\", \"Insert subquery\", 50) -->\n     *\n     * You can create an `INSERT INTO SELECT FROM` query using the `expression` method.\n     * This API doesn't follow our WYSIWYG principles and might be a bit difficult to\n     * remember. The reasons for this design stem from implementation difficulties.\n     *\n     * ```ts\n     * const result = await db.insertInto('person')\n     *   .columns(['first_name', 'last_name', 'age'])\n     *   .expression((eb) => eb\n     *     .selectFrom('pet')\n     *     .select((eb) => [\n     *       'pet.name',\n     *       eb.val('Petson').as('last_name'),\n     *       eb.lit(7).as('age'),\n     *     ])\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" (\"first_name\", \"last_name\", \"age\")\n     * select \"pet\".\"name\", $1 as \"last_name\", 7 as \"age from \"pet\"\n     * ```\n     */\n    expression(expression) {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                values: parseExpression(expression),\n            }),\n        });\n    }\n    /**\n     * Creates an `insert into \"person\" default values` query.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.insertInto('person')\n     *   .defaultValues()\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" default values\n     * ```\n     */\n    defaultValues() {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                defaultValues: true,\n            }),\n        });\n    }\n    /**\n     * This can be used to add any additional SQL to the end of the query.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * await db.insertInto('person')\n     *   .values({\n     *     first_name: 'John',\n     *     last_name: 'Doe',\n     *     gender: 'male',\n     *   })\n     *   .modifyEnd(sql`-- This is a comment`)\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * insert into `person` (\"first_name\", \"last_name\", \"gender\")\n     * values (?, ?, ?) -- This is a comment\n     * ```\n     */\n    modifyEnd(modifier) {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithEndModifier(this.#props.queryNode, modifier.toOperationNode()),\n        });\n    }\n    /**\n     * Changes an `insert into` query to an `insert ignore into` query.\n     *\n     * This is only supported by some dialects like MySQL.\n     *\n     * To avoid a footgun, when invoked with the SQLite dialect, this method will\n     * be handled like {@link orIgnore}. See also, {@link orAbort}, {@link orFail},\n     * {@link orReplace}, and {@link orRollback}.\n     *\n     * If you use the ignore modifier, ignorable errors that occur while executing the\n     * insert statement are ignored. For example, without ignore, a row that duplicates\n     * an existing unique index or primary key value in the table causes a duplicate-key\n     * error and the statement is aborted. With ignore, the row is discarded and no error\n     * occurs.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.insertInto('person')\n     *   .ignore()\n     *   .values({\n     *     first_name: 'John',\n     *     last_name: 'Doe',\n     *     gender: 'female',\n     *   })\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * insert ignore into `person` (`first_name`, `last_name`, `gender`) values (?, ?, ?)\n     * ```\n     *\n     * The generated SQL (SQLite):\n     *\n     * ```sql\n     * insert or ignore into \"person\" (\"first_name\", \"last_name\", \"gender\") values (?, ?, ?)\n     * ```\n     */\n    ignore() {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                orAction: OrActionNode.create('ignore'),\n            }),\n        });\n    }\n    /**\n     * Changes an `insert into` query to an `insert or ignore into` query.\n     *\n     * This is only supported by some dialects like SQLite.\n     *\n     * To avoid a footgun, when invoked with the MySQL dialect, this method will\n     * be handled like {@link ignore}.\n     *\n     * See also, {@link orAbort}, {@link orFail}, {@link orReplace}, and {@link orRollback}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.insertInto('person')\n     *   .orIgnore()\n     *   .values({\n     *     first_name: 'John',\n     *     last_name: 'Doe',\n     *     gender: 'female',\n     *   })\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (SQLite):\n     *\n     * ```sql\n     * insert or ignore into \"person\" (\"first_name\", \"last_name\", \"gender\") values (?, ?, ?)\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * insert ignore into `person` (`first_name`, `last_name`, `gender`) values (?, ?, ?)\n     * ```\n     */\n    orIgnore() {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                orAction: OrActionNode.create('ignore'),\n            }),\n        });\n    }\n    /**\n     * Changes an `insert into` query to an `insert or abort into` query.\n     *\n     * This is only supported by some dialects like SQLite.\n     *\n     * See also, {@link orIgnore}, {@link orFail}, {@link orReplace}, and {@link orRollback}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.insertInto('person')\n     *   .orAbort()\n     *   .values({\n     *     first_name: 'John',\n     *     last_name: 'Doe',\n     *     gender: 'female',\n     *   })\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (SQLite):\n     *\n     * ```sql\n     * insert or abort into \"person\" (\"first_name\", \"last_name\", \"gender\") values (?, ?, ?)\n     * ```\n     */\n    orAbort() {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                orAction: OrActionNode.create('abort'),\n            }),\n        });\n    }\n    /**\n     * Changes an `insert into` query to an `insert or fail into` query.\n     *\n     * This is only supported by some dialects like SQLite.\n     *\n     * See also, {@link orIgnore}, {@link orAbort}, {@link orReplace}, and {@link orRollback}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.insertInto('person')\n     *   .orFail()\n     *   .values({\n     *     first_name: 'John',\n     *     last_name: 'Doe',\n     *     gender: 'female',\n     *   })\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (SQLite):\n     *\n     * ```sql\n     * insert or fail into \"person\" (\"first_name\", \"last_name\", \"gender\") values (?, ?, ?)\n     * ```\n     */\n    orFail() {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                orAction: OrActionNode.create('fail'),\n            }),\n        });\n    }\n    /**\n     * Changes an `insert into` query to an `insert or replace into` query.\n     *\n     * This is only supported by some dialects like SQLite.\n     *\n     * You can also use {@link Kysely.replaceInto} to achieve the same result.\n     *\n     * See also, {@link orIgnore}, {@link orAbort}, {@link orFail}, and {@link orRollback}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.insertInto('person')\n     *   .orReplace()\n     *   .values({\n     *     first_name: 'John',\n     *     last_name: 'Doe',\n     *     gender: 'female',\n     *   })\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (SQLite):\n     *\n     * ```sql\n     * insert or replace into \"person\" (\"first_name\", \"last_name\", \"gender\") values (?, ?, ?)\n     * ```\n     */\n    orReplace() {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                orAction: OrActionNode.create('replace'),\n            }),\n        });\n    }\n    /**\n     * Changes an `insert into` query to an `insert or rollback into` query.\n     *\n     * This is only supported by some dialects like SQLite.\n     *\n     * See also, {@link orIgnore}, {@link orAbort}, {@link orFail}, and {@link orReplace}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.insertInto('person')\n     *   .orRollback()\n     *   .values({\n     *     first_name: 'John',\n     *     last_name: 'Doe',\n     *     gender: 'female',\n     *   })\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (SQLite):\n     *\n     * ```sql\n     * insert or rollback into \"person\" (\"first_name\", \"last_name\", \"gender\") values (?, ?, ?)\n     * ```\n     */\n    orRollback() {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                orAction: OrActionNode.create('rollback'),\n            }),\n        });\n    }\n    /**\n     * Changes an `insert into` query to an `insert top into` query.\n     *\n     * `top` clause is only supported by some dialects like MS SQL Server.\n     *\n     * ### Examples\n     *\n     * Insert the first 5 rows:\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * await db.insertInto('person')\n     *   .top(5)\n     *   .columns(['first_name', 'gender'])\n     *   .expression(\n     *     (eb) => eb.selectFrom('pet').select(['name', sql.lit('other').as('gender')])\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MS SQL Server):\n     *\n     * ```sql\n     * insert top(5) into \"person\" (\"first_name\", \"gender\") select \"name\", 'other' as \"gender\" from \"pet\"\n     * ```\n     *\n     * Insert the first 50 percent of rows:\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * await db.insertInto('person')\n     *   .top(50, 'percent')\n     *   .columns(['first_name', 'gender'])\n     *   .expression(\n     *     (eb) => eb.selectFrom('pet').select(['name', sql.lit('other').as('gender')])\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MS SQL Server):\n     *\n     * ```sql\n     * insert top(50) percent into \"person\" (\"first_name\", \"gender\") select \"name\", 'other' as \"gender\" from \"pet\"\n     * ```\n     */\n    top(expression, modifiers) {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithTop(this.#props.queryNode, parseTop(expression, modifiers)),\n        });\n    }\n    /**\n     * Adds an `on conflict` clause to the query.\n     *\n     * `on conflict` is only supported by some dialects like PostgreSQL and SQLite. On MySQL\n     * you can use {@link ignore} and {@link onDuplicateKeyUpdate} to achieve similar results.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db\n     *   .insertInto('pet')\n     *   .values({\n     *     name: 'Catto',\n     *     species: 'cat',\n     *     owner_id: 3,\n     *   })\n     *   .onConflict((oc) => oc\n     *     .column('name')\n     *     .doUpdateSet({ species: 'hamster' })\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"pet\" (\"name\", \"species\", \"owner_id\")\n     * values ($1, $2, $3)\n     * on conflict (\"name\")\n     * do update set \"species\" = $4\n     * ```\n     *\n     * You can provide the name of the constraint instead of a column name:\n     *\n     * ```ts\n     * await db\n     *   .insertInto('pet')\n     *   .values({\n     *     name: 'Catto',\n     *     species: 'cat',\n     *     owner_id: 3,\n     *   })\n     *   .onConflict((oc) => oc\n     *     .constraint('pet_name_key')\n     *     .doUpdateSet({ species: 'hamster' })\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"pet\" (\"name\", \"species\", \"owner_id\")\n     * values ($1, $2, $3)\n     * on conflict on constraint \"pet_name_key\"\n     * do update set \"species\" = $4\n     * ```\n     *\n     * You can also specify an expression as the conflict target in case\n     * the unique index is an expression index:\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * await db\n     *   .insertInto('pet')\n     *   .values({\n     *     name: 'Catto',\n     *     species: 'cat',\n     *     owner_id: 3,\n     *   })\n     *   .onConflict((oc) => oc\n     *     .expression(sql<string>`lower(name)`)\n     *     .doUpdateSet({ species: 'hamster' })\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"pet\" (\"name\", \"species\", \"owner_id\")\n     * values ($1, $2, $3)\n     * on conflict (lower(name))\n     * do update set \"species\" = $4\n     * ```\n     *\n     * You can add a filter for the update statement like this:\n     *\n     * ```ts\n     * await db\n     *   .insertInto('pet')\n     *   .values({\n     *     name: 'Catto',\n     *     species: 'cat',\n     *     owner_id: 3,\n     *   })\n     *   .onConflict((oc) => oc\n     *     .column('name')\n     *     .doUpdateSet({ species: 'hamster' })\n     *     .where('excluded.name', '!=', 'Catto')\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"pet\" (\"name\", \"species\", \"owner_id\")\n     * values ($1, $2, $3)\n     * on conflict (\"name\")\n     * do update set \"species\" = $4\n     * where \"excluded\".\"name\" != $5\n     * ```\n     *\n     * You can create an `on conflict do nothing` clauses like this:\n     *\n     * ```ts\n     * await db\n     *   .insertInto('pet')\n     *   .values({\n     *     name: 'Catto',\n     *     species: 'cat',\n     *     owner_id: 3,\n     *   })\n     *   .onConflict((oc) => oc\n     *     .column('name')\n     *     .doNothing()\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"pet\" (\"name\", \"species\", \"owner_id\")\n     * values ($1, $2, $3)\n     * on conflict (\"name\") do nothing\n     * ```\n     *\n     * You can refer to the columns of the virtual `excluded` table\n     * in a type-safe way using a callback and the `ref` method of\n     * `ExpressionBuilder`:\n     *\n     * ```ts\n     * await db.insertInto('person')\n     *   .values({\n     *     id: 1,\n     *     first_name: 'John',\n     *     last_name: 'Doe',\n     *     gender: 'male',\n     *   })\n     *   .onConflict(oc => oc\n     *     .column('id')\n     *     .doUpdateSet({\n     *       first_name: (eb) => eb.ref('excluded.first_name'),\n     *       last_name: (eb) => eb.ref('excluded.last_name')\n     *     })\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" (\"id\", \"first_name\", \"last_name\", \"gender\")\n     * values ($1, $2, $3, $4)\n     * on conflict (\"id\")\n     * do update set\n     *  \"first_name\" = \"excluded\".\"first_name\",\n     *  \"last_name\" = \"excluded\".\"last_name\"\n     * ```\n     */\n    onConflict(callback) {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                onConflict: callback(new OnConflictBuilder({\n                    onConflictNode: OnConflictNode.create(),\n                })).toOperationNode(),\n            }),\n        });\n    }\n    /**\n     * Adds `on duplicate key update` to the query.\n     *\n     * If you specify `on duplicate key update`, and a row is inserted that would cause\n     * a duplicate value in a unique index or primary key, an update of the old row occurs.\n     *\n     * This is only implemented by some dialects like MySQL. On most dialects you should\n     * use {@link onConflict} instead.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db\n     *   .insertInto('person')\n     *   .values({\n     *     id: 1,\n     *     first_name: 'John',\n     *     last_name: 'Doe',\n     *     gender: 'male',\n     *   })\n     *   .onDuplicateKeyUpdate({ updated_at: new Date().toISOString() })\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * insert into `person` (`id`, `first_name`, `last_name`, `gender`)\n     * values (?, ?, ?, ?)\n     * on duplicate key update `updated_at` = ?\n     * ```\n     */\n    onDuplicateKeyUpdate(update) {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: InsertQueryNode.cloneWith(this.#props.queryNode, {\n                onDuplicateKey: OnDuplicateKeyNode.create(parseUpdateObjectExpression(update)),\n            }),\n        });\n    }\n    returning(selection) {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithReturning(this.#props.queryNode, parseSelectArg(selection)),\n        });\n    }\n    returningAll() {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithReturning(this.#props.queryNode, parseSelectAll()),\n        });\n    }\n    output(args) {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithOutput(this.#props.queryNode, parseSelectArg(args)),\n        });\n    }\n    outputAll(table) {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithOutput(this.#props.queryNode, parseSelectAll(table)),\n        });\n    }\n    /**\n     * Clears all `returning` clauses from the query.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.insertInto('person')\n     *   .values({ first_name: 'James', last_name: 'Smith', gender: 'male' })\n     *   .returning(['first_name'])\n     *   .clearReturning()\n     *   .execute()\n     * ```\n     *\n     * The generated SQL(PostgreSQL):\n     *\n     * ```sql\n     * insert into \"person\" (\"first_name\", \"last_name\", \"gender\") values ($1, $2, $3)\n     * ```\n     */\n    clearReturning() {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithoutReturning(this.#props.queryNode),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     *\n     * If you want to conditionally call a method on `this`, see\n     * the {@link $if} method.\n     *\n     * ### Examples\n     *\n     * The next example uses a helper function `log` to log a query:\n     *\n     * ```ts\n     * import type { Compilable } from 'kysely'\n     *\n     * function log<T extends Compilable>(qb: T): T {\n     *   console.log(qb.compile())\n     *   return qb\n     * }\n     *\n     * await db.insertInto('person')\n     *   .values({ first_name: 'John', last_name: 'Doe', gender: 'male' })\n     *   .$call(log)\n     *   .execute()\n     * ```\n     */\n    $call(func) {\n        return func(this);\n    }\n    /**\n     * Call `func(this)` if `condition` is true.\n     *\n     * This method is especially handy with optional selects. Any `returning` or `returningAll`\n     * method calls add columns as optional fields to the output type when called inside\n     * the `func` callback. This is because we can't know if those selections were actually\n     * made before running the code.\n     *\n     * You can also call any other methods inside the callback.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import type { NewPerson } from 'type-editor' // imaginary module\n     *\n     * async function insertPerson(values: NewPerson, returnLastName: boolean) {\n     *   return await db\n     *     .insertInto('person')\n     *     .values(values)\n     *     .returning(['id', 'first_name'])\n     *     .$if(returnLastName, (qb) => qb.returning('last_name'))\n     *     .executeTakeFirstOrThrow()\n     * }\n     * ```\n     *\n     * Any selections added inside the `if` callback will be added as optional fields to the\n     * output type since we can't know if the selections were actually made before running\n     * the code. In the example above the return type of the `insertPerson` function is:\n     *\n     * ```ts\n     * Promise<{\n     *   id: number\n     *   first_name: string\n     *   last_name?: string\n     * }>\n     * ```\n     */\n    $if(condition, func) {\n        if (condition) {\n            return func(this);\n        }\n        return new InsertQueryBuilder({\n            ...this.#props,\n        });\n    }\n    /**\n     * Change the output type of the query.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of this `InsertQueryBuilder` with a new output type.\n     */\n    $castTo() {\n        return new InsertQueryBuilder(this.#props);\n    }\n    /**\n     * Narrows (parts of) the output type of the query.\n     *\n     * Kysely tries to be as type-safe as possible, but in some cases we have to make\n     * compromises for better maintainability and compilation performance. At present,\n     * Kysely doesn't narrow the output type of the query based on {@link values} input\n     * when using {@link returning} or {@link returningAll}.\n     *\n     * This utility method is very useful for these situations, as it removes unncessary\n     * runtime assertion/guard code. Its input type is limited to the output type\n     * of the query, so you can't add a column that doesn't exist, or change a column's\n     * type to something that doesn't exist in its union type.\n     *\n     * ### Examples\n     *\n     * Turn this code:\n     *\n     * ```ts\n     * import type { Person } from 'type-editor' // imaginary module\n     *\n     * const person = await db.insertInto('person')\n     *   .values({\n     *     first_name: 'John',\n     *     last_name: 'Doe',\n     *     gender: 'male',\n     *     nullable_column: 'hell yeah!'\n     *   })\n     *   .returningAll()\n     *   .executeTakeFirstOrThrow()\n     *\n     * if (isWithNoNullValue(person)) {\n     *   functionThatExpectsPersonWithNonNullValue(person)\n     * }\n     *\n     * function isWithNoNullValue(person: Person): person is Person & { nullable_column: string } {\n     *   return person.nullable_column != null\n     * }\n     * ```\n     *\n     * Into this:\n     *\n     * ```ts\n     * import type { NotNull } from 'kysely'\n     *\n     * const person = await db.insertInto('person')\n     *   .values({\n     *     first_name: 'John',\n     *     last_name: 'Doe',\n     *     gender: 'male',\n     *     nullable_column: 'hell yeah!'\n     *   })\n     *   .returningAll()\n     *   .$narrowType<{ nullable_column: NotNull }>()\n     *   .executeTakeFirstOrThrow()\n     *\n     * functionThatExpectsPersonWithNonNullValue(person)\n     * ```\n     */\n    $narrowType() {\n        return new InsertQueryBuilder(this.#props);\n    }\n    /**\n     * Asserts that query's output row type equals the given type `T`.\n     *\n     * This method can be used to simplify excessively complex types to make TypeScript happy\n     * and much faster.\n     *\n     * Kysely uses complex type magic to achieve its type safety. This complexity is sometimes too much\n     * for TypeScript and you get errors like this:\n     *\n     * ```\n     * error TS2589: Type instantiation is excessively deep and possibly infinite.\n     * ```\n     *\n     * In these case you can often use this method to help TypeScript a little bit. When you use this\n     * method to assert the output type of a query, Kysely can drop the complex output type that\n     * consists of multiple nested helper types and replace it with the simple asserted type.\n     *\n     * Using this method doesn't reduce type safety at all. You have to pass in a type that is\n     * structurally equal to the current type.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import type { NewPerson, NewPet, Species } from 'type-editor' // imaginary module\n     *\n     * async function insertPersonAndPet(person: NewPerson, pet: Omit<NewPet, 'owner_id'>) {\n     *   return await db\n     *     .with('new_person', (qb) => qb\n     *       .insertInto('person')\n     *       .values(person)\n     *       .returning('id')\n     *       .$assertType<{ id: number }>()\n     *     )\n     *     .with('new_pet', (qb) => qb\n     *       .insertInto('pet')\n     *       .values((eb) => ({\n     *         owner_id: eb.selectFrom('new_person').select('id'),\n     *         ...pet\n     *       }))\n     *       .returning(['name as pet_name', 'species'])\n     *       .$assertType<{ pet_name: string, species: Species }>()\n     *     )\n     *     .selectFrom(['new_person', 'new_pet'])\n     *     .selectAll()\n     *     .executeTakeFirstOrThrow()\n     * }\n     * ```\n     */\n    $assertType() {\n        return new InsertQueryBuilder(this.#props);\n    }\n    /**\n     * Returns a copy of this InsertQueryBuilder instance with the given plugin installed.\n     */\n    withPlugin(plugin) {\n        return new InsertQueryBuilder({\n            ...this.#props,\n            executor: this.#props.executor.withPlugin(plugin),\n        });\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.queryNode, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    /**\n     * Executes the query and returns an array of rows.\n     *\n     * Also see the {@link executeTakeFirst} and {@link executeTakeFirstOrThrow} methods.\n     */\n    async execute() {\n        const compiledQuery = this.compile();\n        const result = await this.#props.executor.executeQuery(compiledQuery);\n        const { adapter } = this.#props.executor;\n        const query = compiledQuery.query;\n        if ((query.returning && adapter.supportsReturning) ||\n            (query.output && adapter.supportsOutput)) {\n            return result.rows;\n        }\n        return [\n            new InsertResult(result.insertId, result.numAffectedRows ?? BigInt(0)),\n        ];\n    }\n    /**\n     * Executes the query and returns the first result or undefined if\n     * the query returned no result.\n     */\n    async executeTakeFirst() {\n        const [result] = await this.execute();\n        return result;\n    }\n    /**\n     * Executes the query and returns the first result or throws if\n     * the query returned no result.\n     *\n     * By default an instance of {@link NoResultError} is thrown, but you can\n     * provide a custom error class, or callback as the only argument to throw a different\n     * error.\n     */\n    async executeTakeFirstOrThrow(errorConstructor = NoResultError) {\n        const result = await this.executeTakeFirst();\n        if (result === undefined) {\n            const error = isNoResultErrorConstructor(errorConstructor)\n                ? new errorConstructor(this.toOperationNode())\n                : errorConstructor(this.toOperationNode());\n            throw error;\n        }\n        return result;\n    }\n    async *stream(chunkSize = 100) {\n        const compiledQuery = this.compile();\n        const stream = this.#props.executor.stream(compiledQuery, chunkSize);\n        for await (const item of stream) {\n            yield* item.rows;\n        }\n    }\n    async explain(format, options) {\n        const builder = new InsertQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithExplain(this.#props.queryNode, format, options),\n        });\n        return await builder.execute();\n    }\n}\n", "/// <reference types=\"./delete-result.d.ts\" />\nexport class DeleteResult {\n    numDeletedRows;\n    constructor(numDeletedRows) {\n        this.numDeletedRows = numDeletedRows;\n    }\n}\n", "/// <reference types=\"./limit-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const LimitNode = freeze({\n    is(node) {\n        return node.kind === 'LimitNode';\n    },\n    create(limit) {\n        return freeze({\n            kind: 'LimitNode',\n            limit,\n        });\n    },\n});\n", "/// <reference types=\"./delete-query-builder.d.ts\" />\nimport { parseJoin, } from '../parser/join-parser.js';\nimport { parseTableExpressionOrList, } from '../parser/table-parser.js';\nimport { parseSelectArg, parseSelectAll, } from '../parser/select-parser.js';\nimport { QueryNode } from '../operation-node/query-node.js';\nimport { freeze } from '../util/object-utils.js';\nimport { isNoResultErrorConstructor, NoResultError, } from './no-result-error.js';\nimport { DeleteResult } from './delete-result.js';\nimport { DeleteQueryNode } from '../operation-node/delete-query-node.js';\nimport { LimitNode } from '../operation-node/limit-node.js';\nimport { parseOrderBy, } from '../parser/order-by-parser.js';\nimport { parseValueBinaryOperationOrExpression, parseReferentialBinaryOperation, } from '../parser/binary-operation-parser.js';\nimport { parseValueExpression, } from '../parser/value-parser.js';\nimport { parseTop } from '../parser/top-parser.js';\nexport class DeleteQueryBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    where(...args) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithWhere(this.#props.queryNode, parseValueBinaryOperationOrExpression(args)),\n        });\n    }\n    whereRef(lhs, op, rhs) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithWhere(this.#props.queryNode, parseReferentialBinaryOperation(lhs, op, rhs)),\n        });\n    }\n    clearWhere() {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithoutWhere(this.#props.queryNode),\n        });\n    }\n    /**\n     * Changes a `delete from` query into a `delete top from` query.\n     *\n     * `top` clause is only supported by some dialects like MS SQL Server.\n     *\n     * ### Examples\n     *\n     * Delete the first 5 rows:\n     *\n     * ```ts\n     * await db\n     *   .deleteFrom('person')\n     *   .top(5)\n     *   .where('age', '>', 18)\n     *   .executeTakeFirstOrThrow()\n     * ```\n     *\n     * The generated SQL (MS SQL Server):\n     *\n     * ```sql\n     * delete top(5) from \"person\" where \"age\" > @1\n     * ```\n     *\n     * Delete the first 50% of rows:\n     *\n     * ```ts\n     * await db\n     *   .deleteFrom('person')\n     *   .top(50, 'percent')\n     *   .where('age', '>', 18)\n     *   .executeTakeFirstOrThrow()\n     * ```\n     *\n     * The generated SQL (MS SQL Server):\n     *\n     * ```sql\n     * delete top(50) percent from \"person\" where \"age\" > @1\n     * ```\n     */\n    top(expression, modifiers) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithTop(this.#props.queryNode, parseTop(expression, modifiers)),\n        });\n    }\n    using(tables) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: DeleteQueryNode.cloneWithUsing(this.#props.queryNode, parseTableExpressionOrList(tables)),\n        });\n    }\n    innerJoin(...args) {\n        return this.#join('InnerJoin', args);\n    }\n    leftJoin(...args) {\n        return this.#join('LeftJoin', args);\n    }\n    rightJoin(...args) {\n        return this.#join('RightJoin', args);\n    }\n    fullJoin(...args) {\n        return this.#join('FullJoin', args);\n    }\n    #join(joinType, args) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithJoin(this.#props.queryNode, parseJoin(joinType, args)),\n        });\n    }\n    returning(selection) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithReturning(this.#props.queryNode, parseSelectArg(selection)),\n        });\n    }\n    returningAll(table) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithReturning(this.#props.queryNode, parseSelectAll(table)),\n        });\n    }\n    output(args) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithOutput(this.#props.queryNode, parseSelectArg(args)),\n        });\n    }\n    outputAll(table) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithOutput(this.#props.queryNode, parseSelectAll(table)),\n        });\n    }\n    /**\n     * Clears all `returning` clauses from the query.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.deleteFrom('pet')\n     *   .returningAll()\n     *   .where('name', '=', 'Max')\n     *   .clearReturning()\n     *   .execute()\n     * ```\n     *\n     * The generated SQL(PostgreSQL):\n     *\n     * ```sql\n     * delete from \"pet\" where \"name\" = \"Max\"\n     * ```\n     */\n    clearReturning() {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithoutReturning(this.#props.queryNode),\n        });\n    }\n    /**\n     * Clears the `limit` clause from the query.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.deleteFrom('pet')\n     *   .returningAll()\n     *   .where('name', '=', 'Max')\n     *   .limit(5)\n     *   .clearLimit()\n     *   .execute()\n     * ```\n     *\n     * The generated SQL(PostgreSQL):\n     *\n     * ```sql\n     * delete from \"pet\" where \"name\" = \"Max\" returning *\n     * ```\n     */\n    clearLimit() {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: DeleteQueryNode.cloneWithoutLimit(this.#props.queryNode),\n        });\n    }\n    orderBy(...args) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithOrderByItems(this.#props.queryNode, parseOrderBy(args)),\n        });\n    }\n    clearOrderBy() {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithoutOrderBy(this.#props.queryNode),\n        });\n    }\n    /**\n     * Adds a limit clause to the query.\n     *\n     * A limit clause in a delete query is only supported by some dialects\n     * like MySQL.\n     *\n     * ### Examples\n     *\n     * Delete 5 oldest items in a table:\n     *\n     * ```ts\n     * await db\n     *   .deleteFrom('pet')\n     *   .orderBy('created_at')\n     *   .limit(5)\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * delete from `pet` order by `created_at` limit ?\n     * ```\n     */\n    limit(limit) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: DeleteQueryNode.cloneWithLimit(this.#props.queryNode, LimitNode.create(parseValueExpression(limit))),\n        });\n    }\n    /**\n     * This can be used to add any additional SQL to the end of the query.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * await db.deleteFrom('person')\n     *   .where('first_name', '=', 'John')\n     *   .modifyEnd(sql`-- This is a comment`)\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * delete from `person`\n     * where `first_name` = \"John\" -- This is a comment\n     * ```\n     */\n    modifyEnd(modifier) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithEndModifier(this.#props.queryNode, modifier.toOperationNode()),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     *\n     * If you want to conditionally call a method on `this`, see\n     * the {@link $if} method.\n     *\n     * ### Examples\n     *\n     * The next example uses a helper function `log` to log a query:\n     *\n     * ```ts\n     * import type { Compilable } from 'kysely'\n     *\n     * function log<T extends Compilable>(qb: T): T {\n     *   console.log(qb.compile())\n     *   return qb\n     * }\n     *\n     * await db.deleteFrom('person')\n     *   .$call(log)\n     *   .execute()\n     * ```\n     */\n    $call(func) {\n        return func(this);\n    }\n    /**\n     * Call `func(this)` if `condition` is true.\n     *\n     * This method is especially handy with optional selects. Any `returning` or `returningAll`\n     * method calls add columns as optional fields to the output type when called inside\n     * the `func` callback. This is because we can't know if those selections were actually\n     * made before running the code.\n     *\n     * You can also call any other methods inside the callback.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * async function deletePerson(id: number, returnLastName: boolean) {\n     *   return await db\n     *     .deleteFrom('person')\n     *     .where('id', '=', id)\n     *     .returning(['id', 'first_name'])\n     *     .$if(returnLastName, (qb) => qb.returning('last_name'))\n     *     .executeTakeFirstOrThrow()\n     * }\n     * ```\n     *\n     * Any selections added inside the `if` callback will be added as optional fields to the\n     * output type since we can't know if the selections were actually made before running\n     * the code. In the example above the return type of the `deletePerson` function is:\n     *\n     * ```ts\n     * Promise<{\n     *   id: number\n     *   first_name: string\n     *   last_name?: string\n     * }>\n     * ```\n     */\n    $if(condition, func) {\n        if (condition) {\n            return func(this);\n        }\n        return new DeleteQueryBuilder({\n            ...this.#props,\n        });\n    }\n    /**\n     * Change the output type of the query.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of this `DeleteQueryBuilder` with a new output type.\n     */\n    $castTo() {\n        return new DeleteQueryBuilder(this.#props);\n    }\n    /**\n     * Narrows (parts of) the output type of the query.\n     *\n     * Kysely tries to be as type-safe as possible, but in some cases we have to make\n     * compromises for better maintainability and compilation performance. At present,\n     * Kysely doesn't narrow the output type of the query when using {@link where} and {@link returning} or {@link returningAll}.\n     *\n     * This utility method is very useful for these situations, as it removes unncessary\n     * runtime assertion/guard code. Its input type is limited to the output type\n     * of the query, so you can't add a column that doesn't exist, or change a column's\n     * type to something that doesn't exist in its union type.\n     *\n     * ### Examples\n     *\n     * Turn this code:\n     *\n     * ```ts\n     * import type { Person } from 'type-editor' // imaginary module\n     *\n     * const person = await db.deleteFrom('person')\n     *   .where('id', '=', 3)\n     *   .where('nullable_column', 'is not', null)\n     *   .returningAll()\n     *   .executeTakeFirstOrThrow()\n     *\n     * if (isWithNoNullValue(person)) {\n     *   functionThatExpectsPersonWithNonNullValue(person)\n     * }\n     *\n     * function isWithNoNullValue(person: Person): person is Person & { nullable_column: string } {\n     *   return person.nullable_column != null\n     * }\n     * ```\n     *\n     * Into this:\n     *\n     * ```ts\n     * import type { NotNull } from 'kysely'\n     *\n     * const person = await db.deleteFrom('person')\n     *   .where('id', '=', 3)\n     *   .where('nullable_column', 'is not', null)\n     *   .returningAll()\n     *   .$narrowType<{ nullable_column: NotNull }>()\n     *   .executeTakeFirstOrThrow()\n     *\n     * functionThatExpectsPersonWithNonNullValue(person)\n     * ```\n     */\n    $narrowType() {\n        return new DeleteQueryBuilder(this.#props);\n    }\n    /**\n     * Asserts that query's output row type equals the given type `T`.\n     *\n     * This method can be used to simplify excessively complex types to make TypeScript happy\n     * and much faster.\n     *\n     * Kysely uses complex type magic to achieve its type safety. This complexity is sometimes too much\n     * for TypeScript and you get errors like this:\n     *\n     * ```\n     * error TS2589: Type instantiation is excessively deep and possibly infinite.\n     * ```\n     *\n     * In these case you can often use this method to help TypeScript a little bit. When you use this\n     * method to assert the output type of a query, Kysely can drop the complex output type that\n     * consists of multiple nested helper types and replace it with the simple asserted type.\n     *\n     * Using this method doesn't reduce type safety at all. You have to pass in a type that is\n     * structurally equal to the current type.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import type { Species } from 'type-editor' // imaginary module\n     *\n     * async function deletePersonAndPets(personId: number) {\n     *   return await db\n     *     .with('deleted_person', (qb) => qb\n     *        .deleteFrom('person')\n     *        .where('id', '=', personId)\n     *        .returning('first_name')\n     *        .$assertType<{ first_name: string }>()\n     *     )\n     *     .with('deleted_pets', (qb) => qb\n     *       .deleteFrom('pet')\n     *       .where('owner_id', '=', personId)\n     *       .returning(['name as pet_name', 'species'])\n     *       .$assertType<{ pet_name: string, species: Species }>()\n     *     )\n     *     .selectFrom(['deleted_person', 'deleted_pets'])\n     *     .selectAll()\n     *     .execute()\n     * }\n     * ```\n     */\n    $assertType() {\n        return new DeleteQueryBuilder(this.#props);\n    }\n    /**\n     * Returns a copy of this DeleteQueryBuilder instance with the given plugin installed.\n     */\n    withPlugin(plugin) {\n        return new DeleteQueryBuilder({\n            ...this.#props,\n            executor: this.#props.executor.withPlugin(plugin),\n        });\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.queryNode, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    /**\n     * Executes the query and returns an array of rows.\n     *\n     * Also see the {@link executeTakeFirst} and {@link executeTakeFirstOrThrow} methods.\n     */\n    async execute() {\n        const compiledQuery = this.compile();\n        const result = await this.#props.executor.executeQuery(compiledQuery);\n        const { adapter } = this.#props.executor;\n        const query = compiledQuery.query;\n        if ((query.returning && adapter.supportsReturning) ||\n            (query.output && adapter.supportsOutput)) {\n            return result.rows;\n        }\n        return [new DeleteResult(result.numAffectedRows ?? BigInt(0))];\n    }\n    /**\n     * Executes the query and returns the first result or undefined if\n     * the query returned no result.\n     */\n    async executeTakeFirst() {\n        const [result] = await this.execute();\n        return result;\n    }\n    /**\n     * Executes the query and returns the first result or throws if\n     * the query returned no result.\n     *\n     * By default an instance of {@link NoResultError} is thrown, but you can\n     * provide a custom error class, or callback as the only argument to throw a different\n     * error.\n     */\n    async executeTakeFirstOrThrow(errorConstructor = NoResultError) {\n        const result = await this.executeTakeFirst();\n        if (result === undefined) {\n            const error = isNoResultErrorConstructor(errorConstructor)\n                ? new errorConstructor(this.toOperationNode())\n                : errorConstructor(this.toOperationNode());\n            throw error;\n        }\n        return result;\n    }\n    async *stream(chunkSize = 100) {\n        const compiledQuery = this.compile();\n        const stream = this.#props.executor.stream(compiledQuery, chunkSize);\n        for await (const item of stream) {\n            yield* item.rows;\n        }\n    }\n    async explain(format, options) {\n        const builder = new DeleteQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithExplain(this.#props.queryNode, format, options),\n        });\n        return await builder.execute();\n    }\n}\n", "/// <reference types=\"./update-result.d.ts\" />\nexport class UpdateResult {\n    /**\n     * The number of rows the update query updated (even if not changed).\n     */\n    numUpdatedRows;\n    /**\n     * The number of rows the update query changed.\n     *\n     * This is **optional** and only supported in dialects such as MySQL.\n     * You would probably use {@link numUpdatedRows} in most cases.\n     */\n    numChangedRows;\n    constructor(numUpdatedRows, numChangedRows) {\n        this.numUpdatedRows = numUpdatedRows;\n        this.numChangedRows = numChangedRows;\n    }\n}\n", "/// <reference types=\"./update-query-builder.d.ts\" />\nimport { parseJoin, } from '../parser/join-parser.js';\nimport { parseTableExpressionOrList, } from '../parser/table-parser.js';\nimport { parseSelectArg, parseSelectAll, } from '../parser/select-parser.js';\nimport { QueryNode } from '../operation-node/query-node.js';\nimport { UpdateQueryNode } from '../operation-node/update-query-node.js';\nimport { parseUpdate, } from '../parser/update-set-parser.js';\nimport { freeze } from '../util/object-utils.js';\nimport { UpdateResult } from './update-result.js';\nimport { isNoResultErrorConstructor, NoResultError, } from './no-result-error.js';\nimport { parseReferentialBinaryOperation, parseValueBinaryOperationOrExpression, } from '../parser/binary-operation-parser.js';\nimport { parseValueExpression, } from '../parser/value-parser.js';\nimport { LimitNode } from '../operation-node/limit-node.js';\nimport { parseTop } from '../parser/top-parser.js';\nimport { parseOrderBy, } from '../parser/order-by-parser.js';\nexport class UpdateQueryBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    where(...args) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithWhere(this.#props.queryNode, parseValueBinaryOperationOrExpression(args)),\n        });\n    }\n    whereRef(lhs, op, rhs) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithWhere(this.#props.queryNode, parseReferentialBinaryOperation(lhs, op, rhs)),\n        });\n    }\n    clearWhere() {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithoutWhere(this.#props.queryNode),\n        });\n    }\n    /**\n     * Changes an `update` query into a `update top` query.\n     *\n     * `top` clause is only supported by some dialects like MS SQL Server.\n     *\n     * ### Examples\n     *\n     * Update the first row:\n     *\n     * ```ts\n     * await db.updateTable('person')\n     *   .top(1)\n     *   .set({ first_name: 'Foo' })\n     *   .where('age', '>', 18)\n     *   .executeTakeFirstOrThrow()\n     * ```\n     *\n     * The generated SQL (MS SQL Server):\n     *\n     * ```sql\n     * update top(1) \"person\" set \"first_name\" = @1 where \"age\" > @2\n     * ```\n     *\n     * Update the 50% first rows:\n     *\n     * ```ts\n     * await db.updateTable('person')\n     *   .top(50, 'percent')\n     *   .set({ first_name: 'Foo' })\n     *   .where('age', '>', 18)\n     *   .executeTakeFirstOrThrow()\n     * ```\n     *\n     * The generated SQL (MS SQL Server):\n     *\n     * ```sql\n     * update top(50) percent \"person\" set \"first_name\" = @1 where \"age\" > @2\n     * ```\n     */\n    top(expression, modifiers) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithTop(this.#props.queryNode, parseTop(expression, modifiers)),\n        });\n    }\n    from(from) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: UpdateQueryNode.cloneWithFromItems(this.#props.queryNode, parseTableExpressionOrList(from)),\n        });\n    }\n    innerJoin(...args) {\n        return this.#join('InnerJoin', args);\n    }\n    leftJoin(...args) {\n        return this.#join('LeftJoin', args);\n    }\n    rightJoin(...args) {\n        return this.#join('RightJoin', args);\n    }\n    fullJoin(...args) {\n        return this.#join('FullJoin', args);\n    }\n    #join(joinType, args) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithJoin(this.#props.queryNode, parseJoin(joinType, args)),\n        });\n    }\n    orderBy(...args) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithOrderByItems(this.#props.queryNode, parseOrderBy(args)),\n        });\n    }\n    clearOrderBy() {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithoutOrderBy(this.#props.queryNode),\n        });\n    }\n    /**\n     * Adds a limit clause to the update query for supported databases, such as MySQL.\n     *\n     * ### Examples\n     *\n     * Update the first 2 rows in the 'person' table:\n     *\n     * ```ts\n     * await db\n     *   .updateTable('person')\n     *   .set({ first_name: 'Foo' })\n     *   .limit(2)\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * update `person` set `first_name` = ? limit ?\n     * ```\n     */\n    limit(limit) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: UpdateQueryNode.cloneWithLimit(this.#props.queryNode, LimitNode.create(parseValueExpression(limit))),\n        });\n    }\n    set(...args) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: UpdateQueryNode.cloneWithUpdates(this.#props.queryNode, parseUpdate(...args)),\n        });\n    }\n    returning(selection) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithReturning(this.#props.queryNode, parseSelectArg(selection)),\n        });\n    }\n    returningAll(table) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithReturning(this.#props.queryNode, parseSelectAll(table)),\n        });\n    }\n    output(args) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithOutput(this.#props.queryNode, parseSelectArg(args)),\n        });\n    }\n    outputAll(table) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithOutput(this.#props.queryNode, parseSelectAll(table)),\n        });\n    }\n    /**\n     * This can be used to add any additional SQL to the end of the query.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * await db.updateTable('person')\n     *   .set({ age: 39 })\n     *   .where('first_name', '=', 'John')\n     *   .modifyEnd(sql.raw('-- This is a comment'))\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * update `person`\n     * set `age` = 39\n     * where `first_name` = \"John\" -- This is a comment\n     * ```\n     */\n    modifyEnd(modifier) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithEndModifier(this.#props.queryNode, modifier.toOperationNode()),\n        });\n    }\n    /**\n     * Clears all `returning` clauses from the query.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.updateTable('person')\n     *   .returningAll()\n     *   .set({ age: 39 })\n     *   .where('first_name', '=', 'John')\n     *   .clearReturning()\n     * ```\n     *\n     * The generated SQL(PostgreSQL):\n     *\n     * ```sql\n     * update \"person\" set \"age\" = 39 where \"first_name\" = \"John\"\n     * ```\n     */\n    clearReturning() {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithoutReturning(this.#props.queryNode),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     *\n     * If you want to conditionally call a method on `this`, see\n     * the {@link $if} method.\n     *\n     * ### Examples\n     *\n     * The next example uses a helper function `log` to log a query:\n     *\n     * ```ts\n     * import type { Compilable } from 'kysely'\n     * import type { PersonUpdate } from 'type-editor' // imaginary module\n     *\n     * function log<T extends Compilable>(qb: T): T {\n     *   console.log(qb.compile())\n     *   return qb\n     * }\n     *\n     * const values = {\n     *   first_name: 'John',\n     * } satisfies PersonUpdate\n     *\n     * db.updateTable('person')\n     *   .set(values)\n     *   .$call(log)\n     *   .execute()\n     * ```\n     */\n    $call(func) {\n        return func(this);\n    }\n    /**\n     * Call `func(this)` if `condition` is true.\n     *\n     * This method is especially handy with optional selects. Any `returning` or `returningAll`\n     * method calls add columns as optional fields to the output type when called inside\n     * the `func` callback. This is because we can't know if those selections were actually\n     * made before running the code.\n     *\n     * You can also call any other methods inside the callback.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import type { PersonUpdate } from 'type-editor' // imaginary module\n     *\n     * async function updatePerson(id: number, updates: PersonUpdate, returnLastName: boolean) {\n     *   return await db\n     *     .updateTable('person')\n     *     .set(updates)\n     *     .where('id', '=', id)\n     *     .returning(['id', 'first_name'])\n     *     .$if(returnLastName, (qb) => qb.returning('last_name'))\n     *     .executeTakeFirstOrThrow()\n     * }\n     * ```\n     *\n     * Any selections added inside the `if` callback will be added as optional fields to the\n     * output type since we can't know if the selections were actually made before running\n     * the code. In the example above the return type of the `updatePerson` function is:\n     *\n     * ```ts\n     * Promise<{\n     *   id: number\n     *   first_name: string\n     *   last_name?: string\n     * }>\n     * ```\n     */\n    $if(condition, func) {\n        if (condition) {\n            return func(this);\n        }\n        return new UpdateQueryBuilder({\n            ...this.#props,\n        });\n    }\n    /**\n     * Change the output type of the query.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of this `UpdateQueryBuilder` with a new output type.\n     */\n    $castTo() {\n        return new UpdateQueryBuilder(this.#props);\n    }\n    /**\n     * Narrows (parts of) the output type of the query.\n     *\n     * Kysely tries to be as type-safe as possible, but in some cases we have to make\n     * compromises for better maintainability and compilation performance. At present,\n     * Kysely doesn't narrow the output type of the query based on {@link set} input\n     * when using {@link where} and/or {@link returning} or {@link returningAll}.\n     *\n     * This utility method is very useful for these situations, as it removes unncessary\n     * runtime assertion/guard code. Its input type is limited to the output type\n     * of the query, so you can't add a column that doesn't exist, or change a column's\n     * type to something that doesn't exist in its union type.\n     *\n     * ### Examples\n     *\n     * Turn this code:\n     *\n     * ```ts\n     * import type { Person } from 'type-editor' // imaginary module\n     *\n     * const id = 1\n     * const now = new Date().toISOString()\n     *\n     * const person = await db.updateTable('person')\n     *   .set({ deleted_at: now })\n     *   .where('id', '=', id)\n     *   .where('nullable_column', 'is not', null)\n     *   .returningAll()\n     *   .executeTakeFirstOrThrow()\n     *\n     * if (isWithNoNullValue(person)) {\n     *   functionThatExpectsPersonWithNonNullValue(person)\n     * }\n     *\n     * function isWithNoNullValue(person: Person): person is Person & { nullable_column: string } {\n     *   return person.nullable_column != null\n     * }\n     * ```\n     *\n     * Into this:\n     *\n     * ```ts\n     * import type { NotNull } from 'kysely'\n     *\n     * const id = 1\n     * const now = new Date().toISOString()\n     *\n     * const person = await db.updateTable('person')\n     *   .set({ deleted_at: now })\n     *   .where('id', '=', id)\n     *   .where('nullable_column', 'is not', null)\n     *   .returningAll()\n     *   .$narrowType<{ deleted_at: Date; nullable_column: NotNull }>()\n     *   .executeTakeFirstOrThrow()\n     *\n     * functionThatExpectsPersonWithNonNullValue(person)\n     * ```\n     */\n    $narrowType() {\n        return new UpdateQueryBuilder(this.#props);\n    }\n    /**\n     * Asserts that query's output row type equals the given type `T`.\n     *\n     * This method can be used to simplify excessively complex types to make TypeScript happy\n     * and much faster.\n     *\n     * Kysely uses complex type magic to achieve its type safety. This complexity is sometimes too much\n     * for TypeScript and you get errors like this:\n     *\n     * ```\n     * error TS2589: Type instantiation is excessively deep and possibly infinite.\n     * ```\n     *\n     * In these case you can often use this method to help TypeScript a little bit. When you use this\n     * method to assert the output type of a query, Kysely can drop the complex output type that\n     * consists of multiple nested helper types and replace it with the simple asserted type.\n     *\n     * Using this method doesn't reduce type safety at all. You have to pass in a type that is\n     * structurally equal to the current type.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import type { PersonUpdate, PetUpdate, Species } from 'type-editor' // imaginary module\n     *\n     * const person = {\n     *   id: 1,\n     *   gender: 'other',\n     * } satisfies PersonUpdate\n     *\n     * const pet = {\n     *   name: 'Fluffy',\n     * } satisfies PetUpdate\n     *\n     * const result = await db\n     *   .with('updated_person', (qb) => qb\n     *     .updateTable('person')\n     *     .set(person)\n     *     .where('id', '=', person.id)\n     *     .returning('first_name')\n     *     .$assertType<{ first_name: string }>()\n     *   )\n     *   .with('updated_pet', (qb) => qb\n     *     .updateTable('pet')\n     *     .set(pet)\n     *     .where('owner_id', '=', person.id)\n     *     .returning(['name as pet_name', 'species'])\n     *     .$assertType<{ pet_name: string, species: Species }>()\n     *   )\n     *   .selectFrom(['updated_person', 'updated_pet'])\n     *   .selectAll()\n     *   .executeTakeFirstOrThrow()\n     * ```\n     */\n    $assertType() {\n        return new UpdateQueryBuilder(this.#props);\n    }\n    /**\n     * Returns a copy of this UpdateQueryBuilder instance with the given plugin installed.\n     */\n    withPlugin(plugin) {\n        return new UpdateQueryBuilder({\n            ...this.#props,\n            executor: this.#props.executor.withPlugin(plugin),\n        });\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.queryNode, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    /**\n     * Executes the query and returns an array of rows.\n     *\n     * Also see the {@link executeTakeFirst} and {@link executeTakeFirstOrThrow} methods.\n     */\n    async execute() {\n        const compiledQuery = this.compile();\n        const result = await this.#props.executor.executeQuery(compiledQuery);\n        const { adapter } = this.#props.executor;\n        const query = compiledQuery.query;\n        if ((query.returning && adapter.supportsReturning) ||\n            (query.output && adapter.supportsOutput)) {\n            return result.rows;\n        }\n        return [\n            new UpdateResult(result.numAffectedRows ?? BigInt(0), result.numChangedRows),\n        ];\n    }\n    /**\n     * Executes the query and returns the first result or undefined if\n     * the query returned no result.\n     */\n    async executeTakeFirst() {\n        const [result] = await this.execute();\n        return result;\n    }\n    /**\n     * Executes the query and returns the first result or throws if\n     * the query returned no result.\n     *\n     * By default an instance of {@link NoResultError} is thrown, but you can\n     * provide a custom error class, or callback as the only argument to throw a different\n     * error.\n     */\n    async executeTakeFirstOrThrow(errorConstructor = NoResultError) {\n        const result = await this.executeTakeFirst();\n        if (result === undefined) {\n            const error = isNoResultErrorConstructor(errorConstructor)\n                ? new errorConstructor(this.toOperationNode())\n                : errorConstructor(this.toOperationNode());\n            throw error;\n        }\n        return result;\n    }\n    async *stream(chunkSize = 100) {\n        const compiledQuery = this.compile();\n        const stream = this.#props.executor.stream(compiledQuery, chunkSize);\n        for await (const item of stream) {\n            yield* item.rows;\n        }\n    }\n    async explain(format, options) {\n        const builder = new UpdateQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithExplain(this.#props.queryNode, format, options),\n        });\n        return await builder.execute();\n    }\n}\n", "/// <reference types=\"./common-table-expression-name-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ColumnNode } from './column-node.js';\nimport { TableNode } from './table-node.js';\n/**\n * @internal\n */\nexport const CommonTableExpressionNameNode = freeze({\n    is(node) {\n        return node.kind === 'CommonTableExpressionNameNode';\n    },\n    create(tableName, columnNames) {\n        return freeze({\n            kind: 'CommonTableExpressionNameNode',\n            table: TableNode.create(tableName),\n            columns: columnNames\n                ? freeze(columnNames.map(ColumnNode.create))\n                : undefined,\n        });\n    },\n});\n", "/// <reference types=\"./common-table-expression-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const CommonTableExpressionNode = freeze({\n    is(node) {\n        return node.kind === 'CommonTableExpressionNode';\n    },\n    create(name, expression) {\n        return freeze({\n            kind: 'CommonTableExpressionNode',\n            name,\n            expression,\n        });\n    },\n    cloneWith(node, props) {\n        return freeze({\n            ...node,\n            ...props,\n        });\n    },\n});\n", "/// <reference types=\"./cte-builder.d.ts\" />\nimport { CommonTableExpressionNode } from '../operation-node/common-table-expression-node.js';\nimport { freeze } from '../util/object-utils.js';\nexport class CTEBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Makes the common table expression materialized.\n     */\n    materialized() {\n        return new CTEBuilder({\n            ...this.#props,\n            node: CommonTableExpressionNode.cloneWith(this.#props.node, {\n                materialized: true,\n            }),\n        });\n    }\n    /**\n     * Makes the common table expression not materialized.\n     */\n    notMaterialized() {\n        return new CTEBuilder({\n            ...this.#props,\n            node: CommonTableExpressionNode.cloneWith(this.#props.node, {\n                materialized: false,\n            }),\n        });\n    }\n    toOperationNode() {\n        return this.#props.node;\n    }\n}\n", "/// <reference types=\"./with-parser.d.ts\" />\nimport { CommonTableExpressionNameNode } from '../operation-node/common-table-expression-name-node.js';\nimport { createQueryCreator } from './parse-utils.js';\nimport { isFunction } from '../util/object-utils.js';\nimport { CTEBuilder, } from '../query-builder/cte-builder.js';\nimport { CommonTableExpressionNode } from '../operation-node/common-table-expression-node.js';\nexport function parseCommonTableExpression(nameOrBuilderCallback, expression) {\n    const expressionNode = expression(createQueryCreator()).toOperationNode();\n    if (isFunction(nameOrBuilderCallback)) {\n        return nameOrBuilderCallback(cteBuilderFactory(expressionNode)).toOperationNode();\n    }\n    return CommonTableExpressionNode.create(parseCommonTableExpressionName(nameOrBuilderCallback), expressionNode);\n}\nfunction cteBuilderFactory(expressionNode) {\n    return (name) => {\n        return new CTEBuilder({\n            node: CommonTableExpressionNode.create(parseCommonTableExpressionName(name), expressionNode),\n        });\n    };\n}\nfunction parseCommonTableExpressionName(name) {\n    if (name.includes('(')) {\n        const parts = name.split(/[\\(\\)]/);\n        const table = parts[0];\n        const columns = parts[1].split(',').map((it) => it.trim());\n        return CommonTableExpressionNameNode.create(table, columns);\n    }\n    else {\n        return CommonTableExpressionNameNode.create(name);\n    }\n}\n", "/// <reference types=\"./with-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const WithNode = freeze({\n    is(node) {\n        return node.kind === 'WithNode';\n    },\n    create(expression, params) {\n        return freeze({\n            kind: 'WithNode',\n            expressions: freeze([expression]),\n            ...params,\n        });\n    },\n    cloneWithExpression(withNode, expression) {\n        return freeze({\n            ...withNode,\n            expressions: freeze([...withNode.expressions, expression]),\n        });\n    },\n});\n", "/// <reference types=\"./random-string.d.ts\" />\nconst CHARS = [\n    'A',\n    'B',\n    'C',\n    'D',\n    'E',\n    'F',\n    'G',\n    'H',\n    'I',\n    'J',\n    'K',\n    'L',\n    'M',\n    'N',\n    'O',\n    'P',\n    'Q',\n    'R',\n    'S',\n    'T',\n    'U',\n    'V',\n    'W',\n    'X',\n    'Y',\n    'Z',\n    'a',\n    'b',\n    'c',\n    'd',\n    'e',\n    'f',\n    'g',\n    'h',\n    'i',\n    'j',\n    'k',\n    'l',\n    'm',\n    'n',\n    'o',\n    'p',\n    'q',\n    'r',\n    's',\n    't',\n    'u',\n    'v',\n    'w',\n    'x',\n    'y',\n    'z',\n    '0',\n    '1',\n    '2',\n    '3',\n    '4',\n    '5',\n    '6',\n    '7',\n    '8',\n    '9',\n];\nexport function randomString(length) {\n    let chars = '';\n    for (let i = 0; i < length; ++i) {\n        chars += randomChar();\n    }\n    return chars;\n}\nfunction randomChar() {\n    return CHARS[~~(Math.random() * CHARS.length)];\n}\n", "/// <reference types=\"./query-id.d.ts\" />\nimport { randomString } from './random-string.js';\nexport function createQueryId() {\n    return new LazyQueryId();\n}\nclass LazyQueryId {\n    #queryId;\n    get queryId() {\n        if (this.#queryId === undefined) {\n            this.#queryId = randomString(8);\n        }\n        return this.#queryId;\n    }\n}\n", "/// <reference types=\"./require-all-props.d.ts\" />\n/**\n * Helper function to check listed properties according to given type. Check if all properties has been used when object is initialised.\n *\n * Example use:\n *\n * ```ts\n * type SomeType = { propA: string; propB?: number; }\n *\n * // propB has to be mentioned even it is optional. It still should be initialized with undefined.\n * const a: SomeType = requireAllProps<SomeType>({ propA: \"value A\", propB: undefined });\n *\n * // checked type is implicit for variable.\n * const b = requireAllProps<SomeType>({ propA: \"value A\", propB: undefined });\n * ```\n *\n * Wrong use of this helper:\n *\n * 1. Omit checked type - all checked properties will be expect as of type never\n *\n * ```ts\n * type SomeType = { propA: string; propB?: number; }\n * // const z: SomeType = requireAllProps({ propC: \"no type will work\" }); // Property 'propA' is missing in type '{ propC: string; }' but required in type 'SomeType'.\n * ```\n *\n * 2. Apply to spreaded object - there is no way how to check in compile time if spreaded object contains all properties\n *\n * ```ts\n * type SomeType = { propA: string; propB?: number; }\n * const y: SomeType = { propA: \"\" }; // valid object according to SomeType declaration\n * // const x = requireAllProps<SomeType>({ ...y }); // Argument of type '{ propA: string; propB?: number; }' is not assignable to parameter of type 'AllProps<SomeType>'.\n * ```\n *\n * @param obj object to check if all properties has been used\n * @returns untouched obj parameter is returned\n */\nexport function requireAllProps(obj) {\n    return obj;\n}\n", "/// <reference types=\"./operation-node-transformer.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { requireAllProps } from '../util/require-all-props.js';\n/**\n * Transforms an operation node tree into another one.\n *\n * Kysely queries are expressed internally as a tree of objects (operation nodes).\n * `OperationNodeTransformer` takes such a tree as its input and returns a\n * transformed deep copy of it. By default the `OperationNodeTransformer`\n * does nothing. You need to override one or more methods to make it do\n * something.\n *\n * There's a method for each node type. For example if you'd like to convert\n * each identifier (table name, column name, alias etc.) from camelCase to\n * snake_case, you'd do something like this:\n *\n * ```ts\n * import { type IdentifierNode, OperationNodeTransformer } from 'kysely'\n * import snakeCase from 'lodash/snakeCase'\n *\n * class CamelCaseTransformer extends OperationNodeTransformer {\n *   override transformIdentifier(node: IdentifierNode): IdentifierNode {\n *     node = super.transformIdentifier(node)\n *\n *     return {\n *       ...node,\n *       name: snakeCase(node.name),\n *     }\n *   }\n * }\n *\n * const transformer = new CamelCaseTransformer()\n *\n * const query = db.selectFrom('person').select(['first_name', 'last_name'])\n *\n * const tree = transformer.transformNode(query.toOperationNode())\n * ```\n */\nexport class OperationNodeTransformer {\n    nodeStack = [];\n    #transformers = freeze({\n        AliasNode: this.transformAlias.bind(this),\n        ColumnNode: this.transformColumn.bind(this),\n        IdentifierNode: this.transformIdentifier.bind(this),\n        SchemableIdentifierNode: this.transformSchemableIdentifier.bind(this),\n        RawNode: this.transformRaw.bind(this),\n        ReferenceNode: this.transformReference.bind(this),\n        SelectQueryNode: this.transformSelectQuery.bind(this),\n        SelectionNode: this.transformSelection.bind(this),\n        TableNode: this.transformTable.bind(this),\n        FromNode: this.transformFrom.bind(this),\n        SelectAllNode: this.transformSelectAll.bind(this),\n        AndNode: this.transformAnd.bind(this),\n        OrNode: this.transformOr.bind(this),\n        ValueNode: this.transformValue.bind(this),\n        ValueListNode: this.transformValueList.bind(this),\n        PrimitiveValueListNode: this.transformPrimitiveValueList.bind(this),\n        ParensNode: this.transformParens.bind(this),\n        JoinNode: this.transformJoin.bind(this),\n        OperatorNode: this.transformOperator.bind(this),\n        WhereNode: this.transformWhere.bind(this),\n        InsertQueryNode: this.transformInsertQuery.bind(this),\n        DeleteQueryNode: this.transformDeleteQuery.bind(this),\n        ReturningNode: this.transformReturning.bind(this),\n        CreateTableNode: this.transformCreateTable.bind(this),\n        AddColumnNode: this.transformAddColumn.bind(this),\n        ColumnDefinitionNode: this.transformColumnDefinition.bind(this),\n        DropTableNode: this.transformDropTable.bind(this),\n        DataTypeNode: this.transformDataType.bind(this),\n        OrderByNode: this.transformOrderBy.bind(this),\n        OrderByItemNode: this.transformOrderByItem.bind(this),\n        GroupByNode: this.transformGroupBy.bind(this),\n        GroupByItemNode: this.transformGroupByItem.bind(this),\n        UpdateQueryNode: this.transformUpdateQuery.bind(this),\n        ColumnUpdateNode: this.transformColumnUpdate.bind(this),\n        LimitNode: this.transformLimit.bind(this),\n        OffsetNode: this.transformOffset.bind(this),\n        OnConflictNode: this.transformOnConflict.bind(this),\n        OnDuplicateKeyNode: this.transformOnDuplicateKey.bind(this),\n        CreateIndexNode: this.transformCreateIndex.bind(this),\n        DropIndexNode: this.transformDropIndex.bind(this),\n        ListNode: this.transformList.bind(this),\n        PrimaryKeyConstraintNode: this.transformPrimaryKeyConstraint.bind(this),\n        UniqueConstraintNode: this.transformUniqueConstraint.bind(this),\n        ReferencesNode: this.transformReferences.bind(this),\n        CheckConstraintNode: this.transformCheckConstraint.bind(this),\n        WithNode: this.transformWith.bind(this),\n        CommonTableExpressionNode: this.transformCommonTableExpression.bind(this),\n        CommonTableExpressionNameNode: this.transformCommonTableExpressionName.bind(this),\n        HavingNode: this.transformHaving.bind(this),\n        CreateSchemaNode: this.transformCreateSchema.bind(this),\n        DropSchemaNode: this.transformDropSchema.bind(this),\n        AlterTableNode: this.transformAlterTable.bind(this),\n        DropColumnNode: this.transformDropColumn.bind(this),\n        RenameColumnNode: this.transformRenameColumn.bind(this),\n        AlterColumnNode: this.transformAlterColumn.bind(this),\n        ModifyColumnNode: this.transformModifyColumn.bind(this),\n        AddConstraintNode: this.transformAddConstraint.bind(this),\n        DropConstraintNode: this.transformDropConstraint.bind(this),\n        RenameConstraintNode: this.transformRenameConstraint.bind(this),\n        ForeignKeyConstraintNode: this.transformForeignKeyConstraint.bind(this),\n        CreateViewNode: this.transformCreateView.bind(this),\n        RefreshMaterializedViewNode: this.transformRefreshMaterializedView.bind(this),\n        DropViewNode: this.transformDropView.bind(this),\n        GeneratedNode: this.transformGenerated.bind(this),\n        DefaultValueNode: this.transformDefaultValue.bind(this),\n        OnNode: this.transformOn.bind(this),\n        ValuesNode: this.transformValues.bind(this),\n        SelectModifierNode: this.transformSelectModifier.bind(this),\n        CreateTypeNode: this.transformCreateType.bind(this),\n        DropTypeNode: this.transformDropType.bind(this),\n        ExplainNode: this.transformExplain.bind(this),\n        DefaultInsertValueNode: this.transformDefaultInsertValue.bind(this),\n        AggregateFunctionNode: this.transformAggregateFunction.bind(this),\n        OverNode: this.transformOver.bind(this),\n        PartitionByNode: this.transformPartitionBy.bind(this),\n        PartitionByItemNode: this.transformPartitionByItem.bind(this),\n        SetOperationNode: this.transformSetOperation.bind(this),\n        BinaryOperationNode: this.transformBinaryOperation.bind(this),\n        UnaryOperationNode: this.transformUnaryOperation.bind(this),\n        UsingNode: this.transformUsing.bind(this),\n        FunctionNode: this.transformFunction.bind(this),\n        CaseNode: this.transformCase.bind(this),\n        WhenNode: this.transformWhen.bind(this),\n        JSONReferenceNode: this.transformJSONReference.bind(this),\n        JSONPathNode: this.transformJSONPath.bind(this),\n        JSONPathLegNode: this.transformJSONPathLeg.bind(this),\n        JSONOperatorChainNode: this.transformJSONOperatorChain.bind(this),\n        TupleNode: this.transformTuple.bind(this),\n        MergeQueryNode: this.transformMergeQuery.bind(this),\n        MatchedNode: this.transformMatched.bind(this),\n        AddIndexNode: this.transformAddIndex.bind(this),\n        CastNode: this.transformCast.bind(this),\n        FetchNode: this.transformFetch.bind(this),\n        TopNode: this.transformTop.bind(this),\n        OutputNode: this.transformOutput.bind(this),\n        OrActionNode: this.transformOrAction.bind(this),\n        CollateNode: this.transformCollate.bind(this),\n    });\n    transformNode(node, queryId) {\n        if (!node) {\n            return node;\n        }\n        this.nodeStack.push(node);\n        const out = this.transformNodeImpl(node, queryId);\n        this.nodeStack.pop();\n        return freeze(out);\n    }\n    transformNodeImpl(node, queryId) {\n        return this.#transformers[node.kind](node, queryId);\n    }\n    transformNodeList(list, queryId) {\n        if (!list) {\n            return list;\n        }\n        return freeze(list.map((node) => this.transformNode(node, queryId)));\n    }\n    transformSelectQuery(node, queryId) {\n        return requireAllProps({\n            kind: 'SelectQueryNode',\n            from: this.transformNode(node.from, queryId),\n            selections: this.transformNodeList(node.selections, queryId),\n            distinctOn: this.transformNodeList(node.distinctOn, queryId),\n            joins: this.transformNodeList(node.joins, queryId),\n            groupBy: this.transformNode(node.groupBy, queryId),\n            orderBy: this.transformNode(node.orderBy, queryId),\n            where: this.transformNode(node.where, queryId),\n            frontModifiers: this.transformNodeList(node.frontModifiers, queryId),\n            endModifiers: this.transformNodeList(node.endModifiers, queryId),\n            limit: this.transformNode(node.limit, queryId),\n            offset: this.transformNode(node.offset, queryId),\n            with: this.transformNode(node.with, queryId),\n            having: this.transformNode(node.having, queryId),\n            explain: this.transformNode(node.explain, queryId),\n            setOperations: this.transformNodeList(node.setOperations, queryId),\n            fetch: this.transformNode(node.fetch, queryId),\n            top: this.transformNode(node.top, queryId),\n        });\n    }\n    transformSelection(node, queryId) {\n        return requireAllProps({\n            kind: 'SelectionNode',\n            selection: this.transformNode(node.selection, queryId),\n        });\n    }\n    transformColumn(node, queryId) {\n        return requireAllProps({\n            kind: 'ColumnNode',\n            column: this.transformNode(node.column, queryId),\n        });\n    }\n    transformAlias(node, queryId) {\n        return requireAllProps({\n            kind: 'AliasNode',\n            node: this.transformNode(node.node, queryId),\n            alias: this.transformNode(node.alias, queryId),\n        });\n    }\n    transformTable(node, queryId) {\n        return requireAllProps({\n            kind: 'TableNode',\n            table: this.transformNode(node.table, queryId),\n        });\n    }\n    transformFrom(node, queryId) {\n        return requireAllProps({\n            kind: 'FromNode',\n            froms: this.transformNodeList(node.froms, queryId),\n        });\n    }\n    transformReference(node, queryId) {\n        return requireAllProps({\n            kind: 'ReferenceNode',\n            column: this.transformNode(node.column, queryId),\n            table: this.transformNode(node.table, queryId),\n        });\n    }\n    transformAnd(node, queryId) {\n        return requireAllProps({\n            kind: 'AndNode',\n            left: this.transformNode(node.left, queryId),\n            right: this.transformNode(node.right, queryId),\n        });\n    }\n    transformOr(node, queryId) {\n        return requireAllProps({\n            kind: 'OrNode',\n            left: this.transformNode(node.left, queryId),\n            right: this.transformNode(node.right, queryId),\n        });\n    }\n    transformValueList(node, queryId) {\n        return requireAllProps({\n            kind: 'ValueListNode',\n            values: this.transformNodeList(node.values, queryId),\n        });\n    }\n    transformParens(node, queryId) {\n        return requireAllProps({\n            kind: 'ParensNode',\n            node: this.transformNode(node.node, queryId),\n        });\n    }\n    transformJoin(node, queryId) {\n        return requireAllProps({\n            kind: 'JoinNode',\n            joinType: node.joinType,\n            table: this.transformNode(node.table, queryId),\n            on: this.transformNode(node.on, queryId),\n        });\n    }\n    transformRaw(node, queryId) {\n        return requireAllProps({\n            kind: 'RawNode',\n            sqlFragments: freeze([...node.sqlFragments]),\n            parameters: this.transformNodeList(node.parameters, queryId),\n        });\n    }\n    transformWhere(node, queryId) {\n        return requireAllProps({\n            kind: 'WhereNode',\n            where: this.transformNode(node.where, queryId),\n        });\n    }\n    transformInsertQuery(node, queryId) {\n        return requireAllProps({\n            kind: 'InsertQueryNode',\n            into: this.transformNode(node.into, queryId),\n            columns: this.transformNodeList(node.columns, queryId),\n            values: this.transformNode(node.values, queryId),\n            returning: this.transformNode(node.returning, queryId),\n            onConflict: this.transformNode(node.onConflict, queryId),\n            onDuplicateKey: this.transformNode(node.onDuplicateKey, queryId),\n            endModifiers: this.transformNodeList(node.endModifiers, queryId),\n            with: this.transformNode(node.with, queryId),\n            ignore: node.ignore,\n            orAction: this.transformNode(node.orAction, queryId),\n            replace: node.replace,\n            explain: this.transformNode(node.explain, queryId),\n            defaultValues: node.defaultValues,\n            top: this.transformNode(node.top, queryId),\n            output: this.transformNode(node.output, queryId),\n        });\n    }\n    transformValues(node, queryId) {\n        return requireAllProps({\n            kind: 'ValuesNode',\n            values: this.transformNodeList(node.values, queryId),\n        });\n    }\n    transformDeleteQuery(node, queryId) {\n        return requireAllProps({\n            kind: 'DeleteQueryNode',\n            from: this.transformNode(node.from, queryId),\n            using: this.transformNode(node.using, queryId),\n            joins: this.transformNodeList(node.joins, queryId),\n            where: this.transformNode(node.where, queryId),\n            returning: this.transformNode(node.returning, queryId),\n            endModifiers: this.transformNodeList(node.endModifiers, queryId),\n            with: this.transformNode(node.with, queryId),\n            orderBy: this.transformNode(node.orderBy, queryId),\n            limit: this.transformNode(node.limit, queryId),\n            explain: this.transformNode(node.explain, queryId),\n            top: this.transformNode(node.top, queryId),\n            output: this.transformNode(node.output, queryId),\n        });\n    }\n    transformReturning(node, queryId) {\n        return requireAllProps({\n            kind: 'ReturningNode',\n            selections: this.transformNodeList(node.selections, queryId),\n        });\n    }\n    transformCreateTable(node, queryId) {\n        return requireAllProps({\n            kind: 'CreateTableNode',\n            table: this.transformNode(node.table, queryId),\n            columns: this.transformNodeList(node.columns, queryId),\n            constraints: this.transformNodeList(node.constraints, queryId),\n            temporary: node.temporary,\n            ifNotExists: node.ifNotExists,\n            onCommit: node.onCommit,\n            frontModifiers: this.transformNodeList(node.frontModifiers, queryId),\n            endModifiers: this.transformNodeList(node.endModifiers, queryId),\n            selectQuery: this.transformNode(node.selectQuery, queryId),\n        });\n    }\n    transformColumnDefinition(node, queryId) {\n        return requireAllProps({\n            kind: 'ColumnDefinitionNode',\n            column: this.transformNode(node.column, queryId),\n            dataType: this.transformNode(node.dataType, queryId),\n            references: this.transformNode(node.references, queryId),\n            primaryKey: node.primaryKey,\n            autoIncrement: node.autoIncrement,\n            unique: node.unique,\n            notNull: node.notNull,\n            unsigned: node.unsigned,\n            defaultTo: this.transformNode(node.defaultTo, queryId),\n            check: this.transformNode(node.check, queryId),\n            generated: this.transformNode(node.generated, queryId),\n            frontModifiers: this.transformNodeList(node.frontModifiers, queryId),\n            endModifiers: this.transformNodeList(node.endModifiers, queryId),\n            nullsNotDistinct: node.nullsNotDistinct,\n            identity: node.identity,\n            ifNotExists: node.ifNotExists,\n        });\n    }\n    transformAddColumn(node, queryId) {\n        return requireAllProps({\n            kind: 'AddColumnNode',\n            column: this.transformNode(node.column, queryId),\n        });\n    }\n    transformDropTable(node, queryId) {\n        return requireAllProps({\n            kind: 'DropTableNode',\n            table: this.transformNode(node.table, queryId),\n            ifExists: node.ifExists,\n            cascade: node.cascade,\n        });\n    }\n    transformOrderBy(node, queryId) {\n        return requireAllProps({\n            kind: 'OrderByNode',\n            items: this.transformNodeList(node.items, queryId),\n        });\n    }\n    transformOrderByItem(node, queryId) {\n        return requireAllProps({\n            kind: 'OrderByItemNode',\n            orderBy: this.transformNode(node.orderBy, queryId),\n            direction: this.transformNode(node.direction, queryId),\n            collation: this.transformNode(node.collation, queryId),\n            nulls: node.nulls,\n        });\n    }\n    transformGroupBy(node, queryId) {\n        return requireAllProps({\n            kind: 'GroupByNode',\n            items: this.transformNodeList(node.items, queryId),\n        });\n    }\n    transformGroupByItem(node, queryId) {\n        return requireAllProps({\n            kind: 'GroupByItemNode',\n            groupBy: this.transformNode(node.groupBy, queryId),\n        });\n    }\n    transformUpdateQuery(node, queryId) {\n        return requireAllProps({\n            kind: 'UpdateQueryNode',\n            table: this.transformNode(node.table, queryId),\n            from: this.transformNode(node.from, queryId),\n            joins: this.transformNodeList(node.joins, queryId),\n            where: this.transformNode(node.where, queryId),\n            updates: this.transformNodeList(node.updates, queryId),\n            returning: this.transformNode(node.returning, queryId),\n            endModifiers: this.transformNodeList(node.endModifiers, queryId),\n            with: this.transformNode(node.with, queryId),\n            explain: this.transformNode(node.explain, queryId),\n            limit: this.transformNode(node.limit, queryId),\n            top: this.transformNode(node.top, queryId),\n            output: this.transformNode(node.output, queryId),\n            orderBy: this.transformNode(node.orderBy, queryId),\n        });\n    }\n    transformColumnUpdate(node, queryId) {\n        return requireAllProps({\n            kind: 'ColumnUpdateNode',\n            column: this.transformNode(node.column, queryId),\n            value: this.transformNode(node.value, queryId),\n        });\n    }\n    transformLimit(node, queryId) {\n        return requireAllProps({\n            kind: 'LimitNode',\n            limit: this.transformNode(node.limit, queryId),\n        });\n    }\n    transformOffset(node, queryId) {\n        return requireAllProps({\n            kind: 'OffsetNode',\n            offset: this.transformNode(node.offset, queryId),\n        });\n    }\n    transformOnConflict(node, queryId) {\n        return requireAllProps({\n            kind: 'OnConflictNode',\n            columns: this.transformNodeList(node.columns, queryId),\n            constraint: this.transformNode(node.constraint, queryId),\n            indexExpression: this.transformNode(node.indexExpression, queryId),\n            indexWhere: this.transformNode(node.indexWhere, queryId),\n            updates: this.transformNodeList(node.updates, queryId),\n            updateWhere: this.transformNode(node.updateWhere, queryId),\n            doNothing: node.doNothing,\n        });\n    }\n    transformOnDuplicateKey(node, queryId) {\n        return requireAllProps({\n            kind: 'OnDuplicateKeyNode',\n            updates: this.transformNodeList(node.updates, queryId),\n        });\n    }\n    transformCreateIndex(node, queryId) {\n        return requireAllProps({\n            kind: 'CreateIndexNode',\n            name: this.transformNode(node.name, queryId),\n            table: this.transformNode(node.table, queryId),\n            columns: this.transformNodeList(node.columns, queryId),\n            unique: node.unique,\n            using: this.transformNode(node.using, queryId),\n            ifNotExists: node.ifNotExists,\n            where: this.transformNode(node.where, queryId),\n            nullsNotDistinct: node.nullsNotDistinct,\n        });\n    }\n    transformList(node, queryId) {\n        return requireAllProps({\n            kind: 'ListNode',\n            items: this.transformNodeList(node.items, queryId),\n        });\n    }\n    transformDropIndex(node, queryId) {\n        return requireAllProps({\n            kind: 'DropIndexNode',\n            name: this.transformNode(node.name, queryId),\n            table: this.transformNode(node.table, queryId),\n            ifExists: node.ifExists,\n            cascade: node.cascade,\n        });\n    }\n    transformPrimaryKeyConstraint(node, queryId) {\n        return requireAllProps({\n            kind: 'PrimaryKeyConstraintNode',\n            columns: this.transformNodeList(node.columns, queryId),\n            name: this.transformNode(node.name, queryId),\n            deferrable: node.deferrable,\n            initiallyDeferred: node.initiallyDeferred,\n        });\n    }\n    transformUniqueConstraint(node, queryId) {\n        return requireAllProps({\n            kind: 'UniqueConstraintNode',\n            columns: this.transformNodeList(node.columns, queryId),\n            name: this.transformNode(node.name, queryId),\n            nullsNotDistinct: node.nullsNotDistinct,\n            deferrable: node.deferrable,\n            initiallyDeferred: node.initiallyDeferred,\n        });\n    }\n    transformForeignKeyConstraint(node, queryId) {\n        return requireAllProps({\n            kind: 'ForeignKeyConstraintNode',\n            columns: this.transformNodeList(node.columns, queryId),\n            references: this.transformNode(node.references, queryId),\n            name: this.transformNode(node.name, queryId),\n            onDelete: node.onDelete,\n            onUpdate: node.onUpdate,\n            deferrable: node.deferrable,\n            initiallyDeferred: node.initiallyDeferred,\n        });\n    }\n    transformSetOperation(node, queryId) {\n        return requireAllProps({\n            kind: 'SetOperationNode',\n            operator: node.operator,\n            expression: this.transformNode(node.expression, queryId),\n            all: node.all,\n        });\n    }\n    transformReferences(node, queryId) {\n        return requireAllProps({\n            kind: 'ReferencesNode',\n            table: this.transformNode(node.table, queryId),\n            columns: this.transformNodeList(node.columns, queryId),\n            onDelete: node.onDelete,\n            onUpdate: node.onUpdate,\n        });\n    }\n    transformCheckConstraint(node, queryId) {\n        return requireAllProps({\n            kind: 'CheckConstraintNode',\n            expression: this.transformNode(node.expression, queryId),\n            name: this.transformNode(node.name, queryId),\n        });\n    }\n    transformWith(node, queryId) {\n        return requireAllProps({\n            kind: 'WithNode',\n            expressions: this.transformNodeList(node.expressions, queryId),\n            recursive: node.recursive,\n        });\n    }\n    transformCommonTableExpression(node, queryId) {\n        return requireAllProps({\n            kind: 'CommonTableExpressionNode',\n            name: this.transformNode(node.name, queryId),\n            materialized: node.materialized,\n            expression: this.transformNode(node.expression, queryId),\n        });\n    }\n    transformCommonTableExpressionName(node, queryId) {\n        return requireAllProps({\n            kind: 'CommonTableExpressionNameNode',\n            table: this.transformNode(node.table, queryId),\n            columns: this.transformNodeList(node.columns, queryId),\n        });\n    }\n    transformHaving(node, queryId) {\n        return requireAllProps({\n            kind: 'HavingNode',\n            having: this.transformNode(node.having, queryId),\n        });\n    }\n    transformCreateSchema(node, queryId) {\n        return requireAllProps({\n            kind: 'CreateSchemaNode',\n            schema: this.transformNode(node.schema, queryId),\n            ifNotExists: node.ifNotExists,\n        });\n    }\n    transformDropSchema(node, queryId) {\n        return requireAllProps({\n            kind: 'DropSchemaNode',\n            schema: this.transformNode(node.schema, queryId),\n            ifExists: node.ifExists,\n            cascade: node.cascade,\n        });\n    }\n    transformAlterTable(node, queryId) {\n        return requireAllProps({\n            kind: 'AlterTableNode',\n            table: this.transformNode(node.table, queryId),\n            renameTo: this.transformNode(node.renameTo, queryId),\n            setSchema: this.transformNode(node.setSchema, queryId),\n            columnAlterations: this.transformNodeList(node.columnAlterations, queryId),\n            addConstraint: this.transformNode(node.addConstraint, queryId),\n            dropConstraint: this.transformNode(node.dropConstraint, queryId),\n            renameConstraint: this.transformNode(node.renameConstraint, queryId),\n            addIndex: this.transformNode(node.addIndex, queryId),\n            dropIndex: this.transformNode(node.dropIndex, queryId),\n        });\n    }\n    transformDropColumn(node, queryId) {\n        return requireAllProps({\n            kind: 'DropColumnNode',\n            column: this.transformNode(node.column, queryId),\n        });\n    }\n    transformRenameColumn(node, queryId) {\n        return requireAllProps({\n            kind: 'RenameColumnNode',\n            column: this.transformNode(node.column, queryId),\n            renameTo: this.transformNode(node.renameTo, queryId),\n        });\n    }\n    transformAlterColumn(node, queryId) {\n        return requireAllProps({\n            kind: 'AlterColumnNode',\n            column: this.transformNode(node.column, queryId),\n            dataType: this.transformNode(node.dataType, queryId),\n            dataTypeExpression: this.transformNode(node.dataTypeExpression, queryId),\n            setDefault: this.transformNode(node.setDefault, queryId),\n            dropDefault: node.dropDefault,\n            setNotNull: node.setNotNull,\n            dropNotNull: node.dropNotNull,\n        });\n    }\n    transformModifyColumn(node, queryId) {\n        return requireAllProps({\n            kind: 'ModifyColumnNode',\n            column: this.transformNode(node.column, queryId),\n        });\n    }\n    transformAddConstraint(node, queryId) {\n        return requireAllProps({\n            kind: 'AddConstraintNode',\n            constraint: this.transformNode(node.constraint, queryId),\n        });\n    }\n    transformDropConstraint(node, queryId) {\n        return requireAllProps({\n            kind: 'DropConstraintNode',\n            constraintName: this.transformNode(node.constraintName, queryId),\n            ifExists: node.ifExists,\n            modifier: node.modifier,\n        });\n    }\n    transformRenameConstraint(node, queryId) {\n        return requireAllProps({\n            kind: 'RenameConstraintNode',\n            oldName: this.transformNode(node.oldName, queryId),\n            newName: this.transformNode(node.newName, queryId),\n        });\n    }\n    transformCreateView(node, queryId) {\n        return requireAllProps({\n            kind: 'CreateViewNode',\n            name: this.transformNode(node.name, queryId),\n            temporary: node.temporary,\n            orReplace: node.orReplace,\n            ifNotExists: node.ifNotExists,\n            materialized: node.materialized,\n            columns: this.transformNodeList(node.columns, queryId),\n            as: this.transformNode(node.as, queryId),\n        });\n    }\n    transformRefreshMaterializedView(node, queryId) {\n        return requireAllProps({\n            kind: 'RefreshMaterializedViewNode',\n            name: this.transformNode(node.name, queryId),\n            concurrently: node.concurrently,\n            withNoData: node.withNoData,\n        });\n    }\n    transformDropView(node, queryId) {\n        return requireAllProps({\n            kind: 'DropViewNode',\n            name: this.transformNode(node.name, queryId),\n            ifExists: node.ifExists,\n            materialized: node.materialized,\n            cascade: node.cascade,\n        });\n    }\n    transformGenerated(node, queryId) {\n        return requireAllProps({\n            kind: 'GeneratedNode',\n            byDefault: node.byDefault,\n            always: node.always,\n            identity: node.identity,\n            stored: node.stored,\n            expression: this.transformNode(node.expression, queryId),\n        });\n    }\n    transformDefaultValue(node, queryId) {\n        return requireAllProps({\n            kind: 'DefaultValueNode',\n            defaultValue: this.transformNode(node.defaultValue, queryId),\n        });\n    }\n    transformOn(node, queryId) {\n        return requireAllProps({\n            kind: 'OnNode',\n            on: this.transformNode(node.on, queryId),\n        });\n    }\n    transformSelectModifier(node, queryId) {\n        return requireAllProps({\n            kind: 'SelectModifierNode',\n            modifier: node.modifier,\n            rawModifier: this.transformNode(node.rawModifier, queryId),\n            of: this.transformNodeList(node.of, queryId),\n        });\n    }\n    transformCreateType(node, queryId) {\n        return requireAllProps({\n            kind: 'CreateTypeNode',\n            name: this.transformNode(node.name, queryId),\n            enum: this.transformNode(node.enum, queryId),\n        });\n    }\n    transformDropType(node, queryId) {\n        return requireAllProps({\n            kind: 'DropTypeNode',\n            name: this.transformNode(node.name, queryId),\n            ifExists: node.ifExists,\n        });\n    }\n    transformExplain(node, queryId) {\n        return requireAllProps({\n            kind: 'ExplainNode',\n            format: node.format,\n            options: this.transformNode(node.options, queryId),\n        });\n    }\n    transformSchemableIdentifier(node, queryId) {\n        return requireAllProps({\n            kind: 'SchemableIdentifierNode',\n            schema: this.transformNode(node.schema, queryId),\n            identifier: this.transformNode(node.identifier, queryId),\n        });\n    }\n    transformAggregateFunction(node, queryId) {\n        return requireAllProps({\n            kind: 'AggregateFunctionNode',\n            func: node.func,\n            aggregated: this.transformNodeList(node.aggregated, queryId),\n            distinct: node.distinct,\n            orderBy: this.transformNode(node.orderBy, queryId),\n            withinGroup: this.transformNode(node.withinGroup, queryId),\n            filter: this.transformNode(node.filter, queryId),\n            over: this.transformNode(node.over, queryId),\n        });\n    }\n    transformOver(node, queryId) {\n        return requireAllProps({\n            kind: 'OverNode',\n            orderBy: this.transformNode(node.orderBy, queryId),\n            partitionBy: this.transformNode(node.partitionBy, queryId),\n        });\n    }\n    transformPartitionBy(node, queryId) {\n        return requireAllProps({\n            kind: 'PartitionByNode',\n            items: this.transformNodeList(node.items, queryId),\n        });\n    }\n    transformPartitionByItem(node, queryId) {\n        return requireAllProps({\n            kind: 'PartitionByItemNode',\n            partitionBy: this.transformNode(node.partitionBy, queryId),\n        });\n    }\n    transformBinaryOperation(node, queryId) {\n        return requireAllProps({\n            kind: 'BinaryOperationNode',\n            leftOperand: this.transformNode(node.leftOperand, queryId),\n            operator: this.transformNode(node.operator, queryId),\n            rightOperand: this.transformNode(node.rightOperand, queryId),\n        });\n    }\n    transformUnaryOperation(node, queryId) {\n        return requireAllProps({\n            kind: 'UnaryOperationNode',\n            operator: this.transformNode(node.operator, queryId),\n            operand: this.transformNode(node.operand, queryId),\n        });\n    }\n    transformUsing(node, queryId) {\n        return requireAllProps({\n            kind: 'UsingNode',\n            tables: this.transformNodeList(node.tables, queryId),\n        });\n    }\n    transformFunction(node, queryId) {\n        return requireAllProps({\n            kind: 'FunctionNode',\n            func: node.func,\n            arguments: this.transformNodeList(node.arguments, queryId),\n        });\n    }\n    transformCase(node, queryId) {\n        return requireAllProps({\n            kind: 'CaseNode',\n            value: this.transformNode(node.value, queryId),\n            when: this.transformNodeList(node.when, queryId),\n            else: this.transformNode(node.else, queryId),\n            isStatement: node.isStatement,\n        });\n    }\n    transformWhen(node, queryId) {\n        return requireAllProps({\n            kind: 'WhenNode',\n            condition: this.transformNode(node.condition, queryId),\n            result: this.transformNode(node.result, queryId),\n        });\n    }\n    transformJSONReference(node, queryId) {\n        return requireAllProps({\n            kind: 'JSONReferenceNode',\n            reference: this.transformNode(node.reference, queryId),\n            traversal: this.transformNode(node.traversal, queryId),\n        });\n    }\n    transformJSONPath(node, queryId) {\n        return requireAllProps({\n            kind: 'JSONPathNode',\n            inOperator: this.transformNode(node.inOperator, queryId),\n            pathLegs: this.transformNodeList(node.pathLegs, queryId),\n        });\n    }\n    transformJSONPathLeg(node, _queryId) {\n        return requireAllProps({\n            kind: 'JSONPathLegNode',\n            type: node.type,\n            value: node.value,\n        });\n    }\n    transformJSONOperatorChain(node, queryId) {\n        return requireAllProps({\n            kind: 'JSONOperatorChainNode',\n            operator: this.transformNode(node.operator, queryId),\n            values: this.transformNodeList(node.values, queryId),\n        });\n    }\n    transformTuple(node, queryId) {\n        return requireAllProps({\n            kind: 'TupleNode',\n            values: this.transformNodeList(node.values, queryId),\n        });\n    }\n    transformMergeQuery(node, queryId) {\n        return requireAllProps({\n            kind: 'MergeQueryNode',\n            into: this.transformNode(node.into, queryId),\n            using: this.transformNode(node.using, queryId),\n            whens: this.transformNodeList(node.whens, queryId),\n            with: this.transformNode(node.with, queryId),\n            top: this.transformNode(node.top, queryId),\n            endModifiers: this.transformNodeList(node.endModifiers, queryId),\n            output: this.transformNode(node.output, queryId),\n            returning: this.transformNode(node.returning, queryId),\n        });\n    }\n    transformMatched(node, _queryId) {\n        return requireAllProps({\n            kind: 'MatchedNode',\n            not: node.not,\n            bySource: node.bySource,\n        });\n    }\n    transformAddIndex(node, queryId) {\n        return requireAllProps({\n            kind: 'AddIndexNode',\n            name: this.transformNode(node.name, queryId),\n            columns: this.transformNodeList(node.columns, queryId),\n            unique: node.unique,\n            using: this.transformNode(node.using, queryId),\n            ifNotExists: node.ifNotExists,\n        });\n    }\n    transformCast(node, queryId) {\n        return requireAllProps({\n            kind: 'CastNode',\n            expression: this.transformNode(node.expression, queryId),\n            dataType: this.transformNode(node.dataType, queryId),\n        });\n    }\n    transformFetch(node, queryId) {\n        return requireAllProps({\n            kind: 'FetchNode',\n            rowCount: this.transformNode(node.rowCount, queryId),\n            modifier: node.modifier,\n        });\n    }\n    transformTop(node, _queryId) {\n        return requireAllProps({\n            kind: 'TopNode',\n            expression: node.expression,\n            modifiers: node.modifiers,\n        });\n    }\n    transformOutput(node, queryId) {\n        return requireAllProps({\n            kind: 'OutputNode',\n            selections: this.transformNodeList(node.selections, queryId),\n        });\n    }\n    transformDataType(node, _queryId) {\n        // An Object.freezed leaf node. No need to clone.\n        return node;\n    }\n    transformSelectAll(node, _queryId) {\n        // An Object.freezed leaf node. No need to clone.\n        return node;\n    }\n    transformIdentifier(node, _queryId) {\n        // An Object.freezed leaf node. No need to clone.\n        return node;\n    }\n    transformValue(node, _queryId) {\n        // An Object.freezed leaf node. No need to clone.\n        return node;\n    }\n    transformPrimitiveValueList(node, _queryId) {\n        // An Object.freezed leaf node. No need to clone.\n        return node;\n    }\n    transformOperator(node, _queryId) {\n        // An Object.freezed leaf node. No need to clone.\n        return node;\n    }\n    transformDefaultInsertValue(node, _queryId) {\n        // An Object.freezed leaf node. No need to clone.\n        return node;\n    }\n    transformOrAction(node, _queryId) {\n        // An Object.freezed leaf node. No need to clone.\n        return node;\n    }\n    transformCollate(node, _queryId) {\n        // An Object.freezed leaf node. No need to clone.\n        return node;\n    }\n}\n", "/// <reference types=\"./with-schema-transformer.d.ts\" />\nimport { AliasNode } from '../../operation-node/alias-node.js';\nimport { IdentifierNode } from '../../operation-node/identifier-node.js';\nimport { JoinNode } from '../../operation-node/join-node.js';\nimport { ListNode } from '../../operation-node/list-node.js';\nimport { OperationNodeTransformer } from '../../operation-node/operation-node-transformer.js';\nimport { SchemableIdentifierNode } from '../../operation-node/schemable-identifier-node.js';\nimport { TableNode } from '../../operation-node/table-node.js';\nimport { UsingNode } from '../../operation-node/using-node.js';\nimport { freeze } from '../../util/object-utils.js';\n// This object exist only so that we get a type error when a new RootOperationNode\n// is added. If you get a type error here, make sure to add the new root node and\n// handle it correctly in the transformer.\n//\n// DO NOT REFACTOR THIS EVEN IF IT SEEMS USELESS TO YOU!\nconst ROOT_OPERATION_NODES = freeze({\n    AlterTableNode: true,\n    CreateIndexNode: true,\n    CreateSchemaNode: true,\n    CreateTableNode: true,\n    CreateTypeNode: true,\n    CreateViewNode: true,\n    RefreshMaterializedViewNode: true,\n    DeleteQueryNode: true,\n    DropIndexNode: true,\n    DropSchemaNode: true,\n    DropTableNode: true,\n    DropTypeNode: true,\n    DropViewNode: true,\n    InsertQueryNode: true,\n    RawNode: true,\n    SelectQueryNode: true,\n    UpdateQueryNode: true,\n    MergeQueryNode: true,\n});\nconst SCHEMALESS_FUNCTIONS = {\n    json_agg: true,\n    to_json: true,\n};\nexport class WithSchemaTransformer extends OperationNodeTransformer {\n    #schema;\n    #schemableIds = new Set();\n    #ctes = new Set();\n    constructor(schema) {\n        super();\n        this.#schema = schema;\n    }\n    transformNodeImpl(node, queryId) {\n        if (!this.#isRootOperationNode(node)) {\n            return super.transformNodeImpl(node, queryId);\n        }\n        const ctes = this.#collectCTEs(node);\n        for (const cte of ctes) {\n            this.#ctes.add(cte);\n        }\n        const tables = this.#collectSchemableIds(node);\n        for (const table of tables) {\n            this.#schemableIds.add(table);\n        }\n        const transformed = super.transformNodeImpl(node, queryId);\n        for (const table of tables) {\n            this.#schemableIds.delete(table);\n        }\n        for (const cte of ctes) {\n            this.#ctes.delete(cte);\n        }\n        return transformed;\n    }\n    transformSchemableIdentifier(node, queryId) {\n        const transformed = super.transformSchemableIdentifier(node, queryId);\n        if (transformed.schema || !this.#schemableIds.has(node.identifier.name)) {\n            return transformed;\n        }\n        return {\n            ...transformed,\n            schema: IdentifierNode.create(this.#schema),\n        };\n    }\n    transformReferences(node, queryId) {\n        const transformed = super.transformReferences(node, queryId);\n        if (transformed.table.table.schema) {\n            return transformed;\n        }\n        return {\n            ...transformed,\n            table: TableNode.createWithSchema(this.#schema, transformed.table.table.identifier.name),\n        };\n    }\n    transformAggregateFunction(node, queryId) {\n        return {\n            ...super.transformAggregateFunction({ ...node, aggregated: [] }, queryId),\n            aggregated: this.#transformTableArgsWithoutSchemas(node, queryId, 'aggregated'),\n        };\n    }\n    transformFunction(node, queryId) {\n        return {\n            ...super.transformFunction({ ...node, arguments: [] }, queryId),\n            arguments: this.#transformTableArgsWithoutSchemas(node, queryId, 'arguments'),\n        };\n    }\n    transformSelectModifier(node, queryId) {\n        return {\n            ...super.transformSelectModifier({ ...node, of: undefined }, queryId),\n            of: node.of?.map((item) => TableNode.is(item) && !item.table.schema\n                ? {\n                    ...item,\n                    table: this.transformIdentifier(item.table.identifier, queryId),\n                }\n                : this.transformNode(item, queryId)),\n        };\n    }\n    #transformTableArgsWithoutSchemas(node, queryId, argsKey) {\n        return SCHEMALESS_FUNCTIONS[node.func]\n            ? node[argsKey].map((arg) => !TableNode.is(arg) || arg.table.schema\n                ? this.transformNode(arg, queryId)\n                : {\n                    ...arg,\n                    table: this.transformIdentifier(arg.table.identifier, queryId),\n                })\n            : this.transformNodeList(node[argsKey], queryId);\n    }\n    #isRootOperationNode(node) {\n        return node.kind in ROOT_OPERATION_NODES;\n    }\n    #collectSchemableIds(node) {\n        const schemableIds = new Set();\n        if ('name' in node && node.name && SchemableIdentifierNode.is(node.name)) {\n            this.#collectSchemableId(node.name, schemableIds);\n        }\n        if ('from' in node && node.from) {\n            for (const from of node.from.froms) {\n                this.#collectSchemableIdsFromTableExpr(from, schemableIds);\n            }\n        }\n        if ('into' in node && node.into) {\n            this.#collectSchemableIdsFromTableExpr(node.into, schemableIds);\n        }\n        if ('table' in node && node.table) {\n            this.#collectSchemableIdsFromTableExpr(node.table, schemableIds);\n        }\n        if ('joins' in node && node.joins) {\n            for (const join of node.joins) {\n                this.#collectSchemableIdsFromTableExpr(join.table, schemableIds);\n            }\n        }\n        if ('using' in node && node.using) {\n            if (JoinNode.is(node.using)) {\n                this.#collectSchemableIdsFromTableExpr(node.using.table, schemableIds);\n            }\n            else {\n                this.#collectSchemableIdsFromTableExpr(node.using, schemableIds);\n            }\n        }\n        return schemableIds;\n    }\n    #collectCTEs(node) {\n        const ctes = new Set();\n        if ('with' in node && node.with) {\n            this.#collectCTEIds(node.with, ctes);\n        }\n        return ctes;\n    }\n    #collectSchemableIdsFromTableExpr(node, schemableIds) {\n        if (TableNode.is(node)) {\n            return this.#collectSchemableId(node.table, schemableIds);\n        }\n        if (AliasNode.is(node) && TableNode.is(node.node)) {\n            return this.#collectSchemableId(node.node.table, schemableIds);\n        }\n        if (ListNode.is(node)) {\n            for (const table of node.items) {\n                this.#collectSchemableIdsFromTableExpr(table, schemableIds);\n            }\n            return;\n        }\n        if (UsingNode.is(node)) {\n            for (const table of node.tables) {\n                this.#collectSchemableIdsFromTableExpr(table, schemableIds);\n            }\n            return;\n        }\n    }\n    #collectSchemableId(node, schemableIds) {\n        const id = node.identifier.name;\n        if (!this.#schemableIds.has(id) && !this.#ctes.has(id)) {\n            schemableIds.add(id);\n        }\n    }\n    #collectCTEIds(node, ctes) {\n        for (const expr of node.expressions) {\n            const cteId = expr.name.table.table.identifier.name;\n            if (!this.#ctes.has(cteId)) {\n                ctes.add(cteId);\n            }\n        }\n    }\n}\n", "/// <reference types=\"./with-schema-plugin.d.ts\" />\nimport { WithSchemaTransformer } from './with-schema-transformer.js';\nexport class WithSchemaPlugin {\n    #transformer;\n    constructor(schema) {\n        this.#transformer = new WithSchemaTransformer(schema);\n    }\n    transformQuery(args) {\n        return this.#transformer.transformNode(args.node, args.queryId);\n    }\n    async transformResult(args) {\n        return args.result;\n    }\n}\n", "/// <reference types=\"./matched-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const MatchedNode = freeze({\n    is(node) {\n        return node.kind === 'MatchedNode';\n    },\n    create(not, bySource = false) {\n        return freeze({\n            kind: 'MatchedNode',\n            not,\n            bySource,\n        });\n    },\n});\n", "/// <reference types=\"./merge-parser.d.ts\" />\nimport { MatchedNode } from '../operation-node/matched-node.js';\nimport { isOperationNodeSource, } from '../operation-node/operation-node-source.js';\nimport { RawNode } from '../operation-node/raw-node.js';\nimport { WhenNode } from '../operation-node/when-node.js';\nimport { isString } from '../util/object-utils.js';\nimport { parseFilterList, parseReferentialBinaryOperation, parseValueBinaryOperationOrExpression, } from './binary-operation-parser.js';\nexport function parseMergeWhen(type, args, refRight) {\n    return WhenNode.create(parseFilterList([\n        MatchedNode.create(!type.isMatched, type.bySource),\n        ...(args && args.length > 0\n            ? [\n                args.length === 3 && refRight\n                    ? parseReferentialBinaryOperation(args[0], args[1], args[2])\n                    : parseValueBinaryOperationOrExpression(args),\n            ]\n            : []),\n    ], 'and', false));\n}\nexport function parseMergeThen(result) {\n    if (isString(result)) {\n        return RawNode.create([result], []);\n    }\n    if (isOperationNodeSource(result)) {\n        return result.toOperationNode();\n    }\n    return result;\n}\n", "/// <reference types=\"./deferred.d.ts\" />\nexport class Deferred {\n    #promise;\n    #resolve;\n    #reject;\n    constructor() {\n        this.#promise = new Promise((resolve, reject) => {\n            this.#reject = reject;\n            this.#resolve = resolve;\n        });\n    }\n    get promise() {\n        return this.#promise;\n    }\n    resolve = (value) => {\n        if (this.#resolve) {\n            this.#resolve(value);\n        }\n    };\n    reject = (reason) => {\n        if (this.#reject) {\n            this.#reject(reason);\n        }\n    };\n}\n", "/// <reference types=\"./provide-controlled-connection.d.ts\" />\nimport { Deferred } from './deferred.js';\nimport { freeze } from './object-utils.js';\nexport async function provideControlledConnection(connectionProvider) {\n    const connectionDefer = new Deferred();\n    const connectionReleaseDefer = new Deferred();\n    connectionProvider\n        .provideConnection(async (connection) => {\n        connectionDefer.resolve(connection);\n        return await connectionReleaseDefer.promise;\n    })\n        .catch((ex) => connectionDefer.reject(ex));\n    // Create composite of the connection and the release method instead of\n    // modifying the connection or creating a new nesting `DatabaseConnection`.\n    // This way we don't accidentally override any methods of 3rd party\n    // connections and don't return wrapped connections to drivers that\n    // expect a certain specific connection class.\n    return freeze({\n        connection: await connectionDefer.promise,\n        release: connectionReleaseDefer.resolve,\n    });\n}\n", "/// <reference types=\"./query-executor-base.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { provideControlledConnection } from '../util/provide-controlled-connection.js';\nimport { logOnce } from '../util/log-once.js';\nconst NO_PLUGINS = freeze([]);\nexport class QueryExecutorBase {\n    #plugins;\n    constructor(plugins = NO_PLUGINS) {\n        this.#plugins = plugins;\n    }\n    get plugins() {\n        return this.#plugins;\n    }\n    transformQuery(node, queryId) {\n        for (const plugin of this.#plugins) {\n            const transformedNode = plugin.transformQuery({ node, queryId });\n            // We need to do a runtime check here. There is no good way\n            // to write types that enforce this constraint.\n            if (transformedNode.kind === node.kind) {\n                node = transformedNode;\n            }\n            else {\n                throw new Error([\n                    `KyselyPlugin.transformQuery must return a node`,\n                    `of the same kind that was given to it.`,\n                    `The plugin was given a ${node.kind}`,\n                    `but it returned a ${transformedNode.kind}`,\n                ].join(' '));\n            }\n        }\n        return node;\n    }\n    async executeQuery(compiledQuery) {\n        return await this.provideConnection(async (connection) => {\n            const result = await connection.executeQuery(compiledQuery);\n            if ('numUpdatedOrDeletedRows' in result) {\n                logOnce('kysely:warning: outdated driver/plugin detected! `QueryResult.numUpdatedOrDeletedRows` has been replaced with `QueryResult.numAffectedRows`.');\n            }\n            return await this.#transformResult(result, compiledQuery.queryId);\n        });\n    }\n    async *stream(compiledQuery, chunkSize) {\n        const { connection, release } = await provideControlledConnection(this);\n        try {\n            for await (const result of connection.streamQuery(compiledQuery, chunkSize)) {\n                yield await this.#transformResult(result, compiledQuery.queryId);\n            }\n        }\n        finally {\n            release();\n        }\n    }\n    async #transformResult(result, queryId) {\n        for (const plugin of this.#plugins) {\n            result = await plugin.transformResult({ result, queryId });\n        }\n        return result;\n    }\n}\n", "/// <reference types=\"./noop-query-executor.d.ts\" />\nimport { QueryExecutorBase } from './query-executor-base.js';\n/**\n * A {@link QueryExecutor} subclass that can be used when you don't\n * have a {@link QueryCompiler}, {@link ConnectionProvider} or any\n * other needed things to actually execute queries.\n */\nexport class NoopQueryExecutor extends QueryExecutorBase {\n    get adapter() {\n        throw new Error('this query cannot be compiled to SQL');\n    }\n    compileQuery() {\n        throw new Error('this query cannot be compiled to SQL');\n    }\n    provideConnection() {\n        throw new Error('this query cannot be executed');\n    }\n    withConnectionProvider() {\n        throw new Error('this query cannot have a connection provider');\n    }\n    withPlugin(plugin) {\n        return new NoopQueryExecutor([...this.plugins, plugin]);\n    }\n    withPlugins(plugins) {\n        return new NoopQueryExecutor([...this.plugins, ...plugins]);\n    }\n    withPluginAtFront(plugin) {\n        return new NoopQueryExecutor([plugin, ...this.plugins]);\n    }\n    withoutPlugins() {\n        return new NoopQueryExecutor([]);\n    }\n}\nexport const NOOP_QUERY_EXECUTOR = new NoopQueryExecutor();\n", "/// <reference types=\"./merge-result.d.ts\" />\nexport class MergeResult {\n    numChangedRows;\n    constructor(numChangedRows) {\n        this.numChangedRows = numChangedRows;\n    }\n}\n", "/// <reference types=\"./merge-query-builder.d.ts\" />\nimport { InsertQueryNode } from '../operation-node/insert-query-node.js';\nimport { MergeQueryNode } from '../operation-node/merge-query-node.js';\nimport { QueryNode } from '../operation-node/query-node.js';\nimport { UpdateQueryNode } from '../operation-node/update-query-node.js';\nimport { parseInsertExpression, } from '../parser/insert-values-parser.js';\nimport { parseJoin, } from '../parser/join-parser.js';\nimport { parseMergeThen, parseMergeWhen } from '../parser/merge-parser.js';\nimport { parseSelectAll, parseSelectArg, } from '../parser/select-parser.js';\nimport { parseTop } from '../parser/top-parser.js';\nimport { NOOP_QUERY_EXECUTOR } from '../query-executor/noop-query-executor.js';\nimport { freeze } from '../util/object-utils.js';\nimport { MergeResult } from './merge-result.js';\nimport { NoResultError, isNoResultErrorConstructor, } from './no-result-error.js';\nimport { UpdateQueryBuilder } from './update-query-builder.js';\nexport class MergeQueryBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * This can be used to add any additional SQL to the end of the query.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * await db\n     *   .mergeInto('person')\n     *   .using('pet', 'pet.owner_id', 'person.id')\n     *   .whenMatched()\n     *   .thenDelete()\n     *   .modifyEnd(sql.raw('-- this is a comment'))\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * merge into \"person\" using \"pet\" on \"pet\".\"owner_id\" = \"person\".\"id\" when matched then delete -- this is a comment\n     * ```\n     */\n    modifyEnd(modifier) {\n        return new MergeQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithEndModifier(this.#props.queryNode, modifier.toOperationNode()),\n        });\n    }\n    /**\n     * Changes a `merge into` query to an `merge top into` query.\n     *\n     * `top` clause is only supported by some dialects like MS SQL Server.\n     *\n     * ### Examples\n     *\n     * Affect 5 matched rows at most:\n     *\n     * ```ts\n     * await db.mergeInto('person')\n     *   .top(5)\n     *   .using('pet', 'person.id', 'pet.owner_id')\n     *   .whenMatched()\n     *   .thenDelete()\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MS SQL Server):\n     *\n     * ```sql\n     * merge top(5) into \"person\"\n     * using \"pet\" on \"person\".\"id\" = \"pet\".\"owner_id\"\n     * when matched then\n     *   delete\n     * ```\n     *\n     * Affect 50% of matched rows:\n     *\n     * ```ts\n     * await db.mergeInto('person')\n     *   .top(50, 'percent')\n     *   .using('pet', 'person.id', 'pet.owner_id')\n     *   .whenMatched()\n     *   .thenDelete()\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MS SQL Server):\n     *\n     * ```sql\n     * merge top(50) percent into \"person\"\n     * using \"pet\" on \"person\".\"id\" = \"pet\".\"owner_id\"\n     * when matched then\n     *   delete\n     * ```\n     */\n    top(expression, modifiers) {\n        return new MergeQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithTop(this.#props.queryNode, parseTop(expression, modifiers)),\n        });\n    }\n    using(...args) {\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: MergeQueryNode.cloneWithUsing(this.#props.queryNode, parseJoin('Using', args)),\n        });\n    }\n    returning(args) {\n        return new MergeQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithReturning(this.#props.queryNode, parseSelectArg(args)),\n        });\n    }\n    returningAll(table) {\n        return new MergeQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithReturning(this.#props.queryNode, parseSelectAll(table)),\n        });\n    }\n    output(args) {\n        return new MergeQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithOutput(this.#props.queryNode, parseSelectArg(args)),\n        });\n    }\n    outputAll(table) {\n        return new MergeQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithOutput(this.#props.queryNode, parseSelectAll(table)),\n        });\n    }\n}\nexport class WheneableMergeQueryBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * This can be used to add any additional SQL to the end of the query.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * await db\n     *   .mergeInto('person')\n     *   .using('pet', 'pet.owner_id', 'person.id')\n     *   .whenMatched()\n     *   .thenDelete()\n     *   .modifyEnd(sql.raw('-- this is a comment'))\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * merge into \"person\" using \"pet\" on \"pet\".\"owner_id\" = \"person\".\"id\" when matched then delete -- this is a comment\n     * ```\n     */\n    modifyEnd(modifier) {\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithEndModifier(this.#props.queryNode, modifier.toOperationNode()),\n        });\n    }\n    /**\n     * See {@link MergeQueryBuilder.top}.\n     */\n    top(expression, modifiers) {\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithTop(this.#props.queryNode, parseTop(expression, modifiers)),\n        });\n    }\n    /**\n     * Adds a simple `when matched` clause to the query.\n     *\n     * For a `when matched` clause with an `and` condition, see {@link whenMatchedAnd}.\n     *\n     * For a simple `when not matched` clause, see {@link whenNotMatched}.\n     *\n     * For a `when not matched` clause with an `and` condition, see {@link whenNotMatchedAnd}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db.mergeInto('person')\n     *   .using('pet', 'person.id', 'pet.owner_id')\n     *   .whenMatched()\n     *   .thenDelete()\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * merge into \"person\"\n     * using \"pet\" on \"person\".\"id\" = \"pet\".\"owner_id\"\n     * when matched then\n     *   delete\n     * ```\n     */\n    whenMatched() {\n        return this.#whenMatched([]);\n    }\n    whenMatchedAnd(...args) {\n        return this.#whenMatched(args);\n    }\n    /**\n     * Adds the `when matched` clause to the query with an `and` condition. But unlike\n     * {@link whenMatchedAnd}, this method accepts a column reference as the 3rd argument.\n     *\n     * This method is similar to {@link SelectQueryBuilder.whereRef}, so see the documentation\n     * for that method for more examples.\n     */\n    whenMatchedAndRef(lhs, op, rhs) {\n        return this.#whenMatched([lhs, op, rhs], true);\n    }\n    #whenMatched(args, refRight) {\n        return new MatchedThenableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: MergeQueryNode.cloneWithWhen(this.#props.queryNode, parseMergeWhen({ isMatched: true }, args, refRight)),\n        });\n    }\n    /**\n     * Adds a simple `when not matched` clause to the query.\n     *\n     * For a `when not matched` clause with an `and` condition, see {@link whenNotMatchedAnd}.\n     *\n     * For a simple `when matched` clause, see {@link whenMatched}.\n     *\n     * For a `when matched` clause with an `and` condition, see {@link whenMatchedAnd}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db.mergeInto('person')\n     *   .using('pet', 'person.id', 'pet.owner_id')\n     *   .whenNotMatched()\n     *   .thenInsertValues({\n     *     first_name: 'John',\n     *     last_name: 'Doe',\n     *   })\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * merge into \"person\"\n     * using \"pet\" on \"person\".\"id\" = \"pet\".\"owner_id\"\n     * when not matched then\n     *   insert (\"first_name\", \"last_name\") values ($1, $2)\n     * ```\n     */\n    whenNotMatched() {\n        return this.#whenNotMatched([]);\n    }\n    whenNotMatchedAnd(...args) {\n        return this.#whenNotMatched(args);\n    }\n    /**\n     * Adds the `when not matched` clause to the query with an `and` condition. But unlike\n     * {@link whenNotMatchedAnd}, this method accepts a column reference as the 3rd argument.\n     *\n     * Unlike {@link whenMatchedAndRef}, you cannot reference columns from the target table.\n     *\n     * This method is similar to {@link SelectQueryBuilder.whereRef}, so see the documentation\n     * for that method for more examples.\n     */\n    whenNotMatchedAndRef(lhs, op, rhs) {\n        return this.#whenNotMatched([lhs, op, rhs], true);\n    }\n    /**\n     * Adds a simple `when not matched by source` clause to the query.\n     *\n     * Supported in MS SQL Server.\n     *\n     * Similar to {@link whenNotMatched}, but returns a {@link MatchedThenableMergeQueryBuilder}.\n     */\n    whenNotMatchedBySource() {\n        return this.#whenNotMatched([], false, true);\n    }\n    whenNotMatchedBySourceAnd(...args) {\n        return this.#whenNotMatched(args, false, true);\n    }\n    /**\n     * Adds the `when not matched by source` clause to the query with an `and` condition.\n     *\n     * Similar to {@link whenNotMatchedAndRef}, but you can reference columns from\n     * the target table, and not from source table and returns a {@link MatchedThenableMergeQueryBuilder}.\n     */\n    whenNotMatchedBySourceAndRef(lhs, op, rhs) {\n        return this.#whenNotMatched([lhs, op, rhs], true, true);\n    }\n    returning(args) {\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithReturning(this.#props.queryNode, parseSelectArg(args)),\n        });\n    }\n    returningAll(table) {\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithReturning(this.#props.queryNode, parseSelectAll(table)),\n        });\n    }\n    output(args) {\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithOutput(this.#props.queryNode, parseSelectArg(args)),\n        });\n    }\n    outputAll(table) {\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithOutput(this.#props.queryNode, parseSelectAll(table)),\n        });\n    }\n    #whenNotMatched(args, refRight = false, bySource = false) {\n        const props = {\n            ...this.#props,\n            queryNode: MergeQueryNode.cloneWithWhen(this.#props.queryNode, parseMergeWhen({ isMatched: false, bySource }, args, refRight)),\n        };\n        const Builder = bySource\n            ? MatchedThenableMergeQueryBuilder\n            : NotMatchedThenableMergeQueryBuilder;\n        return new Builder(props);\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     *\n     * If you want to conditionally call a method on `this`, see\n     * the {@link $if} method.\n     *\n     * ### Examples\n     *\n     * The next example uses a helper function `log` to log a query:\n     *\n     * ```ts\n     * import type { Compilable } from 'kysely'\n     *\n     * function log<T extends Compilable>(qb: T): T {\n     *   console.log(qb.compile())\n     *   return qb\n     * }\n     *\n     * await db.updateTable('person')\n     *   .set({ first_name: 'John' })\n     *   .$call(log)\n     *   .execute()\n     * ```\n     */\n    $call(func) {\n        return func(this);\n    }\n    /**\n     * Call `func(this)` if `condition` is true.\n     *\n     * This method is especially handy with optional selects. Any `returning` or `returningAll`\n     * method calls add columns as optional fields to the output type when called inside\n     * the `func` callback. This is because we can't know if those selections were actually\n     * made before running the code.\n     *\n     * You can also call any other methods inside the callback.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import type { PersonUpdate } from 'type-editor' // imaginary module\n     *\n     * async function updatePerson(id: number, updates: PersonUpdate, returnLastName: boolean) {\n     *   return await db\n     *     .updateTable('person')\n     *     .set(updates)\n     *     .where('id', '=', id)\n     *     .returning(['id', 'first_name'])\n     *     .$if(returnLastName, (qb) => qb.returning('last_name'))\n     *     .executeTakeFirstOrThrow()\n     * }\n     * ```\n     *\n     * Any selections added inside the `if` callback will be added as optional fields to the\n     * output type since we can't know if the selections were actually made before running\n     * the code. In the example above the return type of the `updatePerson` function is:\n     *\n     * ```ts\n     * Promise<{\n     *   id: number\n     *   first_name: string\n     *   last_name?: string\n     * }>\n     * ```\n     */\n    $if(condition, func) {\n        if (condition) {\n            return func(this);\n        }\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n        });\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.queryNode, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    /**\n     * Executes the query and returns an array of rows.\n     *\n     * Also see the {@link executeTakeFirst} and {@link executeTakeFirstOrThrow} methods.\n     */\n    async execute() {\n        const compiledQuery = this.compile();\n        const result = await this.#props.executor.executeQuery(compiledQuery);\n        const { adapter } = this.#props.executor;\n        const query = compiledQuery.query;\n        if ((query.returning && adapter.supportsReturning) ||\n            (query.output && adapter.supportsOutput)) {\n            return result.rows;\n        }\n        return [new MergeResult(result.numAffectedRows)];\n    }\n    /**\n     * Executes the query and returns the first result or undefined if\n     * the query returned no result.\n     */\n    async executeTakeFirst() {\n        const [result] = await this.execute();\n        return result;\n    }\n    /**\n     * Executes the query and returns the first result or throws if\n     * the query returned no result.\n     *\n     * By default an instance of {@link NoResultError} is thrown, but you can\n     * provide a custom error class, or callback as the only argument to throw a different\n     * error.\n     */\n    async executeTakeFirstOrThrow(errorConstructor = NoResultError) {\n        const result = await this.executeTakeFirst();\n        if (result === undefined) {\n            const error = isNoResultErrorConstructor(errorConstructor)\n                ? new errorConstructor(this.toOperationNode())\n                : errorConstructor(this.toOperationNode());\n            throw error;\n        }\n        return result;\n    }\n}\nexport class MatchedThenableMergeQueryBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Performs the `delete` action.\n     *\n     * To perform the `do nothing` action, see {@link thenDoNothing}.\n     *\n     * To perform the `update` action, see {@link thenUpdate} or {@link thenUpdateSet}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db.mergeInto('person')\n     *   .using('pet', 'person.id', 'pet.owner_id')\n     *   .whenMatched()\n     *   .thenDelete()\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * merge into \"person\"\n     * using \"pet\" on \"person\".\"id\" = \"pet\".\"owner_id\"\n     * when matched then\n     *   delete\n     * ```\n     */\n    thenDelete() {\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: MergeQueryNode.cloneWithThen(this.#props.queryNode, parseMergeThen('delete')),\n        });\n    }\n    /**\n     * Performs the `do nothing` action.\n     *\n     * This is supported in PostgreSQL.\n     *\n     * To perform the `delete` action, see {@link thenDelete}.\n     *\n     * To perform the `update` action, see {@link thenUpdate} or {@link thenUpdateSet}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db.mergeInto('person')\n     *   .using('pet', 'person.id', 'pet.owner_id')\n     *   .whenMatched()\n     *   .thenDoNothing()\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * merge into \"person\"\n     * using \"pet\" on \"person\".\"id\" = \"pet\".\"owner_id\"\n     * when matched then\n     *   do nothing\n     * ```\n     */\n    thenDoNothing() {\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: MergeQueryNode.cloneWithThen(this.#props.queryNode, parseMergeThen('do nothing')),\n        });\n    }\n    /**\n     * Perform an `update` operation with a full-fledged {@link UpdateQueryBuilder}.\n     * This is handy when multiple `set` invocations are needed.\n     *\n     * For a shorthand version of this method, see {@link thenUpdateSet}.\n     *\n     * To perform the `delete` action, see {@link thenDelete}.\n     *\n     * To perform the `do nothing` action, see {@link thenDoNothing}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * const result = await db.mergeInto('person')\n     *   .using('pet', 'person.id', 'pet.owner_id')\n     *   .whenMatched()\n     *   .thenUpdate((ub) => ub\n     *     .set(sql`metadata['has_pets']`, 'Y')\n     *     .set({\n     *       updated_at: new Date().toISOString(),\n     *     })\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * merge into \"person\"\n     * using \"pet\" on \"person\".\"id\" = \"pet\".\"owner_id\"\n     * when matched then\n     *   update set metadata['has_pets'] = $1, \"updated_at\" = $2\n     * ```\n     */\n    thenUpdate(set) {\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: MergeQueryNode.cloneWithThen(this.#props.queryNode, parseMergeThen(set(new UpdateQueryBuilder({\n                queryId: this.#props.queryId,\n                executor: NOOP_QUERY_EXECUTOR,\n                queryNode: UpdateQueryNode.createWithoutTable(),\n            })))),\n        });\n    }\n    thenUpdateSet(...args) {\n        // @ts-ignore not sure how to type this so it won't complain about set(...args).\n        return this.thenUpdate((ub) => ub.set(...args));\n    }\n}\nexport class NotMatchedThenableMergeQueryBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Performs the `do nothing` action.\n     *\n     * This is supported in PostgreSQL.\n     *\n     * To perform the `insert` action, see {@link thenInsertValues}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db.mergeInto('person')\n     *   .using('pet', 'person.id', 'pet.owner_id')\n     *   .whenNotMatched()\n     *   .thenDoNothing()\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * merge into \"person\"\n     * using \"pet\" on \"person\".\"id\" = \"pet\".\"owner_id\"\n     * when not matched then\n     *   do nothing\n     * ```\n     */\n    thenDoNothing() {\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: MergeQueryNode.cloneWithThen(this.#props.queryNode, parseMergeThen('do nothing')),\n        });\n    }\n    thenInsertValues(insert) {\n        const [columns, values] = parseInsertExpression(insert);\n        return new WheneableMergeQueryBuilder({\n            ...this.#props,\n            queryNode: MergeQueryNode.cloneWithThen(this.#props.queryNode, parseMergeThen(InsertQueryNode.cloneWith(InsertQueryNode.createWithoutInto(), {\n                columns,\n                values,\n            }))),\n        });\n    }\n}\n", "/// <reference types=\"./query-creator.d.ts\" />\nimport { createSelectQueryBuilder, } from './query-builder/select-query-builder.js';\nimport { InsertQueryBuilder } from './query-builder/insert-query-builder.js';\nimport { DeleteQueryBuilder } from './query-builder/delete-query-builder.js';\nimport { UpdateQueryBuilder } from './query-builder/update-query-builder.js';\nimport { DeleteQueryNode } from './operation-node/delete-query-node.js';\nimport { InsertQueryNode } from './operation-node/insert-query-node.js';\nimport { SelectQueryNode } from './operation-node/select-query-node.js';\nimport { UpdateQueryNode } from './operation-node/update-query-node.js';\nimport { parseTable, parseTableExpressionOrList, parseAliasedTable, } from './parser/table-parser.js';\nimport { parseCommonTableExpression, } from './parser/with-parser.js';\nimport { WithNode } from './operation-node/with-node.js';\nimport { createQueryId } from './util/query-id.js';\nimport { WithSchemaPlugin } from './plugin/with-schema/with-schema-plugin.js';\nimport { freeze } from './util/object-utils.js';\nimport { parseSelectArg, } from './parser/select-parser.js';\nimport { MergeQueryBuilder } from './query-builder/merge-query-builder.js';\nimport { MergeQueryNode } from './operation-node/merge-query-node.js';\nexport class QueryCreator {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Creates a `select` query builder for the given table or tables.\n     *\n     * The tables passed to this method are built as the query's `from` clause.\n     *\n     * ### Examples\n     *\n     * Create a select query for one table:\n     *\n     * ```ts\n     * db.selectFrom('person').selectAll()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select * from \"person\"\n     * ```\n     *\n     * Create a select query for one table with an alias:\n     *\n     * ```ts\n     * const persons = await db.selectFrom('person as p')\n     *   .select(['p.id', 'first_name'])\n     *   .execute()\n     *\n     * console.log(persons[0].id)\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select \"p\".\"id\", \"first_name\" from \"person\" as \"p\"\n     * ```\n     *\n     * Create a select query from a subquery:\n     *\n     * ```ts\n     * const persons = await db.selectFrom(\n     *     (eb) => eb.selectFrom('person').select('person.id as identifier').as('p')\n     *   )\n     *   .select('p.identifier')\n     *   .execute()\n     *\n     * console.log(persons[0].identifier)\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select \"p\".\"identifier\",\n     * from (\n     *   select \"person\".\"id\" as \"identifier\" from \"person\"\n     * ) as p\n     * ```\n     *\n     * Create a select query from raw sql:\n     *\n     * ```ts\n     * import {sql } from 'kysely'\n     *\n     * const items = await db\n     *   .selectFrom(sql<{ one: number }>`(select 1 as one)`.as('q'))\n     *   .select('q.one')\n     *   .execute()\n     *\n     * console.log(items[0].one)\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select \"q\".\"one\",\n     * from (\n     *   select 1 as one\n     * ) as q\n     * ```\n     *\n     * When you use the `sql` tag you need to also provide the result type of the\n     * raw snippet / query so that Kysely can figure out what columns are\n     * available for the rest of the query.\n     *\n     * The `selectFrom` method also accepts an array for multiple tables. All\n     * the above examples can also be used in an array.\n     *\n     * ```ts\n     * import {sql } from 'kysely'\n     *\n     * const items = await db.selectFrom([\n     *     'person as p',\n     *     db.selectFrom('pet').select('pet.species').as('a'),\n     *     sql<{ one: number }>`(select 1 as one)`.as('q')\n     *   ])\n     *   .select(['p.id', 'a.species', 'q.one'])\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select \"p\".id, \"a\".\"species\", \"q\".\"one\"\n     * from\n     *   \"person\" as \"p\",\n     *   (select \"pet\".\"species\" from \"pet\") as a,\n     *   (select 1 as one) as \"q\"\n     * ```\n     */\n    selectFrom(from) {\n        return createSelectQueryBuilder({\n            queryId: createQueryId(),\n            executor: this.#props.executor,\n            queryNode: SelectQueryNode.createFrom(parseTableExpressionOrList(from), this.#props.withNode),\n        });\n    }\n    selectNoFrom(selection) {\n        return createSelectQueryBuilder({\n            queryId: createQueryId(),\n            executor: this.#props.executor,\n            queryNode: SelectQueryNode.cloneWithSelections(SelectQueryNode.create(this.#props.withNode), parseSelectArg(selection)),\n        });\n    }\n    /**\n     * Creates an insert query.\n     *\n     * The return value of this query is an instance of {@link InsertResult}. {@link InsertResult}\n     * has the {@link InsertResult.insertId | insertId} field that holds the auto incremented id of\n     * the inserted row if the db returned one.\n     *\n     * See the {@link InsertQueryBuilder.values | values} method for more info and examples. Also see\n     * the {@link ReturningInterface.returning | returning} method for a way to return columns\n     * on supported databases like PostgreSQL.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db\n     *   .insertInto('person')\n     *   .values({\n     *     first_name: 'Jennifer',\n     *     last_name: 'Aniston'\n     *   })\n     *   .executeTakeFirst()\n     *\n     * console.log(result.insertId)\n     * ```\n     *\n     * Some databases like PostgreSQL support the `returning` method:\n     *\n     * ```ts\n     * const { id } = await db\n     *   .insertInto('person')\n     *   .values({\n     *     first_name: 'Jennifer',\n     *     last_name: 'Aniston'\n     *   })\n     *   .returning('id')\n     *   .executeTakeFirstOrThrow()\n     * ```\n     */\n    insertInto(table) {\n        return new InsertQueryBuilder({\n            queryId: createQueryId(),\n            executor: this.#props.executor,\n            queryNode: InsertQueryNode.create(parseTable(table), this.#props.withNode),\n        });\n    }\n    /**\n     * Creates a \"replace into\" query.\n     *\n     * This is only supported by some dialects like MySQL or SQLite.\n     *\n     * Similar to MySQL's {@link InsertQueryBuilder.onDuplicateKeyUpdate} that deletes\n     * and inserts values on collision instead of updating existing rows.\n     *\n     * An alias of SQLite's {@link InsertQueryBuilder.orReplace}.\n     *\n     * The return value of this query is an instance of {@link InsertResult}. {@link InsertResult}\n     * has the {@link InsertResult.insertId | insertId} field that holds the auto incremented id of\n     * the inserted row if the db returned one.\n     *\n     * See the {@link InsertQueryBuilder.values | values} method for more info and examples.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db\n     *   .replaceInto('person')\n     *   .values({\n     *     first_name: 'Jennifer',\n     *     last_name: 'Aniston'\n     *   })\n     *   .executeTakeFirstOrThrow()\n     *\n     * console.log(result.insertId)\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * replace into `person` (`first_name`, `last_name`) values (?, ?)\n     * ```\n     */\n    replaceInto(table) {\n        return new InsertQueryBuilder({\n            queryId: createQueryId(),\n            executor: this.#props.executor,\n            queryNode: InsertQueryNode.create(parseTable(table), this.#props.withNode, true),\n        });\n    }\n    /**\n     * Creates a delete query.\n     *\n     * See the {@link DeleteQueryBuilder.where} method for examples on how to specify\n     * a where clause for the delete operation.\n     *\n     * The return value of the query is an instance of {@link DeleteResult}.\n     *\n     * ### Examples\n     *\n     * <!-- siteExample(\"delete\", \"Single row\", 10) -->\n     *\n     * Delete a single row:\n     *\n     * ```ts\n     * const result = await db\n     *   .deleteFrom('person')\n     *   .where('person.id', '=', 1)\n     *   .executeTakeFirst()\n     *\n     * console.log(result.numDeletedRows)\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * delete from \"person\" where \"person\".\"id\" = $1\n     * ```\n     *\n     * Some databases such as MySQL support deleting from multiple tables:\n     *\n     * ```ts\n     * const result = await db\n     *   .deleteFrom(['person', 'pet'])\n     *   .using('person')\n     *   .innerJoin('pet', 'pet.owner_id', 'person.id')\n     *   .where('person.id', '=', 1)\n     *   .executeTakeFirst()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * delete from `person`, `pet`\n     * using `person`\n     * inner join `pet` on `pet`.`owner_id` = `person`.`id`\n     * where `person`.`id` = ?\n     * ```\n     */\n    deleteFrom(from) {\n        return new DeleteQueryBuilder({\n            queryId: createQueryId(),\n            executor: this.#props.executor,\n            queryNode: DeleteQueryNode.create(parseTableExpressionOrList(from), this.#props.withNode),\n        });\n    }\n    /**\n     * Creates an update query.\n     *\n     * See the {@link UpdateQueryBuilder.where} method for examples on how to specify\n     * a where clause for the update operation.\n     *\n     * See the {@link UpdateQueryBuilder.set} method for examples on how to\n     * specify the updates.\n     *\n     * The return value of the query is an {@link UpdateResult}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db\n     *   .updateTable('person')\n     *   .set({ first_name: 'Jennifer' })\n     *   .where('person.id', '=', 1)\n     *   .executeTakeFirst()\n     *\n     * console.log(result.numUpdatedRows)\n     * ```\n     */\n    updateTable(tables) {\n        return new UpdateQueryBuilder({\n            queryId: createQueryId(),\n            executor: this.#props.executor,\n            queryNode: UpdateQueryNode.create(parseTableExpressionOrList(tables), this.#props.withNode),\n        });\n    }\n    /**\n     * Creates a merge query.\n     *\n     * The return value of the query is a {@link MergeResult}.\n     *\n     * See the {@link MergeQueryBuilder.using} method for examples on how to specify\n     * the other table.\n     *\n     * ### Examples\n     *\n     * <!-- siteExample(\"merge\", \"Source row existence\", 10) -->\n     *\n     * Update a target column based on the existence of a source row:\n     *\n     * ```ts\n     * const result = await db\n     *   .mergeInto('person as target')\n     *   .using('pet as source', 'source.owner_id', 'target.id')\n     *   .whenMatchedAnd('target.has_pets', '!=', 'Y')\n     *   .thenUpdateSet({ has_pets: 'Y' })\n     *   .whenNotMatchedBySourceAnd('target.has_pets', '=', 'Y')\n     *   .thenUpdateSet({ has_pets: 'N' })\n     *   .executeTakeFirstOrThrow()\n     *\n     * console.log(result.numChangedRows)\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * merge into \"person\"\n     * using \"pet\"\n     * on \"pet\".\"owner_id\" = \"person\".\"id\"\n     * when matched and \"has_pets\" != $1\n     * then update set \"has_pets\" = $2\n     * when not matched by source and \"has_pets\" = $3\n     * then update set \"has_pets\" = $4\n     * ```\n     *\n     * <!-- siteExample(\"merge\", \"Temporary changes table\", 20) -->\n     *\n     * Merge new entries from a temporary changes table:\n     *\n     * ```ts\n     * const result = await db\n     *   .mergeInto('wine as target')\n     *   .using(\n     *     'wine_stock_change as source',\n     *     'source.wine_name',\n     *     'target.name',\n     *   )\n     *   .whenNotMatchedAnd('source.stock_delta', '>', 0)\n     *   .thenInsertValues(({ ref }) => ({\n     *     name: ref('source.wine_name'),\n     *     stock: ref('source.stock_delta'),\n     *   }))\n     *   .whenMatchedAnd(\n     *     (eb) => eb('target.stock', '+', eb.ref('source.stock_delta')),\n     *     '>',\n     *     0,\n     *   )\n     *   .thenUpdateSet('stock', (eb) =>\n     *     eb('target.stock', '+', eb.ref('source.stock_delta')),\n     *   )\n     *   .whenMatched()\n     *   .thenDelete()\n     *   .executeTakeFirstOrThrow()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * merge into \"wine\" as \"target\"\n     * using \"wine_stock_change\" as \"source\"\n     * on \"source\".\"wine_name\" = \"target\".\"name\"\n     * when not matched and \"source\".\"stock_delta\" > $1\n     * then insert (\"name\", \"stock\") values (\"source\".\"wine_name\", \"source\".\"stock_delta\")\n     * when matched and \"target\".\"stock\" + \"source\".\"stock_delta\" > $2\n     * then update set \"stock\" = \"target\".\"stock\" + \"source\".\"stock_delta\"\n     * when matched\n     * then delete\n     * ```\n     */\n    mergeInto(targetTable) {\n        return new MergeQueryBuilder({\n            queryId: createQueryId(),\n            executor: this.#props.executor,\n            queryNode: MergeQueryNode.create(parseAliasedTable(targetTable), this.#props.withNode),\n        });\n    }\n    /**\n     * Creates a `with` query (Common Table Expression).\n     *\n     * ### Examples\n     *\n     * <!-- siteExample(\"cte\", \"Simple selects\", 10) -->\n     *\n     * Common table expressions (CTE) are a great way to modularize complex queries.\n     * Essentially they allow you to run multiple separate queries within a\n     * single roundtrip to the DB.\n     *\n     * Since CTEs are a part of the main query, query optimizers inside DB\n     * engines are able to optimize the overall query. For example, postgres\n     * is able to inline the CTEs inside the using queries if it decides it's\n     * faster.\n     *\n     * ```ts\n     * const result = await db\n     *   // Create a CTE called `jennifers` that selects all\n     *   // persons named 'Jennifer'.\n     *   .with('jennifers', (db) => db\n     *     .selectFrom('person')\n     *     .where('first_name', '=', 'Jennifer')\n     *     .select(['id', 'age'])\n     *   )\n     *   // Select all rows from the `jennifers` CTE and\n     *   // further filter it.\n     *   .with('adult_jennifers', (db) => db\n     *     .selectFrom('jennifers')\n     *     .where('age', '>', 18)\n     *     .select(['id', 'age'])\n     *   )\n     *   // Finally select all adult jennifers that are\n     *   // also younger than 60.\n     *   .selectFrom('adult_jennifers')\n     *   .where('age', '<', 60)\n     *   .selectAll()\n     *   .execute()\n     * ```\n     *\n     * <!-- siteExample(\"cte\", \"Inserts, updates and deletions\", 20) -->\n     *\n     * Some databases like postgres also allow you to run other queries than selects\n     * in CTEs. On these databases CTEs are extremely powerful:\n     *\n     * ```ts\n     * const result = await db\n     *   .with('new_person', (db) => db\n     *     .insertInto('person')\n     *     .values({\n     *       first_name: 'Jennifer',\n     *       age: 35,\n     *     })\n     *     .returning('id')\n     *   )\n     *   .with('new_pet', (db) => db\n     *     .insertInto('pet')\n     *     .values({\n     *       name: 'Doggo',\n     *       species: 'dog',\n     *       is_favorite: true,\n     *       // Use the id of the person we just inserted.\n     *       owner_id: db\n     *         .selectFrom('new_person')\n     *         .select('id')\n     *     })\n     *     .returning('id')\n     *   )\n     *   .selectFrom(['new_person', 'new_pet'])\n     *   .select([\n     *     'new_person.id as person_id',\n     *     'new_pet.id as pet_id'\n     *   ])\n     *   .execute()\n     * ```\n     *\n     * The CTE name can optionally specify column names in addition to\n     * a name. In that case Kysely requires the expression to retun\n     * rows with the same columns.\n     *\n     * ```ts\n     * await db\n     *   .with('jennifers(id, age)', (db) => db\n     *     .selectFrom('person')\n     *     .where('first_name', '=', 'Jennifer')\n     *     // This is ok since we return columns with the same\n     *     // names as specified by `jennifers(id, age)`.\n     *     .select(['id', 'age'])\n     *   )\n     *   .selectFrom('jennifers')\n     *   .selectAll()\n     *   .execute()\n     * ```\n     *\n     * The first argument can also be a callback. The callback is passed\n     * a `CTEBuilder` instance that can be used to configure the CTE:\n     *\n     * ```ts\n     * await db\n     *   .with(\n     *     (cte) => cte('jennifers').materialized(),\n     *     (db) => db\n     *       .selectFrom('person')\n     *       .where('first_name', '=', 'Jennifer')\n     *       .select(['id', 'age'])\n     *   )\n     *   .selectFrom('jennifers')\n     *   .selectAll()\n     *   .execute()\n     * ```\n     */\n    with(nameOrBuilder, expression) {\n        const cte = parseCommonTableExpression(nameOrBuilder, expression);\n        return new QueryCreator({\n            ...this.#props,\n            withNode: this.#props.withNode\n                ? WithNode.cloneWithExpression(this.#props.withNode, cte)\n                : WithNode.create(cte),\n        });\n    }\n    /**\n     * Creates a recursive `with` query (Common Table Expression).\n     *\n     * Note that recursiveness is a property of the whole `with` statement.\n     * You cannot have recursive and non-recursive CTEs in a same `with` statement.\n     * Therefore the recursiveness is determined by the **first** `with` or\n     * `withRecusive` call you make.\n     *\n     * See the {@link with} method for examples and more documentation.\n     */\n    withRecursive(nameOrBuilder, expression) {\n        const cte = parseCommonTableExpression(nameOrBuilder, expression);\n        return new QueryCreator({\n            ...this.#props,\n            withNode: this.#props.withNode\n                ? WithNode.cloneWithExpression(this.#props.withNode, cte)\n                : WithNode.create(cte, { recursive: true }),\n        });\n    }\n    /**\n     * Returns a copy of this query creator instance with the given plugin installed.\n     */\n    withPlugin(plugin) {\n        return new QueryCreator({\n            ...this.#props,\n            executor: this.#props.executor.withPlugin(plugin),\n        });\n    }\n    /**\n     * Returns a copy of this query creator instance without any plugins.\n     */\n    withoutPlugins() {\n        return new QueryCreator({\n            ...this.#props,\n            executor: this.#props.executor.withoutPlugins(),\n        });\n    }\n    /**\n     * Sets the schema to be used for all table references that don't explicitly\n     * specify a schema.\n     *\n     * This only affects the query created through the builder returned from\n     * this method and doesn't modify the `db` instance.\n     *\n     * See [this recipe](https://github.com/kysely-org/kysely/blob/master/site/docs/recipes/0007-schemas.md)\n     * for a more detailed explanation.\n     *\n     * ### Examples\n     *\n     * ```\n     * await db\n     *   .withSchema('mammals')\n     *   .selectFrom('pet')\n     *   .selectAll()\n     *   .innerJoin('public.person', 'public.person.id', 'pet.owner_id')\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select * from \"mammals\".\"pet\"\n     * inner join \"public\".\"person\"\n     * on \"public\".\"person\".\"id\" = \"mammals\".\"pet\".\"owner_id\"\n     * ```\n     *\n     * `withSchema` is smart enough to not add schema for aliases,\n     * common table expressions or other places where the schema\n     * doesn't belong to:\n     *\n     * ```\n     * await db\n     *   .withSchema('mammals')\n     *   .selectFrom('pet as p')\n     *   .select('p.name')\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select \"p\".\"name\" from \"mammals\".\"pet\" as \"p\"\n     * ```\n     */\n    withSchema(schema) {\n        return new QueryCreator({\n            ...this.#props,\n            executor: this.#props.executor.withPluginAtFront(new WithSchemaPlugin(schema)),\n        });\n    }\n}\n", "/// <reference types=\"./parse-utils.d.ts\" />\nimport { JoinNode } from '../operation-node/join-node.js';\nimport { OverNode } from '../operation-node/over-node.js';\nimport { SelectQueryNode } from '../operation-node/select-query-node.js';\nimport { JoinBuilder } from '../query-builder/join-builder.js';\nimport { OverBuilder } from '../query-builder/over-builder.js';\nimport { createSelectQueryBuilder as newSelectQueryBuilder, } from '../query-builder/select-query-builder.js';\nimport { QueryCreator } from '../query-creator.js';\nimport { NOOP_QUERY_EXECUTOR } from '../query-executor/noop-query-executor.js';\nimport { createQueryId } from '../util/query-id.js';\nimport { parseTableExpression, parseTableExpressionOrList, } from './table-parser.js';\nexport function createSelectQueryBuilder() {\n    return newSelectQueryBuilder({\n        queryId: createQueryId(),\n        executor: NOOP_QUERY_EXECUTOR,\n        queryNode: SelectQueryNode.createFrom(parseTableExpressionOrList([])),\n    });\n}\nexport function createQueryCreator() {\n    return new QueryCreator({\n        executor: NOOP_QUERY_EXECUTOR,\n    });\n}\nexport function createJoinBuilder(joinType, table) {\n    return new JoinBuilder({\n        joinNode: JoinNode.create(joinType, parseTableExpression(table)),\n    });\n}\nexport function createOverBuilder() {\n    return new OverBuilder({\n        overNode: OverNode.create(),\n    });\n}\n", "/// <reference types=\"./join-parser.d.ts\" />\nimport { JoinNode } from '../operation-node/join-node.js';\nimport { parseReferentialBinaryOperation } from './binary-operation-parser.js';\nimport { createJoinBuilder } from './parse-utils.js';\nimport { parseTableExpression, } from './table-parser.js';\nexport function parseJoin(joinType, args) {\n    if (args.length === 3) {\n        return parseSingleOnJoin(joinType, args[0], args[1], args[2]);\n    }\n    else if (args.length === 2) {\n        return parseCallbackJoin(joinType, args[0], args[1]);\n    }\n    else if (args.length === 1) {\n        return parseOnlessJoin(joinType, args[0]);\n    }\n    else {\n        throw new Error('not implemented');\n    }\n}\nfunction parseCallbackJoin(joinType, from, callback) {\n    return callback(createJoinBuilder(joinType, from)).toOperationNode();\n}\nfunction parseSingleOnJoin(joinType, from, lhsColumn, rhsColumn) {\n    return JoinNode.createWithOn(joinType, parseTableExpression(from), parseReferentialBinaryOperation(lhsColumn, '=', rhsColumn));\n}\nfunction parseOnlessJoin(joinType, from) {\n    return JoinNode.create(joinType, parseTableExpression(from));\n}\n", "/// <reference types=\"./offset-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const OffsetNode = freeze({\n    is(node) {\n        return node.kind === 'OffsetNode';\n    },\n    create(offset) {\n        return freeze({\n            kind: 'OffsetNode',\n            offset,\n        });\n    },\n});\n", "/// <reference types=\"./group-by-item-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const GroupByItemNode = freeze({\n    is(node) {\n        return node.kind === 'GroupByItemNode';\n    },\n    create(groupBy) {\n        return freeze({\n            kind: 'GroupByItemNode',\n            groupBy,\n        });\n    },\n});\n", "/// <reference types=\"./group-by-parser.d.ts\" />\nimport { GroupByItemNode } from '../operation-node/group-by-item-node.js';\nimport { expressionBuilder, } from '../expression/expression-builder.js';\nimport { isFunction } from '../util/object-utils.js';\nimport { parseReferenceExpressionOrList, } from './reference-parser.js';\nexport function parseGroupBy(groupBy) {\n    groupBy = isFunction(groupBy) ? groupBy(expressionBuilder()) : groupBy;\n    return parseReferenceExpressionOrList(groupBy).map(GroupByItemNode.create);\n}\n", "/// <reference types=\"./set-operation-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const SetOperationNode = freeze({\n    is(node) {\n        return node.kind === 'SetOperationNode';\n    },\n    create(operator, expression, all) {\n        return freeze({\n            kind: 'SetOperationNode',\n            operator,\n            expression,\n            all,\n        });\n    },\n});\n", "/// <reference types=\"./set-operation-parser.d.ts\" />\nimport { createExpressionBuilder, } from '../expression/expression-builder.js';\nimport { SetOperationNode, } from '../operation-node/set-operation-node.js';\nimport { isFunction, isReadonlyArray } from '../util/object-utils.js';\nimport { parseExpression } from './expression-parser.js';\nexport function parseSetOperations(operator, expression, all) {\n    if (isFunction(expression)) {\n        expression = expression(createExpressionBuilder());\n    }\n    if (!isReadonlyArray(expression)) {\n        expression = [expression];\n    }\n    return expression.map((expr) => SetOperationNode.create(operator, parseExpression(expr), all));\n}\n", "/// <reference types=\"./expression-wrapper.d.ts\" />\nimport { AliasNode } from '../operation-node/alias-node.js';\nimport { AndNode } from '../operation-node/and-node.js';\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nimport { isOperationNodeSource } from '../operation-node/operation-node-source.js';\nimport { OrNode } from '../operation-node/or-node.js';\nimport { ParensNode } from '../operation-node/parens-node.js';\nimport { parseValueBinaryOperationOrExpression, } from '../parser/binary-operation-parser.js';\nexport class ExpressionWrapper {\n    #node;\n    constructor(node) {\n        this.#node = node;\n    }\n    /** @private */\n    get expressionType() {\n        return undefined;\n    }\n    as(alias) {\n        return new AliasedExpressionWrapper(this, alias);\n    }\n    or(...args) {\n        return new OrWrapper(OrNode.create(this.#node, parseValueBinaryOperationOrExpression(args)));\n    }\n    and(...args) {\n        return new AndWrapper(AndNode.create(this.#node, parseValueBinaryOperationOrExpression(args)));\n    }\n    /**\n     * Change the output type of the expression.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of this `ExpressionWrapper` with a new output type.\n     */\n    $castTo() {\n        return new ExpressionWrapper(this.#node);\n    }\n    /**\n     * Omit null from the expression's type.\n     *\n     * This function can be useful in cases where you know an expression can't be\n     * null, but Kysely is unable to infer it.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of `this` with a new output type.\n     */\n    $notNull() {\n        return new ExpressionWrapper(this.#node);\n    }\n    toOperationNode() {\n        return this.#node;\n    }\n}\nexport class AliasedExpressionWrapper {\n    #expr;\n    #alias;\n    constructor(expr, alias) {\n        this.#expr = expr;\n        this.#alias = alias;\n    }\n    /** @private */\n    get expression() {\n        return this.#expr;\n    }\n    /** @private */\n    get alias() {\n        return this.#alias;\n    }\n    toOperationNode() {\n        return AliasNode.create(this.#expr.toOperationNode(), isOperationNodeSource(this.#alias)\n            ? this.#alias.toOperationNode()\n            : IdentifierNode.create(this.#alias));\n    }\n}\nexport class OrWrapper {\n    #node;\n    constructor(node) {\n        this.#node = node;\n    }\n    /** @private */\n    get expressionType() {\n        return undefined;\n    }\n    as(alias) {\n        return new AliasedExpressionWrapper(this, alias);\n    }\n    or(...args) {\n        return new OrWrapper(OrNode.create(this.#node, parseValueBinaryOperationOrExpression(args)));\n    }\n    /**\n     * Change the output type of the expression.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of this `OrWrapper` with a new output type.\n     */\n    $castTo() {\n        return new OrWrapper(this.#node);\n    }\n    toOperationNode() {\n        return ParensNode.create(this.#node);\n    }\n}\nexport class AndWrapper {\n    #node;\n    constructor(node) {\n        this.#node = node;\n    }\n    /** @private */\n    get expressionType() {\n        return undefined;\n    }\n    as(alias) {\n        return new AliasedExpressionWrapper(this, alias);\n    }\n    and(...args) {\n        return new AndWrapper(AndNode.create(this.#node, parseValueBinaryOperationOrExpression(args)));\n    }\n    /**\n     * Change the output type of the expression.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of this `AndWrapper` with a new output type.\n     */\n    $castTo() {\n        return new AndWrapper(this.#node);\n    }\n    toOperationNode() {\n        return ParensNode.create(this.#node);\n    }\n}\n", "/// <reference types=\"./fetch-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ValueNode } from './value-node.js';\n/**\n * @internal\n */\nexport const FetchNode = freeze({\n    is(node) {\n        return node.kind === 'FetchNode';\n    },\n    create(rowCount, modifier) {\n        return {\n            kind: 'FetchNode',\n            rowCount: ValueNode.create(rowCount),\n            modifier,\n        };\n    },\n});\n", "/// <reference types=\"./fetch-parser.d.ts\" />\nimport { FetchNode } from '../operation-node/fetch-node.js';\nimport { isBigInt, isNumber } from '../util/object-utils.js';\nexport function parseFetch(rowCount, modifier) {\n    if (!isNumber(rowCount) && !isBigInt(rowCount)) {\n        throw new Error(`Invalid fetch row count: ${rowCount}`);\n    }\n    if (!isFetchModifier(modifier)) {\n        throw new Error(`Invalid fetch modifier: ${modifier}`);\n    }\n    return FetchNode.create(rowCount, modifier);\n}\nfunction isFetchModifier(value) {\n    return value === 'only' || value === 'with ties';\n}\n", "/// <reference types=\"./select-query-builder.d.ts\" />\nimport { AliasNode } from '../operation-node/alias-node.js';\nimport { SelectModifierNode } from '../operation-node/select-modifier-node.js';\nimport { parseJoin, } from '../parser/join-parser.js';\nimport { parseTable } from '../parser/table-parser.js';\nimport { parseSelectArg, parseSelectAll, } from '../parser/select-parser.js';\nimport { parseReferenceExpressionOrList, } from '../parser/reference-parser.js';\nimport { SelectQueryNode } from '../operation-node/select-query-node.js';\nimport { QueryNode } from '../operation-node/query-node.js';\nimport { parseOrderBy, } from '../parser/order-by-parser.js';\nimport { LimitNode } from '../operation-node/limit-node.js';\nimport { OffsetNode } from '../operation-node/offset-node.js';\nimport { asArray, freeze } from '../util/object-utils.js';\nimport { parseGroupBy } from '../parser/group-by-parser.js';\nimport { isNoResultErrorConstructor, NoResultError, } from './no-result-error.js';\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nimport { parseSetOperations, } from '../parser/set-operation-parser.js';\nimport { parseValueBinaryOperationOrExpression, parseReferentialBinaryOperation, } from '../parser/binary-operation-parser.js';\nimport { ExpressionWrapper } from '../expression/expression-wrapper.js';\nimport { parseValueExpression, } from '../parser/value-parser.js';\nimport { parseFetch } from '../parser/fetch-parser.js';\nimport { parseTop } from '../parser/top-parser.js';\nclass SelectQueryBuilderImpl {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    get expressionType() {\n        return undefined;\n    }\n    get isSelectQueryBuilder() {\n        return true;\n    }\n    where(...args) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithWhere(this.#props.queryNode, parseValueBinaryOperationOrExpression(args)),\n        });\n    }\n    whereRef(lhs, op, rhs) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithWhere(this.#props.queryNode, parseReferentialBinaryOperation(lhs, op, rhs)),\n        });\n    }\n    having(...args) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithHaving(this.#props.queryNode, parseValueBinaryOperationOrExpression(args)),\n        });\n    }\n    havingRef(lhs, op, rhs) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithHaving(this.#props.queryNode, parseReferentialBinaryOperation(lhs, op, rhs)),\n        });\n    }\n    select(selection) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithSelections(this.#props.queryNode, parseSelectArg(selection)),\n        });\n    }\n    distinctOn(selection) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithDistinctOn(this.#props.queryNode, parseReferenceExpressionOrList(selection)),\n        });\n    }\n    modifyFront(modifier) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithFrontModifier(this.#props.queryNode, SelectModifierNode.createWithExpression(modifier.toOperationNode())),\n        });\n    }\n    modifyEnd(modifier) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithEndModifier(this.#props.queryNode, SelectModifierNode.createWithExpression(modifier.toOperationNode())),\n        });\n    }\n    distinct() {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithFrontModifier(this.#props.queryNode, SelectModifierNode.create('Distinct')),\n        });\n    }\n    forUpdate(of) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithEndModifier(this.#props.queryNode, SelectModifierNode.create('ForUpdate', of ? asArray(of).map(parseTable) : undefined)),\n        });\n    }\n    forShare(of) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithEndModifier(this.#props.queryNode, SelectModifierNode.create('ForShare', of ? asArray(of).map(parseTable) : undefined)),\n        });\n    }\n    forKeyShare(of) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithEndModifier(this.#props.queryNode, SelectModifierNode.create('ForKeyShare', of ? asArray(of).map(parseTable) : undefined)),\n        });\n    }\n    forNoKeyUpdate(of) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithEndModifier(this.#props.queryNode, SelectModifierNode.create('ForNoKeyUpdate', of ? asArray(of).map(parseTable) : undefined)),\n        });\n    }\n    skipLocked() {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithEndModifier(this.#props.queryNode, SelectModifierNode.create('SkipLocked')),\n        });\n    }\n    noWait() {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithEndModifier(this.#props.queryNode, SelectModifierNode.create('NoWait')),\n        });\n    }\n    selectAll(table) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithSelections(this.#props.queryNode, parseSelectAll(table)),\n        });\n    }\n    innerJoin(...args) {\n        return this.#join('InnerJoin', args);\n    }\n    leftJoin(...args) {\n        return this.#join('LeftJoin', args);\n    }\n    rightJoin(...args) {\n        return this.#join('RightJoin', args);\n    }\n    fullJoin(...args) {\n        return this.#join('FullJoin', args);\n    }\n    crossJoin(...args) {\n        return this.#join('CrossJoin', args);\n    }\n    innerJoinLateral(...args) {\n        return this.#join('LateralInnerJoin', args);\n    }\n    leftJoinLateral(...args) {\n        return this.#join('LateralLeftJoin', args);\n    }\n    crossJoinLateral(...args) {\n        return this.#join('LateralCrossJoin', args);\n    }\n    crossApply(...args) {\n        return this.#join('CrossApply', args);\n    }\n    outerApply(...args) {\n        return this.#join('OuterApply', args);\n    }\n    #join(joinType, args) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithJoin(this.#props.queryNode, parseJoin(joinType, args)),\n        });\n    }\n    orderBy(...args) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithOrderByItems(this.#props.queryNode, parseOrderBy(args)),\n        });\n    }\n    groupBy(groupBy) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithGroupByItems(this.#props.queryNode, parseGroupBy(groupBy)),\n        });\n    }\n    limit(limit) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithLimit(this.#props.queryNode, LimitNode.create(parseValueExpression(limit))),\n        });\n    }\n    offset(offset) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithOffset(this.#props.queryNode, OffsetNode.create(parseValueExpression(offset))),\n        });\n    }\n    fetch(rowCount, modifier = 'only') {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithFetch(this.#props.queryNode, parseFetch(rowCount, modifier)),\n        });\n    }\n    top(expression, modifiers) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithTop(this.#props.queryNode, parseTop(expression, modifiers)),\n        });\n    }\n    union(expression) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithSetOperations(this.#props.queryNode, parseSetOperations('union', expression, false)),\n        });\n    }\n    unionAll(expression) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithSetOperations(this.#props.queryNode, parseSetOperations('union', expression, true)),\n        });\n    }\n    intersect(expression) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithSetOperations(this.#props.queryNode, parseSetOperations('intersect', expression, false)),\n        });\n    }\n    intersectAll(expression) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithSetOperations(this.#props.queryNode, parseSetOperations('intersect', expression, true)),\n        });\n    }\n    except(expression) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithSetOperations(this.#props.queryNode, parseSetOperations('except', expression, false)),\n        });\n    }\n    exceptAll(expression) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithSetOperations(this.#props.queryNode, parseSetOperations('except', expression, true)),\n        });\n    }\n    as(alias) {\n        return new AliasedSelectQueryBuilderImpl(this, alias);\n    }\n    clearSelect() {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithoutSelections(this.#props.queryNode),\n        });\n    }\n    clearWhere() {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithoutWhere(this.#props.queryNode),\n        });\n    }\n    clearLimit() {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithoutLimit(this.#props.queryNode),\n        });\n    }\n    clearOffset() {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithoutOffset(this.#props.queryNode),\n        });\n    }\n    clearOrderBy() {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithoutOrderBy(this.#props.queryNode),\n        });\n    }\n    clearGroupBy() {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: SelectQueryNode.cloneWithoutGroupBy(this.#props.queryNode),\n        });\n    }\n    $call(func) {\n        return func(this);\n    }\n    $if(condition, func) {\n        if (condition) {\n            return func(this);\n        }\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n        });\n    }\n    $castTo() {\n        return new SelectQueryBuilderImpl(this.#props);\n    }\n    $narrowType() {\n        return new SelectQueryBuilderImpl(this.#props);\n    }\n    $assertType() {\n        return new SelectQueryBuilderImpl(this.#props);\n    }\n    $asTuple() {\n        return new ExpressionWrapper(this.toOperationNode());\n    }\n    $asScalar() {\n        return new ExpressionWrapper(this.toOperationNode());\n    }\n    withPlugin(plugin) {\n        return new SelectQueryBuilderImpl({\n            ...this.#props,\n            executor: this.#props.executor.withPlugin(plugin),\n        });\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.queryNode, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        const compiledQuery = this.compile();\n        const result = await this.#props.executor.executeQuery(compiledQuery);\n        return result.rows;\n    }\n    async executeTakeFirst() {\n        const [result] = await this.execute();\n        return result;\n    }\n    async executeTakeFirstOrThrow(errorConstructor = NoResultError) {\n        const result = await this.executeTakeFirst();\n        if (result === undefined) {\n            const error = isNoResultErrorConstructor(errorConstructor)\n                ? new errorConstructor(this.toOperationNode())\n                : errorConstructor(this.toOperationNode());\n            throw error;\n        }\n        return result;\n    }\n    async *stream(chunkSize = 100) {\n        const compiledQuery = this.compile();\n        const stream = this.#props.executor.stream(compiledQuery, chunkSize);\n        for await (const item of stream) {\n            yield* item.rows;\n        }\n    }\n    async explain(format, options) {\n        const builder = new SelectQueryBuilderImpl({\n            ...this.#props,\n            queryNode: QueryNode.cloneWithExplain(this.#props.queryNode, format, options),\n        });\n        return await builder.execute();\n    }\n}\nexport function createSelectQueryBuilder(props) {\n    return new SelectQueryBuilderImpl(props);\n}\n/**\n * {@link SelectQueryBuilder} with an alias. The result of calling {@link SelectQueryBuilder.as}.\n */\nclass AliasedSelectQueryBuilderImpl {\n    #queryBuilder;\n    #alias;\n    constructor(queryBuilder, alias) {\n        this.#queryBuilder = queryBuilder;\n        this.#alias = alias;\n    }\n    get expression() {\n        return this.#queryBuilder;\n    }\n    get alias() {\n        return this.#alias;\n    }\n    get isAliasedSelectQueryBuilder() {\n        return true;\n    }\n    toOperationNode() {\n        return AliasNode.create(this.#queryBuilder.toOperationNode(), IdentifierNode.create(this.#alias));\n    }\n}\n", "/// <reference types=\"./aggregate-function-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { WhereNode } from './where-node.js';\nimport { OrderByNode } from './order-by-node.js';\n/**\n * @internal\n */\nexport const AggregateFunctionNode = freeze({\n    is(node) {\n        return node.kind === 'AggregateFunctionNode';\n    },\n    create(aggregateFunction, aggregated = []) {\n        return freeze({\n            kind: 'AggregateFunctionNode',\n            func: aggregateFunction,\n            aggregated,\n        });\n    },\n    cloneWithDistinct(aggregateFunctionNode) {\n        return freeze({\n            ...aggregateFunctionNode,\n            distinct: true,\n        });\n    },\n    cloneWithOrderBy(aggregateFunctionNode, orderItems, withinGroup = false) {\n        const prop = withinGroup ? 'withinGroup' : 'orderBy';\n        return freeze({\n            ...aggregateFunctionNode,\n            [prop]: aggregateFunctionNode[prop]\n                ? OrderByNode.cloneWithItems(aggregateFunctionNode[prop], orderItems)\n                : OrderByNode.create(orderItems),\n        });\n    },\n    cloneWithFilter(aggregateFunctionNode, filter) {\n        return freeze({\n            ...aggregateFunctionNode,\n            filter: aggregateFunctionNode.filter\n                ? WhereNode.cloneWithOperation(aggregateFunctionNode.filter, 'And', filter)\n                : WhereNode.create(filter),\n        });\n    },\n    cloneWithOrFilter(aggregateFunctionNode, filter) {\n        return freeze({\n            ...aggregateFunctionNode,\n            filter: aggregateFunctionNode.filter\n                ? WhereNode.cloneWithOperation(aggregateFunctionNode.filter, 'Or', filter)\n                : WhereNode.create(filter),\n        });\n    },\n    cloneWithOver(aggregateFunctionNode, over) {\n        return freeze({\n            ...aggregateFunctionNode,\n            over,\n        });\n    },\n});\n", "/// <reference types=\"./function-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const FunctionNode = freeze({\n    is(node) {\n        return node.kind === 'FunctionNode';\n    },\n    create(func, args) {\n        return freeze({\n            kind: 'FunctionNode',\n            func,\n            arguments: args,\n        });\n    },\n});\n", "/// <reference types=\"./aggregate-function-builder.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { AggregateFunctionNode } from '../operation-node/aggregate-function-node.js';\nimport { AliasNode } from '../operation-node/alias-node.js';\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nimport { createOverBuilder } from '../parser/parse-utils.js';\nimport { parseReferentialBinaryOperation, parseValueBinaryOperationOrExpression, } from '../parser/binary-operation-parser.js';\nimport { parseOrderBy, } from '../parser/order-by-parser.js';\nimport { QueryNode } from '../operation-node/query-node.js';\nexport class AggregateFunctionBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /** @private */\n    get expressionType() {\n        return undefined;\n    }\n    /**\n     * Returns an aliased version of the function.\n     *\n     * In addition to slapping `as \"the_alias\"` to the end of the SQL,\n     * this method also provides strict typing:\n     *\n     * ```ts\n     * const result = await db\n     *   .selectFrom('person')\n     *   .select(\n     *     (eb) => eb.fn.count<number>('id').as('person_count')\n     *   )\n     *   .executeTakeFirstOrThrow()\n     *\n     * // `person_count: number` field exists in the result type.\n     * console.log(result.person_count)\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select count(\"id\") as \"person_count\"\n     * from \"person\"\n     * ```\n     */\n    as(alias) {\n        return new AliasedAggregateFunctionBuilder(this, alias);\n    }\n    /**\n     * Adds a `distinct` clause inside the function.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db\n     *   .selectFrom('person')\n     *   .select((eb) =>\n     *     eb.fn.count<number>('first_name').distinct().as('first_name_count')\n     *   )\n     *   .executeTakeFirstOrThrow()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select count(distinct \"first_name\") as \"first_name_count\"\n     * from \"person\"\n     * ```\n     */\n    distinct() {\n        return new AggregateFunctionBuilder({\n            ...this.#props,\n            aggregateFunctionNode: AggregateFunctionNode.cloneWithDistinct(this.#props.aggregateFunctionNode),\n        });\n    }\n    orderBy(...args) {\n        return new AggregateFunctionBuilder({\n            ...this.#props,\n            aggregateFunctionNode: QueryNode.cloneWithOrderByItems(this.#props.aggregateFunctionNode, parseOrderBy(args)),\n        });\n    }\n    clearOrderBy() {\n        return new AggregateFunctionBuilder({\n            ...this.#props,\n            aggregateFunctionNode: QueryNode.cloneWithoutOrderBy(this.#props.aggregateFunctionNode),\n        });\n    }\n    withinGroupOrderBy(...args) {\n        return new AggregateFunctionBuilder({\n            ...this.#props,\n            aggregateFunctionNode: AggregateFunctionNode.cloneWithOrderBy(this.#props.aggregateFunctionNode, parseOrderBy(args), true),\n        });\n    }\n    filterWhere(...args) {\n        return new AggregateFunctionBuilder({\n            ...this.#props,\n            aggregateFunctionNode: AggregateFunctionNode.cloneWithFilter(this.#props.aggregateFunctionNode, parseValueBinaryOperationOrExpression(args)),\n        });\n    }\n    /**\n     * Adds a `filter` clause with a nested `where` clause after the function, where\n     * both sides of the operator are references to columns.\n     *\n     * Similar to {@link WhereInterface}'s `whereRef` method.\n     *\n     * ### Examples\n     *\n     * Count people with same first and last names versus general public:\n     *\n     * ```ts\n     * const result = await db\n     *   .selectFrom('person')\n     *   .select((eb) => [\n     *     eb.fn\n     *       .count<number>('id')\n     *       .filterWhereRef('first_name', '=', 'last_name')\n     *       .as('repeat_name_count'),\n     *     eb.fn.count<number>('id').as('total_count'),\n     *   ])\n     *   .executeTakeFirstOrThrow()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select\n     *   count(\"id\") filter(where \"first_name\" = \"last_name\") as \"repeat_name_count\",\n     *   count(\"id\") as \"total_count\"\n     * from \"person\"\n     * ```\n     */\n    filterWhereRef(lhs, op, rhs) {\n        return new AggregateFunctionBuilder({\n            ...this.#props,\n            aggregateFunctionNode: AggregateFunctionNode.cloneWithFilter(this.#props.aggregateFunctionNode, parseReferentialBinaryOperation(lhs, op, rhs)),\n        });\n    }\n    /**\n     * Adds an `over` clause (window functions) after the function.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * const result = await db\n     *   .selectFrom('person')\n     *   .select(\n     *     (eb) => eb.fn.avg<number>('age').over().as('average_age')\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select avg(\"age\") over() as \"average_age\"\n     * from \"person\"\n     * ```\n     *\n     * Also supports passing a callback that returns an over builder,\n     * allowing to add partition by and sort by clauses inside over.\n     *\n     * ```ts\n     * const result = await db\n     *   .selectFrom('person')\n     *   .select(\n     *     (eb) => eb.fn.avg<number>('age').over(\n     *       ob => ob.partitionBy('last_name').orderBy('first_name', 'asc')\n     *     ).as('average_age')\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select avg(\"age\") over(partition by \"last_name\" order by \"first_name\" asc) as \"average_age\"\n     * from \"person\"\n     * ```\n     */\n    over(over) {\n        const builder = createOverBuilder();\n        return new AggregateFunctionBuilder({\n            ...this.#props,\n            aggregateFunctionNode: AggregateFunctionNode.cloneWithOver(this.#props.aggregateFunctionNode, (over ? over(builder) : builder).toOperationNode()),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    /**\n     * Casts the expression to the given type.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of this `AggregateFunctionBuilder` with a new output type.\n     */\n    $castTo() {\n        return new AggregateFunctionBuilder(this.#props);\n    }\n    /**\n     * Omit null from the expression's type.\n     *\n     * This function can be useful in cases where you know an expression can't be\n     * null, but Kysely is unable to infer it.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of `this` with a new output type.\n     */\n    $notNull() {\n        return new AggregateFunctionBuilder(this.#props);\n    }\n    toOperationNode() {\n        return this.#props.aggregateFunctionNode;\n    }\n}\n/**\n * {@link AggregateFunctionBuilder} with an alias. The result of calling {@link AggregateFunctionBuilder.as}.\n */\nexport class AliasedAggregateFunctionBuilder {\n    #aggregateFunctionBuilder;\n    #alias;\n    constructor(aggregateFunctionBuilder, alias) {\n        this.#aggregateFunctionBuilder = aggregateFunctionBuilder;\n        this.#alias = alias;\n    }\n    /** @private */\n    get expression() {\n        return this.#aggregateFunctionBuilder;\n    }\n    /** @private */\n    get alias() {\n        return this.#alias;\n    }\n    toOperationNode() {\n        return AliasNode.create(this.#aggregateFunctionBuilder.toOperationNode(), IdentifierNode.create(this.#alias));\n    }\n}\n", "/// <reference types=\"./function-module.d.ts\" />\nimport { ExpressionWrapper } from '../expression/expression-wrapper.js';\nimport { AggregateFunctionNode } from '../operation-node/aggregate-function-node.js';\nimport { FunctionNode } from '../operation-node/function-node.js';\nimport { parseReferenceExpressionOrList, } from '../parser/reference-parser.js';\nimport { parseSelectAll } from '../parser/select-parser.js';\nimport { AggregateFunctionBuilder } from './aggregate-function-builder.js';\nimport { isString } from '../util/object-utils.js';\nimport { parseTable } from '../parser/table-parser.js';\nexport function createFunctionModule() {\n    const fn = (name, args) => {\n        return new ExpressionWrapper(FunctionNode.create(name, parseReferenceExpressionOrList(args ?? [])));\n    };\n    const agg = (name, args) => {\n        return new AggregateFunctionBuilder({\n            aggregateFunctionNode: AggregateFunctionNode.create(name, args ? parseReferenceExpressionOrList(args) : undefined),\n        });\n    };\n    return Object.assign(fn, {\n        agg,\n        avg(column) {\n            return agg('avg', [column]);\n        },\n        coalesce(...values) {\n            return fn('coalesce', values);\n        },\n        count(column) {\n            return agg('count', [column]);\n        },\n        countAll(table) {\n            return new AggregateFunctionBuilder({\n                aggregateFunctionNode: AggregateFunctionNode.create('count', parseSelectAll(table)),\n            });\n        },\n        max(column) {\n            return agg('max', [column]);\n        },\n        min(column) {\n            return agg('min', [column]);\n        },\n        sum(column) {\n            return agg('sum', [column]);\n        },\n        any(column) {\n            return fn('any', [column]);\n        },\n        jsonAgg(table) {\n            return new AggregateFunctionBuilder({\n                aggregateFunctionNode: AggregateFunctionNode.create('json_agg', [\n                    isString(table) ? parseTable(table) : table.toOperationNode(),\n                ]),\n            });\n        },\n        toJson(table) {\n            return new ExpressionWrapper(FunctionNode.create('to_json', [\n                isString(table) ? parseTable(table) : table.toOperationNode(),\n            ]));\n        },\n    });\n}\n", "/// <reference types=\"./unary-operation-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const UnaryOperationNode = freeze({\n    is(node) {\n        return node.kind === 'UnaryOperationNode';\n    },\n    create(operator, operand) {\n        return freeze({\n            kind: 'UnaryOperationNode',\n            operator,\n            operand,\n        });\n    },\n});\n", "/// <reference types=\"./unary-operation-parser.d.ts\" />\nimport { OperatorNode, } from '../operation-node/operator-node.js';\nimport { UnaryOperationNode } from '../operation-node/unary-operation-node.js';\nimport { parseReferenceExpression, } from './reference-parser.js';\nexport function parseExists(operand) {\n    return parseUnaryOperation('exists', operand);\n}\nexport function parseNotExists(operand) {\n    return parseUnaryOperation('not exists', operand);\n}\nexport function parseUnaryOperation(operator, operand) {\n    return UnaryOperationNode.create(OperatorNode.create(operator), parseReferenceExpression(operand));\n}\n", "/// <reference types=\"./case-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { WhenNode } from './when-node.js';\n/**\n * @internal\n */\nexport const CaseNode = freeze({\n    is(node) {\n        return node.kind === 'CaseNode';\n    },\n    create(value) {\n        return freeze({\n            kind: 'CaseNode',\n            value,\n        });\n    },\n    cloneWithWhen(caseNode, when) {\n        return freeze({\n            ...caseNode,\n            when: freeze(caseNode.when ? [...caseNode.when, when] : [when]),\n        });\n    },\n    cloneWithThen(caseNode, then) {\n        return freeze({\n            ...caseNode,\n            when: caseNode.when\n                ? freeze([\n                    ...caseNode.when.slice(0, -1),\n                    WhenNode.cloneWithResult(caseNode.when[caseNode.when.length - 1], then),\n                ])\n                : undefined,\n        });\n    },\n    cloneWith(caseNode, props) {\n        return freeze({\n            ...caseNode,\n            ...props,\n        });\n    },\n});\n", "/// <reference types=\"./case-builder.d.ts\" />\nimport { ExpressionWrapper } from '../expression/expression-wrapper.js';\nimport { freeze } from '../util/object-utils.js';\nimport { CaseNode } from '../operation-node/case-node.js';\nimport { WhenNode } from '../operation-node/when-node.js';\nimport { parseValueBinaryOperationOrExpression, } from '../parser/binary-operation-parser.js';\nimport { isSafeImmediateValue, parseSafeImmediateValue, parseValueExpression, } from '../parser/value-parser.js';\nexport class CaseBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    when(...args) {\n        return new CaseThenBuilder({\n            ...this.#props,\n            node: CaseNode.cloneWithWhen(this.#props.node, WhenNode.create(parseValueBinaryOperationOrExpression(args))),\n        });\n    }\n}\nexport class CaseThenBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    then(valueExpression) {\n        return new CaseWhenBuilder({\n            ...this.#props,\n            node: CaseNode.cloneWithThen(this.#props.node, isSafeImmediateValue(valueExpression)\n                ? parseSafeImmediateValue(valueExpression)\n                : parseValueExpression(valueExpression)),\n        });\n    }\n}\nexport class CaseWhenBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    when(...args) {\n        return new CaseThenBuilder({\n            ...this.#props,\n            node: CaseNode.cloneWithWhen(this.#props.node, WhenNode.create(parseValueBinaryOperationOrExpression(args))),\n        });\n    }\n    else(valueExpression) {\n        return new CaseEndBuilder({\n            ...this.#props,\n            node: CaseNode.cloneWith(this.#props.node, {\n                else: isSafeImmediateValue(valueExpression)\n                    ? parseSafeImmediateValue(valueExpression)\n                    : parseValueExpression(valueExpression),\n            }),\n        });\n    }\n    end() {\n        return new ExpressionWrapper(CaseNode.cloneWith(this.#props.node, { isStatement: false }));\n    }\n    endCase() {\n        return new ExpressionWrapper(CaseNode.cloneWith(this.#props.node, { isStatement: true }));\n    }\n}\nexport class CaseEndBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    end() {\n        return new ExpressionWrapper(CaseNode.cloneWith(this.#props.node, { isStatement: false }));\n    }\n    endCase() {\n        return new ExpressionWrapper(CaseNode.cloneWith(this.#props.node, { isStatement: true }));\n    }\n}\n", "/// <reference types=\"./json-path-leg-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const JSONPathLegNode = freeze({\n    is(node) {\n        return node.kind === 'JSONPathLegNode';\n    },\n    create(type, value) {\n        return freeze({\n            kind: 'JSONPathLegNode',\n            type,\n            value,\n        });\n    },\n});\n", "/// <reference types=\"./json-path-builder.d.ts\" />\nimport { AliasNode } from '../operation-node/alias-node.js';\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nimport { JSONOperatorChainNode } from '../operation-node/json-operator-chain-node.js';\nimport { JSONPathLegNode, } from '../operation-node/json-path-leg-node.js';\nimport { JSONPathNode } from '../operation-node/json-path-node.js';\nimport { JSONReferenceNode } from '../operation-node/json-reference-node.js';\nimport { isOperationNodeSource } from '../operation-node/operation-node-source.js';\nimport { ValueNode } from '../operation-node/value-node.js';\nexport class JSONPathBuilder {\n    #node;\n    constructor(node) {\n        this.#node = node;\n    }\n    /**\n     * Access an element of a JSON array in a specific location.\n     *\n     * Since there's no guarantee an element exists in the given array location, the\n     * resulting type is always nullable. If you're sure the element exists, you\n     * should use {@link SelectQueryBuilder.$assertType} to narrow the type safely.\n     *\n     * See also {@link key} to access properties of JSON objects.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.selectFrom('person')\n     *   .select(eb =>\n     *     eb.ref('nicknames', '->').at(0).as('primary_nickname')\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select \"nicknames\"->0 as \"primary_nickname\" from \"person\"\n     *```\n     *\n     * Combined with {@link key}:\n     *\n     * ```ts\n     * db.selectFrom('person').select(eb =>\n     *   eb.ref('experience', '->').at(0).key('role').as('first_role')\n     * )\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select \"experience\"->0->'role' as \"first_role\" from \"person\"\n     * ```\n     *\n     * You can use `'last'` to access the last element of the array in MySQL:\n     *\n     * ```ts\n     * db.selectFrom('person').select(eb =>\n     *   eb.ref('nicknames', '->$').at('last').as('last_nickname')\n     * )\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * select `nicknames`->'$[last]' as `last_nickname` from `person`\n     * ```\n     *\n     * Or `'#-1'` in SQLite:\n     *\n     * ```ts\n     * db.selectFrom('person').select(eb =>\n     *   eb.ref('nicknames', '->>$').at('#-1').as('last_nickname')\n     * )\n     * ```\n     *\n     * The generated SQL (SQLite):\n     *\n     * ```sql\n     * select \"nicknames\"->>'$[#-1]' as `last_nickname` from `person`\n     * ```\n     */\n    at(index) {\n        return this.#createBuilderWithPathLeg('ArrayLocation', index);\n    }\n    /**\n     * Access a property of a JSON object.\n     *\n     * If a field is optional, the resulting type will be nullable.\n     *\n     * See also {@link at} to access elements of JSON arrays.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.selectFrom('person').select(eb =>\n     *   eb.ref('address', '->').key('city').as('city')\n     * )\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select \"address\"->'city' as \"city\" from \"person\"\n     * ```\n     *\n     * Going deeper:\n     *\n     * ```ts\n     * db.selectFrom('person').select(eb =>\n     *   eb.ref('profile', '->$').key('website').key('url').as('website_url')\n     * )\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * select `profile`->'$.website.url' as `website_url` from `person`\n     * ```\n     *\n     * Combined with {@link at}:\n     *\n     * ```ts\n     * db.selectFrom('person').select(eb =>\n     *   eb.ref('profile', '->').key('addresses').at(0).key('city').as('city')\n     * )\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select \"profile\"->'addresses'->0->'city' as \"city\" from \"person\"\n     * ```\n     */\n    key(key) {\n        return this.#createBuilderWithPathLeg('Member', key);\n    }\n    #createBuilderWithPathLeg(legType, value) {\n        if (JSONReferenceNode.is(this.#node)) {\n            return new TraversedJSONPathBuilder(JSONReferenceNode.cloneWithTraversal(this.#node, JSONPathNode.is(this.#node.traversal)\n                ? JSONPathNode.cloneWithLeg(this.#node.traversal, JSONPathLegNode.create(legType, value))\n                : JSONOperatorChainNode.cloneWithValue(this.#node.traversal, ValueNode.createImmediate(value))));\n        }\n        return new TraversedJSONPathBuilder(JSONPathNode.cloneWithLeg(this.#node, JSONPathLegNode.create(legType, value)));\n    }\n}\nexport class TraversedJSONPathBuilder extends JSONPathBuilder {\n    #node;\n    constructor(node) {\n        super(node);\n        this.#node = node;\n    }\n    /** @private */\n    get expressionType() {\n        return undefined;\n    }\n    as(alias) {\n        return new AliasedJSONPathBuilder(this, alias);\n    }\n    /**\n     * Change the output type of the json path.\n     *\n     * This method call doesn't change the SQL in any way. This methods simply\n     * returns a copy of this `JSONPathBuilder` with a new output type.\n     */\n    $castTo() {\n        return new TraversedJSONPathBuilder(this.#node);\n    }\n    $notNull() {\n        return new TraversedJSONPathBuilder(this.#node);\n    }\n    toOperationNode() {\n        return this.#node;\n    }\n}\nexport class AliasedJSONPathBuilder {\n    #jsonPath;\n    #alias;\n    constructor(jsonPath, alias) {\n        this.#jsonPath = jsonPath;\n        this.#alias = alias;\n    }\n    /** @private */\n    get expression() {\n        return this.#jsonPath;\n    }\n    /** @private */\n    get alias() {\n        return this.#alias;\n    }\n    toOperationNode() {\n        return AliasNode.create(this.#jsonPath.toOperationNode(), isOperationNodeSource(this.#alias)\n            ? this.#alias.toOperationNode()\n            : IdentifierNode.create(this.#alias));\n    }\n}\n", "/// <reference types=\"./tuple-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const TupleNode = freeze({\n    is(node) {\n        return node.kind === 'TupleNode';\n    },\n    create(values) {\n        return freeze({\n            kind: 'TupleNode',\n            values: freeze(values),\n        });\n    },\n});\n", "/// <reference types=\"./data-type-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nconst SIMPLE_COLUMN_DATA_TYPES = [\n    'varchar',\n    'char',\n    'text',\n    'integer',\n    'int2',\n    'int4',\n    'int8',\n    'smallint',\n    'bigint',\n    'boolean',\n    'real',\n    'double precision',\n    'float4',\n    'float8',\n    'decimal',\n    'numeric',\n    'binary',\n    'bytea',\n    'date',\n    'datetime',\n    'time',\n    'timetz',\n    'timestamp',\n    'timestamptz',\n    'serial',\n    'bigserial',\n    'uuid',\n    'json',\n    'jsonb',\n    'blob',\n    'varbinary',\n    'int4range',\n    'int4multirange',\n    'int8range',\n    'int8multirange',\n    'numrange',\n    'nummultirange',\n    'tsrange',\n    'tsmultirange',\n    'tstzrange',\n    'tstzmultirange',\n    'daterange',\n    'datemultirange',\n];\nconst COLUMN_DATA_TYPE_REGEX = [\n    /^varchar\\(\\d+\\)$/,\n    /^char\\(\\d+\\)$/,\n    /^decimal\\(\\d+, \\d+\\)$/,\n    /^numeric\\(\\d+, \\d+\\)$/,\n    /^binary\\(\\d+\\)$/,\n    /^datetime\\(\\d+\\)$/,\n    /^time\\(\\d+\\)$/,\n    /^timetz\\(\\d+\\)$/,\n    /^timestamp\\(\\d+\\)$/,\n    /^timestamptz\\(\\d+\\)$/,\n    /^varbinary\\(\\d+\\)$/,\n];\n/**\n * @internal\n */\nexport const DataTypeNode = freeze({\n    is(node) {\n        return node.kind === 'DataTypeNode';\n    },\n    create(dataType) {\n        return freeze({\n            kind: 'DataTypeNode',\n            dataType,\n        });\n    },\n});\nexport function isColumnDataType(dataType) {\n    if (SIMPLE_COLUMN_DATA_TYPES.includes(dataType)) {\n        return true;\n    }\n    if (COLUMN_DATA_TYPE_REGEX.some((r) => r.test(dataType))) {\n        return true;\n    }\n    return false;\n}\n", "/// <reference types=\"./data-type-parser.d.ts\" />\nimport { DataTypeNode, isColumnDataType, } from '../operation-node/data-type-node.js';\nimport { isOperationNodeSource } from '../operation-node/operation-node-source.js';\nexport function parseDataTypeExpression(dataType) {\n    if (isOperationNodeSource(dataType)) {\n        return dataType.toOperationNode();\n    }\n    if (isColumnDataType(dataType)) {\n        return DataTypeNode.create(dataType);\n    }\n    throw new Error(`invalid column data type ${JSON.stringify(dataType)}`);\n}\n", "/// <reference types=\"./cast-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const CastNode = freeze({\n    is(node) {\n        return node.kind === 'CastNode';\n    },\n    create(expression, dataType) {\n        return freeze({\n            kind: 'CastNode',\n            expression,\n            dataType,\n        });\n    },\n});\n", "/// <reference types=\"./expression-builder.d.ts\" />\nimport { createSelectQueryBuilder, } from '../query-builder/select-query-builder.js';\nimport { SelectQueryNode } from '../operation-node/select-query-node.js';\nimport { parseTableExpressionOrList, parseTable, } from '../parser/table-parser.js';\nimport { WithSchemaPlugin } from '../plugin/with-schema/with-schema-plugin.js';\nimport { createQueryId } from '../util/query-id.js';\nimport { createFunctionModule, } from '../query-builder/function-module.js';\nimport { parseJSONReference, parseReferenceExpression, parseStringReference, } from '../parser/reference-parser.js';\nimport { parseFilterList, parseFilterObject, parseValueBinaryOperation, parseValueBinaryOperationOrExpression, } from '../parser/binary-operation-parser.js';\nimport { ParensNode } from '../operation-node/parens-node.js';\nimport { ExpressionWrapper } from './expression-wrapper.js';\nimport { OperatorNode, } from '../operation-node/operator-node.js';\nimport { parseUnaryOperation } from '../parser/unary-operation-parser.js';\nimport { parseSafeImmediateValue, parseValueExpression, } from '../parser/value-parser.js';\nimport { NOOP_QUERY_EXECUTOR } from '../query-executor/noop-query-executor.js';\nimport { CaseBuilder } from '../query-builder/case-builder.js';\nimport { CaseNode } from '../operation-node/case-node.js';\nimport { isReadonlyArray, isUndefined } from '../util/object-utils.js';\nimport { JSONPathBuilder } from '../query-builder/json-path-builder.js';\nimport { BinaryOperationNode } from '../operation-node/binary-operation-node.js';\nimport { AndNode } from '../operation-node/and-node.js';\nimport { TupleNode } from '../operation-node/tuple-node.js';\nimport { JSONPathNode } from '../operation-node/json-path-node.js';\nimport { parseDataTypeExpression, } from '../parser/data-type-parser.js';\nimport { CastNode } from '../operation-node/cast-node.js';\nexport function createExpressionBuilder(executor = NOOP_QUERY_EXECUTOR) {\n    function binary(lhs, op, rhs) {\n        return new ExpressionWrapper(parseValueBinaryOperation(lhs, op, rhs));\n    }\n    function unary(op, expr) {\n        return new ExpressionWrapper(parseUnaryOperation(op, expr));\n    }\n    const eb = Object.assign(binary, {\n        fn: undefined,\n        eb: undefined,\n        selectFrom(table) {\n            return createSelectQueryBuilder({\n                queryId: createQueryId(),\n                executor,\n                queryNode: SelectQueryNode.createFrom(parseTableExpressionOrList(table)),\n            });\n        },\n        case(reference) {\n            return new CaseBuilder({\n                node: CaseNode.create(isUndefined(reference)\n                    ? undefined\n                    : parseReferenceExpression(reference)),\n            });\n        },\n        ref(reference, op) {\n            if (isUndefined(op)) {\n                return new ExpressionWrapper(parseStringReference(reference));\n            }\n            return new JSONPathBuilder(parseJSONReference(reference, op));\n        },\n        jsonPath() {\n            return new JSONPathBuilder(JSONPathNode.create());\n        },\n        table(table) {\n            return new ExpressionWrapper(parseTable(table));\n        },\n        val(value) {\n            return new ExpressionWrapper(parseValueExpression(value));\n        },\n        refTuple(...values) {\n            return new ExpressionWrapper(TupleNode.create(values.map(parseReferenceExpression)));\n        },\n        tuple(...values) {\n            return new ExpressionWrapper(TupleNode.create(values.map(parseValueExpression)));\n        },\n        lit(value) {\n            return new ExpressionWrapper(parseSafeImmediateValue(value));\n        },\n        unary,\n        not(expr) {\n            return unary('not', expr);\n        },\n        exists(expr) {\n            return unary('exists', expr);\n        },\n        neg(expr) {\n            return unary('-', expr);\n        },\n        between(expr, start, end) {\n            return new ExpressionWrapper(BinaryOperationNode.create(parseReferenceExpression(expr), OperatorNode.create('between'), AndNode.create(parseValueExpression(start), parseValueExpression(end))));\n        },\n        betweenSymmetric(expr, start, end) {\n            return new ExpressionWrapper(BinaryOperationNode.create(parseReferenceExpression(expr), OperatorNode.create('between symmetric'), AndNode.create(parseValueExpression(start), parseValueExpression(end))));\n        },\n        and(exprs) {\n            if (isReadonlyArray(exprs)) {\n                return new ExpressionWrapper(parseFilterList(exprs, 'and'));\n            }\n            return new ExpressionWrapper(parseFilterObject(exprs, 'and'));\n        },\n        or(exprs) {\n            if (isReadonlyArray(exprs)) {\n                return new ExpressionWrapper(parseFilterList(exprs, 'or'));\n            }\n            return new ExpressionWrapper(parseFilterObject(exprs, 'or'));\n        },\n        parens(...args) {\n            const node = parseValueBinaryOperationOrExpression(args);\n            if (ParensNode.is(node)) {\n                // No double wrapping.\n                return new ExpressionWrapper(node);\n            }\n            else {\n                return new ExpressionWrapper(ParensNode.create(node));\n            }\n        },\n        cast(expr, dataType) {\n            return new ExpressionWrapper(CastNode.create(parseReferenceExpression(expr), parseDataTypeExpression(dataType)));\n        },\n        withSchema(schema) {\n            return createExpressionBuilder(executor.withPluginAtFront(new WithSchemaPlugin(schema)));\n        },\n    });\n    eb.fn = createFunctionModule();\n    eb.eb = eb;\n    return eb;\n}\nexport function expressionBuilder(_) {\n    return createExpressionBuilder();\n}\n", "/// <reference types=\"./expression-parser.d.ts\" />\nimport { isAliasedExpression, isExpression, } from '../expression/expression.js';\nimport { isOperationNodeSource } from '../operation-node/operation-node-source.js';\nimport { expressionBuilder, } from '../expression/expression-builder.js';\nimport { isFunction } from '../util/object-utils.js';\nexport function parseExpression(exp) {\n    if (isOperationNodeSource(exp)) {\n        return exp.toOperationNode();\n    }\n    else if (isFunction(exp)) {\n        return exp(expressionBuilder()).toOperationNode();\n    }\n    throw new Error(`invalid expression: ${JSON.stringify(exp)}`);\n}\nexport function parseAliasedExpression(exp) {\n    if (isOperationNodeSource(exp)) {\n        return exp.toOperationNode();\n    }\n    else if (isFunction(exp)) {\n        return exp(expressionBuilder()).toOperationNode();\n    }\n    throw new Error(`invalid aliased expression: ${JSON.stringify(exp)}`);\n}\nexport function isExpressionOrFactory(obj) {\n    return isExpression(obj) || isAliasedExpression(obj) || isFunction(obj);\n}\n", "/// <reference types=\"./dynamic-table-builder.d.ts\" />\nimport { AliasNode } from '../operation-node/alias-node.js';\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nimport { isOperationNodeSource, } from '../operation-node/operation-node-source.js';\nimport { parseTable } from '../parser/table-parser.js';\nimport { isObject, isString } from '../util/object-utils.js';\nexport class DynamicTableBuilder {\n    #table;\n    get table() {\n        return this.#table;\n    }\n    constructor(table) {\n        this.#table = table;\n    }\n    as(alias) {\n        return new AliasedDynamicTableBuilder(this.#table, alias);\n    }\n}\nexport class AliasedDynamicTableBuilder {\n    #table;\n    #alias;\n    get table() {\n        return this.#table;\n    }\n    get alias() {\n        return this.#alias;\n    }\n    constructor(table, alias) {\n        this.#table = table;\n        this.#alias = alias;\n    }\n    toOperationNode() {\n        return AliasNode.create(parseTable(this.#table), IdentifierNode.create(this.#alias));\n    }\n}\nexport function isAliasedDynamicTableBuilder(obj) {\n    return (isObject(obj) &&\n        isOperationNodeSource(obj) &&\n        isString(obj.table) &&\n        isString(obj.alias));\n}\n", "/// <reference types=\"./table-parser.d.ts\" />\nimport { isReadonlyArray, isString } from '../util/object-utils.js';\nimport { AliasNode } from '../operation-node/alias-node.js';\nimport { TableNode } from '../operation-node/table-node.js';\nimport { parseAliasedExpression, } from './expression-parser.js';\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nimport { isAliasedDynamicTableBuilder, } from '../dynamic/dynamic-table-builder.js';\nexport function parseTableExpressionOrList(table) {\n    if (isReadonlyArray(table)) {\n        return table.map((it) => parseTableExpression(it));\n    }\n    else {\n        return [parseTableExpression(table)];\n    }\n}\nexport function parseTableExpression(table) {\n    if (isString(table)) {\n        return parseAliasedTable(table);\n    }\n    else if (isAliasedDynamicTableBuilder(table)) {\n        return table.toOperationNode();\n    }\n    else {\n        return parseAliasedExpression(table);\n    }\n}\nexport function parseAliasedTable(from) {\n    const ALIAS_SEPARATOR = ' as ';\n    if (from.includes(ALIAS_SEPARATOR)) {\n        const [table, alias] = from.split(ALIAS_SEPARATOR).map(trim);\n        return AliasNode.create(parseTable(table), IdentifierNode.create(alias));\n    }\n    else {\n        return parseTable(from);\n    }\n}\nexport function parseTable(from) {\n    const SCHEMA_SEPARATOR = '.';\n    if (from.includes(SCHEMA_SEPARATOR)) {\n        const [schema, table] = from.split(SCHEMA_SEPARATOR).map(trim);\n        return TableNode.createWithSchema(schema, table);\n    }\n    else {\n        return TableNode.create(from);\n    }\n}\nfunction trim(str) {\n    return str.trim();\n}\n", "/// <reference types=\"./add-column-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const AddColumnNode = freeze({\n    is(node) {\n        return node.kind === 'AddColumnNode';\n    },\n    create(column) {\n        return freeze({\n            kind: 'AddColumnNode',\n            column,\n        });\n    },\n});\n", "/// <reference types=\"./column-definition-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ColumnNode } from './column-node.js';\n/**\n * @internal\n */\nexport const ColumnDefinitionNode = freeze({\n    is(node) {\n        return node.kind === 'ColumnDefinitionNode';\n    },\n    create(column, dataType) {\n        return freeze({\n            kind: 'ColumnDefinitionNode',\n            column: ColumnNode.create(column),\n            dataType,\n        });\n    },\n    cloneWithFrontModifier(node, modifier) {\n        return freeze({\n            ...node,\n            frontModifiers: node.frontModifiers\n                ? freeze([...node.frontModifiers, modifier])\n                : [modifier],\n        });\n    },\n    cloneWithEndModifier(node, modifier) {\n        return freeze({\n            ...node,\n            endModifiers: node.endModifiers\n                ? freeze([...node.endModifiers, modifier])\n                : [modifier],\n        });\n    },\n    cloneWith(node, props) {\n        return freeze({\n            ...node,\n            ...props,\n        });\n    },\n});\n", "/// <reference types=\"./drop-column-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ColumnNode } from './column-node.js';\n/**\n * @internal\n */\nexport const DropColumnNode = freeze({\n    is(node) {\n        return node.kind === 'DropColumnNode';\n    },\n    create(column) {\n        return freeze({\n            kind: 'DropColumnNode',\n            column: ColumnNode.create(column),\n        });\n    },\n});\n", "/// <reference types=\"./rename-column-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ColumnNode } from './column-node.js';\n/**\n * @internal\n */\nexport const RenameColumnNode = freeze({\n    is(node) {\n        return node.kind === 'RenameColumnNode';\n    },\n    create(column, newColumn) {\n        return freeze({\n            kind: 'RenameColumnNode',\n            column: ColumnNode.create(column),\n            renameTo: ColumnNode.create(newColumn),\n        });\n    },\n});\n", "/// <reference types=\"./check-constraint-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const CheckConstraintNode = freeze({\n    is(node) {\n        return node.kind === 'CheckConstraintNode';\n    },\n    create(expression, constraintName) {\n        return freeze({\n            kind: 'CheckConstraintNode',\n            expression,\n            name: constraintName\n                ? IdentifierNode.create(constraintName)\n                : undefined,\n        });\n    },\n});\n", "/// <reference types=\"./references-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nexport const ON_MODIFY_FOREIGN_ACTIONS = [\n    'no action',\n    'restrict',\n    'cascade',\n    'set null',\n    'set default',\n];\n/**\n * @internal\n */\nexport const ReferencesNode = freeze({\n    is(node) {\n        return node.kind === 'ReferencesNode';\n    },\n    create(table, columns) {\n        return freeze({\n            kind: 'ReferencesNode',\n            table,\n            columns: freeze([...columns]),\n        });\n    },\n    cloneWithOnDelete(references, onDelete) {\n        return freeze({\n            ...references,\n            onDelete,\n        });\n    },\n    cloneWithOnUpdate(references, onUpdate) {\n        return freeze({\n            ...references,\n            onUpdate,\n        });\n    },\n});\n", "/// <reference types=\"./default-value-parser.d.ts\" />\nimport { isOperationNodeSource } from '../operation-node/operation-node-source.js';\nimport { ValueNode } from '../operation-node/value-node.js';\nexport function parseDefaultValueExpression(value) {\n    return isOperationNodeSource(value)\n        ? value.toOperationNode()\n        : ValueNode.createImmediate(value);\n}\n", "/// <reference types=\"./generated-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const GeneratedNode = freeze({\n    is(node) {\n        return node.kind === 'GeneratedNode';\n    },\n    create(params) {\n        return freeze({\n            kind: 'GeneratedNode',\n            ...params,\n        });\n    },\n    createWithExpression(expression) {\n        return freeze({\n            kind: 'GeneratedNode',\n            always: true,\n            expression,\n        });\n    },\n    cloneWith(node, params) {\n        return freeze({\n            ...node,\n            ...params,\n        });\n    },\n});\n", "/// <reference types=\"./default-value-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const DefaultValueNode = freeze({\n    is(node) {\n        return node.kind === 'DefaultValueNode';\n    },\n    create(defaultValue) {\n        return freeze({\n            kind: 'DefaultValueNode',\n            defaultValue,\n        });\n    },\n});\n", "/// <reference types=\"./on-modify-action-parser.d.ts\" />\nimport { ON_MODIFY_FOREIGN_ACTIONS, } from '../operation-node/references-node.js';\nexport function parseOnModifyForeignAction(action) {\n    if (ON_MODIFY_FOREIGN_ACTIONS.includes(action)) {\n        return action;\n    }\n    throw new Error(`invalid OnModifyForeignAction ${action}`);\n}\n", "/// <reference types=\"./column-definition-builder.d.ts\" />\nimport { CheckConstraintNode } from '../operation-node/check-constraint-node.js';\nimport { ReferencesNode, } from '../operation-node/references-node.js';\nimport { SelectAllNode } from '../operation-node/select-all-node.js';\nimport { parseStringReference } from '../parser/reference-parser.js';\nimport { ColumnDefinitionNode } from '../operation-node/column-definition-node.js';\nimport { parseDefaultValueExpression, } from '../parser/default-value-parser.js';\nimport { GeneratedNode } from '../operation-node/generated-node.js';\nimport { DefaultValueNode } from '../operation-node/default-value-node.js';\nimport { parseOnModifyForeignAction } from '../parser/on-modify-action-parser.js';\nexport class ColumnDefinitionBuilder {\n    #node;\n    constructor(node) {\n        this.#node = node;\n    }\n    /**\n     * Adds `auto_increment` or `autoincrement` to the column definition\n     * depending on the dialect.\n     *\n     * Some dialects like PostgreSQL don't support this. On PostgreSQL\n     * you can use the `serial` or `bigserial` data type instead.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('id', 'integer', col => col.autoIncrement().primaryKey())\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * create table `person` (\n     *   `id` integer primary key auto_increment\n     * )\n     * ```\n     */\n    autoIncrement() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, { autoIncrement: true }));\n    }\n    /**\n     * Makes the column an identity column.\n     *\n     * This only works on some dialects like MS SQL Server (MSSQL).\n     *\n     * For PostgreSQL's `generated always as identity` use {@link generatedAlwaysAsIdentity}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('id', 'integer', col => col.identity().primaryKey())\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MSSQL):\n     *\n     * ```sql\n     * create table \"person\" (\n     *   \"id\" integer identity primary key\n     * )\n     * ```\n     */\n    identity() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, { identity: true }));\n    }\n    /**\n     * Makes the column the primary key.\n     *\n     * If you want to specify a composite primary key use the\n     * {@link CreateTableBuilder.addPrimaryKeyConstraint} method.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('id', 'integer', col => col.primaryKey())\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * create table `person` (\n     *   `id` integer primary key\n     * )\n     */\n    primaryKey() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, { primaryKey: true }));\n    }\n    /**\n     * Adds a foreign key constraint for the column.\n     *\n     * If your database engine doesn't support foreign key constraints in the\n     * column definition (like MySQL 5) you need to call the table level\n     * {@link CreateTableBuilder.addForeignKeyConstraint} method instead.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('pet')\n     *   .addColumn('owner_id', 'integer', (col) => col.references('person.id'))\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * create table \"pet\" (\n     *   \"owner_id\" integer references \"person\" (\"id\")\n     * )\n     * ```\n     */\n    references(ref) {\n        const references = parseStringReference(ref);\n        if (!references.table || SelectAllNode.is(references.column)) {\n            throw new Error(`invalid call references('${ref}'). The reference must have format table.column or schema.table.column`);\n        }\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, {\n            references: ReferencesNode.create(references.table, [\n                references.column,\n            ]),\n        }));\n    }\n    /**\n     * Adds an `on delete` constraint for the foreign key column.\n     *\n     * If your database engine doesn't support foreign key constraints in the\n     * column definition (like MySQL 5) you need to call the table level\n     * {@link CreateTableBuilder.addForeignKeyConstraint} method instead.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('pet')\n     *   .addColumn(\n     *     'owner_id',\n     *     'integer',\n     *     (col) => col.references('person.id').onDelete('cascade')\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * create table \"pet\" (\n     *   \"owner_id\" integer references \"person\" (\"id\") on delete cascade\n     * )\n     * ```\n     */\n    onDelete(onDelete) {\n        if (!this.#node.references) {\n            throw new Error('on delete constraint can only be added for foreign keys');\n        }\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, {\n            references: ReferencesNode.cloneWithOnDelete(this.#node.references, parseOnModifyForeignAction(onDelete)),\n        }));\n    }\n    /**\n     * Adds an `on update` constraint for the foreign key column.\n     *\n     * If your database engine doesn't support foreign key constraints in the\n     * column definition (like MySQL 5) you need to call the table level\n     * {@link CreateTableBuilder.addForeignKeyConstraint} method instead.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('pet')\n     *   .addColumn(\n     *     'owner_id',\n     *     'integer',\n     *     (col) => col.references('person.id').onUpdate('cascade')\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * create table \"pet\" (\n     *   \"owner_id\" integer references \"person\" (\"id\") on update cascade\n     * )\n     * ```\n     */\n    onUpdate(onUpdate) {\n        if (!this.#node.references) {\n            throw new Error('on update constraint can only be added for foreign keys');\n        }\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, {\n            references: ReferencesNode.cloneWithOnUpdate(this.#node.references, parseOnModifyForeignAction(onUpdate)),\n        }));\n    }\n    /**\n     * Adds a unique constraint for the column.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('email', 'varchar(255)', col => col.unique())\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * create table `person` (\n     *   `email` varchar(255) unique\n     * )\n     * ```\n     */\n    unique() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, { unique: true }));\n    }\n    /**\n     * Adds a `not null` constraint for the column.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('first_name', 'varchar(255)', col => col.notNull())\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * create table `person` (\n     *   `first_name` varchar(255) not null\n     * )\n     * ```\n     */\n    notNull() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, { notNull: true }));\n    }\n    /**\n     * Adds a `unsigned` modifier for the column.\n     *\n     * This only works on some dialects like MySQL.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('age', 'integer', col => col.unsigned())\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * create table `person` (\n     *   `age` integer unsigned\n     * )\n     * ```\n     */\n    unsigned() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, { unsigned: true }));\n    }\n    /**\n     * Adds a default value constraint for the column.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('pet')\n     *   .addColumn('number_of_legs', 'integer', (col) => col.defaultTo(4))\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * create table `pet` (\n     *   `number_of_legs` integer default 4\n     * )\n     * ```\n     *\n     * Values passed to `defaultTo` are interpreted as value literals by default. You can define\n     * an arbitrary SQL expression using the {@link sql} template tag:\n     *\n     * ```ts\n     * import {sql } from 'kysely'\n     *\n     * await db.schema\n     *   .createTable('pet')\n     *   .addColumn(\n     *     'created_at',\n     *     'timestamp',\n     *     (col) => col.defaultTo(sql`CURRENT_TIMESTAMP`)\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * create table `pet` (\n     *   `created_at` timestamp default CURRENT_TIMESTAMP\n     * )\n     * ```\n     */\n    defaultTo(value) {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, {\n            defaultTo: DefaultValueNode.create(parseDefaultValueExpression(value)),\n        }));\n    }\n    /**\n     * Adds a check constraint for the column.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import {sql } from 'kysely'\n     *\n     * await db.schema\n     *   .createTable('pet')\n     *   .addColumn('number_of_legs', 'integer', (col) =>\n     *     col.check(sql`number_of_legs < 5`)\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * create table `pet` (\n     *   `number_of_legs` integer check (number_of_legs < 5)\n     * )\n     * ```\n     */\n    check(expression) {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, {\n            check: CheckConstraintNode.create(expression.toOperationNode()),\n        }));\n    }\n    /**\n     * Makes the column a generated column using a `generated always as` statement.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import {sql } from 'kysely'\n     *\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('full_name', 'varchar(255)',\n     *     (col) => col.generatedAlwaysAs(sql`concat(first_name, ' ', last_name)`)\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * create table `person` (\n     *   `full_name` varchar(255) generated always as (concat(first_name, ' ', last_name))\n     * )\n     * ```\n     */\n    generatedAlwaysAs(expression) {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, {\n            generated: GeneratedNode.createWithExpression(expression.toOperationNode()),\n        }));\n    }\n    /**\n     * Adds the `generated always as identity` specifier.\n     *\n     * This only works on some dialects like PostgreSQL.\n     *\n     * For MS SQL Server (MSSQL)'s identity column use {@link identity}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('id', 'integer', col => col.generatedAlwaysAsIdentity().primaryKey())\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * create table \"person\" (\n     *   \"id\" integer generated always as identity primary key\n     * )\n     * ```\n     */\n    generatedAlwaysAsIdentity() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, {\n            generated: GeneratedNode.create({ identity: true, always: true }),\n        }));\n    }\n    /**\n     * Adds the `generated by default as identity` specifier on supported dialects.\n     *\n     * This only works on some dialects like PostgreSQL.\n     *\n     * For MS SQL Server (MSSQL)'s identity column use {@link identity}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('id', 'integer', col => col.generatedByDefaultAsIdentity().primaryKey())\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * create table \"person\" (\n     *   \"id\" integer generated by default as identity primary key\n     * )\n     * ```\n     */\n    generatedByDefaultAsIdentity() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, {\n            generated: GeneratedNode.create({ identity: true, byDefault: true }),\n        }));\n    }\n    /**\n     * Makes a generated column stored instead of virtual. This method can only\n     * be used with {@link generatedAlwaysAs}\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('full_name', 'varchar(255)', (col) => col\n     *     .generatedAlwaysAs(sql`concat(first_name, ' ', last_name)`)\n     *     .stored()\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * create table `person` (\n     *   `full_name` varchar(255) generated always as (concat(first_name, ' ', last_name)) stored\n     * )\n     * ```\n     */\n    stored() {\n        if (!this.#node.generated) {\n            throw new Error('stored() can only be called after generatedAlwaysAs');\n        }\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, {\n            generated: GeneratedNode.cloneWith(this.#node.generated, {\n                stored: true,\n            }),\n        }));\n    }\n    /**\n     * This can be used to add any additional SQL right after the column's data type.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('id', 'integer', col => col.primaryKey())\n     *   .addColumn(\n     *     'first_name',\n     *     'varchar(36)',\n     *     (col) => col.modifyFront(sql`collate utf8mb4_general_ci`).notNull()\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * create table `person` (\n     *   `id` integer primary key,\n     *   `first_name` varchar(36) collate utf8mb4_general_ci not null\n     * )\n     * ```\n     */\n    modifyFront(modifier) {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWithFrontModifier(this.#node, modifier.toOperationNode()));\n    }\n    /**\n     * Adds `nulls not distinct` specifier.\n     * Should be used with `unique` constraint.\n     *\n     * This only works on some dialects like PostgreSQL.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.schema\n     *   .createTable('person')\n     *   .addColumn('id', 'integer', col => col.primaryKey())\n     *   .addColumn('first_name', 'varchar(30)', col => col.unique().nullsNotDistinct())\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * create table \"person\" (\n     *   \"id\" integer primary key,\n     *   \"first_name\" varchar(30) unique nulls not distinct\n     * )\n     * ```\n     */\n    nullsNotDistinct() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, { nullsNotDistinct: true }));\n    }\n    /**\n     * Adds `if not exists` specifier. This only works for PostgreSQL.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .alterTable('person')\n     *   .addColumn('email', 'varchar(255)', col => col.unique().ifNotExists())\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * alter table \"person\" add column if not exists \"email\" varchar(255) unique\n     * ```\n     */\n    ifNotExists() {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWith(this.#node, { ifNotExists: true }));\n    }\n    /**\n     * This can be used to add any additional SQL to the end of the column definition.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('id', 'integer', col => col.primaryKey())\n     *   .addColumn(\n     *     'age',\n     *     'integer',\n     *     col => col.unsigned()\n     *       .notNull()\n     *       .modifyEnd(sql`comment ${sql.lit('it is not polite to ask a woman her age')}`)\n     *   )\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * create table `person` (\n     *   `id` integer primary key,\n     *   `age` integer unsigned not null comment 'it is not polite to ask a woman her age'\n     * )\n     * ```\n     */\n    modifyEnd(modifier) {\n        return new ColumnDefinitionBuilder(ColumnDefinitionNode.cloneWithEndModifier(this.#node, modifier.toOperationNode()));\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#node;\n    }\n}\n", "/// <reference types=\"./modify-column-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const ModifyColumnNode = freeze({\n    is(node) {\n        return node.kind === 'ModifyColumnNode';\n    },\n    create(column) {\n        return freeze({\n            kind: 'ModifyColumnNode',\n            column,\n        });\n    },\n});\n", "/// <reference types=\"./foreign-key-constraint-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\nimport { ReferencesNode, } from './references-node.js';\n/**\n * @internal\n */\nexport const ForeignKeyConstraintNode = freeze({\n    is(node) {\n        return node.kind === 'ForeignKeyConstraintNode';\n    },\n    create(sourceColumns, targetTable, targetColumns, constraintName) {\n        return freeze({\n            kind: 'ForeignKeyConstraintNode',\n            columns: sourceColumns,\n            references: ReferencesNode.create(targetTable, targetColumns),\n            name: constraintName\n                ? IdentifierNode.create(constraintName)\n                : undefined,\n        });\n    },\n    cloneWith(node, props) {\n        return freeze({\n            ...node,\n            ...props,\n        });\n    },\n});\n", "/// <reference types=\"./foreign-key-constraint-builder.d.ts\" />\nimport { ForeignKeyConstraintNode } from '../operation-node/foreign-key-constraint-node.js';\nimport { parseOnModifyForeignAction } from '../parser/on-modify-action-parser.js';\nexport class ForeignKeyConstraintBuilder {\n    #node;\n    constructor(node) {\n        this.#node = node;\n    }\n    onDelete(onDelete) {\n        return new ForeignKeyConstraintBuilder(ForeignKeyConstraintNode.cloneWith(this.#node, {\n            onDelete: parseOnModifyForeignAction(onDelete),\n        }));\n    }\n    onUpdate(onUpdate) {\n        return new ForeignKeyConstraintBuilder(ForeignKeyConstraintNode.cloneWith(this.#node, {\n            onUpdate: parseOnModifyForeignAction(onUpdate),\n        }));\n    }\n    deferrable() {\n        return new ForeignKeyConstraintBuilder(ForeignKeyConstraintNode.cloneWith(this.#node, { deferrable: true }));\n    }\n    notDeferrable() {\n        return new ForeignKeyConstraintBuilder(ForeignKeyConstraintNode.cloneWith(this.#node, { deferrable: false }));\n    }\n    initiallyDeferred() {\n        return new ForeignKeyConstraintBuilder(ForeignKeyConstraintNode.cloneWith(this.#node, {\n            initiallyDeferred: true,\n        }));\n    }\n    initiallyImmediate() {\n        return new ForeignKeyConstraintBuilder(ForeignKeyConstraintNode.cloneWith(this.#node, {\n            initiallyDeferred: false,\n        }));\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#node;\n    }\n}\n", "/// <reference types=\"./add-constraint-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const AddConstraintNode = freeze({\n    is(node) {\n        return node.kind === 'AddConstraintNode';\n    },\n    create(constraint) {\n        return freeze({\n            kind: 'AddConstraintNode',\n            constraint,\n        });\n    },\n});\n", "/// <reference types=\"./unique-constraint-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ColumnNode } from './column-node.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const UniqueConstraintNode = freeze({\n    is(node) {\n        return node.kind === 'UniqueConstraintNode';\n    },\n    create(columns, constraintName, nullsNotDistinct) {\n        return freeze({\n            kind: 'UniqueConstraintNode',\n            columns: freeze(columns.map(ColumnNode.create)),\n            name: constraintName\n                ? IdentifierNode.create(constraintName)\n                : undefined,\n            nullsNotDistinct,\n        });\n    },\n    cloneWith(node, props) {\n        return freeze({\n            ...node,\n            ...props,\n        });\n    },\n});\n", "/// <reference types=\"./drop-constraint-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const DropConstraintNode = freeze({\n    is(node) {\n        return node.kind === 'DropConstraintNode';\n    },\n    create(constraintName) {\n        return freeze({\n            kind: 'DropConstraintNode',\n            constraintName: IdentifierNode.create(constraintName),\n        });\n    },\n    cloneWith(dropConstraint, props) {\n        return freeze({\n            ...dropConstraint,\n            ...props,\n        });\n    },\n});\n", "/// <reference types=\"./alter-column-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ColumnNode } from './column-node.js';\n/**\n * @internal\n */\nexport const AlterColumnNode = freeze({\n    is(node) {\n        return node.kind === 'AlterColumnNode';\n    },\n    create(column, prop, value) {\n        return freeze({\n            kind: 'AlterColumnNode',\n            column: ColumnNode.create(column),\n            [prop]: value,\n        });\n    },\n});\n", "/// <reference types=\"./alter-column-builder.d.ts\" />\nimport { AlterColumnNode } from '../operation-node/alter-column-node.js';\nimport { parseDataTypeExpression, } from '../parser/data-type-parser.js';\nimport { parseDefaultValueExpression, } from '../parser/default-value-parser.js';\nexport class AlterColumnBuilder {\n    #column;\n    constructor(column) {\n        this.#column = column;\n    }\n    setDataType(dataType) {\n        return new AlteredColumnBuilder(AlterColumnNode.create(this.#column, 'dataType', parseDataTypeExpression(dataType)));\n    }\n    setDefault(value) {\n        return new AlteredColumnBuilder(AlterColumnNode.create(this.#column, 'setDefault', parseDefaultValueExpression(value)));\n    }\n    dropDefault() {\n        return new AlteredColumnBuilder(AlterColumnNode.create(this.#column, 'dropDefault', true));\n    }\n    setNotNull() {\n        return new AlteredColumnBuilder(AlterColumnNode.create(this.#column, 'setNotNull', true));\n    }\n    dropNotNull() {\n        return new AlteredColumnBuilder(AlterColumnNode.create(this.#column, 'dropNotNull', true));\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n}\n/**\n * Allows us to force consumers to do exactly one alteration to a column.\n *\n * One cannot do no alterations:\n *\n * ```ts\n * await db.schema\n *   .alterTable('person')\n * //  .execute() // Property 'execute' does not exist on type 'AlteredColumnBuilder'.\n * ```\n *\n * ```ts\n * await db.schema\n *   .alterTable('person')\n * //  .alterColumn('age', (ac) => ac) // Type 'AlterColumnBuilder' is not assignable to type 'AlteredColumnBuilder'.\n * //  .execute()\n * ```\n *\n * One cannot do multiple alterations:\n *\n * ```ts\n * await db.schema\n *   .alterTable('person')\n * //  .alterColumn('age', (ac) => ac.dropNotNull().setNotNull()) // Property 'setNotNull' does not exist on type 'AlteredColumnBuilder'.\n * //  .execute()\n * ```\n *\n * Which would now throw a compilation error, instead of a runtime error.\n */\nexport class AlteredColumnBuilder {\n    #alterColumnNode;\n    constructor(alterColumnNode) {\n        this.#alterColumnNode = alterColumnNode;\n    }\n    toOperationNode() {\n        return this.#alterColumnNode;\n    }\n}\n", "/// <reference types=\"./alter-table-executor.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nexport class AlterTableExecutor {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile());\n    }\n}\n", "/// <reference types=\"./alter-table-add-foreign-key-constraint-builder.d.ts\" />\nimport { AddConstraintNode } from '../operation-node/add-constraint-node.js';\nimport { AlterTableNode } from '../operation-node/alter-table-node.js';\nimport { freeze } from '../util/object-utils.js';\nexport class AlterTableAddForeignKeyConstraintBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    onDelete(onDelete) {\n        return new AlterTableAddForeignKeyConstraintBuilder({\n            ...this.#props,\n            constraintBuilder: this.#props.constraintBuilder.onDelete(onDelete),\n        });\n    }\n    onUpdate(onUpdate) {\n        return new AlterTableAddForeignKeyConstraintBuilder({\n            ...this.#props,\n            constraintBuilder: this.#props.constraintBuilder.onUpdate(onUpdate),\n        });\n    }\n    deferrable() {\n        return new AlterTableAddForeignKeyConstraintBuilder({\n            ...this.#props,\n            constraintBuilder: this.#props.constraintBuilder.deferrable(),\n        });\n    }\n    notDeferrable() {\n        return new AlterTableAddForeignKeyConstraintBuilder({\n            ...this.#props,\n            constraintBuilder: this.#props.constraintBuilder.notDeferrable(),\n        });\n    }\n    initiallyDeferred() {\n        return new AlterTableAddForeignKeyConstraintBuilder({\n            ...this.#props,\n            constraintBuilder: this.#props.constraintBuilder.initiallyDeferred(),\n        });\n    }\n    initiallyImmediate() {\n        return new AlterTableAddForeignKeyConstraintBuilder({\n            ...this.#props,\n            constraintBuilder: this.#props.constraintBuilder.initiallyImmediate(),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(AlterTableNode.cloneWithTableProps(this.#props.node, {\n            addConstraint: AddConstraintNode.create(this.#props.constraintBuilder.toOperationNode()),\n        }), this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile());\n    }\n}\n", "/// <reference types=\"./alter-table-drop-constraint-builder.d.ts\" />\nimport { AlterTableNode } from '../operation-node/alter-table-node.js';\nimport { DropConstraintNode } from '../operation-node/drop-constraint-node.js';\nimport { freeze } from '../util/object-utils.js';\nexport class AlterTableDropConstraintBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    ifExists() {\n        return new AlterTableDropConstraintBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                dropConstraint: DropConstraintNode.cloneWith(this.#props.node.dropConstraint, {\n                    ifExists: true,\n                }),\n            }),\n        });\n    }\n    cascade() {\n        return new AlterTableDropConstraintBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                dropConstraint: DropConstraintNode.cloneWith(this.#props.node.dropConstraint, {\n                    modifier: 'cascade',\n                }),\n            }),\n        });\n    }\n    restrict() {\n        return new AlterTableDropConstraintBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                dropConstraint: DropConstraintNode.cloneWith(this.#props.node.dropConstraint, {\n                    modifier: 'restrict',\n                }),\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile());\n    }\n}\n", "/// <reference types=\"./primary-key-constraint-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ColumnNode } from './column-node.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const PrimaryKeyConstraintNode = freeze({\n    is(node) {\n        return node.kind === 'PrimaryKeyConstraintNode';\n    },\n    create(columns, constraintName) {\n        return freeze({\n            kind: 'PrimaryKeyConstraintNode',\n            columns: freeze(columns.map(ColumnNode.create)),\n            name: constraintName\n                ? IdentifierNode.create(constraintName)\n                : undefined,\n        });\n    },\n    cloneWith(node, props) {\n        return freeze({ ...node, ...props });\n    },\n});\n/**\n * Backwards compatibility for a typo in the codebase.\n *\n * @deprecated Use {@link PrimaryKeyConstraintNode} instead.\n */\nexport const PrimaryConstraintNode = PrimaryKeyConstraintNode;\n", "/// <reference types=\"./add-index-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const AddIndexNode = freeze({\n    is(node) {\n        return node.kind === 'AddIndexNode';\n    },\n    create(name) {\n        return freeze({\n            kind: 'AddIndexNode',\n            name: IdentifierNode.create(name),\n        });\n    },\n    cloneWith(node, props) {\n        return freeze({\n            ...node,\n            ...props,\n        });\n    },\n    cloneWithColumns(node, columns) {\n        return freeze({\n            ...node,\n            columns: [...(node.columns || []), ...columns],\n        });\n    },\n});\n", "/// <reference types=\"./alter-table-add-index-builder.d.ts\" />\nimport { AddIndexNode } from '../operation-node/add-index-node.js';\nimport { AlterTableNode } from '../operation-node/alter-table-node.js';\nimport { RawNode } from '../operation-node/raw-node.js';\nimport { parseOrderedColumnName, } from '../parser/reference-parser.js';\nimport { freeze } from '../util/object-utils.js';\nexport class AlterTableAddIndexBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Makes the index unique.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .alterTable('person')\n     *   .addIndex('person_first_name_index')\n     *   .unique()\n     *   .column('email')\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * alter table `person` add unique index `person_first_name_index` (`email`)\n     * ```\n     */\n    unique() {\n        return new AlterTableAddIndexBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                addIndex: AddIndexNode.cloneWith(this.#props.node.addIndex, {\n                    unique: true,\n                }),\n            }),\n        });\n    }\n    /**\n     * Adds a column to the index.\n     *\n     * Also see {@link columns} for adding multiple columns at once or {@link expression}\n     * for specifying an arbitrary expression.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .alterTable('person')\n     *   .addIndex('person_first_name_and_age_index')\n     *   .column('first_name')\n     *   .column('age desc')\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * alter table `person` add index `person_first_name_and_age_index` (`first_name`, `age` desc)\n     * ```\n     */\n    column(column) {\n        return new AlterTableAddIndexBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                addIndex: AddIndexNode.cloneWithColumns(this.#props.node.addIndex, [\n                    parseOrderedColumnName(column),\n                ]),\n            }),\n        });\n    }\n    /**\n     * Specifies a list of columns for the index.\n     *\n     * Also see {@link column} for adding a single column or {@link expression} for\n     * specifying an arbitrary expression.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .alterTable('person')\n     *   .addIndex('person_first_name_and_age_index')\n     *   .columns(['first_name', 'age desc'])\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * alter table `person` add index `person_first_name_and_age_index` (`first_name`, `age` desc)\n     * ```\n     */\n    columns(columns) {\n        return new AlterTableAddIndexBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                addIndex: AddIndexNode.cloneWithColumns(this.#props.node.addIndex, columns.map(parseOrderedColumnName)),\n            }),\n        });\n    }\n    /**\n     * Specifies an arbitrary expression for the index.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import {sql } from 'kysely'\n     *\n     * await db.schema\n     *   .alterTable('person')\n     *   .addIndex('person_first_name_index')\n     *   .expression(sql<boolean>`(first_name < 'Sami')`)\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * alter table `person` add index `person_first_name_index` ((first_name < 'Sami'))\n     * ```\n     */\n    expression(expression) {\n        return new AlterTableAddIndexBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                addIndex: AddIndexNode.cloneWithColumns(this.#props.node.addIndex, [\n                    expression.toOperationNode(),\n                ]),\n            }),\n        });\n    }\n    using(indexType) {\n        return new AlterTableAddIndexBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                addIndex: AddIndexNode.cloneWith(this.#props.node.addIndex, {\n                    using: RawNode.createWithSql(indexType),\n                }),\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile());\n    }\n}\n", "/// <reference types=\"./unique-constraint-builder.d.ts\" />\nimport { UniqueConstraintNode } from '../operation-node/unique-constraint-node.js';\nexport class UniqueConstraintNodeBuilder {\n    #node;\n    constructor(node) {\n        this.#node = node;\n    }\n    /**\n     * Adds `nulls not distinct` to the unique constraint definition\n     *\n     * Supported by PostgreSQL dialect only\n     */\n    nullsNotDistinct() {\n        return new UniqueConstraintNodeBuilder(UniqueConstraintNode.cloneWith(this.#node, { nullsNotDistinct: true }));\n    }\n    deferrable() {\n        return new UniqueConstraintNodeBuilder(UniqueConstraintNode.cloneWith(this.#node, { deferrable: true }));\n    }\n    notDeferrable() {\n        return new UniqueConstraintNodeBuilder(UniqueConstraintNode.cloneWith(this.#node, { deferrable: false }));\n    }\n    initiallyDeferred() {\n        return new UniqueConstraintNodeBuilder(UniqueConstraintNode.cloneWith(this.#node, {\n            initiallyDeferred: true,\n        }));\n    }\n    initiallyImmediate() {\n        return new UniqueConstraintNodeBuilder(UniqueConstraintNode.cloneWith(this.#node, {\n            initiallyDeferred: false,\n        }));\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#node;\n    }\n}\n", "/// <reference types=\"./primary-key-constraint-builder.d.ts\" />\nimport { PrimaryKeyConstraintNode } from '../operation-node/primary-key-constraint-node.js';\nexport class PrimaryKeyConstraintBuilder {\n    #node;\n    constructor(node) {\n        this.#node = node;\n    }\n    deferrable() {\n        return new PrimaryKeyConstraintBuilder(PrimaryKeyConstraintNode.cloneWith(this.#node, { deferrable: true }));\n    }\n    notDeferrable() {\n        return new PrimaryKeyConstraintBuilder(PrimaryKeyConstraintNode.cloneWith(this.#node, { deferrable: false }));\n    }\n    initiallyDeferred() {\n        return new PrimaryKeyConstraintBuilder(PrimaryKeyConstraintNode.cloneWith(this.#node, {\n            initiallyDeferred: true,\n        }));\n    }\n    initiallyImmediate() {\n        return new PrimaryKeyConstraintBuilder(PrimaryKeyConstraintNode.cloneWith(this.#node, {\n            initiallyDeferred: false,\n        }));\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#node;\n    }\n}\n", "/// <reference types=\"./check-constraint-builder.d.ts\" />\nexport class CheckConstraintBuilder {\n    #node;\n    constructor(node) {\n        this.#node = node;\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#node;\n    }\n}\n", "/// <reference types=\"./rename-constraint-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { IdentifierNode } from './identifier-node.js';\n/**\n * @internal\n */\nexport const RenameConstraintNode = freeze({\n    is(node) {\n        return node.kind === 'RenameConstraintNode';\n    },\n    create(oldName, newName) {\n        return freeze({\n            kind: 'RenameConstraintNode',\n            oldName: IdentifierNode.create(oldName),\n            newName: IdentifierNode.create(newName),\n        });\n    },\n});\n", "/// <reference types=\"./alter-table-builder.d.ts\" />\nimport { AddColumnNode } from '../operation-node/add-column-node.js';\nimport { AlterTableNode } from '../operation-node/alter-table-node.js';\nimport { ColumnDefinitionNode } from '../operation-node/column-definition-node.js';\nimport { DropColumnNode } from '../operation-node/drop-column-node.js';\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nimport { RenameColumnNode } from '../operation-node/rename-column-node.js';\nimport { freeze, noop } from '../util/object-utils.js';\nimport { ColumnDefinitionBuilder, } from './column-definition-builder.js';\nimport { ModifyColumnNode } from '../operation-node/modify-column-node.js';\nimport { parseDataTypeExpression, } from '../parser/data-type-parser.js';\nimport { ForeignKeyConstraintBuilder, } from './foreign-key-constraint-builder.js';\nimport { AddConstraintNode } from '../operation-node/add-constraint-node.js';\nimport { UniqueConstraintNode } from '../operation-node/unique-constraint-node.js';\nimport { CheckConstraintNode } from '../operation-node/check-constraint-node.js';\nimport { ForeignKeyConstraintNode } from '../operation-node/foreign-key-constraint-node.js';\nimport { ColumnNode } from '../operation-node/column-node.js';\nimport { parseTable } from '../parser/table-parser.js';\nimport { DropConstraintNode } from '../operation-node/drop-constraint-node.js';\nimport { AlterColumnBuilder, } from './alter-column-builder.js';\nimport { AlterTableExecutor } from './alter-table-executor.js';\nimport { AlterTableAddForeignKeyConstraintBuilder } from './alter-table-add-foreign-key-constraint-builder.js';\nimport { AlterTableDropConstraintBuilder } from './alter-table-drop-constraint-builder.js';\nimport { PrimaryKeyConstraintNode } from '../operation-node/primary-key-constraint-node.js';\nimport { DropIndexNode } from '../operation-node/drop-index-node.js';\nimport { AddIndexNode } from '../operation-node/add-index-node.js';\nimport { AlterTableAddIndexBuilder } from './alter-table-add-index-builder.js';\nimport { UniqueConstraintNodeBuilder, } from './unique-constraint-builder.js';\nimport { PrimaryKeyConstraintBuilder, } from './primary-key-constraint-builder.js';\nimport { CheckConstraintBuilder, } from './check-constraint-builder.js';\nimport { RenameConstraintNode } from '../operation-node/rename-constraint-node.js';\n/**\n * This builder can be used to create a `alter table` query.\n */\nexport class AlterTableBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    renameTo(newTableName) {\n        return new AlterTableExecutor({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                renameTo: parseTable(newTableName),\n            }),\n        });\n    }\n    setSchema(newSchema) {\n        return new AlterTableExecutor({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                setSchema: IdentifierNode.create(newSchema),\n            }),\n        });\n    }\n    alterColumn(column, alteration) {\n        const builder = alteration(new AlterColumnBuilder(column));\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, builder.toOperationNode()),\n        });\n    }\n    dropColumn(column) {\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, DropColumnNode.create(column)),\n        });\n    }\n    renameColumn(column, newColumn) {\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, RenameColumnNode.create(column, newColumn)),\n        });\n    }\n    addColumn(columnName, dataType, build = noop) {\n        const builder = build(new ColumnDefinitionBuilder(ColumnDefinitionNode.create(columnName, parseDataTypeExpression(dataType))));\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, AddColumnNode.create(builder.toOperationNode())),\n        });\n    }\n    modifyColumn(columnName, dataType, build = noop) {\n        const builder = build(new ColumnDefinitionBuilder(ColumnDefinitionNode.create(columnName, parseDataTypeExpression(dataType))));\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, ModifyColumnNode.create(builder.toOperationNode())),\n        });\n    }\n    /**\n     * See {@link CreateTableBuilder.addUniqueConstraint}\n     */\n    addUniqueConstraint(constraintName, columns, build = noop) {\n        const uniqueConstraintBuilder = build(new UniqueConstraintNodeBuilder(UniqueConstraintNode.create(columns, constraintName)));\n        return new AlterTableExecutor({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                addConstraint: AddConstraintNode.create(uniqueConstraintBuilder.toOperationNode()),\n            }),\n        });\n    }\n    /**\n     * See {@link CreateTableBuilder.addCheckConstraint}\n     */\n    addCheckConstraint(constraintName, checkExpression, build = noop) {\n        const constraintBuilder = build(new CheckConstraintBuilder(CheckConstraintNode.create(checkExpression.toOperationNode(), constraintName)));\n        return new AlterTableExecutor({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                addConstraint: AddConstraintNode.create(constraintBuilder.toOperationNode()),\n            }),\n        });\n    }\n    /**\n     * See {@link CreateTableBuilder.addForeignKeyConstraint}\n     *\n     * Unlike {@link CreateTableBuilder.addForeignKeyConstraint} this method returns\n     * the constraint builder and doesn't take a callback as the last argument. This\n     * is because you can only add one column per `ALTER TABLE` query.\n     */\n    addForeignKeyConstraint(constraintName, columns, targetTable, targetColumns, build = noop) {\n        const constraintBuilder = build(new ForeignKeyConstraintBuilder(ForeignKeyConstraintNode.create(columns.map(ColumnNode.create), parseTable(targetTable), targetColumns.map(ColumnNode.create), constraintName)));\n        return new AlterTableAddForeignKeyConstraintBuilder({\n            ...this.#props,\n            constraintBuilder,\n        });\n    }\n    /**\n     * See {@link CreateTableBuilder.addPrimaryKeyConstraint}\n     */\n    addPrimaryKeyConstraint(constraintName, columns, build = noop) {\n        const constraintBuilder = build(new PrimaryKeyConstraintBuilder(PrimaryKeyConstraintNode.create(columns, constraintName)));\n        return new AlterTableExecutor({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                addConstraint: AddConstraintNode.create(constraintBuilder.toOperationNode()),\n            }),\n        });\n    }\n    dropConstraint(constraintName) {\n        return new AlterTableDropConstraintBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                dropConstraint: DropConstraintNode.create(constraintName),\n            }),\n        });\n    }\n    renameConstraint(oldName, newName) {\n        return new AlterTableDropConstraintBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                renameConstraint: RenameConstraintNode.create(oldName, newName),\n            }),\n        });\n    }\n    /**\n     * This can be used to add index to table.\n     *\n     *  ### Examples\n     *\n     * ```ts\n     * db.schema.alterTable('person')\n     *   .addIndex('person_email_index')\n     *   .column('email')\n     *   .unique()\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * alter table `person` add unique index `person_email_index` (`email`)\n     * ```\n     */\n    addIndex(indexName) {\n        return new AlterTableAddIndexBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                addIndex: AddIndexNode.create(indexName),\n            }),\n        });\n    }\n    /**\n     * This can be used to drop index from table.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.schema.alterTable('person')\n     *   .dropIndex('person_email_index')\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * alter table `person` drop index `test_first_name_index`\n     * ```\n     */\n    dropIndex(indexName) {\n        return new AlterTableExecutor({\n            ...this.#props,\n            node: AlterTableNode.cloneWithTableProps(this.#props.node, {\n                dropIndex: DropIndexNode.create(indexName),\n            }),\n        });\n    }\n    /**\n     * Calls the given function passing `this` as the only argument.\n     *\n     * See {@link CreateTableBuilder.$call}\n     */\n    $call(func) {\n        return func(this);\n    }\n}\nexport class AlterTableColumnAlteringBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    alterColumn(column, alteration) {\n        const builder = alteration(new AlterColumnBuilder(column));\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, builder.toOperationNode()),\n        });\n    }\n    dropColumn(column) {\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, DropColumnNode.create(column)),\n        });\n    }\n    renameColumn(column, newColumn) {\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, RenameColumnNode.create(column, newColumn)),\n        });\n    }\n    addColumn(columnName, dataType, build = noop) {\n        const builder = build(new ColumnDefinitionBuilder(ColumnDefinitionNode.create(columnName, parseDataTypeExpression(dataType))));\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, AddColumnNode.create(builder.toOperationNode())),\n        });\n    }\n    modifyColumn(columnName, dataType, build = noop) {\n        const builder = build(new ColumnDefinitionBuilder(ColumnDefinitionNode.create(columnName, parseDataTypeExpression(dataType))));\n        return new AlterTableColumnAlteringBuilder({\n            ...this.#props,\n            node: AlterTableNode.cloneWithColumnAlteration(this.#props.node, ModifyColumnNode.create(builder.toOperationNode())),\n        });\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile());\n    }\n}\n", "/// <reference types=\"./immediate-value-transformer.d.ts\" />\nimport { OperationNodeTransformer } from '../../operation-node/operation-node-transformer.js';\nimport { ValueListNode } from '../../operation-node/value-list-node.js';\nimport { ValueNode } from '../../operation-node/value-node.js';\n/**\n * Transforms all ValueNodes to immediate.\n *\n * WARNING! This should never be part of the public API. Users should never use this.\n * This is an internal helper.\n *\n * @internal\n */\nexport class ImmediateValueTransformer extends OperationNodeTransformer {\n    transformPrimitiveValueList(node) {\n        return ValueListNode.create(node.values.map(ValueNode.createImmediate));\n    }\n    transformValue(node) {\n        return ValueNode.createImmediate(node.value);\n    }\n}\n", "/// <reference types=\"./create-index-builder.d.ts\" />\nimport { CreateIndexNode, } from '../operation-node/create-index-node.js';\nimport { RawNode } from '../operation-node/raw-node.js';\nimport { parseOrderedColumnName, } from '../parser/reference-parser.js';\nimport { parseTable } from '../parser/table-parser.js';\nimport { freeze } from '../util/object-utils.js';\nimport { parseValueBinaryOperationOrExpression, } from '../parser/binary-operation-parser.js';\nimport { QueryNode } from '../operation-node/query-node.js';\nimport { ImmediateValueTransformer } from '../plugin/immediate-value/immediate-value-transformer.js';\nexport class CreateIndexBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Adds the \"if not exists\" modifier.\n     *\n     * If the index already exists, no error is thrown if this method has been called.\n     */\n    ifNotExists() {\n        return new CreateIndexBuilder({\n            ...this.#props,\n            node: CreateIndexNode.cloneWith(this.#props.node, {\n                ifNotExists: true,\n            }),\n        });\n    }\n    /**\n     * Makes the index unique.\n     */\n    unique() {\n        return new CreateIndexBuilder({\n            ...this.#props,\n            node: CreateIndexNode.cloneWith(this.#props.node, {\n                unique: true,\n            }),\n        });\n    }\n    /**\n     * Adds `nulls not distinct` specifier to index.\n     * This only works on some dialects like PostgreSQL.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.schema.createIndex('person_first_name_index')\n     *  .on('person')\n     *  .column('first_name')\n     *  .nullsNotDistinct()\n     *  .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * create index \"person_first_name_index\"\n     * on \"test\" (\"first_name\")\n     * nulls not distinct;\n     * ```\n     */\n    nullsNotDistinct() {\n        return new CreateIndexBuilder({\n            ...this.#props,\n            node: CreateIndexNode.cloneWith(this.#props.node, {\n                nullsNotDistinct: true,\n            }),\n        });\n    }\n    /**\n     * Specifies the table for the index.\n     */\n    on(table) {\n        return new CreateIndexBuilder({\n            ...this.#props,\n            node: CreateIndexNode.cloneWith(this.#props.node, {\n                table: parseTable(table),\n            }),\n        });\n    }\n    /**\n     * Adds a column to the index.\n     *\n     * Also see {@link columns} for adding multiple columns at once or {@link expression}\n     * for specifying an arbitrary expression.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *         .createIndex('person_first_name_and_age_index')\n     *         .on('person')\n     *         .column('first_name')\n     *         .column('age desc')\n     *         .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * create index \"person_first_name_and_age_index\" on \"person\" (\"first_name\", \"age\" desc)\n     * ```\n     */\n    column(column) {\n        return new CreateIndexBuilder({\n            ...this.#props,\n            node: CreateIndexNode.cloneWithColumns(this.#props.node, [\n                parseOrderedColumnName(column),\n            ]),\n        });\n    }\n    /**\n     * Specifies a list of columns for the index.\n     *\n     * Also see {@link column} for adding a single column or {@link expression} for\n     * specifying an arbitrary expression.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *         .createIndex('person_first_name_and_age_index')\n     *         .on('person')\n     *         .columns(['first_name', 'age desc'])\n     *         .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * create index \"person_first_name_and_age_index\" on \"person\" (\"first_name\", \"age\" desc)\n     * ```\n     */\n    columns(columns) {\n        return new CreateIndexBuilder({\n            ...this.#props,\n            node: CreateIndexNode.cloneWithColumns(this.#props.node, columns.map(parseOrderedColumnName)),\n        });\n    }\n    /**\n     * Specifies an arbitrary expression for the index.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import {sql } from 'kysely'\n     *\n     * await db.schema\n     *   .createIndex('person_first_name_index')\n     *   .on('person')\n     *   .expression(sql`first_name COLLATE \"fi_FI\"`)\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * create index \"person_first_name_index\" on \"person\" (first_name COLLATE \"fi_FI\")\n     * ```\n     */\n    expression(expression) {\n        return new CreateIndexBuilder({\n            ...this.#props,\n            node: CreateIndexNode.cloneWithColumns(this.#props.node, [\n                expression.toOperationNode(),\n            ]),\n        });\n    }\n    using(indexType) {\n        return new CreateIndexBuilder({\n            ...this.#props,\n            node: CreateIndexNode.cloneWith(this.#props.node, {\n                using: RawNode.createWithSql(indexType),\n            }),\n        });\n    }\n    where(...args) {\n        const transformer = new ImmediateValueTransformer();\n        return new CreateIndexBuilder({\n            ...this.#props,\n            node: QueryNode.cloneWithWhere(this.#props.node, transformer.transformNode(parseValueBinaryOperationOrExpression(args), this.#props.queryId)),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile());\n    }\n}\n", "/// <reference types=\"./create-schema-builder.d.ts\" />\nimport { CreateSchemaNode } from '../operation-node/create-schema-node.js';\nimport { freeze } from '../util/object-utils.js';\nexport class CreateSchemaBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    ifNotExists() {\n        return new CreateSchemaBuilder({\n            ...this.#props,\n            node: CreateSchemaNode.cloneWith(this.#props.node, { ifNotExists: true }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile());\n    }\n}\n", "/// <reference types=\"./on-commit-action-parse.d.ts\" />\nimport { ON_COMMIT_ACTIONS, } from '../operation-node/create-table-node.js';\nexport function parseOnCommitAction(action) {\n    if (ON_COMMIT_ACTIONS.includes(action)) {\n        return action;\n    }\n    throw new Error(`invalid OnCommitAction ${action}`);\n}\n", "/// <reference types=\"./create-table-builder.d.ts\" />\nimport { ColumnDefinitionNode } from '../operation-node/column-definition-node.js';\nimport { CreateTableNode, } from '../operation-node/create-table-node.js';\nimport { ColumnDefinitionBuilder } from './column-definition-builder.js';\nimport { freeze, noop } from '../util/object-utils.js';\nimport { ForeignKeyConstraintNode } from '../operation-node/foreign-key-constraint-node.js';\nimport { ColumnNode } from '../operation-node/column-node.js';\nimport { ForeignKeyConstraintBuilder, } from './foreign-key-constraint-builder.js';\nimport { parseDataTypeExpression, } from '../parser/data-type-parser.js';\nimport { PrimaryKeyConstraintNode } from '../operation-node/primary-key-constraint-node.js';\nimport { UniqueConstraintNode } from '../operation-node/unique-constraint-node.js';\nimport { CheckConstraintNode } from '../operation-node/check-constraint-node.js';\nimport { parseTable } from '../parser/table-parser.js';\nimport { parseOnCommitAction } from '../parser/on-commit-action-parse.js';\nimport { UniqueConstraintNodeBuilder, } from './unique-constraint-builder.js';\nimport { parseExpression } from '../parser/expression-parser.js';\nimport { PrimaryKeyConstraintBuilder, } from './primary-key-constraint-builder.js';\nimport { CheckConstraintBuilder, } from './check-constraint-builder.js';\n/**\n * This builder can be used to create a `create table` query.\n */\nexport class CreateTableBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Adds the \"temporary\" modifier.\n     *\n     * Use this to create a temporary table.\n     */\n    temporary() {\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWith(this.#props.node, {\n                temporary: true,\n            }),\n        });\n    }\n    /**\n     * Adds an \"on commit\" statement.\n     *\n     * This can be used in conjunction with temporary tables on supported databases\n     * like PostgreSQL.\n     */\n    onCommit(onCommit) {\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWith(this.#props.node, {\n                onCommit: parseOnCommitAction(onCommit),\n            }),\n        });\n    }\n    /**\n     * Adds the \"if not exists\" modifier.\n     *\n     * If the table already exists, no error is thrown if this method has been called.\n     */\n    ifNotExists() {\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWith(this.#props.node, {\n                ifNotExists: true,\n            }),\n        });\n    }\n    /**\n     * Adds a column to the table.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import {sql } from 'kysely'\n     *\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('id', 'integer', (col) => col.autoIncrement().primaryKey())\n     *   .addColumn('first_name', 'varchar(50)', (col) => col.notNull())\n     *   .addColumn('last_name', 'varchar(255)')\n     *   .addColumn('bank_balance', 'numeric(8, 2)')\n     *   // You can specify any data type using the `sql` tag if the types\n     *   // don't include it.\n     *   .addColumn('data', sql`any_type_here`)\n     *   .addColumn('parent_id', 'integer', (col) =>\n     *     col.references('person.id').onDelete('cascade')\n     *   )\n     * ```\n     *\n     * With this method, it's once again good to remember that Kysely just builds the\n     * query and doesn't provide the same API for all databases. For example, some\n     * databases like older MySQL don't support the `references` statement in the\n     * column definition. Instead foreign key constraints need to be defined in the\n     * `create table` query. See the next example:\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('id', 'integer', (col) => col.primaryKey())\n     *   .addColumn('parent_id', 'integer')\n     *   .addForeignKeyConstraint(\n     *     'person_parent_id_fk',\n     *     ['parent_id'],\n     *     'person',\n     *     ['id'],\n     *     (cb) => cb.onDelete('cascade')\n     *   )\n     *   .execute()\n     * ```\n     *\n     * Another good example is that PostgreSQL doesn't support the `auto_increment`\n     * keyword and you need to define an autoincrementing column for example using\n     * `serial`:\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('id', 'serial', (col) => col.primaryKey())\n     *   .execute()\n     * ```\n     */\n    addColumn(columnName, dataType, build = noop) {\n        const columnBuilder = build(new ColumnDefinitionBuilder(ColumnDefinitionNode.create(columnName, parseDataTypeExpression(dataType))));\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWithColumn(this.#props.node, columnBuilder.toOperationNode()),\n        });\n    }\n    /**\n     * Adds a primary key constraint for one or more columns.\n     *\n     * The constraint name can be anything you want, but it must be unique\n     * across the whole database.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('first_name', 'varchar(64)')\n     *   .addColumn('last_name', 'varchar(64)')\n     *   .addPrimaryKeyConstraint('primary_key', ['first_name', 'last_name'])\n     *   .execute()\n     * ```\n     */\n    addPrimaryKeyConstraint(constraintName, columns, build = noop) {\n        const constraintBuilder = build(new PrimaryKeyConstraintBuilder(PrimaryKeyConstraintNode.create(columns, constraintName)));\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWithConstraint(this.#props.node, constraintBuilder.toOperationNode()),\n        });\n    }\n    /**\n     * Adds a unique constraint for one or more columns.\n     *\n     * The constraint name can be anything you want, but it must be unique\n     * across the whole database.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('first_name', 'varchar(64)')\n     *   .addColumn('last_name', 'varchar(64)')\n     *   .addUniqueConstraint(\n     *     'first_name_last_name_unique',\n     *     ['first_name', 'last_name']\n     *   )\n     *   .execute()\n     * ```\n     *\n     * In dialects such as PostgreSQL you can specify `nulls not distinct` as follows:\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('first_name', 'varchar(64)')\n     *   .addColumn('last_name', 'varchar(64)')\n     *   .addUniqueConstraint(\n     *     'first_name_last_name_unique',\n     *     ['first_name', 'last_name'],\n     *     (cb) => cb.nullsNotDistinct()\n     *   )\n     *   .execute()\n     * ```\n     */\n    addUniqueConstraint(constraintName, columns, build = noop) {\n        const uniqueConstraintBuilder = build(new UniqueConstraintNodeBuilder(UniqueConstraintNode.create(columns, constraintName)));\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWithConstraint(this.#props.node, uniqueConstraintBuilder.toOperationNode()),\n        });\n    }\n    /**\n     * Adds a check constraint.\n     *\n     * The constraint name can be anything you want, but it must be unique\n     * across the whole database.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import {sql } from 'kysely'\n     *\n     * await db.schema\n     *   .createTable('animal')\n     *   .addColumn('number_of_legs', 'integer')\n     *   .addCheckConstraint('check_legs', sql`number_of_legs < 5`)\n     *   .execute()\n     * ```\n     */\n    addCheckConstraint(constraintName, checkExpression, build = noop) {\n        const constraintBuilder = build(new CheckConstraintBuilder(CheckConstraintNode.create(checkExpression.toOperationNode(), constraintName)));\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWithConstraint(this.#props.node, constraintBuilder.toOperationNode()),\n        });\n    }\n    /**\n     * Adds a foreign key constraint.\n     *\n     * The constraint name can be anything you want, but it must be unique\n     * across the whole database.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('pet')\n     *   .addColumn('owner_id', 'integer')\n     *   .addForeignKeyConstraint(\n     *     'owner_id_foreign',\n     *     ['owner_id'],\n     *     'person',\n     *     ['id'],\n     *   )\n     *   .execute()\n     * ```\n     *\n     * Add constraint for multiple columns:\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('pet')\n     *   .addColumn('owner_id1', 'integer')\n     *   .addColumn('owner_id2', 'integer')\n     *   .addForeignKeyConstraint(\n     *     'owner_id_foreign',\n     *     ['owner_id1', 'owner_id2'],\n     *     'person',\n     *     ['id1', 'id2'],\n     *     (cb) => cb.onDelete('cascade')\n     *   )\n     *   .execute()\n     * ```\n     */\n    addForeignKeyConstraint(constraintName, columns, targetTable, targetColumns, build = noop) {\n        const builder = build(new ForeignKeyConstraintBuilder(ForeignKeyConstraintNode.create(columns.map(ColumnNode.create), parseTable(targetTable), targetColumns.map(ColumnNode.create), constraintName)));\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWithConstraint(this.#props.node, builder.toOperationNode()),\n        });\n    }\n    /**\n     * This can be used to add any additional SQL to the front of the query __after__ the `create` keyword.\n     *\n     * Also see {@link temporary}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * await db.schema\n     *   .createTable('person')\n     *   .modifyFront(sql`global temporary`)\n     *   .addColumn('id', 'integer', col => col.primaryKey())\n     *   .addColumn('first_name', 'varchar(64)', col => col.notNull())\n     *   .addColumn('last_name', 'varchar(64)', col => col.notNull())\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (Postgres):\n     *\n     * ```sql\n     * create global temporary table \"person\" (\n     *   \"id\" integer primary key,\n     *   \"first_name\" varchar(64) not null,\n     *   \"last_name\" varchar(64) not null\n     * )\n     * ```\n     */\n    modifyFront(modifier) {\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWithFrontModifier(this.#props.node, modifier.toOperationNode()),\n        });\n    }\n    /**\n     * This can be used to add any additional SQL to the end of the query.\n     *\n     * Also see {@link onCommit}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { sql } from 'kysely'\n     *\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('id', 'integer', col => col.primaryKey())\n     *   .addColumn('first_name', 'varchar(64)', col => col.notNull())\n     *   .addColumn('last_name', 'varchar(64)', col => col.notNull())\n     *   .modifyEnd(sql`collate utf8_unicode_ci`)\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (MySQL):\n     *\n     * ```sql\n     * create table `person` (\n     *   `id` integer primary key,\n     *   `first_name` varchar(64) not null,\n     *   `last_name` varchar(64) not null\n     * ) collate utf8_unicode_ci\n     * ```\n     */\n    modifyEnd(modifier) {\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWithEndModifier(this.#props.node, modifier.toOperationNode()),\n        });\n    }\n    /**\n     * Allows to create table from `select` query.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('copy')\n     *   .temporary()\n     *   .as(db.selectFrom('person').select(['first_name', 'last_name']))\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * create temporary table \"copy\" as\n     * select \"first_name\", \"last_name\" from \"person\"\n     * ```\n     */\n    as(expression) {\n        return new CreateTableBuilder({\n            ...this.#props,\n            node: CreateTableNode.cloneWith(this.#props.node, {\n                selectQuery: parseExpression(expression),\n            }),\n        });\n    }\n    /**\n     * Calls the given function passing `this` as the only argument.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('test')\n     *   .$call((builder) => builder.addColumn('id', 'integer'))\n     *   .execute()\n     * ```\n     *\n     * This is useful for creating reusable functions that can be called with a builder.\n     *\n     * ```ts\n     * import { type CreateTableBuilder, sql } from 'kysely'\n     *\n     * const addDefaultColumns = (ctb: CreateTableBuilder<any, any>) => {\n     *   return ctb\n     *     .addColumn('id', 'integer', (col) => col.notNull())\n     *     .addColumn('created_at', 'date', (col) =>\n     *       col.notNull().defaultTo(sql`now()`)\n     *     )\n     *     .addColumn('updated_at', 'date', (col) =>\n     *       col.notNull().defaultTo(sql`now()`)\n     *     )\n     * }\n     *\n     * await db.schema\n     *   .createTable('test')\n     *   .$call(addDefaultColumns)\n     *   .execute()\n     * ```\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile());\n    }\n}\n", "/// <reference types=\"./drop-index-builder.d.ts\" />\nimport { DropIndexNode } from '../operation-node/drop-index-node.js';\nimport { parseTable } from '../parser/table-parser.js';\nimport { freeze } from '../util/object-utils.js';\nexport class DropIndexBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Specifies the table the index was created for. This is not needed\n     * in all dialects.\n     */\n    on(table) {\n        return new DropIndexBuilder({\n            ...this.#props,\n            node: DropIndexNode.cloneWith(this.#props.node, {\n                table: parseTable(table),\n            }),\n        });\n    }\n    ifExists() {\n        return new DropIndexBuilder({\n            ...this.#props,\n            node: DropIndexNode.cloneWith(this.#props.node, {\n                ifExists: true,\n            }),\n        });\n    }\n    cascade() {\n        return new DropIndexBuilder({\n            ...this.#props,\n            node: DropIndexNode.cloneWith(this.#props.node, {\n                cascade: true,\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile());\n    }\n}\n", "/// <reference types=\"./drop-schema-builder.d.ts\" />\nimport { DropSchemaNode } from '../operation-node/drop-schema-node.js';\nimport { freeze } from '../util/object-utils.js';\nexport class DropSchemaBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    ifExists() {\n        return new DropSchemaBuilder({\n            ...this.#props,\n            node: DropSchemaNode.cloneWith(this.#props.node, {\n                ifExists: true,\n            }),\n        });\n    }\n    cascade() {\n        return new DropSchemaBuilder({\n            ...this.#props,\n            node: DropSchemaNode.cloneWith(this.#props.node, {\n                cascade: true,\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile());\n    }\n}\n", "/// <reference types=\"./drop-table-builder.d.ts\" />\nimport { DropTableNode } from '../operation-node/drop-table-node.js';\nimport { freeze } from '../util/object-utils.js';\nexport class DropTableBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    ifExists() {\n        return new DropTableBuilder({\n            ...this.#props,\n            node: DropTableNode.cloneWith(this.#props.node, {\n                ifExists: true,\n            }),\n        });\n    }\n    cascade() {\n        return new DropTableBuilder({\n            ...this.#props,\n            node: DropTableNode.cloneWith(this.#props.node, {\n                cascade: true,\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile());\n    }\n}\n", "/// <reference types=\"./create-view-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { SchemableIdentifierNode } from './schemable-identifier-node.js';\n/**\n * @internal\n */\nexport const CreateViewNode = freeze({\n    is(node) {\n        return node.kind === 'CreateViewNode';\n    },\n    create(name) {\n        return freeze({\n            kind: 'CreateViewNode',\n            name: SchemableIdentifierNode.create(name),\n        });\n    },\n    cloneWith(createView, params) {\n        return freeze({\n            ...createView,\n            ...params,\n        });\n    },\n});\n", "/// <reference types=\"./immediate-value-plugin.d.ts\" />\nimport { ImmediateValueTransformer } from './immediate-value-transformer.js';\n/**\n * Transforms all ValueNodes to immediate.\n *\n * WARNING! This should never be part of the public API. Users should never use this.\n * This is an internal helper.\n *\n * @internal\n */\nexport class ImmediateValuePlugin {\n    #transformer = new ImmediateValueTransformer();\n    transformQuery(args) {\n        return this.#transformer.transformNode(args.node, args.queryId);\n    }\n    transformResult(args) {\n        return Promise.resolve(args.result);\n    }\n}\n", "/// <reference types=\"./create-view-builder.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { CreateViewNode } from '../operation-node/create-view-node.js';\nimport { parseColumnName } from '../parser/reference-parser.js';\nimport { ImmediateValuePlugin } from '../plugin/immediate-value/immediate-value-plugin.js';\nexport class CreateViewBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Adds the \"temporary\" modifier.\n     *\n     * Use this to create a temporary view.\n     */\n    temporary() {\n        return new CreateViewBuilder({\n            ...this.#props,\n            node: CreateViewNode.cloneWith(this.#props.node, {\n                temporary: true,\n            }),\n        });\n    }\n    materialized() {\n        return new CreateViewBuilder({\n            ...this.#props,\n            node: CreateViewNode.cloneWith(this.#props.node, {\n                materialized: true,\n            }),\n        });\n    }\n    /**\n     * Only implemented on some dialects like SQLite. On most dialects, use {@link orReplace}.\n     */\n    ifNotExists() {\n        return new CreateViewBuilder({\n            ...this.#props,\n            node: CreateViewNode.cloneWith(this.#props.node, {\n                ifNotExists: true,\n            }),\n        });\n    }\n    orReplace() {\n        return new CreateViewBuilder({\n            ...this.#props,\n            node: CreateViewNode.cloneWith(this.#props.node, {\n                orReplace: true,\n            }),\n        });\n    }\n    columns(columns) {\n        return new CreateViewBuilder({\n            ...this.#props,\n            node: CreateViewNode.cloneWith(this.#props.node, {\n                columns: columns.map(parseColumnName),\n            }),\n        });\n    }\n    /**\n     * Sets the select query or a `values` statement that creates the view.\n     *\n     * WARNING!\n     * Some dialects don't support parameterized queries in DDL statements and therefore\n     * the query or raw {@link sql } expression passed here is interpolated into a single\n     * string opening an SQL injection vulnerability. DO NOT pass unchecked user input\n     * into the query or raw expression passed to this method!\n     */\n    as(query) {\n        const queryNode = query\n            .withPlugin(new ImmediateValuePlugin())\n            .toOperationNode();\n        return new CreateViewBuilder({\n            ...this.#props,\n            node: CreateViewNode.cloneWith(this.#props.node, {\n                as: queryNode,\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile());\n    }\n}\n", "/// <reference types=\"./drop-view-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { SchemableIdentifierNode } from './schemable-identifier-node.js';\n/**\n * @internal\n */\nexport const DropViewNode = freeze({\n    is(node) {\n        return node.kind === 'DropViewNode';\n    },\n    create(name) {\n        return freeze({\n            kind: 'DropViewNode',\n            name: SchemableIdentifierNode.create(name),\n        });\n    },\n    cloneWith(dropView, params) {\n        return freeze({\n            ...dropView,\n            ...params,\n        });\n    },\n});\n", "/// <reference types=\"./drop-view-builder.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { DropViewNode } from '../operation-node/drop-view-node.js';\nexport class DropViewBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    materialized() {\n        return new DropViewBuilder({\n            ...this.#props,\n            node: DropViewNode.cloneWith(this.#props.node, {\n                materialized: true,\n            }),\n        });\n    }\n    ifExists() {\n        return new DropViewBuilder({\n            ...this.#props,\n            node: DropViewNode.cloneWith(this.#props.node, {\n                ifExists: true,\n            }),\n        });\n    }\n    cascade() {\n        return new DropViewBuilder({\n            ...this.#props,\n            node: DropViewNode.cloneWith(this.#props.node, {\n                cascade: true,\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile());\n    }\n}\n", "/// <reference types=\"./create-type-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { ValueListNode } from './value-list-node.js';\nimport { ValueNode } from './value-node.js';\n/**\n * @internal\n */\nexport const CreateTypeNode = freeze({\n    is(node) {\n        return node.kind === 'CreateTypeNode';\n    },\n    create(name) {\n        return freeze({\n            kind: 'CreateTypeNode',\n            name,\n        });\n    },\n    cloneWithEnum(createType, values) {\n        return freeze({\n            ...createType,\n            enum: ValueListNode.create(values.map(ValueNode.createImmediate)),\n        });\n    },\n});\n", "/// <reference types=\"./create-type-builder.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { CreateTypeNode } from '../operation-node/create-type-node.js';\nexport class CreateTypeBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    /**\n     * Creates an anum type.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * db.schema.createType('species').asEnum(['cat', 'dog', 'frog'])\n     * ```\n     */\n    asEnum(values) {\n        return new CreateTypeBuilder({\n            ...this.#props,\n            node: CreateTypeNode.cloneWithEnum(this.#props.node, values),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile());\n    }\n}\n", "/// <reference types=\"./drop-type-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\n/**\n * @internal\n */\nexport const DropTypeNode = freeze({\n    is(node) {\n        return node.kind === 'DropTypeNode';\n    },\n    create(name) {\n        return freeze({\n            kind: 'DropTypeNode',\n            name,\n        });\n    },\n    cloneWith(dropType, params) {\n        return freeze({\n            ...dropType,\n            ...params,\n        });\n    },\n});\n", "/// <reference types=\"./drop-type-builder.d.ts\" />\nimport { DropTypeNode } from '../operation-node/drop-type-node.js';\nimport { freeze } from '../util/object-utils.js';\nexport class DropTypeBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    ifExists() {\n        return new DropTypeBuilder({\n            ...this.#props,\n            node: DropTypeNode.cloneWith(this.#props.node, {\n                ifExists: true,\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile());\n    }\n}\n", "/// <reference types=\"./identifier-parser.d.ts\" />\nimport { SchemableIdentifierNode } from '../operation-node/schemable-identifier-node.js';\nexport function parseSchemableIdentifier(id) {\n    const SCHEMA_SEPARATOR = '.';\n    if (id.includes(SCHEMA_SEPARATOR)) {\n        const parts = id.split(SCHEMA_SEPARATOR).map(trim);\n        if (parts.length === 2) {\n            return SchemableIdentifierNode.createWithSchema(parts[0], parts[1]);\n        }\n        else {\n            throw new Error(`invalid schemable identifier ${id}`);\n        }\n    }\n    else {\n        return SchemableIdentifierNode.create(id);\n    }\n}\nfunction trim(str) {\n    return str.trim();\n}\n", "/// <reference types=\"./refresh-materialized-view-node.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { SchemableIdentifierNode } from './schemable-identifier-node.js';\n/**\n * @internal\n */\nexport const RefreshMaterializedViewNode = freeze({\n    is(node) {\n        return node.kind === 'RefreshMaterializedViewNode';\n    },\n    create(name) {\n        return freeze({\n            kind: 'RefreshMaterializedViewNode',\n            name: SchemableIdentifierNode.create(name),\n        });\n    },\n    cloneWith(createView, params) {\n        return freeze({\n            ...createView,\n            ...params,\n        });\n    },\n});\n", "/// <reference types=\"./refresh-materialized-view-builder.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nimport { RefreshMaterializedViewNode } from '../operation-node/refresh-materialized-view-node.js';\nexport class RefreshMaterializedViewBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Adds the \"concurrently\" modifier.\n     *\n     * Use this to refresh the view without locking out concurrent selects on the materialized view.\n     *\n     * WARNING!\n     * This cannot be used with the \"with no data\" modifier.\n     */\n    concurrently() {\n        return new RefreshMaterializedViewBuilder({\n            ...this.#props,\n            node: RefreshMaterializedViewNode.cloneWith(this.#props.node, {\n                concurrently: true,\n                withNoData: false,\n            }),\n        });\n    }\n    /**\n     * Adds the \"with data\" modifier.\n     *\n     * If specified (or defaults) the backing query is executed to provide the new data, and the materialized view is left in a scannable state\n     */\n    withData() {\n        return new RefreshMaterializedViewBuilder({\n            ...this.#props,\n            node: RefreshMaterializedViewNode.cloneWith(this.#props.node, {\n                withNoData: false,\n            }),\n        });\n    }\n    /**\n     * Adds the \"with no data\" modifier.\n     *\n     * If specified, no new data is generated and the materialized view is left in an unscannable state.\n     *\n     * WARNING!\n     * This cannot be used with the \"concurrently\" modifier.\n     */\n    withNoData() {\n        return new RefreshMaterializedViewBuilder({\n            ...this.#props,\n            node: RefreshMaterializedViewNode.cloneWith(this.#props.node, {\n                withNoData: true,\n                concurrently: false,\n            }),\n        });\n    }\n    /**\n     * Simply calls the provided function passing `this` as the only argument. `$call` returns\n     * what the provided function returns.\n     */\n    $call(func) {\n        return func(this);\n    }\n    toOperationNode() {\n        return this.#props.executor.transformQuery(this.#props.node, this.#props.queryId);\n    }\n    compile() {\n        return this.#props.executor.compileQuery(this.toOperationNode(), this.#props.queryId);\n    }\n    async execute() {\n        await this.#props.executor.executeQuery(this.compile());\n    }\n}\n", "/// <reference types=\"./schema.d.ts\" />\nimport { AlterTableNode } from '../operation-node/alter-table-node.js';\nimport { CreateIndexNode } from '../operation-node/create-index-node.js';\nimport { CreateSchemaNode } from '../operation-node/create-schema-node.js';\nimport { CreateTableNode } from '../operation-node/create-table-node.js';\nimport { DropIndexNode } from '../operation-node/drop-index-node.js';\nimport { DropSchemaNode } from '../operation-node/drop-schema-node.js';\nimport { DropTableNode } from '../operation-node/drop-table-node.js';\nimport { parseTable } from '../parser/table-parser.js';\nimport { AlterTableBuilder } from './alter-table-builder.js';\nimport { CreateIndexBuilder } from './create-index-builder.js';\nimport { CreateSchemaBuilder } from './create-schema-builder.js';\nimport { CreateTableBuilder } from './create-table-builder.js';\nimport { DropIndexBuilder } from './drop-index-builder.js';\nimport { DropSchemaBuilder } from './drop-schema-builder.js';\nimport { DropTableBuilder } from './drop-table-builder.js';\nimport { createQueryId } from '../util/query-id.js';\nimport { WithSchemaPlugin } from '../plugin/with-schema/with-schema-plugin.js';\nimport { CreateViewBuilder } from './create-view-builder.js';\nimport { CreateViewNode } from '../operation-node/create-view-node.js';\nimport { DropViewBuilder } from './drop-view-builder.js';\nimport { DropViewNode } from '../operation-node/drop-view-node.js';\nimport { CreateTypeBuilder } from './create-type-builder.js';\nimport { DropTypeBuilder } from './drop-type-builder.js';\nimport { CreateTypeNode } from '../operation-node/create-type-node.js';\nimport { DropTypeNode } from '../operation-node/drop-type-node.js';\nimport { parseSchemableIdentifier } from '../parser/identifier-parser.js';\nimport { RefreshMaterializedViewBuilder } from './refresh-materialized-view-builder.js';\nimport { RefreshMaterializedViewNode } from '../operation-node/refresh-materialized-view-node.js';\n/**\n * Provides methods for building database schema.\n */\nexport class SchemaModule {\n    #executor;\n    constructor(executor) {\n        this.#executor = executor;\n    }\n    /**\n     * Create a new table.\n     *\n     * ### Examples\n     *\n     * This example creates a new table with columns `id`, `first_name`,\n     * `last_name` and `gender`:\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('person')\n     *   .addColumn('id', 'integer', col => col.primaryKey().autoIncrement())\n     *   .addColumn('first_name', 'varchar', col => col.notNull())\n     *   .addColumn('last_name', 'varchar', col => col.notNull())\n     *   .addColumn('gender', 'varchar')\n     *   .execute()\n     * ```\n     *\n     * This example creates a table with a foreign key. Not all database\n     * engines support column-level foreign key constraint definitions.\n     * For example if you are using MySQL 5.X see the next example after\n     * this one.\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('pet')\n     *   .addColumn('id', 'integer', col => col.primaryKey().autoIncrement())\n     *   .addColumn('owner_id', 'integer', col => col\n     *     .references('person.id')\n     *     .onDelete('cascade')\n     *   )\n     *   .execute()\n     * ```\n     *\n     * This example adds a foreign key constraint for a columns just\n     * like the previous example, but using a table-level statement.\n     * On MySQL 5.X you need to define foreign key constraints like\n     * this:\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('pet')\n     *   .addColumn('id', 'integer', col => col.primaryKey().autoIncrement())\n     *   .addColumn('owner_id', 'integer')\n     *   .addForeignKeyConstraint(\n     *     'pet_owner_id_foreign', ['owner_id'], 'person', ['id'],\n     *     (constraint) => constraint.onDelete('cascade')\n     *   )\n     *   .execute()\n     * ```\n     */\n    createTable(table) {\n        return new CreateTableBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: CreateTableNode.create(parseTable(table)),\n        });\n    }\n    /**\n     * Drop a table.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .dropTable('person')\n     *   .execute()\n     * ```\n     */\n    dropTable(table) {\n        return new DropTableBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: DropTableNode.create(parseTable(table)),\n        });\n    }\n    /**\n     * Create a new index.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createIndex('person_full_name_unique_index')\n     *   .on('person')\n     *   .columns(['first_name', 'last_name'])\n     *   .execute()\n     * ```\n     */\n    createIndex(indexName) {\n        return new CreateIndexBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: CreateIndexNode.create(indexName),\n        });\n    }\n    /**\n     * Drop an index.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .dropIndex('person_full_name_unique_index')\n     *   .execute()\n     * ```\n     */\n    dropIndex(indexName) {\n        return new DropIndexBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: DropIndexNode.create(indexName),\n        });\n    }\n    /**\n     * Create a new schema.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createSchema('some_schema')\n     *   .execute()\n     * ```\n     */\n    createSchema(schema) {\n        return new CreateSchemaBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: CreateSchemaNode.create(schema),\n        });\n    }\n    /**\n     * Drop a schema.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .dropSchema('some_schema')\n     *   .execute()\n     * ```\n     */\n    dropSchema(schema) {\n        return new DropSchemaBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: DropSchemaNode.create(schema),\n        });\n    }\n    /**\n     * Alter a table.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .alterTable('person')\n     *   .alterColumn('first_name', (ac) => ac.setDataType('text'))\n     *   .execute()\n     * ```\n     */\n    alterTable(table) {\n        return new AlterTableBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: AlterTableNode.create(parseTable(table)),\n        });\n    }\n    /**\n     * Create a new view.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createView('dogs')\n     *   .orReplace()\n     *   .as(db.selectFrom('pet').selectAll().where('species', '=', 'dog'))\n     *   .execute()\n     * ```\n     */\n    createView(viewName) {\n        return new CreateViewBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: CreateViewNode.create(viewName),\n        });\n    }\n    /**\n     * Refresh a materialized view.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .refreshMaterializedView('my_view')\n     *   .concurrently()\n     *   .execute()\n     * ```\n     */\n    refreshMaterializedView(viewName) {\n        return new RefreshMaterializedViewBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: RefreshMaterializedViewNode.create(viewName),\n        });\n    }\n    /**\n     * Drop a view.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .dropView('dogs')\n     *   .ifExists()\n     *   .execute()\n     * ```\n     */\n    dropView(viewName) {\n        return new DropViewBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: DropViewNode.create(viewName),\n        });\n    }\n    /**\n     * Create a new type.\n     *\n     * Only some dialects like PostgreSQL have user-defined types.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .createType('species')\n     *   .asEnum(['dog', 'cat', 'frog'])\n     *   .execute()\n     * ```\n     */\n    createType(typeName) {\n        return new CreateTypeBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: CreateTypeNode.create(parseSchemableIdentifier(typeName)),\n        });\n    }\n    /**\n     * Drop a type.\n     *\n     * Only some dialects like PostgreSQL have user-defined types.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db.schema\n     *   .dropType('species')\n     *   .ifExists()\n     *   .execute()\n     * ```\n     */\n    dropType(typeName) {\n        return new DropTypeBuilder({\n            queryId: createQueryId(),\n            executor: this.#executor,\n            node: DropTypeNode.create(parseSchemableIdentifier(typeName)),\n        });\n    }\n    /**\n     * Returns a copy of this schema module with the given plugin installed.\n     */\n    withPlugin(plugin) {\n        return new SchemaModule(this.#executor.withPlugin(plugin));\n    }\n    /**\n     * Returns a copy of this schema module  without any plugins.\n     */\n    withoutPlugins() {\n        return new SchemaModule(this.#executor.withoutPlugins());\n    }\n    /**\n     * See {@link QueryCreator.withSchema}\n     */\n    withSchema(schema) {\n        return new SchemaModule(this.#executor.withPluginAtFront(new WithSchemaPlugin(schema)));\n    }\n}\n", "/// <reference types=\"./dynamic.d.ts\" />\nimport { DynamicReferenceBuilder } from './dynamic-reference-builder.js';\nimport { DynamicTableBuilder } from './dynamic-table-builder.js';\nexport class DynamicModule {\n    /**\n     * Creates a dynamic reference to a column that is not know at compile time.\n     *\n     * Kysely is built in a way that by default you can't refer to tables or columns\n     * that are not actually visible in the current query and context. This is all\n     * done by TypeScript at compile time, which means that you need to know the\n     * columns and tables at compile time. This is not always the case of course.\n     *\n     * This method is meant to be used in those cases where the column names\n     * come from the user input or are not otherwise known at compile time.\n     *\n     * WARNING! Unlike values, column names are not escaped by the database engine\n     * or Kysely and if you pass in unchecked column names using this method, you\n     * create an SQL injection vulnerability. Always __always__ validate the user\n     * input before passing it to this method.\n     *\n     * There are couple of examples below for some use cases, but you can pass\n     * `ref` to other methods as well. If the types allow you to pass a `ref`\n     * value to some place, it should work.\n     *\n     * ### Examples\n     *\n     * Filter by a column not know at compile time:\n     *\n     * ```ts\n     * async function someQuery(filterColumn: string, filterValue: string) {\n     *   const { ref } = db.dynamic\n     *\n     *   return await db\n     *     .selectFrom('person')\n     *     .selectAll()\n     *     .where(ref(filterColumn), '=', filterValue)\n     *     .execute()\n     * }\n     *\n     * someQuery('first_name', 'Arnold')\n     * someQuery('person.last_name', 'Aniston')\n     * ```\n     *\n     * Order by a column not know at compile time:\n     *\n     * ```ts\n     * async function someQuery(orderBy: string) {\n     *   const { ref } = db.dynamic\n     *\n     *   return await db\n     *     .selectFrom('person')\n     *     .select('person.first_name as fn')\n     *     .orderBy(ref(orderBy))\n     *     .execute()\n     * }\n     *\n     * someQuery('fn')\n     * ```\n     *\n     * In this example we add selections dynamically:\n     *\n     * ```ts\n     * const { ref } = db.dynamic\n     *\n     * // Some column name provided by the user. Value not known at compile time.\n     * const columnFromUserInput: PossibleColumns = 'birthdate';\n     *\n     * // A type that lists all possible values `columnFromUserInput` can have.\n     * // You can use `keyof Person` if any column of an interface is allowed.\n     * type PossibleColumns = 'last_name' | 'first_name' | 'birthdate'\n     *\n     * const [person] = await db.selectFrom('person')\n     *   .select([\n     *     ref<PossibleColumns>(columnFromUserInput),\n     *     'id'\n     *   ])\n     *   .execute()\n     *\n     * // The resulting type contains all `PossibleColumns` as optional fields\n     * // because we cannot know which field was actually selected before\n     * // running the code.\n     * const lastName: string | null | undefined = person?.last_name\n     * const firstName: string | undefined = person?.first_name\n     * const birthDate: Date | null | undefined = person?.birthdate\n     *\n     * // The result type also contains the compile time selection `id`.\n     * person?.id\n     * ```\n     */\n    ref(reference) {\n        return new DynamicReferenceBuilder(reference);\n    }\n    /**\n     * Creates a table reference to a table that's not fully known at compile time.\n     *\n     * The type `T` is allowed to be a union of multiple tables.\n     *\n     * <!-- siteExample(\"select\", \"Generic find query\", 130) -->\n     *\n     * A generic type-safe helper function for finding a row by a column value:\n     *\n     * ```ts\n     * import { SelectType } from 'kysely'\n     * import { Database } from 'type-editor'\n     *\n     * async function getRowByColumn<\n     *   T extends keyof Database,\n     *   C extends keyof Database[T] & string,\n     *   V extends SelectType<Database[T][C]>,\n     * >(t: T, c: C, v: V) {\n     *   // We need to use the dynamic module since the table name\n     *   // is not known at compile time.\n     *   const { table, ref } = db.dynamic\n     *\n     *   return await db\n     *     .selectFrom(table(t).as('t'))\n     *     .selectAll()\n     *     .where(ref(c), '=', v)\n     *     .orderBy('t.id')\n     *     .executeTakeFirstOrThrow()\n     * }\n     *\n     * const person = await getRowByColumn('person', 'first_name', 'Arnold')\n     * ```\n     */\n    table(table) {\n        return new DynamicTableBuilder(table);\n    }\n}\n", "/// <reference types=\"./default-connection-provider.d.ts\" />\nexport class DefaultConnectionProvider {\n    #driver;\n    constructor(driver) {\n        this.#driver = driver;\n    }\n    async provideConnection(consumer) {\n        const connection = await this.#driver.acquireConnection();\n        try {\n            return await consumer(connection);\n        }\n        finally {\n            await this.#driver.releaseConnection(connection);\n        }\n    }\n}\n", "/// <reference types=\"./default-query-executor.d.ts\" />\nimport { QueryExecutorBase } from './query-executor-base.js';\nexport class DefaultQueryExecutor extends QueryExecutorBase {\n    #compiler;\n    #adapter;\n    #connectionProvider;\n    constructor(compiler, adapter, connectionProvider, plugins = []) {\n        super(plugins);\n        this.#compiler = compiler;\n        this.#adapter = adapter;\n        this.#connectionProvider = connectionProvider;\n    }\n    get adapter() {\n        return this.#adapter;\n    }\n    compileQuery(node, queryId) {\n        return this.#compiler.compileQuery(node, queryId);\n    }\n    provideConnection(consumer) {\n        return this.#connectionProvider.provideConnection(consumer);\n    }\n    withPlugins(plugins) {\n        return new DefaultQueryExecutor(this.#compiler, this.#adapter, this.#connectionProvider, [...this.plugins, ...plugins]);\n    }\n    withPlugin(plugin) {\n        return new DefaultQueryExecutor(this.#compiler, this.#adapter, this.#connectionProvider, [...this.plugins, plugin]);\n    }\n    withPluginAtFront(plugin) {\n        return new DefaultQueryExecutor(this.#compiler, this.#adapter, this.#connectionProvider, [plugin, ...this.plugins]);\n    }\n    withConnectionProvider(connectionProvider) {\n        return new DefaultQueryExecutor(this.#compiler, this.#adapter, connectionProvider, [...this.plugins]);\n    }\n    withoutPlugins() {\n        return new DefaultQueryExecutor(this.#compiler, this.#adapter, this.#connectionProvider, []);\n    }\n}\n", "/// <reference types=\"./performance-now.d.ts\" />\nimport { isFunction } from './object-utils.js';\nexport function performanceNow() {\n    if (typeof performance !== 'undefined' && isFunction(performance.now)) {\n        return performance.now();\n    }\n    else {\n        return Date.now();\n    }\n}\n", "/// <reference types=\"./runtime-driver.d.ts\" />\nimport { performanceNow } from '../util/performance-now.js';\n/**\n * A small wrapper around {@link Driver} that makes sure the driver is\n * initialized before it is used, only initialized and destroyed\n * once etc.\n */\nexport class RuntimeDriver {\n    #driver;\n    #log;\n    #initPromise;\n    #initDone;\n    #destroyPromise;\n    #connections = new WeakSet();\n    constructor(driver, log) {\n        this.#initDone = false;\n        this.#driver = driver;\n        this.#log = log;\n    }\n    async init() {\n        if (this.#destroyPromise) {\n            throw new Error('driver has already been destroyed');\n        }\n        if (!this.#initPromise) {\n            this.#initPromise = this.#driver\n                .init()\n                .then(() => {\n                this.#initDone = true;\n            })\n                .catch((err) => {\n                this.#initPromise = undefined;\n                return Promise.reject(err);\n            });\n        }\n        await this.#initPromise;\n    }\n    async acquireConnection() {\n        if (this.#destroyPromise) {\n            throw new Error('driver has already been destroyed');\n        }\n        if (!this.#initDone) {\n            await this.init();\n        }\n        const connection = await this.#driver.acquireConnection();\n        if (!this.#connections.has(connection)) {\n            if (this.#needsLogging()) {\n                this.#addLogging(connection);\n            }\n            this.#connections.add(connection);\n        }\n        return connection;\n    }\n    async releaseConnection(connection) {\n        await this.#driver.releaseConnection(connection);\n    }\n    beginTransaction(connection, settings) {\n        return this.#driver.beginTransaction(connection, settings);\n    }\n    commitTransaction(connection) {\n        return this.#driver.commitTransaction(connection);\n    }\n    rollbackTransaction(connection) {\n        return this.#driver.rollbackTransaction(connection);\n    }\n    savepoint(connection, savepointName, compileQuery) {\n        if (this.#driver.savepoint) {\n            return this.#driver.savepoint(connection, savepointName, compileQuery);\n        }\n        throw new Error('The `savepoint` method is not supported by this driver');\n    }\n    rollbackToSavepoint(connection, savepointName, compileQuery) {\n        if (this.#driver.rollbackToSavepoint) {\n            return this.#driver.rollbackToSavepoint(connection, savepointName, compileQuery);\n        }\n        throw new Error('The `rollbackToSavepoint` method is not supported by this driver');\n    }\n    releaseSavepoint(connection, savepointName, compileQuery) {\n        if (this.#driver.releaseSavepoint) {\n            return this.#driver.releaseSavepoint(connection, savepointName, compileQuery);\n        }\n        throw new Error('The `releaseSavepoint` method is not supported by this driver');\n    }\n    async destroy() {\n        if (!this.#initPromise) {\n            return;\n        }\n        await this.#initPromise;\n        if (!this.#destroyPromise) {\n            this.#destroyPromise = this.#driver.destroy().catch((err) => {\n                this.#destroyPromise = undefined;\n                return Promise.reject(err);\n            });\n        }\n        await this.#destroyPromise;\n    }\n    #needsLogging() {\n        return (this.#log.isLevelEnabled('query') || this.#log.isLevelEnabled('error'));\n    }\n    // This method monkey patches the database connection's executeQuery method\n    // by adding logging code around it. Monkey patching is not pretty, but it's\n    // the best option in this case.\n    #addLogging(connection) {\n        const executeQuery = connection.executeQuery;\n        const streamQuery = connection.streamQuery;\n        const dis = this;\n        connection.executeQuery = async (compiledQuery) => {\n            let caughtError;\n            const startTime = performanceNow();\n            try {\n                return await executeQuery.call(connection, compiledQuery);\n            }\n            catch (error) {\n                caughtError = error;\n                await dis.#logError(error, compiledQuery, startTime);\n                throw error;\n            }\n            finally {\n                if (!caughtError) {\n                    await dis.#logQuery(compiledQuery, startTime);\n                }\n            }\n        };\n        connection.streamQuery = async function* (compiledQuery, chunkSize) {\n            let caughtError;\n            const startTime = performanceNow();\n            try {\n                for await (const result of streamQuery.call(connection, compiledQuery, chunkSize)) {\n                    yield result;\n                }\n            }\n            catch (error) {\n                caughtError = error;\n                await dis.#logError(error, compiledQuery, startTime);\n                throw error;\n            }\n            finally {\n                if (!caughtError) {\n                    await dis.#logQuery(compiledQuery, startTime, true);\n                }\n            }\n        };\n    }\n    async #logError(error, compiledQuery, startTime) {\n        await this.#log.error(() => ({\n            level: 'error',\n            error,\n            query: compiledQuery,\n            queryDurationMillis: this.#calculateDurationMillis(startTime),\n        }));\n    }\n    async #logQuery(compiledQuery, startTime, isStream = false) {\n        await this.#log.query(() => ({\n            level: 'query',\n            isStream,\n            query: compiledQuery,\n            queryDurationMillis: this.#calculateDurationMillis(startTime),\n        }));\n    }\n    #calculateDurationMillis(startTime) {\n        return performanceNow() - startTime;\n    }\n}\n", "/// <reference types=\"./single-connection-provider.d.ts\" />\nconst ignoreError = () => { };\nexport class SingleConnectionProvider {\n    #connection;\n    #runningPromise;\n    constructor(connection) {\n        this.#connection = connection;\n    }\n    async provideConnection(consumer) {\n        while (this.#runningPromise) {\n            await this.#runningPromise.catch(ignoreError);\n        }\n        // `#runningPromise` must be set to undefined before it's\n        // resolved or rejected. Otherwise the while loop above\n        // will misbehave.\n        this.#runningPromise = this.#run(consumer).finally(() => {\n            this.#runningPromise = undefined;\n        });\n        return this.#runningPromise;\n    }\n    // Run the runner in an async function to make sure it doesn't\n    // throw synchronous errors.\n    async #run(runner) {\n        return await runner(this.#connection);\n    }\n}\n", "/// <reference types=\"./driver.d.ts\" />\nexport const TRANSACTION_ACCESS_MODES = ['read only', 'read write'];\nexport const TRANSACTION_ISOLATION_LEVELS = [\n    'read uncommitted',\n    'read committed',\n    'repeatable read',\n    'serializable',\n    'snapshot',\n];\nexport function validateTransactionSettings(settings) {\n    if (settings.accessMode &&\n        !TRANSACTION_ACCESS_MODES.includes(settings.accessMode)) {\n        throw new Error(`invalid transaction access mode ${settings.accessMode}`);\n    }\n    if (settings.isolationLevel &&\n        !TRANSACTION_ISOLATION_LEVELS.includes(settings.isolationLevel)) {\n        throw new Error(`invalid transaction isolation level ${settings.isolationLevel}`);\n    }\n}\n", "/// <reference types=\"./log.d.ts\" />\nimport { freeze, isFunction } from './object-utils.js';\nconst logLevels = ['query', 'error'];\nexport const LOG_LEVELS = freeze(logLevels);\nexport class Log {\n    #levels;\n    #logger;\n    constructor(config) {\n        if (isFunction(config)) {\n            this.#logger = config;\n            this.#levels = freeze({\n                query: true,\n                error: true,\n            });\n        }\n        else {\n            this.#logger = defaultLogger;\n            this.#levels = freeze({\n                query: config.includes('query'),\n                error: config.includes('error'),\n            });\n        }\n    }\n    isLevelEnabled(level) {\n        return this.#levels[level];\n    }\n    async query(getEvent) {\n        if (this.#levels.query) {\n            await this.#logger(getEvent());\n        }\n    }\n    async error(getEvent) {\n        if (this.#levels.error) {\n            await this.#logger(getEvent());\n        }\n    }\n}\nfunction defaultLogger(event) {\n    if (event.level === 'query') {\n        const prefix = `kysely:query:${event.isStream ? 'stream:' : ''}`;\n        console.log(`${prefix} ${event.query.sql}`);\n        console.log(`${prefix} duration: ${event.queryDurationMillis.toFixed(1)}ms`);\n    }\n    else if (event.level === 'error') {\n        if (event.error instanceof Error) {\n            console.error(`kysely:error: ${event.error.stack ?? event.error.message}`);\n        }\n        else {\n            console.error(`kysely:error: ${JSON.stringify({\n                error: event.error,\n                query: event.query.sql,\n                queryDurationMillis: event.queryDurationMillis,\n            })}`);\n        }\n    }\n}\n", "/// <reference types=\"./compilable.d.ts\" />\nimport { isFunction, isObject } from './object-utils.js';\nexport function isCompilable(value) {\n    return isObject(value) && isFunction(value.compile);\n}\n", "/// <reference types=\"./kysely.d.ts\" />\nimport { SchemaModule } from './schema/schema.js';\nimport { DynamicModule } from './dynamic/dynamic.js';\nimport { DefaultConnectionProvider } from './driver/default-connection-provider.js';\nimport { QueryCreator } from './query-creator.js';\nimport { DefaultQueryExecutor } from './query-executor/default-query-executor.js';\nimport { freeze, isObject, isUndefined } from './util/object-utils.js';\nimport { RuntimeDriver } from './driver/runtime-driver.js';\nimport { SingleConnectionProvider } from './driver/single-connection-provider.js';\nimport { validateTransactionSettings, } from './driver/driver.js';\nimport { createFunctionModule, } from './query-builder/function-module.js';\nimport { Log } from './util/log.js';\nimport { createQueryId } from './util/query-id.js';\nimport { isCompilable } from './util/compilable.js';\nimport { CaseBuilder } from './query-builder/case-builder.js';\nimport { CaseNode } from './operation-node/case-node.js';\nimport { parseExpression } from './parser/expression-parser.js';\nimport { WithSchemaPlugin } from './plugin/with-schema/with-schema-plugin.js';\nimport { provideControlledConnection, } from './util/provide-controlled-connection.js';\nimport { logOnce } from './util/log-once.js';\n// @ts-ignore\nSymbol.asyncDispose ??= Symbol('Symbol.asyncDispose');\n/**\n * The main Kysely class.\n *\n * You should create one instance of `Kysely` per database using the {@link Kysely}\n * constructor. Each `Kysely` instance maintains its own connection pool.\n *\n * ### Examples\n *\n * This example assumes your database has a \"person\" table:\n *\n * ```ts\n * import * as Sqlite from 'better-sqlite3'\n * import {type Generated, Kysely, SqliteDialect } from 'kysely'\n *\n * interface Database {\n *   person: {\n *     id: Generated<number>\n *     first_name: string\n *     last_name: string | null\n *   }\n * }\n *\n * const db = new Kysely<Database>({\n *   dialect: new SqliteDialect({\n *     database: new Sqlite(':memory:'),\n *   })\n * })\n * ```\n *\n * @typeParam DB - The database interface type. Keys of this type must be table names\n *    in the database and values must be interfaces that describe the rows in those\n *    tables. See the examples above.\n */\nexport class Kysely extends QueryCreator {\n    #props;\n    constructor(args) {\n        let superProps;\n        let props;\n        if (isKyselyProps(args)) {\n            superProps = { executor: args.executor };\n            props = { ...args };\n        }\n        else {\n            const dialect = args.dialect;\n            const driver = dialect.createDriver();\n            const compiler = dialect.createQueryCompiler();\n            const adapter = dialect.createAdapter();\n            const log = new Log(args.log ?? []);\n            const runtimeDriver = new RuntimeDriver(driver, log);\n            const connectionProvider = new DefaultConnectionProvider(runtimeDriver);\n            const executor = new DefaultQueryExecutor(compiler, adapter, connectionProvider, args.plugins ?? []);\n            superProps = { executor };\n            props = {\n                config: args,\n                executor,\n                dialect,\n                driver: runtimeDriver,\n            };\n        }\n        super(superProps);\n        this.#props = freeze(props);\n    }\n    /**\n     * Returns the {@link SchemaModule} module for building database schema.\n     */\n    get schema() {\n        return new SchemaModule(this.#props.executor);\n    }\n    /**\n     * Returns a the {@link DynamicModule} module.\n     *\n     * The {@link DynamicModule} module can be used to bypass strict typing and\n     * passing in dynamic values for the queries.\n     */\n    get dynamic() {\n        return new DynamicModule();\n    }\n    /**\n     * Returns a {@link DatabaseIntrospector | database introspector}.\n     */\n    get introspection() {\n        return this.#props.dialect.createIntrospector(this.withoutPlugins());\n    }\n    case(value) {\n        return new CaseBuilder({\n            node: CaseNode.create(isUndefined(value) ? undefined : parseExpression(value)),\n        });\n    }\n    /**\n     * Returns a {@link FunctionModule} that can be used to write somewhat type-safe function\n     * calls.\n     *\n     * ```ts\n     * const { count } = db.fn\n     *\n     * await db.selectFrom('person')\n     *   .innerJoin('pet', 'pet.owner_id', 'person.id')\n     *   .select([\n     *     'id',\n     *     count('pet.id').as('person_count'),\n     *   ])\n     *   .groupBy('person.id')\n     *   .having(count('pet.id'), '>', 10)\n     *   .execute()\n     * ```\n     *\n     * The generated SQL (PostgreSQL):\n     *\n     * ```sql\n     * select \"person\".\"id\", count(\"pet\".\"id\") as \"person_count\"\n     * from \"person\"\n     * inner join \"pet\" on \"pet\".\"owner_id\" = \"person\".\"id\"\n     * group by \"person\".\"id\"\n     * having count(\"pet\".\"id\") > $1\n     * ```\n     *\n     * Why \"somewhat\" type-safe? Because the function calls are not bound to the\n     * current query context. They allow you to reference columns and tables that\n     * are not in the current query. E.g. remove the `innerJoin` from the previous\n     * query and TypeScript won't even complain.\n     *\n     * If you want to make the function calls fully type-safe, you can use the\n     * {@link ExpressionBuilder.fn} getter for a query context-aware, stricter {@link FunctionModule}.\n     *\n     * ```ts\n     * await db.selectFrom('person')\n     *   .innerJoin('pet', 'pet.owner_id', 'person.id')\n     *   .select((eb) => [\n     *     'person.id',\n     *     eb.fn.count('pet.id').as('pet_count')\n     *   ])\n     *   .groupBy('person.id')\n     *   .having((eb) => eb.fn.count('pet.id'), '>', 10)\n     *   .execute()\n     * ```\n     */\n    get fn() {\n        return createFunctionModule();\n    }\n    /**\n     * Creates a {@link TransactionBuilder} that can be used to run queries inside a transaction.\n     *\n     * The returned {@link TransactionBuilder} can be used to configure the transaction. The\n     * {@link TransactionBuilder.execute} method can then be called to run the transaction.\n     * {@link TransactionBuilder.execute} takes a function that is run inside the\n     * transaction. If the function throws an exception,\n     * 1. the exception is caught,\n     * 2. the transaction is rolled back, and\n     * 3. the exception is thrown again.\n     * Otherwise the transaction is committed.\n     *\n     * The callback function passed to the {@link TransactionBuilder.execute | execute}\n     * method gets the transaction object as its only argument. The transaction is\n     * of type {@link Transaction} which inherits {@link Kysely}. Any query\n     * started through the transaction object is executed inside the transaction.\n     *\n     * To run a controlled transaction, allowing you to commit and rollback manually,\n     * use {@link startTransaction} instead.\n     *\n     * ### Examples\n     *\n     * <!-- siteExample(\"transactions\", \"Simple transaction\", 10) -->\n     *\n     * This example inserts two rows in a transaction. If an exception is thrown inside\n     * the callback passed to the `execute` method,\n     * 1. the exception is caught,\n     * 2. the transaction is rolled back, and\n     * 3. the exception is thrown again.\n     * Otherwise the transaction is committed.\n     *\n     * ```ts\n     * const catto = await db.transaction().execute(async (trx) => {\n     *   const jennifer = await trx.insertInto('person')\n     *     .values({\n     *       first_name: 'Jennifer',\n     *       last_name: 'Aniston',\n     *       age: 40,\n     *     })\n     *     .returning('id')\n     *     .executeTakeFirstOrThrow()\n     *\n     *   return await trx.insertInto('pet')\n     *     .values({\n     *       owner_id: jennifer.id,\n     *       name: 'Catto',\n     *       species: 'cat',\n     *       is_favorite: false,\n     *     })\n     *     .returningAll()\n     *     .executeTakeFirst()\n     * })\n     * ```\n     *\n     * Setting the isolation level:\n     *\n     * ```ts\n     * import type { Kysely } from 'kysely'\n     *\n     * await db\n     *   .transaction()\n     *   .setIsolationLevel('serializable')\n     *   .execute(async (trx) => {\n     *     await doStuff(trx)\n     *   })\n     *\n     * async function doStuff(kysely: typeof db) {\n     *   // ...\n     * }\n     * ```\n     */\n    transaction() {\n        return new TransactionBuilder({ ...this.#props });\n    }\n    /**\n     * Creates a {@link ControlledTransactionBuilder} that can be used to run queries inside a controlled transaction.\n     *\n     * The returned {@link ControlledTransactionBuilder} can be used to configure the transaction.\n     * The {@link ControlledTransactionBuilder.execute} method can then be called\n     * to start the transaction and return a {@link ControlledTransaction}.\n     *\n     * A {@link ControlledTransaction} allows you to commit and rollback manually,\n     * execute savepoint commands. It extends {@link Transaction} which extends {@link Kysely},\n     * so you can run queries inside the transaction. Once the transaction is committed,\n     * or rolled back, it can't be used anymore - all queries will throw an error.\n     * This is to prevent accidentally running queries outside the transaction - where\n     * atomicity is not guaranteed anymore.\n     *\n     * ### Examples\n     *\n     * <!-- siteExample(\"transactions\", \"Controlled transaction\", 11) -->\n     *\n     * A controlled transaction allows you to commit and rollback manually, execute\n     * savepoint commands, and queries in general.\n     *\n     * In this example we start a transaction, use it to insert two rows and then commit\n     * the transaction. If an error is thrown, we catch it and rollback the transaction.\n     *\n     * ```ts\n     * const trx = await db.startTransaction().execute()\n     *\n     * try {\n     *   const jennifer = await trx.insertInto('person')\n     *     .values({\n     *       first_name: 'Jennifer',\n     *       last_name: 'Aniston',\n     *       age: 40,\n     *     })\n     *     .returning('id')\n     *     .executeTakeFirstOrThrow()\n     *\n     *   const catto = await trx.insertInto('pet')\n     *     .values({\n     *       owner_id: jennifer.id,\n     *       name: 'Catto',\n     *       species: 'cat',\n     *       is_favorite: false,\n     *     })\n     *     .returningAll()\n     *     .executeTakeFirstOrThrow()\n     *\n     *   await trx.commit().execute()\n     *\n     *   // ...\n     * } catch (error) {\n     *   await trx.rollback().execute()\n     * }\n     * ```\n     *\n     * <!-- siteExample(\"transactions\", \"Controlled transaction /w savepoints\", 12) -->\n     *\n     * A controlled transaction allows you to commit and rollback manually, execute\n     * savepoint commands, and queries in general.\n     *\n     * In this example we start a transaction, insert a person, create a savepoint,\n     * try inserting a toy and a pet, and if an error is thrown, we rollback to the\n     * savepoint. Eventually we release the savepoint, insert an audit record and\n     * commit the transaction. If an error is thrown, we catch it and rollback the\n     * transaction.\n     *\n     * ```ts\n     * const trx = await db.startTransaction().execute()\n     *\n     * try {\n     *   const jennifer = await trx\n     *     .insertInto('person')\n     *     .values({\n     *       first_name: 'Jennifer',\n     *       last_name: 'Aniston',\n     *       age: 40,\n     *     })\n     *     .returning('id')\n     *     .executeTakeFirstOrThrow()\n     *\n     *   const trxAfterJennifer = await trx.savepoint('after_jennifer').execute()\n     *\n     *   try {\n     *     const catto = await trxAfterJennifer\n     *       .insertInto('pet')\n     *       .values({\n     *         owner_id: jennifer.id,\n     *         name: 'Catto',\n     *         species: 'cat',\n     *       })\n     *       .returning('id')\n     *       .executeTakeFirstOrThrow()\n     *\n     *     await trxAfterJennifer\n     *       .insertInto('toy')\n     *       .values({ name: 'Bone', price: 1.99, pet_id: catto.id })\n     *       .execute()\n     *   } catch (error) {\n     *     await trxAfterJennifer.rollbackToSavepoint('after_jennifer').execute()\n     *   }\n     *\n     *   await trxAfterJennifer.releaseSavepoint('after_jennifer').execute()\n     *\n     *   await trx.insertInto('audit').values({ action: 'added Jennifer' }).execute()\n     *\n     *   await trx.commit().execute()\n     * } catch (error) {\n     *   await trx.rollback().execute()\n     * }\n     * ```\n     */\n    startTransaction() {\n        return new ControlledTransactionBuilder({ ...this.#props });\n    }\n    /**\n     * Provides a kysely instance bound to a single database connection.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * await db\n     *   .connection()\n     *   .execute(async (db) => {\n     *     // `db` is an instance of `Kysely` that's bound to a single\n     *     // database connection. All queries executed through `db` use\n     *     // the same connection.\n     *     await doStuff(db)\n     *   })\n     *\n     * async function doStuff(kysely: typeof db) {\n     *   // ...\n     * }\n     * ```\n     */\n    connection() {\n        return new ConnectionBuilder({ ...this.#props });\n    }\n    /**\n     * Returns a copy of this Kysely instance with the given plugin installed.\n     */\n    withPlugin(plugin) {\n        return new Kysely({\n            ...this.#props,\n            executor: this.#props.executor.withPlugin(plugin),\n        });\n    }\n    /**\n     * Returns a copy of this Kysely instance without any plugins.\n     */\n    withoutPlugins() {\n        return new Kysely({\n            ...this.#props,\n            executor: this.#props.executor.withoutPlugins(),\n        });\n    }\n    /**\n     * @override\n     */\n    withSchema(schema) {\n        return new Kysely({\n            ...this.#props,\n            executor: this.#props.executor.withPluginAtFront(new WithSchemaPlugin(schema)),\n        });\n    }\n    /**\n     * Returns a copy of this Kysely instance with tables added to its\n     * database type.\n     *\n     * This method only modifies the types and doesn't affect any of the\n     * executed queries in any way.\n     *\n     * ### Examples\n     *\n     * The following example adds and uses a temporary table:\n     *\n     * ```ts\n     * await db.schema\n     *   .createTable('temp_table')\n     *   .temporary()\n     *   .addColumn('some_column', 'integer')\n     *   .execute()\n     *\n     * const tempDb = db.withTables<{\n     *   temp_table: {\n     *     some_column: number\n     *   }\n     * }>()\n     *\n     * await tempDb\n     *   .insertInto('temp_table')\n     *   .values({ some_column: 100 })\n     *   .execute()\n     * ```\n     */\n    withTables() {\n        return new Kysely({ ...this.#props });\n    }\n    /**\n     * Releases all resources and disconnects from the database.\n     *\n     * You need to call this when you are done using the `Kysely` instance.\n     */\n    async destroy() {\n        await this.#props.driver.destroy();\n    }\n    /**\n     * Returns true if this `Kysely` instance is a transaction.\n     *\n     * You can also use `db instanceof Transaction`.\n     */\n    get isTransaction() {\n        return false;\n    }\n    /**\n     * @internal\n     * @private\n     */\n    getExecutor() {\n        return this.#props.executor;\n    }\n    /**\n     * Executes a given compiled query or query builder.\n     *\n     * See {@link https://github.com/kysely-org/kysely/blob/master/site/docs/recipes/0004-splitting-query-building-and-execution.md#execute-compiled-queries splitting build, compile and execute code recipe} for more information.\n     */\n    executeQuery(query, \n    // TODO: remove this in the future. deprecated in  0.28.x\n    queryId) {\n        if (queryId !== undefined) {\n            logOnce('Passing `queryId` in `db.executeQuery` is deprecated and will result in a compile-time error in the future.');\n        }\n        const compiledQuery = isCompilable(query) ? query.compile() : query;\n        return this.getExecutor().executeQuery(compiledQuery);\n    }\n    async [Symbol.asyncDispose]() {\n        await this.destroy();\n    }\n}\nexport class Transaction extends Kysely {\n    #props;\n    constructor(props) {\n        super(props);\n        this.#props = props;\n    }\n    // The return type is `true` instead of `boolean` to make Kysely<DB>\n    // unassignable to Transaction<DB> while allowing assignment the\n    // other way around.\n    get isTransaction() {\n        return true;\n    }\n    transaction() {\n        throw new Error('calling the transaction method for a Transaction is not supported');\n    }\n    connection() {\n        throw new Error('calling the connection method for a Transaction is not supported');\n    }\n    async destroy() {\n        throw new Error('calling the destroy method for a Transaction is not supported');\n    }\n    withPlugin(plugin) {\n        return new Transaction({\n            ...this.#props,\n            executor: this.#props.executor.withPlugin(plugin),\n        });\n    }\n    withoutPlugins() {\n        return new Transaction({\n            ...this.#props,\n            executor: this.#props.executor.withoutPlugins(),\n        });\n    }\n    withSchema(schema) {\n        return new Transaction({\n            ...this.#props,\n            executor: this.#props.executor.withPluginAtFront(new WithSchemaPlugin(schema)),\n        });\n    }\n    withTables() {\n        return new Transaction({ ...this.#props });\n    }\n}\nexport function isKyselyProps(obj) {\n    return (isObject(obj) &&\n        isObject(obj.config) &&\n        isObject(obj.driver) &&\n        isObject(obj.executor) &&\n        isObject(obj.dialect));\n}\nexport class ConnectionBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    async execute(callback) {\n        return this.#props.executor.provideConnection(async (connection) => {\n            const executor = this.#props.executor.withConnectionProvider(new SingleConnectionProvider(connection));\n            const db = new Kysely({\n                ...this.#props,\n                executor,\n            });\n            return await callback(db);\n        });\n    }\n}\nexport class TransactionBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    setAccessMode(accessMode) {\n        return new TransactionBuilder({\n            ...this.#props,\n            accessMode,\n        });\n    }\n    setIsolationLevel(isolationLevel) {\n        return new TransactionBuilder({\n            ...this.#props,\n            isolationLevel,\n        });\n    }\n    async execute(callback) {\n        const { isolationLevel, accessMode, ...kyselyProps } = this.#props;\n        const settings = { isolationLevel, accessMode };\n        validateTransactionSettings(settings);\n        return this.#props.executor.provideConnection(async (connection) => {\n            const state = { isCommitted: false, isRolledBack: false };\n            const executor = new NotCommittedOrRolledBackAssertingExecutor(this.#props.executor.withConnectionProvider(new SingleConnectionProvider(connection)), state);\n            const transaction = new Transaction({\n                ...kyselyProps,\n                executor,\n            });\n            let transactionBegun = false;\n            try {\n                await this.#props.driver.beginTransaction(connection, settings);\n                transactionBegun = true;\n                const result = await callback(transaction);\n                await this.#props.driver.commitTransaction(connection);\n                state.isCommitted = true;\n                return result;\n            }\n            catch (error) {\n                if (transactionBegun) {\n                    await this.#props.driver.rollbackTransaction(connection);\n                    state.isRolledBack = true;\n                }\n                throw error;\n            }\n        });\n    }\n}\nexport class ControlledTransactionBuilder {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    setAccessMode(accessMode) {\n        return new ControlledTransactionBuilder({\n            ...this.#props,\n            accessMode,\n        });\n    }\n    setIsolationLevel(isolationLevel) {\n        return new ControlledTransactionBuilder({\n            ...this.#props,\n            isolationLevel,\n        });\n    }\n    async execute() {\n        const { isolationLevel, accessMode, ...props } = this.#props;\n        const settings = { isolationLevel, accessMode };\n        validateTransactionSettings(settings);\n        const connection = await provideControlledConnection(this.#props.executor);\n        await this.#props.driver.beginTransaction(connection.connection, settings);\n        return new ControlledTransaction({\n            ...props,\n            connection,\n            executor: this.#props.executor.withConnectionProvider(new SingleConnectionProvider(connection.connection)),\n        });\n    }\n}\nexport class ControlledTransaction extends Transaction {\n    #props;\n    #compileQuery;\n    #state;\n    constructor(props) {\n        const state = { isCommitted: false, isRolledBack: false };\n        props = {\n            ...props,\n            executor: new NotCommittedOrRolledBackAssertingExecutor(props.executor, state),\n        };\n        const { connection, ...transactionProps } = props;\n        super(transactionProps);\n        this.#props = freeze(props);\n        this.#state = state;\n        const queryId = createQueryId();\n        this.#compileQuery = (node) => props.executor.compileQuery(node, queryId);\n    }\n    get isCommitted() {\n        return this.#state.isCommitted;\n    }\n    get isRolledBack() {\n        return this.#state.isRolledBack;\n    }\n    /**\n     * Commits the transaction.\n     *\n     * See {@link rollback}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import type { Kysely } from 'kysely'\n     * import type { Database } from 'type-editor' // imaginary module\n     *\n     * const trx = await db.startTransaction().execute()\n     *\n     * try {\n     *   await doSomething(trx)\n     *\n     *   await trx.commit().execute()\n     * } catch (error) {\n     *   await trx.rollback().execute()\n     * }\n     *\n     * async function doSomething(kysely: Kysely<Database>) {}\n     * ```\n     */\n    commit() {\n        assertNotCommittedOrRolledBack(this.#state);\n        return new Command(async () => {\n            await this.#props.driver.commitTransaction(this.#props.connection.connection);\n            this.#state.isCommitted = true;\n            this.#props.connection.release();\n        });\n    }\n    /**\n     * Rolls back the transaction.\n     *\n     * See {@link commit} and {@link rollbackToSavepoint}.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import type { Kysely } from 'kysely'\n     * import type { Database } from 'type-editor' // imaginary module\n     *\n     * const trx = await db.startTransaction().execute()\n     *\n     * try {\n     *   await doSomething(trx)\n     *\n     *   await trx.commit().execute()\n     * } catch (error) {\n     *   await trx.rollback().execute()\n     * }\n     *\n     * async function doSomething(kysely: Kysely<Database>) {}\n     * ```\n     */\n    rollback() {\n        assertNotCommittedOrRolledBack(this.#state);\n        return new Command(async () => {\n            await this.#props.driver.rollbackTransaction(this.#props.connection.connection);\n            this.#state.isRolledBack = true;\n            this.#props.connection.release();\n        });\n    }\n    /**\n     * Creates a savepoint with a given name.\n     *\n     * See {@link rollbackToSavepoint} and {@link releaseSavepoint}.\n     *\n     * For a type-safe experience, you should use the returned instance from now on.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import type { Kysely } from 'kysely'\n     * import type { Database } from 'type-editor' // imaginary module\n     *\n     * const trx = await db.startTransaction().execute()\n     *\n     * await insertJennifer(trx)\n     *\n     * const trxAfterJennifer = await trx.savepoint('after_jennifer').execute()\n     *\n     * try {\n     *   await doSomething(trxAfterJennifer)\n     * } catch (error) {\n     *   await trxAfterJennifer.rollbackToSavepoint('after_jennifer').execute()\n     * }\n     *\n     * async function insertJennifer(kysely: Kysely<Database>) {}\n     * async function doSomething(kysely: Kysely<Database>) {}\n     * ```\n     */\n    savepoint(savepointName) {\n        assertNotCommittedOrRolledBack(this.#state);\n        return new Command(async () => {\n            await this.#props.driver.savepoint?.(this.#props.connection.connection, savepointName, this.#compileQuery);\n            return new ControlledTransaction({ ...this.#props });\n        });\n    }\n    /**\n     * Rolls back to a savepoint with a given name.\n     *\n     * See {@link savepoint} and {@link releaseSavepoint}.\n     *\n     * You must use the same instance returned by {@link savepoint}, or\n     * escape the type-check by using `as any`.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import type { Kysely } from 'kysely'\n     * import type { Database } from 'type-editor' // imaginary module\n     *\n     * const trx = await db.startTransaction().execute()\n     *\n     * await insertJennifer(trx)\n     *\n     * const trxAfterJennifer = await trx.savepoint('after_jennifer').execute()\n     *\n     * try {\n     *   await doSomething(trxAfterJennifer)\n     * } catch (error) {\n     *   await trxAfterJennifer.rollbackToSavepoint('after_jennifer').execute()\n     * }\n     *\n     * async function insertJennifer(kysely: Kysely<Database>) {}\n     * async function doSomething(kysely: Kysely<Database>) {}\n     * ```\n     */\n    rollbackToSavepoint(savepointName) {\n        assertNotCommittedOrRolledBack(this.#state);\n        return new Command(async () => {\n            await this.#props.driver.rollbackToSavepoint?.(this.#props.connection.connection, savepointName, this.#compileQuery);\n            return new ControlledTransaction({ ...this.#props });\n        });\n    }\n    /**\n     * Releases a savepoint with a given name.\n     *\n     * See {@link savepoint} and {@link rollbackToSavepoint}.\n     *\n     * You must use the same instance returned by {@link savepoint}, or\n     * escape the type-check by using `as any`.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import type { Kysely } from 'kysely'\n     * import type { Database } from 'type-editor' // imaginary module\n     *\n     * const trx = await db.startTransaction().execute()\n     *\n     * await insertJennifer(trx)\n     *\n     * const trxAfterJennifer = await trx.savepoint('after_jennifer').execute()\n     *\n     * try {\n     *   await doSomething(trxAfterJennifer)\n     * } catch (error) {\n     *   await trxAfterJennifer.rollbackToSavepoint('after_jennifer').execute()\n     * }\n     *\n     * await trxAfterJennifer.releaseSavepoint('after_jennifer').execute()\n     *\n     * await doSomethingElse(trx)\n     *\n     * async function insertJennifer(kysely: Kysely<Database>) {}\n     * async function doSomething(kysely: Kysely<Database>) {}\n     * async function doSomethingElse(kysely: Kysely<Database>) {}\n     * ```\n     */\n    releaseSavepoint(savepointName) {\n        assertNotCommittedOrRolledBack(this.#state);\n        return new Command(async () => {\n            await this.#props.driver.releaseSavepoint?.(this.#props.connection.connection, savepointName, this.#compileQuery);\n            return new ControlledTransaction({ ...this.#props });\n        });\n    }\n    withPlugin(plugin) {\n        return new ControlledTransaction({\n            ...this.#props,\n            executor: this.#props.executor.withPlugin(plugin),\n        });\n    }\n    withoutPlugins() {\n        return new ControlledTransaction({\n            ...this.#props,\n            executor: this.#props.executor.withoutPlugins(),\n        });\n    }\n    withSchema(schema) {\n        return new ControlledTransaction({\n            ...this.#props,\n            executor: this.#props.executor.withPluginAtFront(new WithSchemaPlugin(schema)),\n        });\n    }\n    withTables() {\n        return new ControlledTransaction({ ...this.#props });\n    }\n}\nexport class Command {\n    #cb;\n    constructor(cb) {\n        this.#cb = cb;\n    }\n    /**\n     * Executes the command.\n     */\n    async execute() {\n        return await this.#cb();\n    }\n}\nfunction assertNotCommittedOrRolledBack(state) {\n    if (state.isCommitted) {\n        throw new Error('Transaction is already committed');\n    }\n    if (state.isRolledBack) {\n        throw new Error('Transaction is already rolled back');\n    }\n}\n/**\n * An executor wrapper that asserts that the transaction state is not committed\n * or rolled back when a query is executed.\n *\n * @internal\n */\nclass NotCommittedOrRolledBackAssertingExecutor {\n    #executor;\n    #state;\n    constructor(executor, state) {\n        if (executor instanceof NotCommittedOrRolledBackAssertingExecutor) {\n            this.#executor = executor.#executor;\n        }\n        else {\n            this.#executor = executor;\n        }\n        this.#state = state;\n    }\n    get adapter() {\n        return this.#executor.adapter;\n    }\n    get plugins() {\n        return this.#executor.plugins;\n    }\n    transformQuery(node, queryId) {\n        return this.#executor.transformQuery(node, queryId);\n    }\n    compileQuery(node, queryId) {\n        return this.#executor.compileQuery(node, queryId);\n    }\n    provideConnection(consumer) {\n        return this.#executor.provideConnection(consumer);\n    }\n    executeQuery(compiledQuery) {\n        assertNotCommittedOrRolledBack(this.#state);\n        return this.#executor.executeQuery(compiledQuery);\n    }\n    stream(compiledQuery, chunkSize) {\n        assertNotCommittedOrRolledBack(this.#state);\n        return this.#executor.stream(compiledQuery, chunkSize);\n    }\n    withConnectionProvider(connectionProvider) {\n        return new NotCommittedOrRolledBackAssertingExecutor(this.#executor.withConnectionProvider(connectionProvider), this.#state);\n    }\n    withPlugin(plugin) {\n        return new NotCommittedOrRolledBackAssertingExecutor(this.#executor.withPlugin(plugin), this.#state);\n    }\n    withPlugins(plugins) {\n        return new NotCommittedOrRolledBackAssertingExecutor(this.#executor.withPlugins(plugins), this.#state);\n    }\n    withPluginAtFront(plugin) {\n        return new NotCommittedOrRolledBackAssertingExecutor(this.#executor.withPluginAtFront(plugin), this.#state);\n    }\n    withoutPlugins() {\n        return new NotCommittedOrRolledBackAssertingExecutor(this.#executor.withoutPlugins(), this.#state);\n    }\n}\n", "/// <reference types=\"./raw-builder.d.ts\" />\nimport { AliasNode } from '../operation-node/alias-node.js';\nimport { freeze } from '../util/object-utils.js';\nimport { NOOP_QUERY_EXECUTOR } from '../query-executor/noop-query-executor.js';\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nimport { isOperationNodeSource } from '../operation-node/operation-node-source.js';\nclass RawBuilderImpl {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    get expressionType() {\n        return undefined;\n    }\n    get isRawBuilder() {\n        return true;\n    }\n    as(alias) {\n        return new AliasedRawBuilderImpl(this, alias);\n    }\n    $castTo() {\n        return new RawBuilderImpl({ ...this.#props });\n    }\n    $notNull() {\n        return new RawBuilderImpl(this.#props);\n    }\n    withPlugin(plugin) {\n        return new RawBuilderImpl({\n            ...this.#props,\n            plugins: this.#props.plugins !== undefined\n                ? freeze([...this.#props.plugins, plugin])\n                : freeze([plugin]),\n        });\n    }\n    toOperationNode() {\n        return this.#toOperationNode(this.#getExecutor());\n    }\n    compile(executorProvider) {\n        return this.#compile(this.#getExecutor(executorProvider));\n    }\n    async execute(executorProvider) {\n        const executor = this.#getExecutor(executorProvider);\n        return executor.executeQuery(this.#compile(executor));\n    }\n    #getExecutor(executorProvider) {\n        const executor = executorProvider !== undefined\n            ? executorProvider.getExecutor()\n            : NOOP_QUERY_EXECUTOR;\n        return this.#props.plugins !== undefined\n            ? executor.withPlugins(this.#props.plugins)\n            : executor;\n    }\n    #toOperationNode(executor) {\n        return executor.transformQuery(this.#props.rawNode, this.#props.queryId);\n    }\n    #compile(executor) {\n        return executor.compileQuery(this.#toOperationNode(executor), this.#props.queryId);\n    }\n}\nexport function createRawBuilder(props) {\n    return new RawBuilderImpl(props);\n}\nclass AliasedRawBuilderImpl {\n    #rawBuilder;\n    #alias;\n    constructor(rawBuilder, alias) {\n        this.#rawBuilder = rawBuilder;\n        this.#alias = alias;\n    }\n    get expression() {\n        return this.#rawBuilder;\n    }\n    get alias() {\n        return this.#alias;\n    }\n    get rawBuilder() {\n        return this.#rawBuilder;\n    }\n    toOperationNode() {\n        return AliasNode.create(this.#rawBuilder.toOperationNode(), isOperationNodeSource(this.#alias)\n            ? this.#alias.toOperationNode()\n            : IdentifierNode.create(this.#alias));\n    }\n}\n", "/// <reference types=\"./sql.d.ts\" />\nimport { IdentifierNode } from '../operation-node/identifier-node.js';\nimport { isOperationNodeSource } from '../operation-node/operation-node-source.js';\nimport { RawNode } from '../operation-node/raw-node.js';\nimport { ValueNode } from '../operation-node/value-node.js';\nimport { parseStringReference } from '../parser/reference-parser.js';\nimport { parseTable } from '../parser/table-parser.js';\nimport { parseValueExpression } from '../parser/value-parser.js';\nimport { createQueryId } from '../util/query-id.js';\nimport { createRawBuilder } from './raw-builder.js';\nexport const sql = Object.assign((sqlFragments, ...parameters) => {\n    return createRawBuilder({\n        queryId: createQueryId(),\n        rawNode: RawNode.create(sqlFragments, parameters?.map(parseParameter) ?? []),\n    });\n}, {\n    ref(columnReference) {\n        return createRawBuilder({\n            queryId: createQueryId(),\n            rawNode: RawNode.createWithChild(parseStringReference(columnReference)),\n        });\n    },\n    val(value) {\n        return createRawBuilder({\n            queryId: createQueryId(),\n            rawNode: RawNode.createWithChild(parseValueExpression(value)),\n        });\n    },\n    value(value) {\n        return this.val(value);\n    },\n    table(tableReference) {\n        return createRawBuilder({\n            queryId: createQueryId(),\n            rawNode: RawNode.createWithChild(parseTable(tableReference)),\n        });\n    },\n    id(...ids) {\n        const fragments = new Array(ids.length + 1).fill('.');\n        fragments[0] = '';\n        fragments[fragments.length - 1] = '';\n        return createRawBuilder({\n            queryId: createQueryId(),\n            rawNode: RawNode.create(fragments, ids.map(IdentifierNode.create)),\n        });\n    },\n    lit(value) {\n        return createRawBuilder({\n            queryId: createQueryId(),\n            rawNode: RawNode.createWithChild(ValueNode.createImmediate(value)),\n        });\n    },\n    literal(value) {\n        return this.lit(value);\n    },\n    raw(sql) {\n        return createRawBuilder({\n            queryId: createQueryId(),\n            rawNode: RawNode.createWithSql(sql),\n        });\n    },\n    join(array, separator = sql `, `) {\n        const nodes = new Array(Math.max(2 * array.length - 1, 0));\n        const sep = separator.toOperationNode();\n        for (let i = 0; i < array.length; ++i) {\n            nodes[2 * i] = parseParameter(array[i]);\n            if (i !== array.length - 1) {\n                nodes[2 * i + 1] = sep;\n            }\n        }\n        return createRawBuilder({\n            queryId: createQueryId(),\n            rawNode: RawNode.createWithChildren(nodes),\n        });\n    },\n});\nfunction parseParameter(param) {\n    if (isOperationNodeSource(param)) {\n        return param.toOperationNode();\n    }\n    return parseValueExpression(param);\n}\n", "/// <reference types=\"./operation-node-visitor.d.ts\" />\nimport { freeze } from '../util/object-utils.js';\nexport class OperationNodeVisitor {\n    nodeStack = [];\n    get parentNode() {\n        return this.nodeStack[this.nodeStack.length - 2];\n    }\n    #visitors = freeze({\n        AliasNode: this.visitAlias.bind(this),\n        ColumnNode: this.visitColumn.bind(this),\n        IdentifierNode: this.visitIdentifier.bind(this),\n        SchemableIdentifierNode: this.visitSchemableIdentifier.bind(this),\n        RawNode: this.visitRaw.bind(this),\n        ReferenceNode: this.visitReference.bind(this),\n        SelectQueryNode: this.visitSelectQuery.bind(this),\n        SelectionNode: this.visitSelection.bind(this),\n        TableNode: this.visitTable.bind(this),\n        FromNode: this.visitFrom.bind(this),\n        SelectAllNode: this.visitSelectAll.bind(this),\n        AndNode: this.visitAnd.bind(this),\n        OrNode: this.visitOr.bind(this),\n        ValueNode: this.visitValue.bind(this),\n        ValueListNode: this.visitValueList.bind(this),\n        PrimitiveValueListNode: this.visitPrimitiveValueList.bind(this),\n        ParensNode: this.visitParens.bind(this),\n        JoinNode: this.visitJoin.bind(this),\n        OperatorNode: this.visitOperator.bind(this),\n        WhereNode: this.visitWhere.bind(this),\n        InsertQueryNode: this.visitInsertQuery.bind(this),\n        DeleteQueryNode: this.visitDeleteQuery.bind(this),\n        ReturningNode: this.visitReturning.bind(this),\n        CreateTableNode: this.visitCreateTable.bind(this),\n        AddColumnNode: this.visitAddColumn.bind(this),\n        ColumnDefinitionNode: this.visitColumnDefinition.bind(this),\n        DropTableNode: this.visitDropTable.bind(this),\n        DataTypeNode: this.visitDataType.bind(this),\n        OrderByNode: this.visitOrderBy.bind(this),\n        OrderByItemNode: this.visitOrderByItem.bind(this),\n        GroupByNode: this.visitGroupBy.bind(this),\n        GroupByItemNode: this.visitGroupByItem.bind(this),\n        UpdateQueryNode: this.visitUpdateQuery.bind(this),\n        ColumnUpdateNode: this.visitColumnUpdate.bind(this),\n        LimitNode: this.visitLimit.bind(this),\n        OffsetNode: this.visitOffset.bind(this),\n        OnConflictNode: this.visitOnConflict.bind(this),\n        OnDuplicateKeyNode: this.visitOnDuplicateKey.bind(this),\n        CreateIndexNode: this.visitCreateIndex.bind(this),\n        DropIndexNode: this.visitDropIndex.bind(this),\n        ListNode: this.visitList.bind(this),\n        PrimaryKeyConstraintNode: this.visitPrimaryKeyConstraint.bind(this),\n        UniqueConstraintNode: this.visitUniqueConstraint.bind(this),\n        ReferencesNode: this.visitReferences.bind(this),\n        CheckConstraintNode: this.visitCheckConstraint.bind(this),\n        WithNode: this.visitWith.bind(this),\n        CommonTableExpressionNode: this.visitCommonTableExpression.bind(this),\n        CommonTableExpressionNameNode: this.visitCommonTableExpressionName.bind(this),\n        HavingNode: this.visitHaving.bind(this),\n        CreateSchemaNode: this.visitCreateSchema.bind(this),\n        DropSchemaNode: this.visitDropSchema.bind(this),\n        AlterTableNode: this.visitAlterTable.bind(this),\n        DropColumnNode: this.visitDropColumn.bind(this),\n        RenameColumnNode: this.visitRenameColumn.bind(this),\n        AlterColumnNode: this.visitAlterColumn.bind(this),\n        ModifyColumnNode: this.visitModifyColumn.bind(this),\n        AddConstraintNode: this.visitAddConstraint.bind(this),\n        DropConstraintNode: this.visitDropConstraint.bind(this),\n        RenameConstraintNode: this.visitRenameConstraint.bind(this),\n        ForeignKeyConstraintNode: this.visitForeignKeyConstraint.bind(this),\n        CreateViewNode: this.visitCreateView.bind(this),\n        RefreshMaterializedViewNode: this.visitRefreshMaterializedView.bind(this),\n        DropViewNode: this.visitDropView.bind(this),\n        GeneratedNode: this.visitGenerated.bind(this),\n        DefaultValueNode: this.visitDefaultValue.bind(this),\n        OnNode: this.visitOn.bind(this),\n        ValuesNode: this.visitValues.bind(this),\n        SelectModifierNode: this.visitSelectModifier.bind(this),\n        CreateTypeNode: this.visitCreateType.bind(this),\n        DropTypeNode: this.visitDropType.bind(this),\n        ExplainNode: this.visitExplain.bind(this),\n        DefaultInsertValueNode: this.visitDefaultInsertValue.bind(this),\n        AggregateFunctionNode: this.visitAggregateFunction.bind(this),\n        OverNode: this.visitOver.bind(this),\n        PartitionByNode: this.visitPartitionBy.bind(this),\n        PartitionByItemNode: this.visitPartitionByItem.bind(this),\n        SetOperationNode: this.visitSetOperation.bind(this),\n        BinaryOperationNode: this.visitBinaryOperation.bind(this),\n        UnaryOperationNode: this.visitUnaryOperation.bind(this),\n        UsingNode: this.visitUsing.bind(this),\n        FunctionNode: this.visitFunction.bind(this),\n        CaseNode: this.visitCase.bind(this),\n        WhenNode: this.visitWhen.bind(this),\n        JSONReferenceNode: this.visitJSONReference.bind(this),\n        JSONPathNode: this.visitJSONPath.bind(this),\n        JSONPathLegNode: this.visitJSONPathLeg.bind(this),\n        JSONOperatorChainNode: this.visitJSONOperatorChain.bind(this),\n        TupleNode: this.visitTuple.bind(this),\n        MergeQueryNode: this.visitMergeQuery.bind(this),\n        MatchedNode: this.visitMatched.bind(this),\n        AddIndexNode: this.visitAddIndex.bind(this),\n        CastNode: this.visitCast.bind(this),\n        FetchNode: this.visitFetch.bind(this),\n        TopNode: this.visitTop.bind(this),\n        OutputNode: this.visitOutput.bind(this),\n        OrActionNode: this.visitOrAction.bind(this),\n        CollateNode: this.visitCollate.bind(this),\n    });\n    visitNode = (node) => {\n        this.nodeStack.push(node);\n        this.#visitors[node.kind](node);\n        this.nodeStack.pop();\n    };\n}\n", "/// <reference types=\"./default-query-compiler.d.ts\" />\nimport { CreateTableNode } from '../operation-node/create-table-node.js';\nimport { InsertQueryNode } from '../operation-node/insert-query-node.js';\nimport { OperationNodeVisitor } from '../operation-node/operation-node-visitor.js';\nimport { OperatorNode } from '../operation-node/operator-node.js';\nimport { ParensNode } from '../operation-node/parens-node.js';\nimport { RawNode } from '../operation-node/raw-node.js';\nimport { freeze, isString, isNumber, isBoolean, isNull, isDate, isBigInt, } from '../util/object-utils.js';\nimport { CreateViewNode } from '../operation-node/create-view-node.js';\nimport { SetOperationNode } from '../operation-node/set-operation-node.js';\nimport { WhenNode } from '../operation-node/when-node.js';\nimport { logOnce } from '../util/log-once.js';\nconst LIT_WRAP_REGEX = /'/g;\nexport class DefaultQueryCompiler extends OperationNodeVisitor {\n    #sql = '';\n    #parameters = [];\n    get numParameters() {\n        return this.#parameters.length;\n    }\n    compileQuery(node, queryId) {\n        this.#sql = '';\n        this.#parameters = [];\n        this.nodeStack.splice(0, this.nodeStack.length);\n        this.visitNode(node);\n        return freeze({\n            query: node,\n            queryId,\n            sql: this.getSql(),\n            parameters: [...this.#parameters],\n        });\n    }\n    getSql() {\n        return this.#sql;\n    }\n    visitSelectQuery(node) {\n        const wrapInParens = this.parentNode !== undefined &&\n            !ParensNode.is(this.parentNode) &&\n            !InsertQueryNode.is(this.parentNode) &&\n            !CreateTableNode.is(this.parentNode) &&\n            !CreateViewNode.is(this.parentNode) &&\n            !SetOperationNode.is(this.parentNode);\n        if (this.parentNode === undefined && node.explain) {\n            this.visitNode(node.explain);\n            this.append(' ');\n        }\n        if (wrapInParens) {\n            this.append('(');\n        }\n        if (node.with) {\n            this.visitNode(node.with);\n            this.append(' ');\n        }\n        this.append('select');\n        if (node.distinctOn) {\n            this.append(' ');\n            this.compileDistinctOn(node.distinctOn);\n        }\n        if (node.frontModifiers?.length) {\n            this.append(' ');\n            this.compileList(node.frontModifiers, ' ');\n        }\n        if (node.top) {\n            this.append(' ');\n            this.visitNode(node.top);\n        }\n        if (node.selections) {\n            this.append(' ');\n            this.compileList(node.selections);\n        }\n        if (node.from) {\n            this.append(' ');\n            this.visitNode(node.from);\n        }\n        if (node.joins) {\n            this.append(' ');\n            this.compileList(node.joins, ' ');\n        }\n        if (node.where) {\n            this.append(' ');\n            this.visitNode(node.where);\n        }\n        if (node.groupBy) {\n            this.append(' ');\n            this.visitNode(node.groupBy);\n        }\n        if (node.having) {\n            this.append(' ');\n            this.visitNode(node.having);\n        }\n        if (node.setOperations) {\n            this.append(' ');\n            this.compileList(node.setOperations, ' ');\n        }\n        if (node.orderBy) {\n            this.append(' ');\n            this.visitNode(node.orderBy);\n        }\n        if (node.limit) {\n            this.append(' ');\n            this.visitNode(node.limit);\n        }\n        if (node.offset) {\n            this.append(' ');\n            this.visitNode(node.offset);\n        }\n        if (node.fetch) {\n            this.append(' ');\n            this.visitNode(node.fetch);\n        }\n        if (node.endModifiers?.length) {\n            this.append(' ');\n            this.compileList(this.sortSelectModifiers([...node.endModifiers]), ' ');\n        }\n        if (wrapInParens) {\n            this.append(')');\n        }\n    }\n    visitFrom(node) {\n        this.append('from ');\n        this.compileList(node.froms);\n    }\n    visitSelection(node) {\n        this.visitNode(node.selection);\n    }\n    visitColumn(node) {\n        this.visitNode(node.column);\n    }\n    compileDistinctOn(expressions) {\n        this.append('distinct on (');\n        this.compileList(expressions);\n        this.append(')');\n    }\n    compileList(nodes, separator = ', ') {\n        const lastIndex = nodes.length - 1;\n        for (let i = 0; i <= lastIndex; i++) {\n            this.visitNode(nodes[i]);\n            if (i < lastIndex) {\n                this.append(separator);\n            }\n        }\n    }\n    visitWhere(node) {\n        this.append('where ');\n        this.visitNode(node.where);\n    }\n    visitHaving(node) {\n        this.append('having ');\n        this.visitNode(node.having);\n    }\n    visitInsertQuery(node) {\n        const wrapInParens = this.parentNode !== undefined &&\n            !ParensNode.is(this.parentNode) &&\n            !RawNode.is(this.parentNode) &&\n            !WhenNode.is(this.parentNode);\n        if (this.parentNode === undefined && node.explain) {\n            this.visitNode(node.explain);\n            this.append(' ');\n        }\n        if (wrapInParens) {\n            this.append('(');\n        }\n        if (node.with) {\n            this.visitNode(node.with);\n            this.append(' ');\n        }\n        this.append(node.replace ? 'replace' : 'insert');\n        // TODO: remove in 0.29.\n        if (node.ignore) {\n            logOnce('`InsertQueryNode.ignore` is deprecated. Use `InsertQueryNode.orAction` instead.');\n            this.append(' ignore');\n        }\n        if (node.orAction) {\n            this.append(' ');\n            this.visitNode(node.orAction);\n        }\n        if (node.top) {\n            this.append(' ');\n            this.visitNode(node.top);\n        }\n        if (node.into) {\n            this.append(' into ');\n            this.visitNode(node.into);\n        }\n        if (node.columns) {\n            this.append(' (');\n            this.compileList(node.columns);\n            this.append(')');\n        }\n        if (node.output) {\n            this.append(' ');\n            this.visitNode(node.output);\n        }\n        if (node.values) {\n            this.append(' ');\n            this.visitNode(node.values);\n        }\n        if (node.defaultValues) {\n            this.append(' ');\n            this.append('default values');\n        }\n        if (node.onConflict) {\n            this.append(' ');\n            this.visitNode(node.onConflict);\n        }\n        if (node.onDuplicateKey) {\n            this.append(' ');\n            this.visitNode(node.onDuplicateKey);\n        }\n        if (node.returning) {\n            this.append(' ');\n            this.visitNode(node.returning);\n        }\n        if (wrapInParens) {\n            this.append(')');\n        }\n        if (node.endModifiers?.length) {\n            this.append(' ');\n            this.compileList(node.endModifiers, ' ');\n        }\n    }\n    visitValues(node) {\n        this.append('values ');\n        this.compileList(node.values);\n    }\n    visitDeleteQuery(node) {\n        const wrapInParens = this.parentNode !== undefined &&\n            !ParensNode.is(this.parentNode) &&\n            !RawNode.is(this.parentNode);\n        if (this.parentNode === undefined && node.explain) {\n            this.visitNode(node.explain);\n            this.append(' ');\n        }\n        if (wrapInParens) {\n            this.append('(');\n        }\n        if (node.with) {\n            this.visitNode(node.with);\n            this.append(' ');\n        }\n        this.append('delete ');\n        if (node.top) {\n            this.visitNode(node.top);\n            this.append(' ');\n        }\n        this.visitNode(node.from);\n        if (node.output) {\n            this.append(' ');\n            this.visitNode(node.output);\n        }\n        if (node.using) {\n            this.append(' ');\n            this.visitNode(node.using);\n        }\n        if (node.joins) {\n            this.append(' ');\n            this.compileList(node.joins, ' ');\n        }\n        if (node.where) {\n            this.append(' ');\n            this.visitNode(node.where);\n        }\n        if (node.orderBy) {\n            this.append(' ');\n            this.visitNode(node.orderBy);\n        }\n        if (node.limit) {\n            this.append(' ');\n            this.visitNode(node.limit);\n        }\n        if (node.returning) {\n            this.append(' ');\n            this.visitNode(node.returning);\n        }\n        if (wrapInParens) {\n            this.append(')');\n        }\n        if (node.endModifiers?.length) {\n            this.append(' ');\n            this.compileList(node.endModifiers, ' ');\n        }\n    }\n    visitReturning(node) {\n        this.append('returning ');\n        this.compileList(node.selections);\n    }\n    visitAlias(node) {\n        this.visitNode(node.node);\n        this.append(' as ');\n        this.visitNode(node.alias);\n    }\n    visitReference(node) {\n        if (node.table) {\n            this.visitNode(node.table);\n            this.append('.');\n        }\n        this.visitNode(node.column);\n    }\n    visitSelectAll(_) {\n        this.append('*');\n    }\n    visitIdentifier(node) {\n        this.append(this.getLeftIdentifierWrapper());\n        this.compileUnwrappedIdentifier(node);\n        this.append(this.getRightIdentifierWrapper());\n    }\n    compileUnwrappedIdentifier(node) {\n        if (!isString(node.name)) {\n            throw new Error('a non-string identifier was passed to compileUnwrappedIdentifier.');\n        }\n        this.append(this.sanitizeIdentifier(node.name));\n    }\n    visitAnd(node) {\n        this.visitNode(node.left);\n        this.append(' and ');\n        this.visitNode(node.right);\n    }\n    visitOr(node) {\n        this.visitNode(node.left);\n        this.append(' or ');\n        this.visitNode(node.right);\n    }\n    visitValue(node) {\n        if (node.immediate) {\n            this.appendImmediateValue(node.value);\n        }\n        else {\n            this.appendValue(node.value);\n        }\n    }\n    visitValueList(node) {\n        this.append('(');\n        this.compileList(node.values);\n        this.append(')');\n    }\n    visitTuple(node) {\n        this.append('(');\n        this.compileList(node.values);\n        this.append(')');\n    }\n    visitPrimitiveValueList(node) {\n        this.append('(');\n        const { values } = node;\n        for (let i = 0; i < values.length; ++i) {\n            this.appendValue(values[i]);\n            if (i !== values.length - 1) {\n                this.append(', ');\n            }\n        }\n        this.append(')');\n    }\n    visitParens(node) {\n        this.append('(');\n        this.visitNode(node.node);\n        this.append(')');\n    }\n    visitJoin(node) {\n        this.append(JOIN_TYPE_SQL[node.joinType]);\n        this.append(' ');\n        this.visitNode(node.table);\n        if (node.on) {\n            this.append(' ');\n            this.visitNode(node.on);\n        }\n    }\n    visitOn(node) {\n        this.append('on ');\n        this.visitNode(node.on);\n    }\n    visitRaw(node) {\n        const { sqlFragments, parameters: params } = node;\n        for (let i = 0; i < sqlFragments.length; ++i) {\n            this.append(sqlFragments[i]);\n            if (params.length > i) {\n                this.visitNode(params[i]);\n            }\n        }\n    }\n    visitOperator(node) {\n        this.append(node.operator);\n    }\n    visitTable(node) {\n        this.visitNode(node.table);\n    }\n    visitSchemableIdentifier(node) {\n        if (node.schema) {\n            this.visitNode(node.schema);\n            this.append('.');\n        }\n        this.visitNode(node.identifier);\n    }\n    visitCreateTable(node) {\n        this.append('create ');\n        if (node.frontModifiers && node.frontModifiers.length > 0) {\n            this.compileList(node.frontModifiers, ' ');\n            this.append(' ');\n        }\n        if (node.temporary) {\n            this.append('temporary ');\n        }\n        this.append('table ');\n        if (node.ifNotExists) {\n            this.append('if not exists ');\n        }\n        this.visitNode(node.table);\n        if (node.selectQuery) {\n            this.append(' as ');\n            this.visitNode(node.selectQuery);\n        }\n        else {\n            this.append(' (');\n            this.compileList([...node.columns, ...(node.constraints ?? [])]);\n            this.append(')');\n            if (node.onCommit) {\n                this.append(' on commit ');\n                this.append(node.onCommit);\n            }\n            if (node.endModifiers && node.endModifiers.length > 0) {\n                this.append(' ');\n                this.compileList(node.endModifiers, ' ');\n            }\n        }\n    }\n    visitColumnDefinition(node) {\n        if (node.ifNotExists) {\n            this.append('if not exists ');\n        }\n        this.visitNode(node.column);\n        this.append(' ');\n        this.visitNode(node.dataType);\n        if (node.unsigned) {\n            this.append(' unsigned');\n        }\n        if (node.frontModifiers && node.frontModifiers.length > 0) {\n            this.append(' ');\n            this.compileList(node.frontModifiers, ' ');\n        }\n        if (node.generated) {\n            this.append(' ');\n            this.visitNode(node.generated);\n        }\n        if (node.identity) {\n            this.append(' identity');\n        }\n        if (node.defaultTo) {\n            this.append(' ');\n            this.visitNode(node.defaultTo);\n        }\n        if (node.notNull) {\n            this.append(' not null');\n        }\n        if (node.unique) {\n            this.append(' unique');\n        }\n        if (node.nullsNotDistinct) {\n            this.append(' nulls not distinct');\n        }\n        if (node.primaryKey) {\n            this.append(' primary key');\n        }\n        if (node.autoIncrement) {\n            this.append(' ');\n            this.append(this.getAutoIncrement());\n        }\n        if (node.references) {\n            this.append(' ');\n            this.visitNode(node.references);\n        }\n        if (node.check) {\n            this.append(' ');\n            this.visitNode(node.check);\n        }\n        if (node.endModifiers && node.endModifiers.length > 0) {\n            this.append(' ');\n            this.compileList(node.endModifiers, ' ');\n        }\n    }\n    getAutoIncrement() {\n        return 'auto_increment';\n    }\n    visitReferences(node) {\n        this.append('references ');\n        this.visitNode(node.table);\n        this.append(' (');\n        this.compileList(node.columns);\n        this.append(')');\n        if (node.onDelete) {\n            this.append(' on delete ');\n            this.append(node.onDelete);\n        }\n        if (node.onUpdate) {\n            this.append(' on update ');\n            this.append(node.onUpdate);\n        }\n    }\n    visitDropTable(node) {\n        this.append('drop table ');\n        if (node.ifExists) {\n            this.append('if exists ');\n        }\n        this.visitNode(node.table);\n        if (node.cascade) {\n            this.append(' cascade');\n        }\n    }\n    visitDataType(node) {\n        this.append(node.dataType);\n    }\n    visitOrderBy(node) {\n        this.append('order by ');\n        this.compileList(node.items);\n    }\n    visitOrderByItem(node) {\n        this.visitNode(node.orderBy);\n        if (node.collation) {\n            this.append(' ');\n            this.visitNode(node.collation);\n        }\n        if (node.direction) {\n            this.append(' ');\n            this.visitNode(node.direction);\n        }\n        if (node.nulls) {\n            this.append(' nulls ');\n            this.append(node.nulls);\n        }\n    }\n    visitGroupBy(node) {\n        this.append('group by ');\n        this.compileList(node.items);\n    }\n    visitGroupByItem(node) {\n        this.visitNode(node.groupBy);\n    }\n    visitUpdateQuery(node) {\n        const wrapInParens = this.parentNode !== undefined &&\n            !ParensNode.is(this.parentNode) &&\n            !RawNode.is(this.parentNode) &&\n            !WhenNode.is(this.parentNode);\n        if (this.parentNode === undefined && node.explain) {\n            this.visitNode(node.explain);\n            this.append(' ');\n        }\n        if (wrapInParens) {\n            this.append('(');\n        }\n        if (node.with) {\n            this.visitNode(node.with);\n            this.append(' ');\n        }\n        this.append('update ');\n        if (node.top) {\n            this.visitNode(node.top);\n            this.append(' ');\n        }\n        if (node.table) {\n            this.visitNode(node.table);\n            this.append(' ');\n        }\n        this.append('set ');\n        if (node.updates) {\n            this.compileList(node.updates);\n        }\n        if (node.output) {\n            this.append(' ');\n            this.visitNode(node.output);\n        }\n        if (node.from) {\n            this.append(' ');\n            this.visitNode(node.from);\n        }\n        if (node.joins) {\n            if (!node.from) {\n                throw new Error(\"Joins in an update query are only supported as a part of a PostgreSQL 'update set from join' query. If you want to create a MySQL 'update join set' query, see https://kysely.dev/docs/examples/update/my-sql-joins\");\n            }\n            this.append(' ');\n            this.compileList(node.joins, ' ');\n        }\n        if (node.where) {\n            this.append(' ');\n            this.visitNode(node.where);\n        }\n        if (node.returning) {\n            this.append(' ');\n            this.visitNode(node.returning);\n        }\n        if (node.orderBy) {\n            this.append(' ');\n            this.visitNode(node.orderBy);\n        }\n        if (node.limit) {\n            this.append(' ');\n            this.visitNode(node.limit);\n        }\n        if (wrapInParens) {\n            this.append(')');\n        }\n        if (node.endModifiers?.length) {\n            this.append(' ');\n            this.compileList(node.endModifiers, ' ');\n        }\n    }\n    visitColumnUpdate(node) {\n        this.visitNode(node.column);\n        this.append(' = ');\n        this.visitNode(node.value);\n    }\n    visitLimit(node) {\n        this.append('limit ');\n        this.visitNode(node.limit);\n    }\n    visitOffset(node) {\n        this.append('offset ');\n        this.visitNode(node.offset);\n    }\n    visitOnConflict(node) {\n        this.append('on conflict');\n        if (node.columns) {\n            this.append(' (');\n            this.compileList(node.columns);\n            this.append(')');\n        }\n        else if (node.constraint) {\n            this.append(' on constraint ');\n            this.visitNode(node.constraint);\n        }\n        else if (node.indexExpression) {\n            this.append(' (');\n            this.visitNode(node.indexExpression);\n            this.append(')');\n        }\n        if (node.indexWhere) {\n            this.append(' ');\n            this.visitNode(node.indexWhere);\n        }\n        if (node.doNothing === true) {\n            this.append(' do nothing');\n        }\n        else if (node.updates) {\n            this.append(' do update set ');\n            this.compileList(node.updates);\n            if (node.updateWhere) {\n                this.append(' ');\n                this.visitNode(node.updateWhere);\n            }\n        }\n    }\n    visitOnDuplicateKey(node) {\n        this.append('on duplicate key update ');\n        this.compileList(node.updates);\n    }\n    visitCreateIndex(node) {\n        this.append('create ');\n        if (node.unique) {\n            this.append('unique ');\n        }\n        this.append('index ');\n        if (node.ifNotExists) {\n            this.append('if not exists ');\n        }\n        this.visitNode(node.name);\n        if (node.table) {\n            this.append(' on ');\n            this.visitNode(node.table);\n        }\n        if (node.using) {\n            this.append(' using ');\n            this.visitNode(node.using);\n        }\n        if (node.columns) {\n            this.append(' (');\n            this.compileList(node.columns);\n            this.append(')');\n        }\n        if (node.nullsNotDistinct) {\n            this.append(' nulls not distinct');\n        }\n        if (node.where) {\n            this.append(' ');\n            this.visitNode(node.where);\n        }\n    }\n    visitDropIndex(node) {\n        this.append('drop index ');\n        if (node.ifExists) {\n            this.append('if exists ');\n        }\n        this.visitNode(node.name);\n        if (node.table) {\n            this.append(' on ');\n            this.visitNode(node.table);\n        }\n        if (node.cascade) {\n            this.append(' cascade');\n        }\n    }\n    visitCreateSchema(node) {\n        this.append('create schema ');\n        if (node.ifNotExists) {\n            this.append('if not exists ');\n        }\n        this.visitNode(node.schema);\n    }\n    visitDropSchema(node) {\n        this.append('drop schema ');\n        if (node.ifExists) {\n            this.append('if exists ');\n        }\n        this.visitNode(node.schema);\n        if (node.cascade) {\n            this.append(' cascade');\n        }\n    }\n    visitPrimaryKeyConstraint(node) {\n        if (node.name) {\n            this.append('constraint ');\n            this.visitNode(node.name);\n            this.append(' ');\n        }\n        this.append('primary key (');\n        this.compileList(node.columns);\n        this.append(')');\n        this.buildDeferrable(node);\n    }\n    buildDeferrable(node) {\n        if (node.deferrable !== undefined) {\n            if (node.deferrable) {\n                this.append(' deferrable');\n            }\n            else {\n                this.append(' not deferrable');\n            }\n        }\n        if (node.initiallyDeferred !== undefined) {\n            if (node.initiallyDeferred) {\n                this.append(' initially deferred');\n            }\n            else {\n                this.append(' initially immediate');\n            }\n        }\n    }\n    visitUniqueConstraint(node) {\n        if (node.name) {\n            this.append('constraint ');\n            this.visitNode(node.name);\n            this.append(' ');\n        }\n        this.append('unique');\n        if (node.nullsNotDistinct) {\n            this.append(' nulls not distinct');\n        }\n        this.append(' (');\n        this.compileList(node.columns);\n        this.append(')');\n        this.buildDeferrable(node);\n    }\n    visitCheckConstraint(node) {\n        if (node.name) {\n            this.append('constraint ');\n            this.visitNode(node.name);\n            this.append(' ');\n        }\n        this.append('check (');\n        this.visitNode(node.expression);\n        this.append(')');\n    }\n    visitForeignKeyConstraint(node) {\n        if (node.name) {\n            this.append('constraint ');\n            this.visitNode(node.name);\n            this.append(' ');\n        }\n        this.append('foreign key (');\n        this.compileList(node.columns);\n        this.append(') ');\n        this.visitNode(node.references);\n        if (node.onDelete) {\n            this.append(' on delete ');\n            this.append(node.onDelete);\n        }\n        if (node.onUpdate) {\n            this.append(' on update ');\n            this.append(node.onUpdate);\n        }\n        this.buildDeferrable(node);\n    }\n    visitList(node) {\n        this.compileList(node.items);\n    }\n    visitWith(node) {\n        this.append('with ');\n        if (node.recursive) {\n            this.append('recursive ');\n        }\n        this.compileList(node.expressions);\n    }\n    visitCommonTableExpression(node) {\n        this.visitNode(node.name);\n        this.append(' as ');\n        if (isBoolean(node.materialized)) {\n            if (!node.materialized) {\n                this.append('not ');\n            }\n            this.append('materialized ');\n        }\n        this.visitNode(node.expression);\n    }\n    visitCommonTableExpressionName(node) {\n        this.visitNode(node.table);\n        if (node.columns) {\n            this.append('(');\n            this.compileList(node.columns);\n            this.append(')');\n        }\n    }\n    visitAlterTable(node) {\n        this.append('alter table ');\n        this.visitNode(node.table);\n        this.append(' ');\n        if (node.renameTo) {\n            this.append('rename to ');\n            this.visitNode(node.renameTo);\n        }\n        if (node.setSchema) {\n            this.append('set schema ');\n            this.visitNode(node.setSchema);\n        }\n        if (node.addConstraint) {\n            this.visitNode(node.addConstraint);\n        }\n        if (node.dropConstraint) {\n            this.visitNode(node.dropConstraint);\n        }\n        if (node.renameConstraint) {\n            this.visitNode(node.renameConstraint);\n        }\n        if (node.columnAlterations) {\n            this.compileColumnAlterations(node.columnAlterations);\n        }\n        if (node.addIndex) {\n            this.visitNode(node.addIndex);\n        }\n        if (node.dropIndex) {\n            this.visitNode(node.dropIndex);\n        }\n    }\n    visitAddColumn(node) {\n        this.append('add column ');\n        this.visitNode(node.column);\n    }\n    visitRenameColumn(node) {\n        this.append('rename column ');\n        this.visitNode(node.column);\n        this.append(' to ');\n        this.visitNode(node.renameTo);\n    }\n    visitDropColumn(node) {\n        this.append('drop column ');\n        this.visitNode(node.column);\n    }\n    visitAlterColumn(node) {\n        this.append('alter column ');\n        this.visitNode(node.column);\n        this.append(' ');\n        if (node.dataType) {\n            if (this.announcesNewColumnDataType()) {\n                this.append('type ');\n            }\n            this.visitNode(node.dataType);\n            if (node.dataTypeExpression) {\n                this.append('using ');\n                this.visitNode(node.dataTypeExpression);\n            }\n        }\n        if (node.setDefault) {\n            this.append('set default ');\n            this.visitNode(node.setDefault);\n        }\n        if (node.dropDefault) {\n            this.append('drop default');\n        }\n        if (node.setNotNull) {\n            this.append('set not null');\n        }\n        if (node.dropNotNull) {\n            this.append('drop not null');\n        }\n    }\n    visitModifyColumn(node) {\n        this.append('modify column ');\n        this.visitNode(node.column);\n    }\n    visitAddConstraint(node) {\n        this.append('add ');\n        this.visitNode(node.constraint);\n    }\n    visitDropConstraint(node) {\n        this.append('drop constraint ');\n        if (node.ifExists) {\n            this.append('if exists ');\n        }\n        this.visitNode(node.constraintName);\n        if (node.modifier === 'cascade') {\n            this.append(' cascade');\n        }\n        else if (node.modifier === 'restrict') {\n            this.append(' restrict');\n        }\n    }\n    visitRenameConstraint(node) {\n        this.append('rename constraint ');\n        this.visitNode(node.oldName);\n        this.append(' to ');\n        this.visitNode(node.newName);\n    }\n    visitSetOperation(node) {\n        this.append(node.operator);\n        this.append(' ');\n        if (node.all) {\n            this.append('all ');\n        }\n        this.visitNode(node.expression);\n    }\n    visitCreateView(node) {\n        this.append('create ');\n        if (node.orReplace) {\n            this.append('or replace ');\n        }\n        if (node.materialized) {\n            this.append('materialized ');\n        }\n        if (node.temporary) {\n            this.append('temporary ');\n        }\n        this.append('view ');\n        if (node.ifNotExists) {\n            this.append('if not exists ');\n        }\n        this.visitNode(node.name);\n        this.append(' ');\n        if (node.columns) {\n            this.append('(');\n            this.compileList(node.columns);\n            this.append(') ');\n        }\n        if (node.as) {\n            this.append('as ');\n            this.visitNode(node.as);\n        }\n    }\n    visitRefreshMaterializedView(node) {\n        this.append('refresh materialized view ');\n        if (node.concurrently) {\n            this.append('concurrently ');\n        }\n        this.visitNode(node.name);\n        if (node.withNoData) {\n            this.append(' with no data');\n        }\n        else {\n            this.append(' with data');\n        }\n    }\n    visitDropView(node) {\n        this.append('drop ');\n        if (node.materialized) {\n            this.append('materialized ');\n        }\n        this.append('view ');\n        if (node.ifExists) {\n            this.append('if exists ');\n        }\n        this.visitNode(node.name);\n        if (node.cascade) {\n            this.append(' cascade');\n        }\n    }\n    visitGenerated(node) {\n        this.append('generated ');\n        if (node.always) {\n            this.append('always ');\n        }\n        if (node.byDefault) {\n            this.append('by default ');\n        }\n        this.append('as ');\n        if (node.identity) {\n            this.append('identity');\n        }\n        if (node.expression) {\n            this.append('(');\n            this.visitNode(node.expression);\n            this.append(')');\n        }\n        if (node.stored) {\n            this.append(' stored');\n        }\n    }\n    visitDefaultValue(node) {\n        this.append('default ');\n        this.visitNode(node.defaultValue);\n    }\n    visitSelectModifier(node) {\n        if (node.rawModifier) {\n            this.visitNode(node.rawModifier);\n        }\n        else {\n            this.append(SELECT_MODIFIER_SQL[node.modifier]);\n        }\n        if (node.of) {\n            this.append(' of ');\n            this.compileList(node.of, ', ');\n        }\n    }\n    visitCreateType(node) {\n        this.append('create type ');\n        this.visitNode(node.name);\n        if (node.enum) {\n            this.append(' as enum ');\n            this.visitNode(node.enum);\n        }\n    }\n    visitDropType(node) {\n        this.append('drop type ');\n        if (node.ifExists) {\n            this.append('if exists ');\n        }\n        this.visitNode(node.name);\n    }\n    visitExplain(node) {\n        this.append('explain');\n        if (node.options || node.format) {\n            this.append(' ');\n            this.append(this.getLeftExplainOptionsWrapper());\n            if (node.options) {\n                this.visitNode(node.options);\n                if (node.format) {\n                    this.append(this.getExplainOptionsDelimiter());\n                }\n            }\n            if (node.format) {\n                this.append('format');\n                this.append(this.getExplainOptionAssignment());\n                this.append(node.format);\n            }\n            this.append(this.getRightExplainOptionsWrapper());\n        }\n    }\n    visitDefaultInsertValue(_) {\n        this.append('default');\n    }\n    visitAggregateFunction(node) {\n        this.append(node.func);\n        this.append('(');\n        if (node.distinct) {\n            this.append('distinct ');\n        }\n        this.compileList(node.aggregated);\n        if (node.orderBy) {\n            this.append(' ');\n            this.visitNode(node.orderBy);\n        }\n        this.append(')');\n        if (node.withinGroup) {\n            this.append(' within group (');\n            this.visitNode(node.withinGroup);\n            this.append(')');\n        }\n        if (node.filter) {\n            this.append(' filter(');\n            this.visitNode(node.filter);\n            this.append(')');\n        }\n        if (node.over) {\n            this.append(' ');\n            this.visitNode(node.over);\n        }\n    }\n    visitOver(node) {\n        this.append('over(');\n        if (node.partitionBy) {\n            this.visitNode(node.partitionBy);\n            if (node.orderBy) {\n                this.append(' ');\n            }\n        }\n        if (node.orderBy) {\n            this.visitNode(node.orderBy);\n        }\n        this.append(')');\n    }\n    visitPartitionBy(node) {\n        this.append('partition by ');\n        this.compileList(node.items);\n    }\n    visitPartitionByItem(node) {\n        this.visitNode(node.partitionBy);\n    }\n    visitBinaryOperation(node) {\n        this.visitNode(node.leftOperand);\n        this.append(' ');\n        this.visitNode(node.operator);\n        this.append(' ');\n        this.visitNode(node.rightOperand);\n    }\n    visitUnaryOperation(node) {\n        this.visitNode(node.operator);\n        if (!this.isMinusOperator(node.operator)) {\n            this.append(' ');\n        }\n        this.visitNode(node.operand);\n    }\n    isMinusOperator(node) {\n        return OperatorNode.is(node) && node.operator === '-';\n    }\n    visitUsing(node) {\n        this.append('using ');\n        this.compileList(node.tables);\n    }\n    visitFunction(node) {\n        this.append(node.func);\n        this.append('(');\n        this.compileList(node.arguments);\n        this.append(')');\n    }\n    visitCase(node) {\n        this.append('case');\n        if (node.value) {\n            this.append(' ');\n            this.visitNode(node.value);\n        }\n        if (node.when) {\n            this.append(' ');\n            this.compileList(node.when, ' ');\n        }\n        if (node.else) {\n            this.append(' else ');\n            this.visitNode(node.else);\n        }\n        this.append(' end');\n        if (node.isStatement) {\n            this.append(' case');\n        }\n    }\n    visitWhen(node) {\n        this.append('when ');\n        this.visitNode(node.condition);\n        if (node.result) {\n            this.append(' then ');\n            this.visitNode(node.result);\n        }\n    }\n    visitJSONReference(node) {\n        this.visitNode(node.reference);\n        this.visitNode(node.traversal);\n    }\n    visitJSONPath(node) {\n        if (node.inOperator) {\n            this.visitNode(node.inOperator);\n        }\n        this.append(\"'$\");\n        for (const pathLeg of node.pathLegs) {\n            this.visitNode(pathLeg);\n        }\n        this.append(\"'\");\n    }\n    visitJSONPathLeg(node) {\n        const isArrayLocation = node.type === 'ArrayLocation';\n        this.append(isArrayLocation ? '[' : '.');\n        this.append(String(node.value));\n        if (isArrayLocation) {\n            this.append(']');\n        }\n    }\n    visitJSONOperatorChain(node) {\n        for (let i = 0, len = node.values.length; i < len; i++) {\n            if (i === len - 1) {\n                this.visitNode(node.operator);\n            }\n            else {\n                this.append('->');\n            }\n            this.visitNode(node.values[i]);\n        }\n    }\n    visitMergeQuery(node) {\n        if (node.with) {\n            this.visitNode(node.with);\n            this.append(' ');\n        }\n        this.append('merge ');\n        if (node.top) {\n            this.visitNode(node.top);\n            this.append(' ');\n        }\n        this.append('into ');\n        this.visitNode(node.into);\n        if (node.using) {\n            this.append(' ');\n            this.visitNode(node.using);\n        }\n        if (node.whens) {\n            this.append(' ');\n            this.compileList(node.whens, ' ');\n        }\n        if (node.returning) {\n            this.append(' ');\n            this.visitNode(node.returning);\n        }\n        if (node.output) {\n            this.append(' ');\n            this.visitNode(node.output);\n        }\n        if (node.endModifiers?.length) {\n            this.append(' ');\n            this.compileList(node.endModifiers, ' ');\n        }\n    }\n    visitMatched(node) {\n        if (node.not) {\n            this.append('not ');\n        }\n        this.append('matched');\n        if (node.bySource) {\n            this.append(' by source');\n        }\n    }\n    visitAddIndex(node) {\n        this.append('add ');\n        if (node.unique) {\n            this.append('unique ');\n        }\n        this.append('index ');\n        this.visitNode(node.name);\n        if (node.columns) {\n            this.append(' (');\n            this.compileList(node.columns);\n            this.append(')');\n        }\n        if (node.using) {\n            this.append(' using ');\n            this.visitNode(node.using);\n        }\n    }\n    visitCast(node) {\n        this.append('cast(');\n        this.visitNode(node.expression);\n        this.append(' as ');\n        this.visitNode(node.dataType);\n        this.append(')');\n    }\n    visitFetch(node) {\n        this.append('fetch next ');\n        this.visitNode(node.rowCount);\n        this.append(` rows ${node.modifier}`);\n    }\n    visitOutput(node) {\n        this.append('output ');\n        this.compileList(node.selections);\n    }\n    visitTop(node) {\n        this.append(`top(${node.expression})`);\n        if (node.modifiers) {\n            this.append(` ${node.modifiers}`);\n        }\n    }\n    visitOrAction(node) {\n        this.append(node.action);\n    }\n    visitCollate(node) {\n        this.append('collate ');\n        this.visitNode(node.collation);\n    }\n    append(str) {\n        this.#sql += str;\n    }\n    appendValue(parameter) {\n        this.addParameter(parameter);\n        this.append(this.getCurrentParameterPlaceholder());\n    }\n    getLeftIdentifierWrapper() {\n        return '\"';\n    }\n    getRightIdentifierWrapper() {\n        return '\"';\n    }\n    getCurrentParameterPlaceholder() {\n        return '$' + this.numParameters;\n    }\n    getLeftExplainOptionsWrapper() {\n        return '(';\n    }\n    getExplainOptionAssignment() {\n        return ' ';\n    }\n    getExplainOptionsDelimiter() {\n        return ', ';\n    }\n    getRightExplainOptionsWrapper() {\n        return ')';\n    }\n    sanitizeIdentifier(identifier) {\n        const leftWrap = this.getLeftIdentifierWrapper();\n        const rightWrap = this.getRightIdentifierWrapper();\n        let sanitized = '';\n        for (const c of identifier) {\n            sanitized += c;\n            if (c === leftWrap) {\n                sanitized += leftWrap;\n            }\n            else if (c === rightWrap) {\n                sanitized += rightWrap;\n            }\n        }\n        return sanitized;\n    }\n    sanitizeStringLiteral(value) {\n        return value.replace(LIT_WRAP_REGEX, \"''\");\n    }\n    addParameter(parameter) {\n        this.#parameters.push(parameter);\n    }\n    appendImmediateValue(value) {\n        if (isString(value)) {\n            this.appendStringLiteral(value);\n        }\n        else if (isNumber(value) || isBoolean(value) || isBigInt(value)) {\n            this.append(value.toString());\n        }\n        else if (isNull(value)) {\n            this.append('null');\n        }\n        else if (isDate(value)) {\n            this.appendImmediateValue(value.toISOString());\n        }\n        else {\n            throw new Error(`invalid immediate value ${value}`);\n        }\n    }\n    appendStringLiteral(value) {\n        this.append(\"'\");\n        this.append(this.sanitizeStringLiteral(value));\n        this.append(\"'\");\n    }\n    sortSelectModifiers(arr) {\n        arr.sort((left, right) => left.modifier && right.modifier\n            ? SELECT_MODIFIER_PRIORITY[left.modifier] -\n                SELECT_MODIFIER_PRIORITY[right.modifier]\n            : 1);\n        return freeze(arr);\n    }\n    compileColumnAlterations(columnAlterations) {\n        this.compileList(columnAlterations);\n    }\n    /**\n     * controls whether the dialect adds a \"type\" keyword before a column's new data\n     * type in an ALTER TABLE statement.\n     */\n    announcesNewColumnDataType() {\n        return true;\n    }\n}\nconst SELECT_MODIFIER_SQL = freeze({\n    ForKeyShare: 'for key share',\n    ForNoKeyUpdate: 'for no key update',\n    ForUpdate: 'for update',\n    ForShare: 'for share',\n    NoWait: 'nowait',\n    SkipLocked: 'skip locked',\n    Distinct: 'distinct',\n});\nconst SELECT_MODIFIER_PRIORITY = freeze({\n    ForKeyShare: 1,\n    ForNoKeyUpdate: 1,\n    ForUpdate: 1,\n    ForShare: 1,\n    NoWait: 2,\n    SkipLocked: 2,\n    Distinct: 0,\n});\nconst JOIN_TYPE_SQL = freeze({\n    InnerJoin: 'inner join',\n    LeftJoin: 'left join',\n    RightJoin: 'right join',\n    FullJoin: 'full join',\n    CrossJoin: 'cross join',\n    LateralInnerJoin: 'inner join lateral',\n    LateralLeftJoin: 'left join lateral',\n    LateralCrossJoin: 'cross join lateral',\n    OuterApply: 'outer apply',\n    CrossApply: 'cross apply',\n    Using: 'using',\n});\n", "/// <reference types=\"./compiled-query.d.ts\" />\nimport { RawNode } from '../operation-node/raw-node.js';\nimport { freeze } from '../util/object-utils.js';\nimport { createQueryId } from '../util/query-id.js';\nexport const CompiledQuery = freeze({\n    raw(sql, parameters = []) {\n        return freeze({\n            sql,\n            query: RawNode.createWithSql(sql),\n            parameters: freeze(parameters),\n            queryId: createQueryId(),\n        });\n    },\n});\n", "/// <reference types=\"./dummy-driver.d.ts\" />\n/**\n * A driver that does absolutely nothing.\n *\n * You can use this to create Kysely instances solely for building queries\n *\n * ### Examples\n *\n * This example creates a Kysely instance for building postgres queries:\n *\n * ```ts\n * import {\n *   DummyDriver,\n *   Kysely,\n *   PostgresAdapter,\n *   PostgresIntrospector,\n *   PostgresQueryCompiler\n * } from 'kysely'\n * import type { Database } from 'type-editor' // imaginary module\n *\n * const db = new Kysely<Database>({\n *   dialect: {\n *     createAdapter: () => new PostgresAdapter(),\n *     createDriver: () => new DummyDriver(),\n *     createIntrospector: (db: Kysely<any>) => new PostgresIntrospector(db),\n *     createQueryCompiler: () => new PostgresQueryCompiler(),\n *   },\n * })\n * ```\n *\n * You can use it to build a query and compile it to SQL but trying to\n * execute the query will throw an error.\n *\n * ```ts\n * const { sql } = db.selectFrom('person').selectAll().compile()\n * console.log(sql) // select * from \"person\"\n * ```\n */\nexport class DummyDriver {\n    async init() {\n        // Nothing to do here.\n    }\n    async acquireConnection() {\n        return new DummyConnection();\n    }\n    async beginTransaction() {\n        // Nothing to do here.\n    }\n    async commitTransaction() {\n        // Nothing to do here.\n    }\n    async rollbackTransaction() {\n        // Nothing to do here.\n    }\n    async releaseConnection() {\n        // Nothing to do here.\n    }\n    async destroy() {\n        // Nothing to do here.\n    }\n    async releaseSavepoint() {\n        // Nothing to do here.\n    }\n    async rollbackToSavepoint() {\n        // Nothing to do here.\n    }\n    async savepoint() {\n        // Nothing to do here.\n    }\n}\nclass DummyConnection {\n    async executeQuery() {\n        return {\n            rows: [],\n        };\n    }\n    async *streamQuery() {\n        // Nothing to do here.\n    }\n}\n", "/// <reference types=\"./dialect-adapter-base.d.ts\" />\n/**\n * A basic implementation of `DialectAdapter` with sensible default values.\n * Third-party dialects can extend this instead of implementing the `DialectAdapter`\n * interface from scratch. That way all new settings will get default values when\n * they are added and there will be less breaking changes.\n */\nexport class DialectAdapterBase {\n    get supportsCreateIfNotExists() {\n        return true;\n    }\n    get supportsTransactionalDdl() {\n        return false;\n    }\n    get supportsReturning() {\n        return false;\n    }\n    get supportsOutput() {\n        return false;\n    }\n}\n", "/// <reference types=\"./sqlite-query-compiler.d.ts\" />\nimport { DefaultQueryCompiler } from '../../query-compiler/default-query-compiler.js';\nconst ID_WRAP_REGEX = /\"/g;\nexport class SqliteQueryCompiler extends DefaultQueryCompiler {\n    visitOrAction(node) {\n        this.append('or ');\n        this.append(node.action);\n    }\n    getCurrentParameterPlaceholder() {\n        return '?';\n    }\n    getLeftExplainOptionsWrapper() {\n        return '';\n    }\n    getRightExplainOptionsWrapper() {\n        return '';\n    }\n    getLeftIdentifierWrapper() {\n        return '\"';\n    }\n    getRightIdentifierWrapper() {\n        return '\"';\n    }\n    getAutoIncrement() {\n        return 'autoincrement';\n    }\n    sanitizeIdentifier(identifier) {\n        return identifier.replace(ID_WRAP_REGEX, '\"\"');\n    }\n    visitDefaultInsertValue(_) {\n        // sqlite doesn't support the `default` keyword in inserts.\n        this.append('null');\n    }\n}\n", "/// <reference types=\"./migrator.d.ts\" />\nimport { NoopPlugin } from '../plugin/noop-plugin.js';\nimport { WithSchemaPlugin } from '../plugin/with-schema/with-schema-plugin.js';\nimport { freeze, getLast, isObject } from '../util/object-utils.js';\nexport const DEFAULT_MIGRATION_TABLE = 'kysely_migration';\nexport const DEFAULT_MIGRATION_LOCK_TABLE = 'kysely_migration_lock';\nexport const DEFAULT_ALLOW_UNORDERED_MIGRATIONS = false;\nexport const MIGRATION_LOCK_ID = 'migration_lock';\nexport const NO_MIGRATIONS = freeze({ __noMigrations__: true });\n/**\n * A class for running migrations.\n *\n * ### Example\n *\n * This example uses the {@link FileMigrationProvider} that reads migrations\n * files from a single folder. You can easily implement your own\n * {@link MigrationProvider} if you want to provide migrations some\n * other way.\n *\n * ```ts\n * import { promises as fs } from 'node:fs'\n * import path from 'node:path'\n * import * as Sqlite from 'better-sqlite3'\n * import {\n *   FileMigrationProvider,\n *   Kysely,\n *   Migrator,\n *   SqliteDialect\n * } from 'kysely'\n *\n * const db = new Kysely<any>({\n *   dialect: new SqliteDialect({\n *     database: Sqlite(':memory:')\n *   })\n * })\n *\n * const migrator = new Migrator({\n *   db,\n *   provider: new FileMigrationProvider({\n *     fs,\n *     // Path to the folder that contains all your migrations.\n *     migrationFolder: 'some/path/to/migrations',\n *     path,\n *   })\n * })\n * ```\n */\nexport class Migrator {\n    #props;\n    constructor(props) {\n        this.#props = freeze(props);\n    }\n    /**\n     * Returns a {@link MigrationInfo} object for each migration.\n     *\n     * The returned array is sorted by migration name.\n     */\n    async getMigrations() {\n        const tableExists = await this.#doesTableExist(this.#migrationTable);\n        const executedMigrations = tableExists\n            ? await this.#props.db\n                .withPlugin(this.#schemaPlugin)\n                .selectFrom(this.#migrationTable)\n                .select(['name', 'timestamp'])\n                .$narrowType()\n                .execute()\n            : [];\n        const migrations = await this.#resolveMigrations();\n        return migrations.map(({ name, ...migration }) => {\n            const executed = executedMigrations.find((it) => it.name === name);\n            return {\n                name,\n                migration,\n                executedAt: executed ? new Date(executed.timestamp) : undefined,\n            };\n        });\n    }\n    /**\n     * Runs all migrations that have not yet been run.\n     *\n     * This method returns a {@link MigrationResultSet} instance and _never_ throws.\n     * {@link MigrationResultSet.error} holds the error if something went wrong.\n     * {@link MigrationResultSet.results} contains information about which migrations\n     * were executed and which failed. See the examples below.\n     *\n     * This method goes through all possible migrations provided by the provider and runs the\n     * ones whose names come alphabetically after the last migration that has been run. If the\n     * list of executed migrations doesn't match the beginning of the list of possible migrations\n     * an error is returned.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { promises as fs } from 'node:fs'\n     * import path from 'node:path'\n     * import * as Sqlite from 'better-sqlite3'\n     * import { FileMigrationProvider, Migrator } from 'kysely'\n     *\n     * const migrator = new Migrator({\n     *   db,\n     *   provider: new FileMigrationProvider({\n     *     fs,\n     *     migrationFolder: 'some/path/to/migrations',\n     *     path,\n     *   })\n     * })\n     *\n     * const { error, results } = await migrator.migrateToLatest()\n     *\n     * results?.forEach((it) => {\n     *   if (it.status === 'Success') {\n     *     console.log(`migration \"${it.migrationName}\" was executed successfully`)\n     *   } else if (it.status === 'Error') {\n     *     console.error(`failed to execute migration \"${it.migrationName}\"`)\n     *   }\n     * })\n     *\n     * if (error) {\n     *   console.error('failed to run `migrateToLatest`')\n     *   console.error(error)\n     * }\n     * ```\n     */\n    async migrateToLatest() {\n        return this.#migrate(() => ({ direction: 'Up', step: Infinity }));\n    }\n    /**\n     * Migrate up/down to a specific migration.\n     *\n     * This method returns a {@link MigrationResultSet} instance and _never_ throws.\n     * {@link MigrationResultSet.error} holds the error if something went wrong.\n     * {@link MigrationResultSet.results} contains information about which migrations\n     * were executed and which failed.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { promises as fs } from 'node:fs'\n     * import path from 'node:path'\n     * import { FileMigrationProvider, Migrator } from 'kysely'\n     *\n     * const migrator = new Migrator({\n     *   db,\n     *   provider: new FileMigrationProvider({\n     *     fs,\n     *     // Path to the folder that contains all your migrations.\n     *     migrationFolder: 'some/path/to/migrations',\n     *     path,\n     *   })\n     * })\n     *\n     * await migrator.migrateTo('some_migration')\n     * ```\n     *\n     * If you specify the name of the first migration, this method migrates\n     * down to the first migration, but doesn't run the `down` method of\n     * the first migration. In case you want to migrate all the way down,\n     * you can use a special constant `NO_MIGRATIONS`:\n     *\n     * ```ts\n     * import { promises as fs } from 'node:fs'\n     * import path from 'node:path'\n     * import { FileMigrationProvider, Migrator, NO_MIGRATIONS } from 'kysely'\n     *\n     * const migrator = new Migrator({\n     *   db,\n     *   provider: new FileMigrationProvider({\n     *     fs,\n     *     // Path to the folder that contains all your migrations.\n     *     migrationFolder: 'some/path/to/migrations',\n     *     path,\n     *   })\n     * })\n     *\n     * await migrator.migrateTo(NO_MIGRATIONS)\n     * ```\n     */\n    async migrateTo(targetMigrationName) {\n        return this.#migrate(({ migrations, executedMigrations, pendingMigrations, }) => {\n            if (isObject(targetMigrationName) &&\n                targetMigrationName.__noMigrations__ === true) {\n                return { direction: 'Down', step: Infinity };\n            }\n            if (!migrations.find((m) => m.name === targetMigrationName)) {\n                throw new Error(`migration \"${targetMigrationName}\" doesn't exist`);\n            }\n            const executedIndex = executedMigrations.indexOf(targetMigrationName);\n            const pendingIndex = pendingMigrations.findIndex((m) => m.name === targetMigrationName);\n            if (executedIndex !== -1) {\n                return {\n                    direction: 'Down',\n                    step: executedMigrations.length - executedIndex - 1,\n                };\n            }\n            else if (pendingIndex !== -1) {\n                return { direction: 'Up', step: pendingIndex + 1 };\n            }\n            else {\n                throw new Error(`migration \"${targetMigrationName}\" isn't executed or pending`);\n            }\n        });\n    }\n    /**\n     * Migrate one step up.\n     *\n     * This method returns a {@link MigrationResultSet} instance and _never_ throws.\n     * {@link MigrationResultSet.error} holds the error if something went wrong.\n     * {@link MigrationResultSet.results} contains information about which migrations\n     * were executed and which failed.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { promises as fs } from 'node:fs'\n     * import path from 'node:path'\n     * import { FileMigrationProvider, Migrator } from 'kysely'\n     *\n     * const migrator = new Migrator({\n     *   db,\n     *   provider: new FileMigrationProvider({\n     *     fs,\n     *     // Path to the folder that contains all your migrations.\n     *     migrationFolder: 'some/path/to/migrations',\n     *     path,\n     *   })\n     * })\n     *\n     * await migrator.migrateUp()\n     * ```\n     */\n    async migrateUp() {\n        return this.#migrate(() => ({ direction: 'Up', step: 1 }));\n    }\n    /**\n     * Migrate one step down.\n     *\n     * This method returns a {@link MigrationResultSet} instance and _never_ throws.\n     * {@link MigrationResultSet.error} holds the error if something went wrong.\n     * {@link MigrationResultSet.results} contains information about which migrations\n     * were executed and which failed.\n     *\n     * ### Examples\n     *\n     * ```ts\n     * import { promises as fs } from 'node:fs'\n     * import path from 'node:path'\n     * import { FileMigrationProvider, Migrator } from 'kysely'\n     *\n     * const migrator = new Migrator({\n     *   db,\n     *   provider: new FileMigrationProvider({\n     *     fs,\n     *     // Path to the folder that contains all your migrations.\n     *     migrationFolder: 'some/path/to/migrations',\n     *     path,\n     *   })\n     * })\n     *\n     * await migrator.migrateDown()\n     * ```\n     */\n    async migrateDown() {\n        return this.#migrate(() => ({ direction: 'Down', step: 1 }));\n    }\n    async #migrate(getMigrationDirectionAndStep) {\n        try {\n            await this.#ensureMigrationTableSchemaExists();\n            await this.#ensureMigrationTableExists();\n            await this.#ensureMigrationLockTableExists();\n            await this.#ensureLockRowExists();\n            return await this.#runMigrations(getMigrationDirectionAndStep);\n        }\n        catch (error) {\n            if (error instanceof MigrationResultSetError) {\n                return error.resultSet;\n            }\n            return { error };\n        }\n    }\n    get #migrationTableSchema() {\n        return this.#props.migrationTableSchema;\n    }\n    get #migrationTable() {\n        return this.#props.migrationTableName ?? DEFAULT_MIGRATION_TABLE;\n    }\n    get #migrationLockTable() {\n        return this.#props.migrationLockTableName ?? DEFAULT_MIGRATION_LOCK_TABLE;\n    }\n    get #allowUnorderedMigrations() {\n        return (this.#props.allowUnorderedMigrations ?? DEFAULT_ALLOW_UNORDERED_MIGRATIONS);\n    }\n    get #schemaPlugin() {\n        if (this.#migrationTableSchema) {\n            return new WithSchemaPlugin(this.#migrationTableSchema);\n        }\n        return new NoopPlugin();\n    }\n    async #ensureMigrationTableSchemaExists() {\n        if (!this.#migrationTableSchema) {\n            // Use default schema. Nothing to do.\n            return;\n        }\n        const schemaExists = await this.#doesSchemaExist();\n        if (schemaExists) {\n            return;\n        }\n        try {\n            await this.#createIfNotExists(this.#props.db.schema.createSchema(this.#migrationTableSchema));\n        }\n        catch (error) {\n            const schemaExists = await this.#doesSchemaExist();\n            // At least on PostgreSQL, `if not exists` doesn't guarantee the `create schema`\n            // query doesn't throw if the schema already exits. That's why we check if\n            // the schema exist here and ignore the error if it does.\n            if (!schemaExists) {\n                throw error;\n            }\n        }\n    }\n    async #ensureMigrationTableExists() {\n        const tableExists = await this.#doesTableExist(this.#migrationTable);\n        if (tableExists) {\n            return;\n        }\n        try {\n            await this.#createIfNotExists(this.#props.db.schema\n                .withPlugin(this.#schemaPlugin)\n                .createTable(this.#migrationTable)\n                .addColumn('name', 'varchar(255)', (col) => col.notNull().primaryKey())\n                // The migration run time as ISO string. This is not a real date type as we\n                // can't know which data type is supported by all future dialects.\n                .addColumn('timestamp', 'varchar(255)', (col) => col.notNull()));\n        }\n        catch (error) {\n            const tableExists = await this.#doesTableExist(this.#migrationTable);\n            // At least on PostgreSQL, `if not exists` doesn't guarantee the `create table`\n            // query doesn't throw if the table already exits. That's why we check if\n            // the table exist here and ignore the error if it does.\n            if (!tableExists) {\n                throw error;\n            }\n        }\n    }\n    async #ensureMigrationLockTableExists() {\n        const tableExists = await this.#doesTableExist(this.#migrationLockTable);\n        if (tableExists) {\n            return;\n        }\n        try {\n            await this.#createIfNotExists(this.#props.db.schema\n                .withPlugin(this.#schemaPlugin)\n                .createTable(this.#migrationLockTable)\n                .addColumn('id', 'varchar(255)', (col) => col.notNull().primaryKey())\n                .addColumn('is_locked', 'integer', (col) => col.notNull().defaultTo(0)));\n        }\n        catch (error) {\n            const tableExists = await this.#doesTableExist(this.#migrationLockTable);\n            // At least on PostgreSQL, `if not exists` doesn't guarantee the `create table`\n            // query doesn't throw if the table already exits. That's why we check if\n            // the table exist here and ignore the error if it does.\n            if (!tableExists) {\n                throw error;\n            }\n        }\n    }\n    async #ensureLockRowExists() {\n        const lockRowExists = await this.#doesLockRowExists();\n        if (lockRowExists) {\n            return;\n        }\n        try {\n            await this.#props.db\n                .withPlugin(this.#schemaPlugin)\n                .insertInto(this.#migrationLockTable)\n                .values({ id: MIGRATION_LOCK_ID, is_locked: 0 })\n                .execute();\n        }\n        catch (error) {\n            const lockRowExists = await this.#doesLockRowExists();\n            if (!lockRowExists) {\n                throw error;\n            }\n        }\n    }\n    async #doesSchemaExist() {\n        const schemas = await this.#props.db.introspection.getSchemas();\n        return schemas.some((it) => it.name === this.#migrationTableSchema);\n    }\n    async #doesTableExist(tableName) {\n        const schema = this.#migrationTableSchema;\n        const tables = await this.#props.db.introspection.getTables({\n            withInternalKyselyTables: true,\n        });\n        return tables.some((it) => it.name === tableName && (!schema || it.schema === schema));\n    }\n    async #doesLockRowExists() {\n        const lockRow = await this.#props.db\n            .withPlugin(this.#schemaPlugin)\n            .selectFrom(this.#migrationLockTable)\n            .where('id', '=', MIGRATION_LOCK_ID)\n            .select('id')\n            .executeTakeFirst();\n        return !!lockRow;\n    }\n    async #runMigrations(getMigrationDirectionAndStep) {\n        const adapter = this.#props.db.getExecutor().adapter;\n        const lockOptions = freeze({\n            lockTable: this.#props.migrationLockTableName ?? DEFAULT_MIGRATION_LOCK_TABLE,\n            lockRowId: MIGRATION_LOCK_ID,\n            lockTableSchema: this.#props.migrationTableSchema,\n        });\n        const run = async (db) => {\n            try {\n                await adapter.acquireMigrationLock(db, lockOptions);\n                const state = await this.#getState(db);\n                if (state.migrations.length === 0) {\n                    return { results: [] };\n                }\n                const { direction, step } = getMigrationDirectionAndStep(state);\n                if (step <= 0) {\n                    return { results: [] };\n                }\n                if (direction === 'Down') {\n                    return await this.#migrateDown(db, state, step);\n                }\n                else if (direction === 'Up') {\n                    return await this.#migrateUp(db, state, step);\n                }\n                return { results: [] };\n            }\n            finally {\n                await adapter.releaseMigrationLock(db, lockOptions);\n            }\n        };\n        if (adapter.supportsTransactionalDdl && !this.#props.disableTransactions) {\n            return this.#props.db.transaction().execute(run);\n        }\n        else {\n            return this.#props.db.connection().execute(run);\n        }\n    }\n    async #getState(db) {\n        const migrations = await this.#resolveMigrations();\n        const executedMigrations = await this.#getExecutedMigrations(db);\n        this.#ensureNoMissingMigrations(migrations, executedMigrations);\n        if (!this.#allowUnorderedMigrations) {\n            this.#ensureMigrationsInOrder(migrations, executedMigrations);\n        }\n        const pendingMigrations = this.#getPendingMigrations(migrations, executedMigrations);\n        return freeze({\n            migrations,\n            executedMigrations,\n            lastMigration: getLast(executedMigrations),\n            pendingMigrations,\n        });\n    }\n    #getPendingMigrations(migrations, executedMigrations) {\n        return migrations.filter((migration) => {\n            return !executedMigrations.includes(migration.name);\n        });\n    }\n    async #resolveMigrations() {\n        const allMigrations = await this.#props.provider.getMigrations();\n        return Object.keys(allMigrations)\n            .sort()\n            .map((name) => ({\n            ...allMigrations[name],\n            name,\n        }));\n    }\n    async #getExecutedMigrations(db) {\n        const executedMigrations = await db\n            .withPlugin(this.#schemaPlugin)\n            .selectFrom(this.#migrationTable)\n            .select(['name', 'timestamp'])\n            .$narrowType()\n            .execute();\n        const nameComparator = this.#props.nameComparator || ((a, b) => a.localeCompare(b));\n        return (executedMigrations\n            // https://github.com/kysely-org/kysely/issues/843\n            .sort((a, b) => {\n            if (a.timestamp === b.timestamp) {\n                return nameComparator(a.name, b.name);\n            }\n            return (new Date(a.timestamp).getTime() - new Date(b.timestamp).getTime());\n        })\n            .map((it) => it.name));\n    }\n    #ensureNoMissingMigrations(migrations, executedMigrations) {\n        // Ensure all executed migrations exist in the `migrations` list.\n        for (const executed of executedMigrations) {\n            if (!migrations.some((it) => it.name === executed)) {\n                throw new Error(`corrupted migrations: previously executed migration ${executed} is missing`);\n            }\n        }\n    }\n    #ensureMigrationsInOrder(migrations, executedMigrations) {\n        // Ensure the executed migrations are the first ones in the migration list.\n        for (let i = 0; i < executedMigrations.length; ++i) {\n            if (migrations[i].name !== executedMigrations[i]) {\n                throw new Error(`corrupted migrations: expected previously executed migration ${executedMigrations[i]} to be at index ${i} but ${migrations[i].name} was found in its place. New migrations must always have a name that comes alphabetically after the last executed migration.`);\n            }\n        }\n    }\n    async #migrateDown(db, state, step) {\n        const migrationsToRollback = state.executedMigrations\n            .slice()\n            .reverse()\n            .slice(0, step)\n            .map((name) => {\n            return state.migrations.find((it) => it.name === name);\n        });\n        const results = migrationsToRollback.map((migration) => {\n            return {\n                migrationName: migration.name,\n                direction: 'Down',\n                status: 'NotExecuted',\n            };\n        });\n        for (let i = 0; i < results.length; ++i) {\n            const migration = migrationsToRollback[i];\n            try {\n                if (migration.down) {\n                    await migration.down(db);\n                    await db\n                        .withPlugin(this.#schemaPlugin)\n                        .deleteFrom(this.#migrationTable)\n                        .where('name', '=', migration.name)\n                        .execute();\n                    results[i] = {\n                        migrationName: migration.name,\n                        direction: 'Down',\n                        status: 'Success',\n                    };\n                }\n            }\n            catch (error) {\n                results[i] = {\n                    migrationName: migration.name,\n                    direction: 'Down',\n                    status: 'Error',\n                };\n                throw new MigrationResultSetError({\n                    error,\n                    results,\n                });\n            }\n        }\n        return { results };\n    }\n    async #migrateUp(db, state, step) {\n        const migrationsToRun = state.pendingMigrations.slice(0, step);\n        const results = migrationsToRun.map((migration) => {\n            return {\n                migrationName: migration.name,\n                direction: 'Up',\n                status: 'NotExecuted',\n            };\n        });\n        for (let i = 0; i < results.length; i++) {\n            const migration = state.pendingMigrations[i];\n            try {\n                await migration.up(db);\n                await db\n                    .withPlugin(this.#schemaPlugin)\n                    .insertInto(this.#migrationTable)\n                    .values({\n                    name: migration.name,\n                    timestamp: new Date().toISOString(),\n                })\n                    .execute();\n                results[i] = {\n                    migrationName: migration.name,\n                    direction: 'Up',\n                    status: 'Success',\n                };\n            }\n            catch (error) {\n                results[i] = {\n                    migrationName: migration.name,\n                    direction: 'Up',\n                    status: 'Error',\n                };\n                throw new MigrationResultSetError({\n                    error,\n                    results,\n                });\n            }\n        }\n        return { results };\n    }\n    async #createIfNotExists(qb) {\n        if (this.#props.db.getExecutor().adapter.supportsCreateIfNotExists) {\n            qb = qb.ifNotExists();\n        }\n        await qb.execute();\n    }\n}\nclass MigrationResultSetError extends Error {\n    #resultSet;\n    constructor(result) {\n        super();\n        this.#resultSet = result;\n    }\n    get resultSet() {\n        return this.#resultSet;\n    }\n}\n", "/// <reference types=\"./sqlite-adapter.d.ts\" />\nimport { DialectAdapterBase } from '../dialect-adapter-base.js';\nexport class SqliteAdapter extends DialectAdapterBase {\n    get supportsTransactionalDdl() {\n        return false;\n    }\n    get supportsReturning() {\n        return true;\n    }\n    async acquireMigrationLock(_db, _opt) {\n        // SQLite only has one connection that's reserved by the migration system\n        // for the whole time between acquireMigrationLock and releaseMigrationLock.\n        // We don't need to do anything here.\n    }\n    async releaseMigrationLock(_db, _opt) {\n        // SQLite only has one connection that's reserved by the migration system\n        // for the whole time between acquireMigrationLock and releaseMigrationLock.\n        // We don't need to do anything here.\n    }\n}\n", "/// <reference types=\"./postgres-adapter.d.ts\" />\nimport { sql } from '../../raw-builder/sql.js';\nimport { DialectAdapterBase } from '../dialect-adapter-base.js';\n// Random id for our transaction lock.\nconst LOCK_ID = BigInt('3853314791062309107');\nexport class PostgresAdapter extends DialectAdapterBase {\n    get supportsTransactionalDdl() {\n        return true;\n    }\n    get supportsReturning() {\n        return true;\n    }\n    async acquireMigrationLock(db, _opt) {\n        // Acquire a transaction level advisory lock.\n        await sql `select pg_advisory_xact_lock(${sql.lit(LOCK_ID)})`.execute(db);\n    }\n    async releaseMigrationLock(_db, _opt) {\n        // Nothing to do here. `pg_advisory_xact_lock` is automatically released at the\n        // end of the transaction and since `supportsTransactionalDdl` true, we know\n        // the `db` instance passed to acquireMigrationLock is actually a transaction.\n    }\n}\n", "/// <reference types=\"./stack-trace-utils.d.ts\" />\nimport { isObject, isString } from './object-utils.js';\nexport function extendStackTrace(err, stackError) {\n    if (isStackHolder(err) && stackError.stack) {\n        // Remove the first line that just says `Error`.\n        const stackExtension = stackError.stack.split('\\n').slice(1).join('\\n');\n        err.stack += `\\n${stackExtension}`;\n        return err;\n    }\n    return err;\n}\nfunction isStackHolder(obj) {\n    return isObject(obj) && isString(obj.stack);\n}\n", "/// <reference types=\"./mysql-driver.d.ts\" />\nimport { parseSavepointCommand } from '../../parser/savepoint-parser.js';\nimport { CompiledQuery } from '../../query-compiler/compiled-query.js';\nimport { isFunction, isObject, freeze } from '../../util/object-utils.js';\nimport { createQueryId } from '../../util/query-id.js';\nimport { extendStackTrace } from '../../util/stack-trace-utils.js';\nconst PRIVATE_RELEASE_METHOD = Symbol();\nexport class MysqlDriver {\n    #config;\n    #connections = new WeakMap();\n    #pool;\n    constructor(configOrPool) {\n        this.#config = freeze({ ...configOrPool });\n    }\n    async init() {\n        this.#pool = isFunction(this.#config.pool)\n            ? await this.#config.pool()\n            : this.#config.pool;\n    }\n    async acquireConnection() {\n        const rawConnection = await this.#acquireConnection();\n        let connection = this.#connections.get(rawConnection);\n        if (!connection) {\n            connection = new MysqlConnection(rawConnection);\n            this.#connections.set(rawConnection, connection);\n            // The driver must take care of calling `onCreateConnection` when a new\n            // connection is created. The `mysql2` module doesn't provide an async hook\n            // for the connection creation. We need to call the method explicitly.\n            if (this.#config?.onCreateConnection) {\n                await this.#config.onCreateConnection(connection);\n            }\n        }\n        if (this.#config?.onReserveConnection) {\n            await this.#config.onReserveConnection(connection);\n        }\n        return connection;\n    }\n    async #acquireConnection() {\n        return new Promise((resolve, reject) => {\n            this.#pool.getConnection(async (err, rawConnection) => {\n                if (err) {\n                    reject(err);\n                }\n                else {\n                    resolve(rawConnection);\n                }\n            });\n        });\n    }\n    async beginTransaction(connection, settings) {\n        if (settings.isolationLevel || settings.accessMode) {\n            const parts = [];\n            if (settings.isolationLevel) {\n                parts.push(`isolation level ${settings.isolationLevel}`);\n            }\n            if (settings.accessMode) {\n                parts.push(settings.accessMode);\n            }\n            const sql = `set transaction ${parts.join(', ')}`;\n            // On MySQL this sets the isolation level of the next transaction.\n            await connection.executeQuery(CompiledQuery.raw(sql));\n        }\n        await connection.executeQuery(CompiledQuery.raw('begin'));\n    }\n    async commitTransaction(connection) {\n        await connection.executeQuery(CompiledQuery.raw('commit'));\n    }\n    async rollbackTransaction(connection) {\n        await connection.executeQuery(CompiledQuery.raw('rollback'));\n    }\n    async savepoint(connection, savepointName, compileQuery) {\n        await connection.executeQuery(compileQuery(parseSavepointCommand('savepoint', savepointName), createQueryId()));\n    }\n    async rollbackToSavepoint(connection, savepointName, compileQuery) {\n        await connection.executeQuery(compileQuery(parseSavepointCommand('rollback to', savepointName), createQueryId()));\n    }\n    async releaseSavepoint(connection, savepointName, compileQuery) {\n        await connection.executeQuery(compileQuery(parseSavepointCommand('release savepoint', savepointName), createQueryId()));\n    }\n    async releaseConnection(connection) {\n        connection[PRIVATE_RELEASE_METHOD]();\n    }\n    async destroy() {\n        return new Promise((resolve, reject) => {\n            this.#pool.end((err) => {\n                if (err) {\n                    reject(err);\n                }\n                else {\n                    resolve();\n                }\n            });\n        });\n    }\n}\nfunction isOkPacket(obj) {\n    return isObject(obj) && 'insertId' in obj && 'affectedRows' in obj;\n}\nclass MysqlConnection {\n    #rawConnection;\n    constructor(rawConnection) {\n        this.#rawConnection = rawConnection;\n    }\n    async executeQuery(compiledQuery) {\n        try {\n            const result = await this.#executeQuery(compiledQuery);\n            if (isOkPacket(result)) {\n                const { insertId, affectedRows, changedRows } = result;\n                return {\n                    insertId: insertId !== undefined &&\n                        insertId !== null &&\n                        insertId.toString() !== '0'\n                        ? BigInt(insertId)\n                        : undefined,\n                    numAffectedRows: affectedRows !== undefined && affectedRows !== null\n                        ? BigInt(affectedRows)\n                        : undefined,\n                    numChangedRows: changedRows !== undefined && changedRows !== null\n                        ? BigInt(changedRows)\n                        : undefined,\n                    rows: [],\n                };\n            }\n            else if (Array.isArray(result)) {\n                return {\n                    rows: result,\n                };\n            }\n            return {\n                rows: [],\n            };\n        }\n        catch (err) {\n            throw extendStackTrace(err, new Error());\n        }\n    }\n    #executeQuery(compiledQuery) {\n        return new Promise((resolve, reject) => {\n            this.#rawConnection.query(compiledQuery.sql, compiledQuery.parameters, (err, result) => {\n                if (err) {\n                    reject(err);\n                }\n                else {\n                    resolve(result);\n                }\n            });\n        });\n    }\n    async *streamQuery(compiledQuery, _chunkSize) {\n        const stream = this.#rawConnection\n            .query(compiledQuery.sql, compiledQuery.parameters)\n            .stream({\n            objectMode: true,\n        });\n        try {\n            for await (const row of stream) {\n                yield {\n                    rows: [row],\n                };\n            }\n        }\n        catch (ex) {\n            if (ex &&\n                typeof ex === 'object' &&\n                'code' in ex &&\n                // @ts-ignore\n                ex.code === 'ERR_STREAM_PREMATURE_CLOSE') {\n                // Most likely because of https://github.com/mysqljs/mysql/blob/master/lib/protocol/sequences/Query.js#L220\n                return;\n            }\n            throw ex;\n        }\n    }\n    [PRIVATE_RELEASE_METHOD]() {\n        this.#rawConnection.release();\n    }\n}\n", "/// <reference types=\"./mysql-adapter.d.ts\" />\nimport { sql } from '../../raw-builder/sql.js';\nimport { DialectAdapterBase } from '../dialect-adapter-base.js';\nconst LOCK_ID = 'ea586330-2c93-47c8-908d-981d9d270f9d';\nconst LOCK_TIMEOUT_SECONDS = 60 * 60;\nexport class MysqlAdapter extends DialectAdapterBase {\n    get supportsTransactionalDdl() {\n        return false;\n    }\n    get supportsReturning() {\n        return false;\n    }\n    async acquireMigrationLock(db, _opt) {\n        // Kysely uses a single connection to run the migrations. Because of that, we\n        // can take a lock using `get_lock`. Locks acquired using `get_lock` get\n        // released when the connection is destroyed (session ends) or when the lock\n        // is released using `release_lock`. This way we know that the lock is either\n        // released by us after successfull or failed migrations OR it's released by\n        // MySQL if the process gets killed for some reason.\n        await sql `select get_lock(${sql.lit(LOCK_ID)}, ${sql.lit(LOCK_TIMEOUT_SECONDS)})`.execute(db);\n    }\n    async releaseMigrationLock(db, _opt) {\n        await sql `select release_lock(${sql.lit(LOCK_ID)})`.execute(db);\n    }\n}\n", "/// <reference types=\"./postgres-driver.d.ts\" />\nimport { parseSavepointCommand } from '../../parser/savepoint-parser.js';\nimport { CompiledQuery } from '../../query-compiler/compiled-query.js';\nimport { isFunction, freeze } from '../../util/object-utils.js';\nimport { createQueryId } from '../../util/query-id.js';\nimport { extendStackTrace } from '../../util/stack-trace-utils.js';\nconst PRIVATE_RELEASE_METHOD = Symbol();\nexport class PostgresDriver {\n    #config;\n    #connections = new WeakMap();\n    #pool;\n    constructor(config) {\n        this.#config = freeze({ ...config });\n    }\n    async init() {\n        this.#pool = isFunction(this.#config.pool)\n            ? await this.#config.pool()\n            : this.#config.pool;\n    }\n    async acquireConnection() {\n        const client = await this.#pool.connect();\n        let connection = this.#connections.get(client);\n        if (!connection) {\n            connection = new PostgresConnection(client, {\n                cursor: this.#config.cursor ?? null,\n            });\n            this.#connections.set(client, connection);\n            // The driver must take care of calling `onCreateConnection` when a new\n            // connection is created. The `pg` module doesn't provide an async hook\n            // for the connection creation. We need to call the method explicitly.\n            if (this.#config.onCreateConnection) {\n                await this.#config.onCreateConnection(connection);\n            }\n        }\n        if (this.#config.onReserveConnection) {\n            await this.#config.onReserveConnection(connection);\n        }\n        return connection;\n    }\n    async beginTransaction(connection, settings) {\n        if (settings.isolationLevel || settings.accessMode) {\n            let sql = 'start transaction';\n            if (settings.isolationLevel) {\n                sql += ` isolation level ${settings.isolationLevel}`;\n            }\n            if (settings.accessMode) {\n                sql += ` ${settings.accessMode}`;\n            }\n            await connection.executeQuery(CompiledQuery.raw(sql));\n        }\n        else {\n            await connection.executeQuery(CompiledQuery.raw('begin'));\n        }\n    }\n    async commitTransaction(connection) {\n        await connection.executeQuery(CompiledQuery.raw('commit'));\n    }\n    async rollbackTransaction(connection) {\n        await connection.executeQuery(CompiledQuery.raw('rollback'));\n    }\n    async savepoint(connection, savepointName, compileQuery) {\n        await connection.executeQuery(compileQuery(parseSavepointCommand('savepoint', savepointName), createQueryId()));\n    }\n    async rollbackToSavepoint(connection, savepointName, compileQuery) {\n        await connection.executeQuery(compileQuery(parseSavepointCommand('rollback to', savepointName), createQueryId()));\n    }\n    async releaseSavepoint(connection, savepointName, compileQuery) {\n        await connection.executeQuery(compileQuery(parseSavepointCommand('release', savepointName), createQueryId()));\n    }\n    async releaseConnection(connection) {\n        connection[PRIVATE_RELEASE_METHOD]();\n    }\n    async destroy() {\n        if (this.#pool) {\n            const pool = this.#pool;\n            this.#pool = undefined;\n            await pool.end();\n        }\n    }\n}\nclass PostgresConnection {\n    #client;\n    #options;\n    constructor(client, options) {\n        this.#client = client;\n        this.#options = options;\n    }\n    async executeQuery(compiledQuery) {\n        try {\n            const { command, rowCount, rows } = await this.#client.query(compiledQuery.sql, [...compiledQuery.parameters]);\n            return {\n                numAffectedRows: command === 'INSERT' ||\n                    command === 'UPDATE' ||\n                    command === 'DELETE' ||\n                    command === 'MERGE'\n                    ? BigInt(rowCount)\n                    : undefined,\n                rows: rows ?? [],\n            };\n        }\n        catch (err) {\n            throw extendStackTrace(err, new Error());\n        }\n    }\n    async *streamQuery(compiledQuery, chunkSize) {\n        if (!this.#options.cursor) {\n            throw new Error(\"'cursor' is not present in your postgres dialect config. It's required to make streaming work in postgres.\");\n        }\n        if (!Number.isInteger(chunkSize) || chunkSize <= 0) {\n            throw new Error('chunkSize must be a positive integer');\n        }\n        const cursor = this.#client.query(new this.#options.cursor(compiledQuery.sql, compiledQuery.parameters.slice()));\n        try {\n            while (true) {\n                const rows = await cursor.read(chunkSize);\n                if (rows.length === 0) {\n                    break;\n                }\n                yield {\n                    rows,\n                };\n            }\n        }\n        finally {\n            await cursor.close();\n        }\n    }\n    [PRIVATE_RELEASE_METHOD]() {\n        this.#client.release();\n    }\n}\n", "/// <reference types=\"./mssql-driver.d.ts\" />\nimport { freeze, isBigInt, isBoolean, isBuffer, isDate, isNull, isNumber, isString, isUndefined, } from '../../util/object-utils.js';\nimport { CompiledQuery } from '../../query-compiler/compiled-query.js';\nimport { extendStackTrace } from '../../util/stack-trace-utils.js';\nimport { randomString } from '../../util/random-string.js';\nimport { Deferred } from '../../util/deferred.js';\nconst PRIVATE_RESET_METHOD = Symbol();\nconst PRIVATE_DESTROY_METHOD = Symbol();\nconst PRIVATE_VALIDATE_METHOD = Symbol();\nexport class MssqlDriver {\n    #config;\n    #pool;\n    constructor(config) {\n        this.#config = freeze({ ...config });\n        const { tarn, tedious, validateConnections } = this.#config;\n        const { validateConnections: deprecatedValidateConnections, ...poolOptions } = tarn.options;\n        this.#pool = new tarn.Pool({\n            ...poolOptions,\n            create: async () => {\n                const connection = await tedious.connectionFactory();\n                return await new MssqlConnection(connection, tedious).connect();\n            },\n            destroy: async (connection) => {\n                await connection[PRIVATE_DESTROY_METHOD]();\n            },\n            // @ts-ignore `tarn` accepts a function that returns a promise here, but\n            // the types are not aligned and it type errors.\n            validate: validateConnections === false ||\n                deprecatedValidateConnections === false\n                ? undefined\n                : (connection) => connection[PRIVATE_VALIDATE_METHOD](),\n        });\n    }\n    async init() {\n        // noop\n    }\n    async acquireConnection() {\n        return await this.#pool.acquire().promise;\n    }\n    async beginTransaction(connection, settings) {\n        await connection.beginTransaction(settings);\n    }\n    async commitTransaction(connection) {\n        await connection.commitTransaction();\n    }\n    async rollbackTransaction(connection) {\n        await connection.rollbackTransaction();\n    }\n    async savepoint(connection, savepointName) {\n        await connection.savepoint(savepointName);\n    }\n    async rollbackToSavepoint(connection, savepointName) {\n        await connection.rollbackTransaction(savepointName);\n    }\n    async releaseConnection(connection) {\n        if (this.#config.resetConnectionsOnRelease ||\n            this.#config.tedious.resetConnectionOnRelease) {\n            await connection[PRIVATE_RESET_METHOD]();\n        }\n        this.#pool.release(connection);\n    }\n    async destroy() {\n        await this.#pool.destroy();\n    }\n}\nclass MssqlConnection {\n    #connection;\n    #hasSocketError;\n    #tedious;\n    constructor(connection, tedious) {\n        this.#connection = connection;\n        this.#hasSocketError = false;\n        this.#tedious = tedious;\n    }\n    async beginTransaction(settings) {\n        const { isolationLevel } = settings;\n        await new Promise((resolve, reject) => this.#connection.beginTransaction((error) => {\n            if (error)\n                reject(error);\n            else\n                resolve(undefined);\n        }, isolationLevel ? randomString(8) : undefined, isolationLevel\n            ? this.#getTediousIsolationLevel(isolationLevel)\n            : undefined));\n    }\n    async commitTransaction() {\n        await new Promise((resolve, reject) => this.#connection.commitTransaction((error) => {\n            if (error)\n                reject(error);\n            else\n                resolve(undefined);\n        }));\n    }\n    async connect() {\n        const { promise: waitForConnected, reject, resolve } = new Deferred();\n        this.#connection.connect((error) => {\n            if (error) {\n                return reject(error);\n            }\n            resolve();\n        });\n        this.#connection.on('error', (error) => {\n            if (error instanceof Error &&\n                'code' in error &&\n                error.code === 'ESOCKET') {\n                this.#hasSocketError = true;\n            }\n            console.error(error);\n            reject(error);\n        });\n        function endListener() {\n            reject(new Error('The connection ended without ever completing the connection'));\n        }\n        this.#connection.once('end', endListener);\n        await waitForConnected;\n        this.#connection.off('end', endListener);\n        return this;\n    }\n    async executeQuery(compiledQuery) {\n        try {\n            const deferred = new Deferred();\n            const request = new MssqlRequest({\n                compiledQuery,\n                tedious: this.#tedious,\n                onDone: deferred,\n            });\n            this.#connection.execSql(request.request);\n            const { rowCount, rows } = await deferred.promise;\n            return {\n                numAffectedRows: rowCount !== undefined ? BigInt(rowCount) : undefined,\n                rows,\n            };\n        }\n        catch (err) {\n            throw extendStackTrace(err, new Error());\n        }\n    }\n    async rollbackTransaction(savepointName) {\n        await new Promise((resolve, reject) => this.#connection.rollbackTransaction((error) => {\n            if (error)\n                reject(error);\n            else\n                resolve(undefined);\n        }, savepointName));\n    }\n    async savepoint(savepointName) {\n        await new Promise((resolve, reject) => this.#connection.saveTransaction((error) => {\n            if (error)\n                reject(error);\n            else\n                resolve(undefined);\n        }, savepointName));\n    }\n    async *streamQuery(compiledQuery, chunkSize) {\n        if (!Number.isInteger(chunkSize) || chunkSize <= 0) {\n            throw new Error('chunkSize must be a positive integer');\n        }\n        const request = new MssqlRequest({\n            compiledQuery,\n            streamChunkSize: chunkSize,\n            tedious: this.#tedious,\n        });\n        this.#connection.execSql(request.request);\n        try {\n            while (true) {\n                const rows = await request.readChunk();\n                if (rows.length === 0) {\n                    break;\n                }\n                yield { rows };\n                if (rows.length < chunkSize) {\n                    break;\n                }\n            }\n        }\n        finally {\n            await this.#cancelRequest(request);\n        }\n    }\n    #getTediousIsolationLevel(isolationLevel) {\n        const { ISOLATION_LEVEL } = this.#tedious;\n        const mapper = {\n            'read committed': ISOLATION_LEVEL.READ_COMMITTED,\n            'read uncommitted': ISOLATION_LEVEL.READ_UNCOMMITTED,\n            'repeatable read': ISOLATION_LEVEL.REPEATABLE_READ,\n            serializable: ISOLATION_LEVEL.SERIALIZABLE,\n            snapshot: ISOLATION_LEVEL.SNAPSHOT,\n        };\n        const tediousIsolationLevel = mapper[isolationLevel];\n        if (tediousIsolationLevel === undefined) {\n            throw new Error(`Unknown isolation level: ${isolationLevel}`);\n        }\n        return tediousIsolationLevel;\n    }\n    #cancelRequest(request) {\n        return new Promise((resolve) => {\n            request.request.once('requestCompleted', resolve);\n            const wasCanceled = this.#connection.cancel();\n            if (!wasCanceled) {\n                request.request.off('requestCompleted', resolve);\n                resolve();\n            }\n        });\n    }\n    [PRIVATE_DESTROY_METHOD]() {\n        if ('closed' in this.#connection && this.#connection.closed) {\n            return Promise.resolve();\n        }\n        return new Promise((resolve) => {\n            this.#connection.once('end', resolve);\n            this.#connection.close();\n        });\n    }\n    async [PRIVATE_RESET_METHOD]() {\n        await new Promise((resolve, reject) => {\n            this.#connection.reset((error) => {\n                if (error) {\n                    return reject(error);\n                }\n                resolve();\n            });\n        });\n    }\n    async [PRIVATE_VALIDATE_METHOD]() {\n        if (this.#hasSocketError || this.#isConnectionClosed()) {\n            return false;\n        }\n        try {\n            const deferred = new Deferred();\n            const request = new MssqlRequest({\n                compiledQuery: CompiledQuery.raw('select 1'),\n                onDone: deferred,\n                tedious: this.#tedious,\n            });\n            this.#connection.execSql(request.request);\n            await deferred.promise;\n            return true;\n        }\n        catch {\n            return false;\n        }\n    }\n    #isConnectionClosed() {\n        return 'closed' in this.#connection && Boolean(this.#connection.closed);\n    }\n}\nclass MssqlRequest {\n    #request;\n    #rows;\n    #streamChunkSize;\n    #subscribers;\n    #tedious;\n    #rowCount;\n    constructor(props) {\n        const { compiledQuery, onDone, streamChunkSize, tedious } = props;\n        this.#rows = [];\n        this.#streamChunkSize = streamChunkSize;\n        this.#subscribers = {};\n        this.#tedious = tedious;\n        if (onDone) {\n            const subscriptionKey = 'onDone';\n            this.#subscribers[subscriptionKey] = (event, error) => {\n                if (event === 'chunkReady') {\n                    return;\n                }\n                delete this.#subscribers[subscriptionKey];\n                if (event === 'error') {\n                    return onDone.reject(error);\n                }\n                onDone.resolve({\n                    rowCount: this.#rowCount,\n                    rows: this.#rows,\n                });\n            };\n        }\n        this.#request = new this.#tedious.Request(compiledQuery.sql, (err, rowCount) => {\n            if (err) {\n                return Object.values(this.#subscribers).forEach((subscriber) => subscriber('error', err instanceof AggregateError ? err.errors : err));\n            }\n            this.#rowCount = rowCount;\n        });\n        this.#addParametersToRequest(compiledQuery.parameters);\n        this.#attachListeners();\n    }\n    get request() {\n        return this.#request;\n    }\n    readChunk() {\n        const subscriptionKey = this.readChunk.name;\n        return new Promise((resolve, reject) => {\n            this.#subscribers[subscriptionKey] = (event, error) => {\n                delete this.#subscribers[subscriptionKey];\n                if (event === 'error') {\n                    return reject(error);\n                }\n                resolve(this.#rows.splice(0, this.#streamChunkSize));\n            };\n            this.#request.resume();\n        });\n    }\n    #addParametersToRequest(parameters) {\n        for (let i = 0; i < parameters.length; i++) {\n            const parameter = parameters[i];\n            this.#request.addParameter(String(i + 1), this.#getTediousDataType(parameter), parameter);\n        }\n    }\n    #attachListeners() {\n        const pauseAndEmitChunkReady = this.#streamChunkSize\n            ? () => {\n                if (this.#streamChunkSize <= this.#rows.length) {\n                    this.#request.pause();\n                    Object.values(this.#subscribers).forEach((subscriber) => subscriber('chunkReady'));\n                }\n            }\n            : () => { };\n        const rowListener = (columns) => {\n            const row = {};\n            for (const column of columns) {\n                row[column.metadata.colName] = column.value;\n            }\n            this.#rows.push(row);\n            pauseAndEmitChunkReady();\n        };\n        this.#request.on('row', rowListener);\n        this.#request.once('requestCompleted', () => {\n            Object.values(this.#subscribers).forEach((subscriber) => subscriber('completed'));\n            this.#request.off('row', rowListener);\n        });\n    }\n    #getTediousDataType(value) {\n        if (isNull(value) || isUndefined(value) || isString(value)) {\n            return this.#tedious.TYPES.NVarChar;\n        }\n        if (isBigInt(value) || (isNumber(value) && value % 1 === 0)) {\n            if (value < -2147483648 || value > 2147483647) {\n                return this.#tedious.TYPES.BigInt;\n            }\n            else {\n                return this.#tedious.TYPES.Int;\n            }\n        }\n        if (isNumber(value)) {\n            return this.#tedious.TYPES.Float;\n        }\n        if (isBoolean(value)) {\n            return this.#tedious.TYPES.Bit;\n        }\n        if (isDate(value)) {\n            return this.#tedious.TYPES.DateTime;\n        }\n        if (isBuffer(value)) {\n            return this.#tedious.TYPES.VarBinary;\n        }\n        return this.#tedious.TYPES.NVarChar;\n    }\n}\n", "import * as Kysely from \"kysely\";\nimport { createRecord, getProperty, mapObject, } from \"../Object.js\";\nimport { ok } from \"../Result.js\";\nimport { sql, SqliteBoolean, } from \"../Sqlite.js\";\nimport { array, DateIso, nullableToOptional, nullOr, object, omit, optional, record, set, String, validMutationSize, } from \"../Type.js\";\nimport { OwnerId } from \"./Owner.js\";\nimport { readonly } from \"../Function.js\";\nexport const evoluSchemaToDbSchema = (schema, indexesConfig) => {\n    const tables = mapObject(schema, (table) => new Set(Object.keys(table).filter((k) => k !== \"id\")));\n    const indexes = indexesConfig\n        ? indexesConfig(createIndex).map((index) => ({\n            name: index.toOperationNode().name.name,\n            sql: index.compile().sql,\n        }))\n        : [];\n    return { tables, indexes };\n};\n/**\n * System columns that are implicitly defined by Evolu.\n *\n * - `createdAt`: Set by Evolu on row creation, derived from {@link Timestamp}.\n * - `updatedAt`: Set by Evolu on every row change, derived from {@link Timestamp}.\n * - `isDeleted`: Soft delete flag created by Evolu and used by the developer to\n *   mark rows as deleted.\n * - `ownerId`: Represents ownership and logically partitions the database.\n */\nexport const SystemColumns = object({\n    createdAt: DateIso,\n    updatedAt: DateIso,\n    isDeleted: nullOr(SqliteBoolean),\n    ownerId: OwnerId,\n});\nexport const systemColumns = readonly(new Set(Object.keys(SystemColumns.props)));\nexport const systemColumnsWithId = readonly([...systemColumns, \"id\"]);\n/**\n * Type Factory to create insertable {@link Type}. It makes nullable Types\n * optional (so they are not required), omits Id, and ensures the\n * {@link maxMutationSize}.\n *\n * ### Example\n *\n * ```ts\n * const InsertableTodo = insertable(Schema.todo);\n * type InsertableTodo = typeof InsertableTodo.Type;\n * const todo = InsertableTodo.from({ title });\n * if (!todo.ok) return; // handle errors\n * ```\n */\nexport const insertable = (props) => {\n    const optionalNullable = nullableToOptional(props);\n    const withoutId = omit(optionalNullable, \"id\");\n    return validMutationSize(withoutId);\n};\n/**\n * Type Factory to create updateable {@link Type}. It makes everything except for\n * the `id` column optional (so they are not required) and ensures the\n * {@link maxMutationSize}.\n *\n * ### Example\n *\n * ```ts\n * const UpdateableTodo = updateable(Schema.todo);\n * type UpdateableTodo = typeof UpdateableTodo.Type;\n *\n * // `id` is required; all other fields are optional.\n * const todoResult = UpdateableTodo.from({\n *   id: \"123\",\n *   title: \"New Title\",\n * });\n * if (!todo.ok) return; // handle errors\n * ```\n */\nexport const updateable = (props) => {\n    const propsWithIsDeleted = { ...props, isDeleted: SqliteBoolean };\n    const updateableProps = mapObject(propsWithIsDeleted, (value, key) => key === \"id\" ? value : optional(value));\n    return validMutationSize(object(updateableProps));\n};\n/**\n * Type Factory to create an upsertable Type. It makes nullable Types optional\n * (so they are not required) and ensures the {@link maxMutationSize}.\n *\n * Upsert is like insert, except it requires an ID. It's useful for inserting\n * rows with external ID via {@link createIdFromString}.\n *\n * Note that it's not possible to upsert a row with `createdAt` nor `updatedAt`,\n * because they are derived from {@link CrdtMessage} timestamp. For external\n * createdAt, use a different column.\n *\n * ### Example\n *\n * ```ts\n * const UpsertableTodo = upsertable(Schema.todo);\n * type UpsertableTodo = typeof UpsertableTodo.Type;\n * const todo = UpsertableTodo.from({\n *   id,\n *   title,\n * });\n * if (!todo.ok) return; // handle errors\n * ```\n */\nexport const upsertable = (props) => {\n    const propsWithDefaults = {\n        ...props,\n        isDeleted: optional(SqliteBoolean),\n    };\n    return validMutationSize(nullableToOptional(propsWithDefaults));\n};\nexport const DbIndex = object({ name: String, sql: String });\nexport const DbSchema = object({\n    tables: record(String, set(String)),\n    indexes: array(DbIndex),\n});\n/** Get the current database schema by reading SQLite metadata. */\nexport const getDbSchema = (deps) => ({ allIndexes = false } = {}) => {\n    const tables = createRecord();\n    const tableAndColumnInfoRows = deps.sqlite.exec(sql `\n      select\n        sqlite_master.name as tableName,\n        table_info.name as columnName\n      from\n        sqlite_master\n        join pragma_table_info(sqlite_master.name) as table_info;\n    `);\n    if (!tableAndColumnInfoRows.ok)\n        return tableAndColumnInfoRows;\n    tableAndColumnInfoRows.value.rows.forEach((row) => {\n        const { tableName, columnName } = row;\n        (tables[tableName] ??= new Set()).add(columnName);\n    });\n    const indexesRows = deps.sqlite.exec(allIndexes\n        ? sql `\n            select name, sql\n            from sqlite_master\n            where type = 'index' and name not like 'sqlite_%';\n          `\n        : sql `\n            select name, sql\n            from sqlite_master\n            where\n              type = 'index'\n              and name not like 'sqlite_%'\n              and name not like 'evolu_%';\n          `);\n    if (!indexesRows.ok)\n        return indexesRows;\n    const indexes = indexesRows.value.rows.map((row) => ({\n        name: row.name,\n        /**\n         * SQLite returns \"CREATE INDEX\" for \"create index\" for some reason.\n         * Other keywords remain unchanged. We have to normalize the casing for\n         * {@link indexesAreEqual} manually.\n         */\n        sql: row.sql\n            .replace(\"CREATE INDEX\", \"create index\")\n            .replace(\"CREATE UNIQUE INDEX\", \"create unique index\"),\n    }));\n    return ok({ tables, indexes });\n};\nconst indexesAreEqual = (self, that) => self.name === that.name && self.sql === that.sql;\nexport const ensureDbSchema = (deps) => (newSchema, currentSchema) => {\n    const queries = [];\n    if (!currentSchema) {\n        const dbSchema = getDbSchema(deps)();\n        if (!dbSchema.ok)\n            return dbSchema;\n        currentSchema = dbSchema.value;\n    }\n    for (const [tableName, newColumns] of Object.entries(newSchema.tables)) {\n        const currentColumns = getProperty(currentSchema.tables, tableName);\n        if (!currentColumns) {\n            queries.push(createAppTable(tableName, newColumns));\n        }\n        else {\n            for (const newColumn of newColumns.difference(currentColumns)) {\n                queries.push(sql `\n            alter table ${sql.identifier(tableName)}\n            add column ${sql.identifier(newColumn)} any;\n          `);\n            }\n        }\n    }\n    // Remove current indexes that are not in the newSchema.\n    currentSchema.indexes\n        .filter((currentIndex) => !newSchema.indexes.some((newIndex) => indexesAreEqual(newIndex, currentIndex)))\n        .forEach((index) => {\n        queries.push(sql `drop index ${sql.identifier(index.name)};`);\n    });\n    // Add new indexes that are not in the currentSchema.\n    newSchema.indexes\n        .filter((newIndex) => !currentSchema.indexes.some((currentIndex) => indexesAreEqual(newIndex, currentIndex)))\n        .forEach((newIndex) => {\n        queries.push({ sql: `${newIndex.sql};`, parameters: [] });\n    });\n    for (const query of queries) {\n        const result = deps.sqlite.exec(query);\n        if (!result.ok)\n            return result;\n    }\n    return ok();\n};\nconst createAppTable = (tableName, columns) => sql `\n  create table ${sql.identifier(tableName)} (\n    \"id\" text,\n    ${sql.raw(`${[...systemColumns, ...columns]\n    // With strict tables and any type, data is preserved exactly as received\n    // without any type affinity coercion. This allows storing any data type\n    // while maintaining strict null enforcement for primary key columns.\n    // TODO: Use proper SQLite types for system columns (text for createdAt,\n    // updatedAt, ownerId, integer for isDeleted) instead of \"any\".\n    .map((name) => `${sql.identifier(name).sql} any`)\n    .join(\", \")}, `)}\n    primary key (\"ownerId\", \"id\")\n  )\n  without rowid, strict;\n`;\n// https://kysely.dev/docs/recipes/splitting-query-building-and-execution\nexport const kysely = new Kysely.Kysely({\n    dialect: {\n        createAdapter: () => new Kysely.SqliteAdapter(),\n        createDriver: () => new Kysely.DummyDriver(),\n        createIntrospector() {\n            throw new Error(\"Not implemeneted\");\n        },\n        createQueryCompiler: () => new Kysely.SqliteQueryCompiler(),\n    },\n});\nconst createIndex = kysely.schema.createIndex.bind(kysely.schema);\n", "/**\n * Creates an ordering function from a \"less than\" comparator.\n *\n * ### Example\n *\n * ```ts\n * const orderNumber = createOrder<number>((x, y) => x < y);\n * expect(orderNumber(1, 2)).toEqual(-1);\n * expect(orderNumber(2, 1)).toEqual(1);\n * expect(orderNumber(1, 1)).toEqual(0);\n * ```\n */\nexport const createOrder = (isLessThan) => (x, y) => x === y ? 0 : isLessThan(x, y) ? -1 : 1;\n/**\n * Returns an order that reverses the order of the given order.\n *\n * ### Example\n *\n * ```ts\n * reverseOrder(orderNumber)(1, 2); // 1\n * reverseOrder(orderNumber)(2, 1); // -1\n * reverseOrder(orderNumber)(1, 1); // 0\n * ```\n */\nexport const reverseOrder = (order) => (a, b) => order(b, a);\n/**\n * An order for `string` values in ascending order.\n *\n * ### Example\n *\n * ```ts\n * orderString(\"a\", \"b\"); // -1\n * orderString(\"b\", \"a\"); // 1\n * orderString(\"a\", \"a\"); // 0\n * [\"c\", \"b\", \"a\"].toSorted(orderString); // [\"a\", \"b\", \"c\"]\n * ```\n */\nexport const orderString = createOrder((a, b) => a < b);\n/**\n * An order for numbers in ascending order.\n *\n * ### Example\n *\n * ```ts\n * orderNumber(1, 2); // -1\n * orderNumber(2, 1); // 1\n * orderNumber(1, 1); // 0\n * [2, 1, 3].toSorted(orderNumber); // [1, 2, 3]\n * reverseOrder(orderNumber)(1, 2); // 1\n * reverseOrder(orderNumber)(2, 1); // -1\n * reverseOrder(orderNumber)(1, 1); // 0\n * ```\n */\nexport const orderNumber = createOrder((a, b) => a < b);\n/**\n * An order for bigints in ascending order.\n *\n * ### Example\n *\n * ```ts\n * orderBigInt(1n, 2n); // -1\n * orderBigInt(2n, 1n); // 1\n * orderBigInt(1n, 1n); // 0\n * [2n, 1n, 3n].toSorted(orderBigInt); // [1n, 2n, 3n]\n * ```\n */\nexport const orderBigInt = createOrder((a, b) => a < b);\n/** An {@link Order} for Uint8Array. */\nexport const orderUint8Array = (a, b) => {\n    if (a.byteLength > b.byteLength)\n        return 1;\n    if (a.byteLength < b.byteLength)\n        return -1;\n    for (let i = 0; i < a.byteLength; i++) {\n        if (a[i] < b[i])\n            return -1;\n        if (a[i] > b[i])\n            return 1;\n    }\n    return 0;\n};\n", "import { bytesToHex } from \"../Buffer.js\";\nimport { createEqObject, eqNumber, eqString } from \"../Eq.js\";\nimport { increment } from \"../Number.js\";\nimport { orderUint8Array } from \"../Order.js\";\nimport { err, ok } from \"../Result.js\";\nimport { brand, lessThanOrEqualTo, NonNegativeInt, object, regex, String, Uint8Array, } from \"../Type.js\";\n/**\n * Millis is a timestamp in milliseconds, like `Date.now()`, but limited to the\n * maximum value representable in 6 bytes (281474976710655) minus 1 (reserved\n * for infinity). This enables more efficient binary serialization, saving 2\n * bytes compared to the typical 8-byte (64-bit) timestamp representation.\n *\n * This limit is enforced to prevent data corruption. If a device's clock\n * exceeds this range, Evolu will stop saving data until the clock is\n * corrected.\n *\n * `new Date(281474976710654).toString()` = Tue Aug 02 10889 07:31:49\n */\nexport const Millis = brand(\"Millis\", lessThanOrEqualTo(281474976710655 - 1)(NonNegativeInt));\nexport const minMillis = 0;\nexport const maxMillis = (281474976710655 - 1);\nexport const Counter = brand(\"Counter\", lessThanOrEqualTo(65535)(NonNegativeInt));\nexport const minCounter = 0;\nexport const maxCounter = 65535;\n/**\n * A NodeId uniquely identifies an owner's device. Generated once per device\n * using cryptographic randomness.\n *\n * Collision probability (birthday paradox):\n *\n * - 1,000 devices: ~0.00000000000271% (negligible).\n * - 1M devices: ~0.00000271% (1 in 37M chance).\n * - 135M devices: ~1% chance.\n * - 4.29B devices: ~50% chance.\n *\n * https://lemire.me/blog/2019/12/12/are-64-bit-random-identifiers-free-from-collision\n *\n * What happens if different devices generate the same NodeId?\n *\n * If devices with the same NodeId use different owners, no issues occur.\n *\n * If devices with the same NodeId use the same owner, problems only arise when\n * they generate CRDT messages with identical timestamps (same millis, counter,\n * and NodeId). In this case, the protocol sync algorithm treats them as the\n * same message: the first will be synced with the relay, while the affected\n * message will not be delivered. The affected devices will see different data\n * yet they will think they are synced. This is extremely rare and can be\n * resolved by resetting one device to generate a new NodeId.\n */\nexport const NodeId = regex(\"NodeId\", /^[a-f0-9]{16}$/)(String);\nexport const minNodeId = \"0000000000000000\";\nexport const maxNodeId = \"ffffffffffffffff\";\n/**\n * Hybrid Logical Clock timestamp.\n *\n * Timestamps serve as globally unique, causally ordered identifiers for CRDT\n * messages in Evolu's sync protocol.\n *\n * ### Why Hybrid Logical Clocks\n *\n * Evolu uses Hybrid Logical Clocks (HLC), which combine physical time (millis)\n * with a logical counter. This hybrid approach preserves causality like logical\n * clocks while staying close to physical time for better human\n * interpretability.\n *\n * The counter component ensures causality is maintained even when physical\n * clocks are imperfect. When clocks drift or operations occur concurrently, the\n * counter increments to establish a total order. This means Evolu achieves\n * well-defined, eventually-consistent behavior regardless of physical clock\n * accuracy.\n *\n * Vector clocks can accurately track causality and detect concurrent\n * operations, but they require unbounded space in peer-to-peer systems and\n * crucially, still don't solve our fundamental problem: when they detect\n * operations as concurrent, we still need a deterministic way to choose a\n * winner. Additionally, any deterministic conflict resolution can be gamed by\n * malicious actors.\n *\n * HLC timestamps work well in practice because modern device clocks accurately\n * reflect the order of sequential edits in the common case. Evolu's `maxDrift`\n * configuration protects against buggy clocks and prevents problematic\n * future-dated entries from propagating through the network.\n *\n * ### References\n *\n * - https://muratbuffalo.blogspot.com/2014/07/hybrid-logical-clocks.html\n * - https://sergeiturukin.com/2017/06/26/hybrid-logical-clocks.html\n * - https://jaredforsyth.com/posts/hybrid-logical-clocks/\n * - https://willowprotocol.org/more/timestamps_really/index.html\n *\n * ### Privacy Considerations\n *\n * Timestamps are metadata visible to relays and collaborators. While it can be\n * considered a privacy leak, let us explain why it's necessary, and how to\n * avoid it if maximum privacy is required.\n *\n * With real-time communication, participants always see activity (receiving\n * bytes). We cannot trust anyone not to store that information, so explicitly\n * exposing timestamps doesn't add additional risk.\n *\n * If we really want not to leak user activity, we can implement a local write\n * queue:\n *\n * 1. Write changes immediately to a local-only table\n * 2. Periodically and randomly flush messages to sync tables\n *\n * **Trade-off:** It breaks real-time collaboration.\n */\nexport const Timestamp = object({\n    millis: Millis,\n    counter: Counter,\n    nodeId: NodeId,\n});\n/** Equality function for comparing {@link Timestamp}. */\nexport const eqTimestamp = createEqObject({\n    millis: eqNumber,\n    counter: eqNumber,\n    nodeId: eqString,\n});\nexport const createTimestamp = ({ millis = minMillis, counter = minCounter, nodeId = minNodeId, } = {}) => ({ millis, counter, nodeId });\nexport const createInitialTimestamp = (deps) => {\n    const nodeId = bytesToHex(deps.randomBytes.create(8));\n    return createTimestamp({ nodeId });\n};\nconst getNextMillis = (deps) => (millis) => {\n    const now = Millis.from(deps.time.now());\n    if (!now.ok) {\n        return err({ type: \"TimestampTimeOutOfRangeError\" });\n    }\n    const next = Math.max(now.value, ...millis);\n    return next - now.value > deps.timestampConfig.maxDrift\n        ? err({\n            type: \"TimestampDriftError\",\n            now: now.value,\n            next,\n        })\n        : ok(next);\n};\nconst incrementCounter = (counter) => {\n    const next = Counter.from(increment(counter));\n    if (!next.ok)\n        return err({ type: \"TimestampCounterOverflowError\" });\n    return ok(next.value);\n};\nexport const sendTimestamp = (deps) => (timestamp) => {\n    const millis = getNextMillis(deps)([timestamp.millis]);\n    if (!millis.ok)\n        return millis;\n    const counter = millis.value === timestamp.millis\n        ? incrementCounter(timestamp.counter)\n        : ok(minCounter);\n    if (!counter.ok)\n        return counter;\n    return ok({\n        millis: millis.value,\n        counter: counter.value,\n        nodeId: timestamp.nodeId,\n    });\n};\nexport const receiveTimestamp = (deps) => (local, remote) => {\n    const millis = getNextMillis(deps)([local.millis, remote.millis]);\n    if (!millis.ok)\n        return millis;\n    const counter = millis.value === local.millis && millis.value === remote.millis\n        ? incrementCounter(Math.max(local.counter, remote.counter))\n        : millis.value === local.millis\n            ? incrementCounter(local.counter)\n            : millis.value === remote.millis\n                ? incrementCounter(remote.counter)\n                : ok(minCounter);\n    if (!counter.ok)\n        return counter;\n    return ok({\n        millis: millis.value,\n        counter: counter.value,\n        nodeId: local.nodeId,\n    });\n};\n/** Sortable bytes representation of {@link Timestamp}. */\nexport const TimestampBytes = brand(\"TimestampBytes\", Uint8Array);\nexport const timestampBytesLength = NonNegativeInt.orThrow(16);\nexport const timestampToTimestampBytes = (timestamp) => {\n    const { millis, counter, nodeId } = timestamp;\n    // 6 bytes for millis, 2 bytes for counter, 8 bytes for nodeId.\n    const value = new globalThis.Uint8Array(16);\n    // Encode `millis` into the first 6 bytes.\n    const millisBigInt = BigInt(millis);\n    value[0] = Number((millisBigInt >> 40n) & 0xffn);\n    value[1] = Number((millisBigInt >> 32n) & 0xffn);\n    value[2] = Number((millisBigInt >> 24n) & 0xffn);\n    value[3] = Number((millisBigInt >> 16n) & 0xffn);\n    value[4] = Number((millisBigInt >> 8n) & 0xffn);\n    value[5] = Number(millisBigInt & 0xffn);\n    // Encode `counter` into the next 2 bytes.\n    value[6] = (counter >> 8) & 0xff;\n    value[7] = counter & 0xff;\n    // Encode `nodeId` (16-character hex string) into the next 8 bytes.\n    for (let i = 0; i < 8; i++) {\n        const byte = parseInt(nodeId.slice(i * 2, i * 2 + 2), 16);\n        value[8 + i] = byte;\n    }\n    return value;\n};\nexport const timestampBytesToTimestamp = (timestamp) => {\n    // Decode `millis` from the first 6 bytes.\n    const millis = (BigInt(timestamp[0]) << 40n) |\n        (BigInt(timestamp[1]) << 32n) |\n        (BigInt(timestamp[2]) << 24n) |\n        (BigInt(timestamp[3]) << 16n) |\n        (BigInt(timestamp[4]) << 8n) |\n        BigInt(timestamp[5]);\n    // Decode `counter` from the next 2 bytes.\n    const counter = (timestamp[6] << 8) | timestamp[7];\n    // Decode `nodeId` from the last 8 bytes.\n    let nodeId = \"\";\n    for (let i = 8; i < 16; i++) {\n        nodeId += timestamp[i].toString(16).padStart(2, \"0\");\n    }\n    return { millis: Number(millis), counter, nodeId };\n};\n/**\n * An {@link Order} for {@link TimestampBytes}.\n *\n * This `Order` uses lexicographic byte order to compare serialized\n * {@link TimestampBytes} produced by {@link timestampToTimestampBytes}. See\n * {@link orderUint8Array} for the underlying implementation.\n */\nexport const orderTimestampBytes = orderUint8Array;\n/**\n * Convert a {@link Timestamp} to an ISO 8601 {@link DateIso} string.\n *\n * The conversion uses the timestamp's `millis` (a {@link Millis} value) and\n * `Date.prototype.toISOString()` to produce a `DateIso`.\n */\nexport const timestampToDateIso = (timestamp) => \n// `as DateIso` is safe because Timestamp guarantees a valid `millis`\nnew Date(timestamp.millis).toISOString();\n", "import { sha256 } from \"@noble/hashes/sha2.js\";\nimport { firstInArray, isNonEmptyReadonlyArray, } from \"../Array.js\";\nimport { assert } from \"../Assert.js\";\nimport { concatBytes } from \"../Buffer.js\";\nimport { decrement } from \"../Number.js\";\nimport { err, ok } from \"../Result.js\";\nimport { sql, SqliteValue } from \"../Sqlite.js\";\nimport { Boolean, brand, Id, NonNegativeInt, nullOr, object, PositiveInt, record, String, } from \"../Type.js\";\nimport { systemColumnsWithId } from \"./Schema.js\";\nimport { orderTimestampBytes } from \"./Timestamp.js\";\nexport const fingerprintSize = NonNegativeInt.orThrow(12);\n/** A fingerprint of an empty range. */\nexport const zeroFingerprint = new Uint8Array(fingerprintSize);\nexport const InfiniteUpperBound = Symbol(\"InfiniteUpperBound\");\nexport const RangeType = {\n    Fingerprint: 1,\n    Skip: 0,\n    Timestamps: 2,\n};\nexport const DbChangeValues = record(String, SqliteValue);\nexport const ValidDbChangeValues = brand(\"ValidDbChangeValues\", DbChangeValues, (value) => {\n    const invalidColumns = systemColumnsWithId.filter((key) => key in value);\n    if (invalidColumns.length > 0)\n        return err({\n            type: \"ValidDbChangeValues\",\n            value,\n            invalidColumns,\n        });\n    return ok(value);\n});\n/**\n * A DbChange is a change to a table row. Together with a unique\n * {@link Timestamp}, it forms a {@link CrdtMessage}.\n */\nexport const DbChange = object({\n    table: String,\n    id: Id,\n    values: ValidDbChangeValues,\n    isInsert: Boolean,\n    isDelete: nullOr(Boolean),\n});\n/**\n * Creates a {@link BaseSqliteStorage} implementation.\n *\n * # Stateless Design\n *\n * This implementation is fully stateless - it requires no in-memory state\n * between invocations. All necessary metadata (timestamp bounds for insertion\n * strategy optimization) is persisted in the evolu_usage table. This makes\n * Evolu Relay suitable for stateless serverless environments like AWS Lambda,\n * Cloudflare Workers with Durable Objects, and other platforms where memory\n * doesn't persist between requests. While not extensively tested in all these\n * environments yet, the stateless design should work well across them.\n */\nexport const createBaseSqliteStorage = (deps) => (config) => {\n    return {\n        insertTimestamp: (ownerId, timestamp, strategy) => {\n            const level = randomSkiplistLevel(deps);\n            return insertTimestamp(deps)(ownerId, timestamp, level, strategy);\n        },\n        getExistingTimestamps: (ownerIdBytes, timestampsBytes) => {\n            const concatenatedTimestamps = concatBytes(...timestampsBytes);\n            const result = deps.sqlite.exec(sql `\n          with recursive\n            split_timestamps(timestampBytes, pos) as (\n              select\n                substr(${concatenatedTimestamps}, 1, 16),\n                17 as pos\n              union all\n              select\n                substr(${concatenatedTimestamps}, pos, 16),\n                pos + 16\n              from split_timestamps\n              where pos <= length(${concatenatedTimestamps})\n            )\n          select s.timestampBytes\n          from\n            split_timestamps s\n            join evolu_timestamp t\n              on t.ownerId = ${ownerIdBytes} and s.timestampBytes = t.t;\n        `);\n            if (!result.ok)\n                return result;\n            return ok(result.value.rows.map((row) => row.timestampBytes));\n        },\n        getSize: (ownerId) => {\n            const size = getSize(deps)(ownerId);\n            if (!size.ok) {\n                config.onStorageError(size.error);\n                return null;\n            }\n            return size.value;\n        },\n        fingerprint: (ownerId, begin, end) => {\n            assertBeginEnd(begin, end);\n            const result = fingerprint(deps)(ownerId, begin, end);\n            if (!result.ok) {\n                config.onStorageError(result.error);\n                return null;\n            }\n            return result.value;\n        },\n        fingerprintRanges: (ownerId, buckets, upperBound) => {\n            const ranges = fingerprintRanges(deps)(ownerId, buckets, upperBound);\n            if (!ranges.ok) {\n                config.onStorageError(ranges.error);\n                return null;\n            }\n            return ranges.value;\n        },\n        findLowerBound: (ownerId, begin, end, upperBound) => {\n            const lowerBound = findLowerBound(deps)(ownerId, begin, end, upperBound);\n            if (!lowerBound.ok) {\n                config.onStorageError(lowerBound.error);\n                return null;\n            }\n            return lowerBound.value;\n        },\n        iterate: (ownerId, begin, end, callback) => {\n            assertBeginEnd(begin, end);\n            const length = end - begin;\n            if (length === 0)\n                return;\n            // This is much faster than SQL limit with offset.\n            const first = getTimestampByIndex(deps)(ownerId, begin);\n            if (!first.ok) {\n                config.onStorageError(first.error);\n                return;\n            }\n            if (!callback(first.value, begin))\n                return;\n            if (length === 1)\n                return;\n            /**\n             * TODO: In rare cases, we might overfetch a lot of rows here, but we\n             * don't have real usage numbers yet. Fetching one row at a time would\n             * probably be slower in almost all cases. In the future, we should\n             * fetch in chunks (e.g., 1,000 rows at a time). For now, consider\n             * logging unused rows to gather data and calculate an average, then use\n             * that information to determine an optimal chunk size. Before\n             * implementing chunking, be sure to run performance tests (including\n             * fetching one by one).\n             */\n            const result = deps.sqlite.exec(sql `\n          select t\n          from evolu_timestamp\n          where ownerId = ${ownerId} and t > ${first.value}\n          order by t\n          limit ${length - 1};\n        `);\n            if (!result.ok) {\n                config.onStorageError(result.error);\n                return;\n            }\n            for (let i = 0; i < result.value.rows.length; i++) {\n                const index = NonNegativeInt.orThrow(begin + 1 + i);\n                if (!callback(result.value.rows[i].t, index))\n                    return;\n            }\n        },\n        deleteOwner: (ownerId) => {\n            const result = deps.sqlite.exec(sql `\n          delete from evolu_timestamp where ownerId = ${ownerId};\n        `);\n            if (!result.ok) {\n                config.onStorageError(result.error);\n                return false;\n            }\n            return true;\n        },\n    };\n};\nconst assertBeginEnd = (begin, end) => {\n    assert(begin <= end, \"invalid begin or end\");\n};\nexport const createBaseSqliteStorageTables = (deps) => {\n    for (const query of [\n        /**\n         * Creates the `evolu_timestamp` table for storing timestamps of multiple\n         * owners.\n         *\n         * All timestamps are stored in a single table using `ownerId` as part of\n         * the primary key. The table implements a Skiplist structure via the `l`\n         * (level) column for fast, scalable queries without the need for tree\n         * balancing.\n         *\n         * Columns:\n         *\n         * - `t`  TimestampBytes\n         * - `h1`/`h2`  12-byte fingerprint split into two integers for fast XOR\n         * - `c`  incremental count\n         * - `l`  Skiplist level (1 to 10)\n         */\n        sql `\n      create table evolu_timestamp (\n        \"ownerId\" blob not null,\n        \"t\" blob not null,\n        \"h1\" integer,\n        \"h2\" integer,\n        \"c\" integer,\n        \"l\" integer not null,\n        primary key (\"ownerId\", \"t\")\n      )\n      strict;\n    `,\n        sql `\n      create index evolu_timestamp_index on evolu_timestamp (\n        \"ownerId\",\n        \"l\",\n        \"t\",\n        \"h1\",\n        \"h2\",\n        \"c\"\n      );\n    `,\n        /**\n         * Creates the `evolu_usage` table for tracking data consumption per owner.\n         *\n         * Columns:\n         *\n         * - `ownerId`  OwnerIdBytes (primary key)\n         * - `storedBytes`  total bytes stored in database\n         * - `firstTimestamp`  for timestamp insertion strategies\n         * - `lastTimestamp`  for timestamp insertion strategies\n         */\n        sql `\n      create table evolu_usage (\n        \"ownerId\" blob primary key,\n        \"storedBytes\" integer not null,\n        \"firstTimestamp\" blob,\n        \"lastTimestamp\" blob\n      )\n      strict;\n    `,\n    ]) {\n        const result = deps.sqlite.exec(query);\n        if (!result.ok)\n            return result;\n    }\n    return ok();\n};\n/**\n * Determines the insertion strategy for a timestamp based on its position\n * relative to the current first and last timestamps.\n *\n * Returns a tuple with the strategy and updated timestamp bounds.\n */\nexport const getTimestampInsertStrategy = (timestamp, firstTimestamp, lastTimestamp) => {\n    if (orderTimestampBytes(timestamp, lastTimestamp) === 1) {\n        return [\"append\", firstTimestamp, timestamp];\n    }\n    if (orderTimestampBytes(timestamp, firstTimestamp) === -1) {\n        return [\"prepend\", timestamp, lastTimestamp];\n    }\n    return [\"insert\", firstTimestamp, lastTimestamp];\n};\n/**\n * AFAIK, we can't do both insert and update in one query, and that's probably\n * why append is 2x faster than insert. Prepend also has to update parents, but\n * it's constantly fast. Insert degrades for reversed (yet LIMIT X magically\n * fixes that) but it's OK for append.\n *\n * Note: SQL operations are idempotent (using `on conflict do nothing` and\n * `changes() > 0`), but this is no longer required here since we use\n * {@link BaseSqliteStorage.getExistingTimestamps} to filter out duplicates\n * before insertion, which we need for quota checks anyway.\n *\n * TODO: Remove idempotency (`on conflict do nothing` and `changes() > 0`) since\n * duplicates are now filtered before insertion.\n */\nconst insertTimestamp = (deps) => (ownerId, timestamp, level, strategy) => {\n    const [h1, h2] = fingerprintToSqliteFingerprint(timestampBytesToFingerprint(timestamp));\n    let queries = [];\n    switch (strategy) {\n        case \"append\":\n            queries = [\n                level === 1\n                    ? sql.prepared `\n                insert into evolu_timestamp\n                  (ownerId, l, t, h1, h2, c)\n                values\n                  (${ownerId}, 1, ${timestamp}, ${h1}, ${h2}, 1)\n                on conflict do nothing;\n              `\n                    : sql.prepared `\n                with\n                  fc(b, cl, pt, nt, ih1, ih2, ic) as (\n                    select\n                      0,\n                      (\n                        select max(l)\n                        from evolu_timestamp\n                        where ownerId = ${ownerId}\n                      ),\n                      zeroblob(0),\n                      null,\n                      0,\n                      0,\n                      0\n                    union all\n                    select\n                      not b,\n                      iif(b, iif(nt is null, cl - 1, cl), cl),\n                      iif(b, ifnull(nt, pt), pt),\n                      iif(\n                        b,\n                        null,\n                        (\n                          select t\n                          from evolu_timestamp\n                          where\n                            ownerId = ${ownerId}\n                            and l = cl\n                            and t > pt\n                            and t < ${timestamp}\n                          order by t\n                          limit 1\n                        )\n                      ),\n                      iif(\n                        b and cl < ${level} and nt is not null,\n                        (\n                          select (ih1 | h1) - (ih1 & h1)\n                          from evolu_timestamp\n                          where ownerId = ${ownerId} and t = nt\n                        ),\n                        ih1\n                      ),\n                      iif(\n                        b and cl < ${level} and nt is not null,\n                        (\n                          select (ih2 | h2) - (ih2 & h2)\n                          from evolu_timestamp\n                          where ownerId = ${ownerId} and t = nt\n                        ),\n                        ih2\n                      ),\n                      iif(\n                        b and cl < ${level} and nt is not null,\n                        (\n                          select ic + c\n                          from evolu_timestamp\n                          where ownerId = ${ownerId} and t = nt\n                        ),\n                        ic\n                      )\n                    from fc\n                    where cl > 0\n                  )\n                insert into evolu_timestamp (ownerId, t, l, h1, h2, c)\n                select\n                  ${ownerId},\n                  ${timestamp},\n                  ${level},\n                  (${h1} | ih1) - (${h1} & ih1),\n                  (${h2} | ih2) - (${h2} & ih2),\n                  ic + 1\n                from fc\n                order by cl asc\n                limit 1\n                on conflict do nothing;\n              `,\n            ];\n            break;\n        case \"prepend\":\n            queries = [\n                sql.prepared `\n            insert into evolu_timestamp\n              (ownerId, l, t, h1, h2, c)\n            values\n              (${ownerId}, ${level}, ${timestamp}, ${h1}, ${h2}, 1)\n            on conflict do nothing;\n          `,\n                sql.prepared `\n            with\n              ml(ml) as (\n                select max(l)\n                from evolu_timestamp\n                where ownerId = ${ownerId}\n              ),\n              fp(b, cl, pt, nt, h1, h2, c) as (\n                select\n                  0,\n                  (select ml from ml),\n                  null,\n                  null,\n                  null,\n                  null,\n                  null\n                union all\n                select\n                  not b,\n                  iif(b, cl - 1, cl),\n                  iif(\n                    b,\n                    iif(nt is not null and (pt is null or nt < pt), nt, pt),\n                    pt\n                  ),\n                  iif(\n                    b,\n                    null,\n                    (\n                      select t\n                      from evolu_timestamp\n                      where ownerId = ${ownerId} and l = cl and t > ${timestamp}\n                      order by t\n                      limit 1\n                    )\n                  ),\n                  iif(\n                    b and nt is not null and (pt is null or nt < pt),\n                    (\n                      select h1\n                      from evolu_timestamp\n                      where ownerId = ${ownerId} and t = nt\n                    ),\n                    null\n                  ),\n                  iif(\n                    b and nt is not null and (pt is null or nt < pt),\n                    (\n                      select h2\n                      from evolu_timestamp\n                      where ownerId = ${ownerId} and t = nt\n                    ),\n                    null\n                  ),\n                  iif(\n                    b and nt is not null and (pt is null or nt < pt),\n                    (\n                      select c\n                      from evolu_timestamp\n                      where ownerId = ${ownerId} and t = nt\n                    ),\n                    null\n                  )\n                from fp\n                where cl > ${level}\n              ),\n              u(t, h1, h2) as (\n                select\n                  pt,\n                  (${h1} | h1) - (${h1} & h1),\n                  (${h2} | h2) - (${h2} & h2)\n                from fp\n                where h1 is not null and pt is not null\n                order by pt\n                -- Check skiplistMaxLevel docs.\n                limit 10\n              )\n            update evolu_timestamp\n            set\n              h1 = u.h1,\n              h2 = u.h2,\n              c = c + 1\n            from u\n            where\n              changes() > 0\n              and ownerId = ${ownerId}\n              and evolu_timestamp.t = u.t;\n          `,\n            ];\n            break;\n        case \"insert\":\n            queries =\n                level === 1\n                    ? [\n                        sql.prepared `\n                  insert into evolu_timestamp\n                    (ownerId, l, t, h1, h2, c)\n                  values\n                    (${ownerId}, 1, ${timestamp}, ${h1}, ${h2}, 1)\n                  on conflict do nothing;\n                `,\n                        // DEV: Check whether a boolean flag is faster.\n                        sql.prepared `\n                  with\n                    p(l, t, h1, h2) as (\n                      select\n                        (\n                          select max(l) + 1\n                          from evolu_timestamp\n                          where ownerId = ${ownerId}\n                        ),\n                        null,\n                        null,\n                        null\n                      union all\n                      select\n                        p.l - 1,\n                        ifnull(\n                          (\n                            select t\n                            from evolu_timestamp\n                            where\n                              ownerId = ${ownerId}\n                              and l = p.l - 1\n                              and t > ${timestamp}\n                              and (p.t is null or p.t > t)\n                            order by t\n                            limit 1\n                          ),\n                          p.t\n                        ),\n                        (\n                          select h1\n                          from evolu_timestamp\n                          where\n                            ownerId = ${ownerId}\n                            and l = p.l - 1\n                            and t > ${timestamp}\n                            and (p.t is null or p.t > t)\n                          order by t\n                          limit 1\n                        ),\n                        (\n                          select h2\n                          from evolu_timestamp\n                          where\n                            ownerId = ${ownerId}\n                            and l = p.l - 1\n                            and t > ${timestamp}\n                            and (p.t is null or p.t > t)\n                          order by t\n                          limit 1\n                        )\n                      from p\n                      where p.l > 2\n                      -- Check skiplistMaxLevel docs.\n                      limit 10\n                    ),\n                    u(t, h1, h2) as (\n                      select\n                        t,\n                        (${h1} | h1) - (${h1} & h1),\n                        (${h2} | h2) - (${h2} & h2)\n                      from p\n                      where h1 is not null\n                    )\n                  update evolu_timestamp\n                  set\n                    h1 = u.h1,\n                    h2 = u.h2,\n                    c = c + 1\n                  from u\n                  where\n                    changes() > 0\n                    and ownerId = ${ownerId}\n                    and evolu_timestamp.t = u.t;\n                `,\n                    ]\n                    : [\n                        sql.prepared `\n                  insert into evolu_timestamp (ownerId, t, l)\n                  values (${ownerId}, ${timestamp}, ${level})\n                  on conflict do nothing;\n                `,\n                        sql.prepared `\n                  with\n                    c0(b, cl, pt, nt, h1, h2, c) as (\n                      select\n                        0,\n                        (\n                          select max(l)\n                          from evolu_timestamp\n                          where ownerId = ${ownerId}\n                        ),\n                        0,\n                        null,\n                        null,\n                        null,\n                        null\n                      union all\n                      select\n                        not b,\n                        iif(b, iif(nt is null, cl - 1, cl), cl),\n                        iif(b, ifnull(nt, pt), pt),\n                        iif(\n                          b,\n                          null,\n                          (\n                            select t\n                            from evolu_timestamp\n                            where\n                              ownerId = ${ownerId}\n                              and l = cl\n                              and t > pt\n                              and t < ${timestamp}\n                            order by t\n                            limit 1\n                          )\n                        ),\n                        iif(\n                          b and cl < ${level} and nt is not null,\n                          (\n                            select h1\n                            from evolu_timestamp\n                            where ownerId = ${ownerId} and t = nt\n                          ),\n                          null\n                        ),\n                        iif(\n                          b and cl < ${level} and nt is not null,\n                          (\n                            select h2\n                            from evolu_timestamp\n                            where ownerId = ${ownerId} and t = nt\n                          ),\n                          null\n                        ),\n                        iif(\n                          b and cl < ${level} and nt is not null,\n                          (\n                            select c\n                            from evolu_timestamp\n                            where ownerId = ${ownerId} and t = nt\n                          ),\n                          null\n                        )\n                      from c0\n                      where cl > 0\n                    ),\n                    c1(l, t, h1, h2, c) as (\n                      select\n                        ${level},\n                        ${timestamp},\n                        ${h1},\n                        ${h2},\n                        1\n                      union all\n                      select cl, pt, h1, h2, c\n                      from c0\n                      where h1 is not null\n                    ),\n                    c2(rn, l, t, h1, h2, c) as (\n                      select row_number() over (order by l), l, t, h1, h2, c\n                      from c1\n                    ),\n                    c3(rn, l, t, h1, h2, c) as (\n                      select rn, l, t, h1, h2, c from c2 where rn = 1\n                      union all\n                      select\n                        c3.rn + 1,\n                        c2.l,\n                        c2.t,\n                        (c2.h1 | c3.h1) - (c2.h1 & c3.h1),\n                        (c2.h2 | c3.h2) - (c2.h2 & c3.h2),\n                        c2.c + c3.c\n                      from\n                        c3\n                        join c2 on c2.rn = c3.rn + 1\n                    ),\n                    c4(l, t, h1, h2, c, rn) as (\n                      select l, t, h1, h2, c, max(rn)\n                      from c3\n                      group by l\n                    ),\n                    -- DEV: Check whether a boolean flag is faster.\n                    n(l, t, h1, h2, c) as (\n                      select\n                        (\n                          select max(l) + 1\n                          from evolu_timestamp\n                          where ownerId = ${ownerId}\n                        ),\n                        null,\n                        null,\n                        null,\n                        null\n                      union all\n                      select\n                        n.l - 1,\n                        ifnull(\n                          (\n                            select t\n                            from evolu_timestamp\n                            where\n                              ownerId = ${ownerId}\n                              and l = n.l - 1\n                              and t > ${timestamp}\n                              and (n.t is null or t < n.t)\n                            order by t\n                            limit 1\n                          ),\n                          n.t\n                        ),\n                        (\n                          select h1\n                          from evolu_timestamp\n                          where\n                            ownerId = ${ownerId}\n                            and l = n.l - 1\n                            and t > ${timestamp}\n                            and (n.t is null or t < n.t)\n                          order by t\n                          limit 1\n                        ),\n                        (\n                          select h2\n                          from evolu_timestamp\n                          where\n                            ownerId = ${ownerId}\n                            and l = n.l - 1\n                            and t > ${timestamp}\n                            and (n.t is null or t < n.t)\n                          order by t\n                          limit 1\n                        ),\n                        (\n                          select c\n                          from evolu_timestamp\n                          where\n                            ownerId = ${ownerId}\n                            and l = n.l - 1\n                            and t > ${timestamp}\n                            and (n.t is null or t < n.t)\n                          order by t\n                          limit 1\n                        )\n                      from n\n                      where l - 1 > (select min(l) from c4)\n                    ),\n                    u(ut, uh1, uh2, uc) as (\n                      select t, h1, h2, c from c4 where t = ${timestamp}\n                      union all\n                      select\n                        max(t),\n                        iif(\n                          l > ${level},\n                          (${h1} | h1) - (${h1} & h1),\n                          (\n                            select (c4.h1 | n.h1) - (c4.h1 & n.h1)\n                            from c4\n                            where\n                              c4.l = (select max(l) from c4 where c4.l < n.l)\n                          )\n                        ),\n                        iif(\n                          l > ${level},\n                          (${h2} | h2) - (${h2} & h2),\n                          (\n                            select (c4.h2 | n.h2) - (c4.h2 & n.h2)\n                            from c4\n                            where\n                              c4.l = (select max(l) from c4 where c4.l < n.l)\n                          )\n                        ),\n                        iif(\n                          l > ${level},\n                          c + 1,\n                          (\n                            select n.c - c4.c\n                            from c4\n                            where\n                              c4.l = (select max(l) from c4 where c4.l < n.l)\n                          )\n                        )\n                      from n\n                      group by t\n                      -- Check skiplistMaxLevel docs.\n                      limit 10\n                    )\n                  update evolu_timestamp\n                  set\n                    h1 = uh1,\n                    h2 = uh2,\n                    c = uc\n                  from u\n                  where changes() > 0 and ownerId = ${ownerId} and t = ut;\n                `,\n                    ];\n            break;\n    }\n    for (const query of queries) {\n        const result = deps.sqlite.exec(query);\n        if (!result.ok)\n            return result;\n    }\n    return ok();\n};\nexport const timestampBytesToFingerprint = (timestamp) => {\n    const hash = sha256(timestamp).slice(0, fingerprintSize);\n    return hash;\n};\n/**\n * Generates a random skiplist level in the range [1, skiplistMaxLevel].\n * Probabilistic approach avoids the need for explicit tree balancing.\n */\nconst randomSkiplistLevel = (deps) => {\n    let level = 1;\n    while (deps.random.next() <= skiplistProbability &&\n        level < skiplistMaxLevel) {\n        level += 1;\n    }\n    return PositiveInt.orThrow(level);\n};\n/**\n * Probability used for generating Skiplist levels.\n *\n * 0.5 is little faster for the first 30k.\n */\nconst skiplistProbability = 0.25;\n/**\n * The SQLite has weird behaviour when we have to limit CTEs even when we don't\n * actually limit anything; otherwise, it would not work. But without it, SQLite\n * insert and prepend is slow. The 10 is the maximum allowed number, which\n * \"fixes\" SQLite.\n *\n * Because we are using {@link skiplistProbability} 0.25, it's OK even for\n * millions of rows.\n */\nconst skiplistMaxLevel = 10;\nconst fingerprintToSqliteFingerprint = (fingerprint) => {\n    let part1 = BigInt(0);\n    let part2 = BigInt(0);\n    for (let i = 0; i < 6; i++) {\n        part1 = (part1 << BigInt(8)) | BigInt(fingerprint[i]);\n    }\n    for (let i = 6; i < 12; i++) {\n        part2 = (part2 << BigInt(8)) | BigInt(fingerprint[i]);\n    }\n    return [part1.toString(), part2.toString()];\n};\nconst sqliteFingerprintToFingerprint = ([part1String, part2String,]) => {\n    let part1 = BigInt(part1String);\n    let part2 = BigInt(part2String);\n    const hash = new Uint8Array(12);\n    for (let i = 5; i >= 0; i--) {\n        hash[i] = Number(part1 & BigInt(0xff));\n        part1 >>= BigInt(8);\n    }\n    for (let i = 11; i >= 6; i--) {\n        hash[i] = Number(part2 & BigInt(0xff));\n        part2 >>= BigInt(8);\n    }\n    return hash;\n};\nconst getSize = (deps) => (ownerId) => {\n    const result = deps.sqlite.exec(sql.prepared `\n      with\n        ml(ml) as (\n          select max(l)\n          from evolu_timestamp\n          where ownerId = ${ownerId}\n        ),\n        sc(l, pt, c) as (\n          select (select ml + 1 from ml), zeroblob(0), 0\n          union all\n          select\n            sc.l - 1,\n            ifnull(\n              (\n                select max(t)\n                from evolu_timestamp as m\n                where ownerId = ${ownerId} and m.l = sc.l - 1 and m.t > sc.pt\n              ),\n              sc.pt\n            ),\n            ifnull(\n              (\n                select sum(m.c)\n                from evolu_timestamp as m\n                where ownerId = ${ownerId} and m.l = sc.l - 1 and m.t > sc.pt\n              ),\n              0\n            )\n          from sc\n          where sc.l > 1\n        )\n      select sum(c) as size\n      from sc;\n    `);\n    if (!result.ok)\n        return result;\n    return ok(result.value.rows[0].size);\n};\nconst findLowerBound = (deps) => (ownerId, begin, end, upperBound) => {\n    assertBeginEnd(begin, end);\n    if (end === 0 || begin === end || upperBound === InfiniteUpperBound) {\n        return ok(end);\n    }\n    const result = deps.sqlite.exec(sql.prepared `\n      select t\n      from evolu_timestamp\n      where ownerId = ${ownerId} and t >= ${upperBound}\n      order by t\n      limit 1;\n    `);\n    if (!result.ok)\n        return result;\n    if (result.value.rows.length === 0) {\n        return ok(end);\n    }\n    const count = getTimestampCount(deps)(ownerId, result.value.rows[0].t);\n    if (!count.ok)\n        return count;\n    // `decrement` converts a count to an index.\n    return ok(NonNegativeInt.orThrow(decrement(count.value)));\n};\nconst getTimestampCount = (deps) => (ownerId, timestamp) => {\n    const result = deps.sqlite.exec(sql.prepared `\n      with\n        ml(ml) as (\n          select max(l) from evolu_timestamp where ownerId = ${ownerId}\n        ),\n        sc(l, pt, tc) as (\n          select ml + 1, zeroblob(0), 0 from ml\n          union all\n          select\n            sc.l - 1,\n            ifnull(\n              (\n                select max(t)\n                from evolu_timestamp\n                where\n                  ownerId = ${ownerId}\n                  and l = sc.l - 1\n                  and t <= ${timestamp}\n                  and t > sc.pt\n                order by t\n              ),\n              sc.pt\n            ),\n            ifnull(\n              (\n                select sum(c)\n                from evolu_timestamp\n                where\n                  ownerId = ${ownerId}\n                  and l = sc.l - 1\n                  and t <= ${timestamp}\n                  and t > sc.pt\n              ),\n              0\n            )\n          from sc\n          where sc.l > 1 and sc.pt != ${timestamp}\n        )\n      select sum(tc) as count\n      from sc;\n    `);\n    if (!result.ok)\n        return result;\n    return ok(result.value.rows[0].count);\n};\n/**\n * TODO: We reuse {@link fingerprintRanges}, which returns upper bound, which we\n * don't need, so fingerprintRanges should have a parameter for that.\n */\nconst fingerprint = (deps) => (ownerId, begin, end) => {\n    // There is no need to fingerprint an empty range.\n    if (end - begin === 0) {\n        return ok(zeroFingerprint);\n    }\n    if (begin === 0) {\n        const result = fingerprintRanges(deps)(ownerId, [end]);\n        if (!result.ok)\n            return result;\n        return ok(result.value[0].fingerprint);\n    }\n    // We should have a param to skip the first result.\n    const result = fingerprintRanges(deps)(ownerId, [begin, end]);\n    if (!result.ok)\n        return result;\n    return ok(result.value[1].fingerprint);\n};\n/**\n * First, check this: https://logperiodic.com/rbsr.html#tree-friendly-functions\n *\n * We are a little smarter. We leverage continuous ranges to have half of\n * traversals. 16 instead of 32. And we compute all of them in a single SQL\n * select. If only we could get rid of those subqueries. Then, it would be\n * perfect. Btw, reading h1, h2, c in the second step would be slighly faster.\n */\nconst fingerprintRanges = (deps) => (ownerId, buckets, upperBound = InfiniteUpperBound) => {\n    const bucketsJson = JSON.stringify(buckets);\n    const result = deps.sqlite.exec(sql.prepared `\n      with\n        ml(ml) as (\n          select max(l) from evolu_timestamp where ownerId = ${ownerId}\n        ),\n        c0(c) as (select value as c from json_each(${bucketsJson})),\n        c1(c, b, nt, nc, nh1, nh2, ft, tt, dl, ic, h1, h2) as (\n          select\n            c,\n            1,\n            null,\n            null,\n            null,\n            null,\n            zeroblob(0),\n            X'FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF',\n            ml,\n            0,\n            0,\n            0\n          from\n            c0,\n            ml\n          union all\n          select\n            c,\n            not b,\n            iif(\n              b,\n              (\n                select t\n                from evolu_timestamp\n                where l = dl and t > ft and t < tt and ownerId = ${ownerId}\n                order by t\n                limit 1\n              ),\n              null\n            ),\n            iif(\n              b,\n              (\n                select c\n                from evolu_timestamp\n                where l = dl and t > ft and t < tt and ownerId = ${ownerId}\n                order by t\n                limit 1\n              ),\n              null\n            ),\n            iif(\n              b,\n              (\n                select h1\n                from evolu_timestamp\n                where l = dl and t > ft and t < tt and ownerId = ${ownerId}\n                order by t\n                limit 1\n              ),\n              null\n            ),\n            iif(\n              b,\n              (\n                select h2\n                from evolu_timestamp\n                where l = dl and t > ft and t < tt and ownerId = ${ownerId}\n                order by t\n                limit 1\n              ),\n              null\n            ),\n            iif(b, ft, iif(ic + nc <= c, nt, ft)),\n            iif(b, tt, iif(ic + nc <= c, tt, ifnull(nt, tt))),\n            iif(b, dl, iif(ic + nc <= c, dl, dl - 1)),\n            iif(b, ic, iif(ic + nc <= c, ic + nc, ic)),\n            iif(b, h1, iif(ic + nc <= c, ${x(\"h1\", \"nh1\")}, h1)),\n            iif(b, h2, iif(ic + nc <= c, ${x(\"h2\", \"nh2\")}, h2))\n          from c1\n          where iif(b, 1, ic != c)\n        ),\n        c2(h1, h2, t, rn) as (\n          select\n            h1,\n            h2,\n            (\n              select min(t)\n              from evolu_timestamp\n              where t > ft and ownerId = ${ownerId}\n            ),\n            row_number() over (order by c)\n          from c1\n          where c = ic and b = 1\n        ),\n        c3(oh1, oh2, b, rn, h1, h2) as (\n          select h1, h2, t, rn, h1, h2 from c2 where rn = 1\n          union all\n          select\n            c2.h1,\n            c2.h2,\n            t,\n            c2.rn,\n            ${x(\"c3.oh1\", \"c2.h1\")},\n            ${x(\"c3.oh2\", \"c2.h2\")}\n          from\n            c2\n            join c3 on c2.rn = c3.rn + 1\n        )\n      select b, cast(h1 as text) as h1, cast(h2 as text) as h2\n      from c3;\n    `);\n    if (!result.ok)\n        return result;\n    const fingerprintRanges = result.value.rows.map((row, i, arr) => ({\n        type: RangeType.Fingerprint,\n        upperBound: i === arr.length - 1 ? upperBound : row.b,\n        fingerprint: sqliteFingerprintToFingerprint([\n            row.h1,\n            row.h2,\n        ]),\n    }));\n    return ok(fingerprintRanges);\n};\n// XOR in SQLite\nconst x = (a, b) => sql.raw(`(${a} | ${b}) - (${a} & ${b})`);\nexport const getTimestampByIndex = (deps) => (ownerId, index) => {\n    const result = deps.sqlite.exec(sql.prepared `\n      with\n        fi(b, cl, ic, pt, mt, nt, nc) as (\n          select\n            0,\n            (\n              select max(l)\n              from evolu_timestamp\n              where ownerId = ${ownerId}\n            ),\n            0,\n            zeroblob(0),\n            X'FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF',\n            null,\n            0\n          union all\n          select\n            not b,\n            iif(\n              b,\n              iif(nt is null or nt > mt or ic + nc > ${index + 1}, cl - 1, cl),\n              cl\n            ),\n            iif(\n              b,\n              iif(nt is null or nt > mt or ic + nc > ${index + 1}, ic, ic + nc),\n              ic\n            ),\n            iif(\n              b,\n              iif(nt is null or nt > mt or ic + nc > ${index + 1}, pt, nt),\n              pt\n            ),\n            iif(\n              b,\n              iif(\n                nt is null or nt > mt or ic + nc > ${index + 1},\n                iif(nt is not null and nt < mt, nt, mt),\n                mt\n              ),\n              mt\n            ),\n            iif(\n              b,\n              null,\n              (\n                select t\n                from evolu_timestamp\n                where ownerId = ${ownerId} and l = cl and t > pt\n                order by t\n                limit 1\n              )\n            ),\n            iif(\n              b,\n              null,\n              (\n                select c\n                from evolu_timestamp\n                where ownerId = ${ownerId} and l = cl and t > pt\n                order by t\n                limit 1\n              )\n            )\n          from fi\n          where ic != ${index + 1}\n        )\n      select pt\n      from fi\n      where ic == ${index + 1};\n    `);\n    if (!result.ok)\n        return result;\n    return ok(result.value.rows[0].pt);\n};\n/** Retrieves usage information for an owner from the evolu_usage table. */\nexport const getOwnerUsage = (deps) => (ownerIdBytes, initialTimestamp) => {\n    const result = deps.sqlite.exec(sql `\n      select storedBytes, firstTimestamp, lastTimestamp\n      from evolu_usage\n      where ownerId = ${ownerIdBytes};\n    `);\n    if (!result.ok)\n        return result;\n    if (!isNonEmptyReadonlyArray(result.value.rows)) {\n        return ok({\n            storedBytes: null,\n            firstTimestamp: initialTimestamp,\n            lastTimestamp: initialTimestamp,\n        });\n    }\n    const row = firstInArray(result.value.rows);\n    assert(row.firstTimestamp, \"not null\");\n    assert(row.lastTimestamp, \"not null\");\n    return ok({\n        storedBytes: row.storedBytes,\n        firstTimestamp: row.firstTimestamp,\n        lastTimestamp: row.lastTimestamp,\n    });\n};\n/**\n * Updates timestamp bounds in evolu_usage table.\n *\n * Used by both relay and client to maintain firstTimestamp/lastTimestamp after\n * processing messages.\n */\nexport const updateOwnerUsage = (deps) => (ownerIdBytes, storedBytes, firstTimestamp, lastTimestamp) => {\n    const result = deps.sqlite.exec(sql `\n      insert into evolu_usage\n        (\"ownerId\", \"storedBytes\", \"firstTimestamp\", \"lastTimestamp\")\n      values\n        (${ownerIdBytes}, ${storedBytes}, ${firstTimestamp}, ${lastTimestamp})\n      on conflict (ownerId) do update\n        set\n          storedBytes = ${storedBytes},\n          firstTimestamp = ${firstTimestamp},\n          lastTimestamp = ${lastTimestamp};\n    `);\n    if (!result.ok)\n        return result;\n    return ok();\n};\n", "/**\n * Evolu Protocol\n *\n * Evolu Protocol is a local-first, end-to-end encrypted binary synchronization\n * protocol optimized for minimal size and maximum speed. It enables data sync\n * between a client and a relay. In the future, direct peer-to-peer (P2P) sync\n * between clients will be possible without a relay.\n *\n * Relays don't need to sync with each otherclients using those relays will\n * sync them eventually. If a relay is offline (e.g., for maintenance), it will\n * sync automatically later via client sync logic. For relay backup using\n * SQLite, see https://sqlite.org/rsync.html (uses a similar algorithm to Evolu\n * RBSR).\n *\n * Evolu Protocol is designed for SQLite but can be extended to any database. It\n * implements [Range-Based Set\n * Reconciliation](https://arxiv.org/abs/2212.13567). To learn how RBSR works,\n * check [Negentropy](https://logperiodic.com/rbsr.html). Evolu Protocol is\n * similar to Negentropy but uses different encoding and also provides data\n * transfer, ownership, real-time broadcasting, request-response semantics, and\n * error handling.\n *\n * ### Message structure\n *\n * | Field                          | Notes                     |\n * | :----------------------------- | :------------------------ |\n * | **Header**                     |                           |\n * | - {@link protocolVersion}      |                           |\n * | - {@link OwnerId}              | {@link Owner}             |\n * | - messageType                  | {@link MessageType}       |\n * | **Request (messageType=0)**    |                           |\n * | - hasWriteKey                  | 0 = no, 1 = yes           |\n * | - {@link OwnerWriteKey}        | If hasWriteKey = 1        |\n * | - subscriptionFlag             | {@link SubscriptionFlags} |\n * | **Response (messageType=1)**   |                           |\n * | - {@link ProtocolErrorCode}    |                           |\n * | **Broadcast (messageType=2)**  |                           |\n * | - (no additional fields)       |                           |\n * | **Messages**                   |                           |\n * | - {@link NonNegativeInt}       | A number of messages.     |\n * | - {@link EncryptedCrdtMessage} |                           |\n * | **Ranges**                     |                           |\n * | - {@link NonNegativeInt}       | Number of ranges.         |\n * | - {@link Range}                |                           |\n *\n * ### WriteKey validation\n *\n * The initiator sends a hasWriteKey flag and optionally a WriteKey. The\n * WriteKey is required when sending messages as a secure token proving the\n * initiator can write changes. It's ok to not send a WriteKey if the initiator\n * is only syncing (read-only) and not sending messages. The non-initiator\n * validates the WriteKey immediately after parsing the initiator header, before\n * processing any messages or ranges.\n *\n * ### Synchronization\n *\n * - **Messages**: Sends {@link EncryptedCrdtMessage}s in either direction.\n * - **Ranges**: Determines messages to sync. Usage varies by transporte.g., sent\n *   only on WebSocket connection open or with every fetch request.\n *\n * Synchronization involves an initiator and a non-initiator. The **initiator**\n * is typically a client, and the **non-initiator** is typically a relay. Each\n * side processes the received message and responds with a new `ProtocolMessage`\n * if further sync is needed or possible, continuing until both sides are\n * synchronized.\n *\n * The **non-initiator always responds** to provide sync completion feedback,\n * even with empty messages containing only the header and no error. This allows\n * the initiator to detect when synchronization is complete.\n *\n * Both **Messages** and **Ranges** are optional, allowing each side to send,\n * sync, or only subscribe data as needed.\n *\n * When the initiator sends data, the {@link OwnerWriteKey} is required as a\n * secure token proving the initiator can write changes. The non-initiator\n * responds without a {@link OwnerWriteKey}, since the initiators request\n * already signals it wants data. If the non-initiator detects an issue, it\n * sends an error code via the `Error` field in the header back to the\n * initiator. In relay-to-relay or P2P sync, both sides may require the\n * {@link OwnerWriteKey} depending on who is the initiator.\n *\n * ### Protocol errors\n *\n * The protocol uses error codes in the header to signal issues:\n *\n * - {@link ProtocolWriteKeyError}: The provided WriteKey is invalid or missing.\n * - {@link ProtocolWriteError}: A serious relay-side write failure occurred.\n * - {@link ProtocolQuotaError}: Storage or billing quota exceeded.\n * - {@link ProtocolSyncError}: A serious relay-side synchronization failure\n *   occurred.\n * - {@link ProtocolVersionError}: Protocol version mismatch.\n * - {@link ProtocolInvalidDataError}: The message is malformed or corrupted.\n *\n * All protocol errors except `ProtocolInvalidDataError` include the `OwnerId`\n * to allow clients to associate errors with the correct owner.\n *\n * ### Message size limit\n *\n * The protocol enforces a strict maximum size for all messages, defined by\n * {@link ProtocolMessageMaxSize}. This ensures every {@link ProtocolMessage} is\n * less than or equal to this limit, enabling stateless transports, simplified\n * relay implementation, and predictable memory usage. When all messages don't\n * fit within the limit, the protocol automatically continues synchronization in\n * subsequent rounds using range-based reconciliation.\n *\n * Database mutations are limited to 640KB, which is smaller than the protocol\n * message limit to ensure efficient sync with\n * {@link defaultProtocolMessageRangesMaxSize}.\n *\n * ### Why Binary?\n *\n * The protocol avoids JSON because:\n *\n * - Encrypted data doesnt compress well, unlike plain JSON.\n * - Message size must be controlled during creation.\n * - Sequential byte reading is faster than parsing and avoids conversions.\n *\n * It uses structure-aware encoding, significantly outperforming generic binary\n * serialization formats with the following optimizations:\n *\n * - **NonNegativeInt:** Up to 33% smaller than MessagePack.\n * - **DateIso:** Up to 75% smaller.\n * - **Timestamp Encoding:** Delta encoding for milliseconds and run-length\n *   encoding (RLE) for counters and NodeIds.\n * - **Small Integers (0 to 19):** Reduces size by 1 byte per integer.\n *\n * To avoid reinventing serialization where its unnecessarylike for JSON and\n * certain numbersthe Evolu Protocol relies on MessagePack.\n *\n * ### Versioning\n *\n * Evolu Protocol uses explicit versioning to ensure compatibility between\n * clients and relays (or peers). Each protocol message begins with a version\n * number and an `ownerId` in its header.\n *\n * **How version negotiation works:**\n *\n * - The initiator (usually a client) sends a `ProtocolMessage` that includes its\n *   protocol version and the `ownerId`.\n * - The non-initiator (usually a relay or peer) checks the version.\n *\n *   - If the versions match, synchronization proceeds as normal.\n *   - If the versions do not match, the non-initiator responds with a message\n *       containing **its own protocol version and the same `ownerId`**.\n * - The initiator can then detect the version mismatch for that specific owner\n *   and handle it appropriately (e.g., prompt for an update or halt sync).\n *\n * Version negotiation is per-owner, allowing Evolu Protocol to evolve safely\n * over time and provide clear feedback about version mismatches.\n *\n * ### Credible exit\n *\n * The protocol specification is intentionally non-configurable to ensure\n * universal compatibility. This design allows applications (users) to switch\n * between any compliant relay without negotiation or compatibility checks\n * beyond version matching. Relays are generic infrastructure that any\n * application can use interchangeably making exit from any single provider\n * technically feasible and economically viable.\n *\n * @module\n */\n/**\n * TODO:\n *\n * - The client-relay naming convention in functions like\n *   `applyProtocolMessageAsClient` and `applyProtocolMessageAsRelay` is not\n *   ideal. In the future, clients will be able to sync directly with each other\n *   (P2P), making the current naming misleading. Consider using\n *   initiator/non-initiator terminology instead, and consolidate into a single\n *   `applyProtocolMessage` function with conditional arguments to reduce code\n *   duplication.\n * - Replace try-catch with Result + new Error (to preserve stacktraces). Measure\n *   Result overhead, it should be super small.\n * - Allow clients to broadcast messages that are not persisted by relays. This\n *   would enable real-time ephemeral data (like cursor positions, typing\n *   indicators) to be forwarded by relays without storage overhead.\n */\nimport { Packr } from \"msgpackr\";\nimport { isNonEmptyReadonlyArray } from \"../Array.js\";\nimport { assert } from \"../Assert.js\";\nimport { bytesToHex, bytesToUtf8, createBuffer, hexToBytes, utf8ToBytes, } from \"../Buffer.js\";\nimport { createPadmePadding, } from \"../Crypto.js\";\nimport { eqArrayNumber } from \"../Eq.js\";\nimport { computeBalancedBuckets } from \"../Number.js\";\nimport { createRecord, objectToEntries } from \"../Object.js\";\nimport { err, ok } from \"../Result.js\";\nimport { Base64Url, base64UrlToUint8Array, between, DateIso, Id, idBytesToId, idBytesTypeValueLength, idToIdBytes, Int, Json, jsonToJsonValue, NonNegativeInt, Number, PositiveInt, uint8ArrayToBase64Url, } from \"../Type.js\";\nimport { ownerIdToOwnerIdBytes, ownerWriteKeyLength, } from \"./Owner.js\";\nimport { DbChange, fingerprintSize, InfiniteUpperBound, RangeType, } from \"./Storage.js\";\nimport { Counter, eqTimestamp, Millis, timestampBytesLength, timestampBytesToTimestamp, timestampToTimestampBytes, } from \"./Timestamp.js\";\n/**\n * Evolu uses MessagePack for numbers and JSONs.\n *\n * - `variableMapSize: true` - More compact maps, ~5-10% slower encoding\n * - `useRecords: false` - Standard MessagePack without extensions\n */\nconst packr = new Packr({ variableMapSize: true, useRecords: false });\nconst minProtocolMessageMaxSize = 1_000_000;\nconst maxProtocolMessageMaxSize = 100_000_000;\n/**\n * Protocol message maximum size.\n *\n * Defines the upper limit for how large a single protocol message can be.\n * Implementations must enforce a maximum size between 1MB and 100MB to ensure\n * compatibility across all Evolu implementations (the maximum size of mutation\n * change is hardcoded and enforced hence the maximum size can't be smaller).\n *\n * Larger maximum sizes can be configured by relays to reduce roundtrips. For\n * example, a dedicated relay with ample resources could configure a 100MB\n * maximum to minimize roundtrips for large syncs.\n *\n * Only relays can safely configure larger sizes, as clients will handle them.\n * Increasing this value on the client side would break compatibility with\n * relays that enforce smaller limits.\n */\nexport const ProtocolMessageMaxSize = between(minProtocolMessageMaxSize, maxProtocolMessageMaxSize)(Int);\n/**\n * Default {@link ProtocolMessageMaxSize} (1MB).\n *\n * The standard size used across Evolu implementations. Relays with more\n * resources can configure larger sizes to reduce roundtrips.\n */\nexport const defaultProtocolMessageMaxSize = minProtocolMessageMaxSize;\n/**\n * Protocol message ranges maximum size.\n *\n * Defines the upper limit for how large the ranges section of a protocol\n * message can be. Implementations must enforce a maximum size between 3KB and\n * 100KB to ensure compatibility.\n *\n * The upper bound is set to ensure ranges fit within the default 1MB\n * {@link defaultProtocolMessageMaxSize}, maintaining compatibility between all\n * clients and relays.\n */\nexport const ProtocolMessageRangesMaxSize = between(3_000, 100_000)(Int);\n/**\n * Default {@link ProtocolMessageRangesMaxSize} (30KB).\n *\n * The standard size used across Evolu implementations. Relays with more\n * resources can configure larger sizes to reduce roundtrips.\n */\nexport const defaultProtocolMessageRangesMaxSize = 30_000;\n/** Evolu Protocol version. */\nexport const protocolVersion = NonNegativeInt.orThrow(1);\nexport const MessageType = {\n    /** Request message from initiator (client) to non-initiator (relay). */\n    Request: 0,\n    /** Response message from non-initiator (relay) to initiator (client). */\n    Response: 1,\n    /** Broadcast message from non-initiator (relay) to subscribed clients. */\n    Broadcast: 2,\n};\nexport const SubscriptionFlags = {\n    /** No subscription changes for this owner. */\n    None: 0,\n    /** Subscribe to updates for this owner. */\n    Subscribe: 1,\n    /** Unsubscribe from updates for this owner. */\n    Unsubscribe: 2,\n};\nexport const ProtocolErrorCode = {\n    NoError: 0,\n    /** A code for {@link ProtocolWriteKeyError}. */\n    WriteKeyError: 1,\n    /** A code for {@link ProtocolWriteError}. */\n    WriteError: 2,\n    /** A code for {@link ProtocolQuotaError}. */\n    QuotaError: 3,\n    /** A code for {@link ProtocolSyncError}. */\n    SyncError: 4,\n};\n/**\n * Creates a {@link ProtocolMessage} from CRDT messages.\n *\n * If the message size would exceed {@link defaultProtocolMessageMaxSize}, the\n * protocol ensures all messages will be sent in the next round(s) even over\n * unidirectional and stateless transports.\n */\nexport const createProtocolMessageFromCrdtMessages = (deps) => (owner, messages, maxSize) => {\n    const buffer = createProtocolMessageBuffer(owner.id, {\n        messageType: MessageType.Request,\n        totalMaxSize: maxSize ?? defaultProtocolMessageMaxSize,\n        writeKey: owner.writeKey,\n    });\n    let notAllMessagesSent = false;\n    for (const message of messages) {\n        const change = encodeAndEncryptDbChange(deps)(message, owner.encryptionKey);\n        const encryptedCrdtMessage = { timestamp: message.timestamp, change };\n        if (buffer.canAddMessage(encryptedCrdtMessage)) {\n            buffer.addMessage(encryptedCrdtMessage);\n        }\n        else {\n            notAllMessagesSent = true;\n            break;\n        }\n    }\n    if (notAllMessagesSent) {\n        /**\n         * DEV: If not all messages fit due to size limits, we trigger a sync\n         * continuation by appending a Range with a random fingerprint. This\n         * ensures the receiver always responds with ranges, prompting another\n         * sync round.\n         *\n         * The ideal approach would be to send three ranges (skip, fingerprint,\n         * skip) where the fingerprint of unsent messages would act as narrow sync\n         * probe. I think we can send `zeroFingerprint` which can be interpreted\n         * as an indication that the other side should reply with\n         * {@link TimestampsRange}, so no need to restart syncing.\n         *\n         * For now, using a random fingerprint avoids extra complexity and is good\n         * enough for this case.\n         */\n        const randomFingerprint = deps.randomBytes.create(fingerprintSize);\n        // There is always a space for Fingerprint with InfiniteUpperBound.\n        buffer.addRange({\n            type: RangeType.Fingerprint,\n            upperBound: InfiniteUpperBound,\n            fingerprint: randomFingerprint,\n        });\n    }\n    return buffer.unwrap();\n};\n/** Creates a {@link ProtocolMessage} for sync. */\nexport const createProtocolMessageForSync = (deps) => (ownerId, subscriptionFlag) => {\n    const buffer = createProtocolMessageBuffer(ownerId, {\n        messageType: MessageType.Request,\n        subscriptionFlag: subscriptionFlag ?? SubscriptionFlags.None,\n    });\n    const ownerIdBytes = ownerIdToOwnerIdBytes(ownerId);\n    const size = deps.storage.getSize(ownerIdBytes);\n    // Errors are handled by the storage.\n    if (size == null)\n        return null;\n    splitRange(deps)(ownerIdBytes, NonNegativeInt.orThrow(0), size, InfiniteUpperBound, buffer);\n    return buffer.unwrap();\n};\nexport const createProtocolMessageForUnsubscribe = (ownerId) => createProtocolMessageBuffer(ownerId, {\n    messageType: MessageType.Request,\n    subscriptionFlag: SubscriptionFlags.Unsubscribe,\n}).unwrap();\nexport const createProtocolMessageBuffer = (ownerId, options) => {\n    const { totalMaxSize = defaultProtocolMessageMaxSize, rangesMaxSize = defaultProtocolMessageRangesMaxSize, version = protocolVersion, } = options;\n    const buffers = {\n        header: createBuffer(),\n        messages: {\n            timestamps: createTimestampsBuffer(),\n            dbChanges: createBuffer(),\n        },\n        ranges: {\n            timestamps: createTimestampsBuffer(),\n            types: createBuffer(),\n            payloads: createBuffer(),\n        },\n    };\n    encodeNonNegativeInt(buffers.header, version);\n    buffers.header.extend(ownerIdToOwnerIdBytes(ownerId));\n    buffers.header.extend([options.messageType]);\n    if (options.messageType === MessageType.Request) {\n        if (!options.writeKey) {\n            buffers.header.extend([0]);\n        }\n        else {\n            buffers.header.extend([1]);\n            buffers.header.extend(options.writeKey);\n        }\n        const subscriptionFlag = options.subscriptionFlag ?? SubscriptionFlags.None;\n        buffers.header.extend([subscriptionFlag]);\n    }\n    else if (options.messageType === MessageType.Response) {\n        buffers.header.extend([options.errorCode]);\n    }\n    let isLastRangeInfinite = false;\n    const isWithinSizeLimits = () => getSize() <= totalMaxSize;\n    const getSize = () => PositiveInt.orThrow(getHeaderAndMessagesSize() + getRangesSize());\n    const getHeaderAndMessagesSize = () => buffers.header.getLength() +\n        buffers.messages.timestamps.getLength() +\n        buffers.messages.dbChanges.getLength();\n    const getRangesSize = () => buffers.ranges.timestamps.getCount() > 0\n        ? buffers.ranges.timestamps.getLength() +\n            buffers.ranges.types.getLength() +\n            buffers.ranges.payloads.getLength() +\n            safeMargins.remainingRange\n        : 0;\n    /**\n     * We calculated worst-case sizes as closely as possible and added a small\n     * safety margin, since computing exact worst cases is difficult due to\n     * variable-length, run-length, and delta encoding.\n     *\n     * Runtime assertions (`assert`) are used to guarantee that size limits are\n     * never exceeded. If a limit is exceeded, the assertion will fail at the\n     * precise location, making it easy to identify and fix the issue.\n     *\n     * While it would be possible to avoid the safety margin by snapshotting\n     * buffer states and rolling back changes, this would likely impact\n     * performance. If someone has time and wants to experiment with this\n     * approach, contributions are welcome.\n     */\n    const safeMargins = {\n        remainingRange: fingerprintSize + 10, // bytes: range type + possible increased count varint\n        timestamp: 30, // bytes: max millis + max count + NodeId\n        dbChangeLength: 8, // bytes: maximum encoded DbChange length varint\n        splitRange: 800, // bytes: worst case is around 650 bytes\n        timestampsRange: 50, // bytes: range type + its upperBound + possible increased count varint\n    };\n    const addMessageSafeMargin = safeMargins.timestamp +\n        safeMargins.dbChangeLength +\n        safeMargins.remainingRange;\n    return {\n        canAddMessage: (message) => getSize() + addMessageSafeMargin + message.change.length <= totalMaxSize,\n        addMessage: (message) => {\n            buffers.messages.timestamps.add(message.timestamp);\n            encodeLength(buffers.messages.dbChanges, message.change);\n            buffers.messages.dbChanges.extend(message.change);\n            assert(isWithinSizeLimits(), \"the message is too big\");\n        },\n        canSplitRange: () => {\n            return getRangesSize() + safeMargins.splitRange <= rangesMaxSize;\n        },\n        canAddTimestampsRangeAndMessage: (timestamps, message) => {\n            const rangesNewSize = getRangesSize() + timestamps.getLength() + safeMargins.timestampsRange;\n            return (rangesNewSize <= rangesMaxSize &&\n                (message\n                    ? getHeaderAndMessagesSize() +\n                        rangesNewSize +\n                        addMessageSafeMargin +\n                        message.change.length <=\n                        totalMaxSize\n                    : true));\n        },\n        addRange: (range) => {\n            assert(options.messageType !== MessageType.Broadcast, \"Cannot add a range into broadcast message\");\n            assert(!isLastRangeInfinite, \"Cannot add a range after an InfiniteUpperBound range\");\n            isLastRangeInfinite = range.upperBound === InfiniteUpperBound;\n            /**\n             * We don't have to encode InfiniteUpperBound timestamp since it's always\n             * the last because ranges cover the whole universe. For partial sync, we\n             * use SkipRange.\n             */\n            if (range.upperBound !== InfiniteUpperBound)\n                buffers.ranges.timestamps.add(timestampBytesToTimestamp(range.upperBound));\n            else {\n                buffers.ranges.timestamps.addInfinite();\n            }\n            encodeNonNegativeInt(buffers.ranges.types, NonNegativeInt.orThrow(range.type));\n            switch (range.type) {\n                case RangeType.Skip:\n                    break;\n                case RangeType.Fingerprint:\n                    buffers.ranges.payloads.extend(range.fingerprint);\n                    break;\n                case RangeType.Timestamps: {\n                    range.timestamps.append(buffers.ranges.payloads);\n                    break;\n                }\n            }\n            assert(isWithinSizeLimits(), `the range ${range.type} is too big`);\n        },\n        unwrap: () => {\n            if (buffers.ranges.timestamps.getCount() > 0) {\n                assert(isLastRangeInfinite, \"The last range's upperBound must be InfiniteUpperBound\");\n            }\n            buffers.messages.timestamps.append(buffers.header);\n            buffers.header.extend(buffers.messages.dbChanges.unwrap());\n            if (buffers.ranges.timestamps.getCount() > 0) {\n                buffers.ranges.timestamps.append(buffers.header);\n                buffers.header.extend(buffers.ranges.types.unwrap());\n                buffers.header.extend(buffers.ranges.payloads.unwrap());\n            }\n            return buffers.header.unwrap();\n        },\n        getSize,\n    };\n};\nexport const createTimestampsBuffer = () => {\n    let count = NonNegativeInt.orThrow(0);\n    const countBuffer = createBuffer();\n    const syncCount = () => {\n        countBuffer.reset();\n        encodeNonNegativeInt(countBuffer, count);\n    };\n    syncCount();\n    const millisBuffer = createBuffer();\n    let previousMillis = 0;\n    const counterEncoder = createRunLengthEncoder((buffer, value) => {\n        encodeNonNegativeInt(buffer, value);\n    });\n    const nodeIdEncoder = createRunLengthEncoder((buffer, value) => {\n        encodeNodeId(buffer, value);\n    });\n    return {\n        add: (timestamp) => {\n            const delta = timestamp.millis - previousMillis;\n            assert(NonNegativeInt.is(delta), \"The delta must be NonNegativeInt\");\n            count++;\n            syncCount();\n            previousMillis = timestamp.millis;\n            encodeNonNegativeInt(millisBuffer, delta);\n            counterEncoder.add(timestamp.counter);\n            nodeIdEncoder.add(timestamp.nodeId);\n        },\n        addInfinite: () => {\n            count++;\n            syncCount();\n        },\n        getCount: () => count,\n        getLength: () => countBuffer.getLength() +\n            millisBuffer.getLength() +\n            counterEncoder.getLength() +\n            nodeIdEncoder.getLength(),\n        append: (buffer) => {\n            buffer.extend(countBuffer.unwrap());\n            buffer.extend(millisBuffer.unwrap());\n            buffer.extend(counterEncoder.unwrap());\n            buffer.extend(nodeIdEncoder.unwrap());\n        },\n    };\n};\nconst createRunLengthEncoder = (encodeValue) => {\n    const buffer = createBuffer();\n    let previousLength = NonNegativeInt.orThrow(0);\n    let previousValue = null;\n    let runLength = NonNegativeInt.orThrow(0);\n    return {\n        add: (value) => {\n            if (value === previousValue) {\n                runLength++;\n                buffer.truncate(previousLength);\n            }\n            else {\n                previousValue = value;\n                runLength = NonNegativeInt.orThrow(1);\n            }\n            previousLength = buffer.getLength();\n            encodeValue(buffer, value);\n            encodeNonNegativeInt(buffer, runLength);\n        },\n        getLength: () => buffer.getLength(),\n        unwrap: () => buffer.unwrap(),\n    };\n};\nexport const applyProtocolMessageAsClient = (deps) => async (inputMessage, options = {}) => {\n    try {\n        const input = createBuffer(inputMessage);\n        const [requestedVersion, ownerId] = decodeVersionAndOwner(input);\n        const version = options.version ?? protocolVersion;\n        if (requestedVersion !== version) {\n            return err({\n                type: \"ProtocolVersionError\",\n                version: requestedVersion,\n                isInitiator: version < requestedVersion,\n                ownerId,\n            });\n        }\n        const messageType = input.shift();\n        assert(messageType === MessageType.Response ||\n            messageType === MessageType.Broadcast, \"Invalid MessageType\");\n        if (messageType === MessageType.Response) {\n            const errorCode = input.shift();\n            if (errorCode !== ProtocolErrorCode.NoError) {\n                switch (errorCode) {\n                    case ProtocolErrorCode.WriteKeyError:\n                        return err({\n                            type: \"ProtocolWriteKeyError\",\n                            ownerId,\n                        });\n                    case ProtocolErrorCode.WriteError:\n                        return err({\n                            type: \"ProtocolWriteError\",\n                            ownerId,\n                        });\n                    case ProtocolErrorCode.QuotaError:\n                        return err({\n                            type: \"ProtocolQuotaError\",\n                            ownerId,\n                        });\n                    case ProtocolErrorCode.SyncError:\n                        return err({\n                            type: \"ProtocolSyncError\",\n                            ownerId,\n                        });\n                    default:\n                        throw new ProtocolDecodeError(`Invalid ProtocolErrorCode: ${errorCode}`);\n                }\n            }\n        }\n        const messages = decodeMessages(input);\n        const ownerIdBytes = ownerIdToOwnerIdBytes(ownerId);\n        if (isNonEmptyReadonlyArray(messages)) {\n            const result = await deps.storage.writeMessages(ownerIdBytes, messages);\n            // Errors are handled by the Storage. Here we just stop syncing.\n            if (!result.ok)\n                return ok({ type: \"no-response\" });\n        }\n        // Now: No writeKey, no sync.\n        // TODO: Allow to sync SharedReadonlyOwner\n        // Without local changes, writeKey will not be required.\n        // With local changes, writeKey will be required and if not provided,\n        // the sync will stop.\n        const writeKey = options.getWriteKey?.(ownerId);\n        if (writeKey == null) {\n            return ok({ type: \"no-response\" });\n        }\n        if (messageType === MessageType.Broadcast) {\n            return ok({ type: \"broadcast\" });\n        }\n        const ranges = decodeRanges(input);\n        if (!isNonEmptyReadonlyArray(ranges)) {\n            return ok({ type: \"no-response\" });\n        }\n        const output = createProtocolMessageBuffer(ownerId, {\n            messageType: MessageType.Request,\n            writeKey,\n            rangesMaxSize: options.rangesMaxSize,\n        });\n        const result = sync(deps)(ranges, output, ownerIdBytes);\n        // Client sync error (handled via Storage) or no changes.\n        if (!result.ok || !result.value) {\n            return ok({ type: \"no-response\" });\n        }\n        return ok({ type: \"response\", message: output.unwrap() });\n    }\n    catch (error) {\n        return err({\n            type: \"ProtocolInvalidDataError\",\n            data: inputMessage,\n            error,\n        });\n    }\n};\nexport const applyProtocolMessageAsRelay = (deps) => async (inputMessage, options = {}, \n/** For tests only. */\nversion = protocolVersion) => {\n    try {\n        const input = createBuffer(inputMessage);\n        const [requestedVersion, ownerId] = decodeVersionAndOwner(input);\n        const ownerIdBytes = ownerIdToOwnerIdBytes(ownerId);\n        if (requestedVersion !== version) {\n            // Non-initiator responds with its version and ownerId.\n            const output = createBuffer();\n            encodeNonNegativeInt(output, version);\n            output.extend(ownerIdBytes);\n            return ok({\n                type: \"response\",\n                message: output.unwrap(),\n            });\n        }\n        const messageType = input.shift();\n        assert(messageType === MessageType.Request, \"Invalid MessageType\");\n        const hasWriteKey = input.shift();\n        let writeKey;\n        if (hasWriteKey === 1) {\n            writeKey = input.shiftN(ownerWriteKeyLength);\n        }\n        const subscriptionFlag = input.shift();\n        switch (subscriptionFlag) {\n            case SubscriptionFlags.Subscribe:\n                options.subscribe?.(ownerId);\n                break;\n            case SubscriptionFlags.Unsubscribe:\n                options.unsubscribe?.(ownerId);\n                break;\n            case SubscriptionFlags.None:\n                break;\n        }\n        if (writeKey) {\n            const isValid = deps.storage.validateWriteKey(ownerIdBytes, writeKey);\n            if (!isValid) {\n                return ok({\n                    type: \"response\",\n                    message: createProtocolMessageBuffer(ownerId, {\n                        messageType: MessageType.Response,\n                        errorCode: ProtocolErrorCode.WriteKeyError,\n                    }).unwrap(),\n                });\n            }\n        }\n        const messages = decodeMessages(input);\n        if (isNonEmptyReadonlyArray(messages)) {\n            if (!writeKey) {\n                return ok({\n                    type: \"response\",\n                    message: createProtocolMessageBuffer(ownerId, {\n                        messageType: MessageType.Response,\n                        errorCode: ProtocolErrorCode.WriteKeyError,\n                    }).unwrap(),\n                });\n            }\n            const result = await deps.storage.writeMessages(ownerIdBytes, messages);\n            if (!result.ok) {\n                const errorCode = result.error.type === \"StorageWriteError\"\n                    ? ProtocolErrorCode.WriteError\n                    : ProtocolErrorCode.QuotaError;\n                const message = createProtocolMessageBuffer(ownerId, {\n                    messageType: MessageType.Response,\n                    errorCode,\n                }).unwrap();\n                return ok({ type: \"response\", message });\n            }\n            /**\n             * Broadcast messages to all subscribed owners for real-time\n             * synchronization between clients.\n             *\n             * Messages are only broadcasted after successful write to ensure\n             * devices that can still sync aren't affected by quota errors, and to\n             * prevent using a half-working relay service (broadcasting without\n             * persistence).\n             *\n             * When a relay's database is deleted or clients migrate to a new relay\n             * (without data migration), clients will sync their data to the relay,\n             * and the relay will broadcast those messages to other connected\n             * clients. Those clients may receive messages they already have, but\n             * this is safe because Evolu sync is idempotent. As the relay becomes\n             * more synchronized with clients over time, fewer duplicate messages\n             * will be broadcasted.\n             */\n            if (options.broadcast) {\n                const broadcastBuffer = createProtocolMessageBuffer(ownerId, {\n                    messageType: MessageType.Broadcast,\n                    totalMaxSize: options.totalMaxSize,\n                    rangesMaxSize: options.rangesMaxSize,\n                    version,\n                });\n                for (const message of messages) {\n                    broadcastBuffer.addMessage(message);\n                }\n                options.broadcast(ownerId, broadcastBuffer.unwrap());\n            }\n        }\n        const ranges = decodeRanges(input);\n        const output = createProtocolMessageBuffer(ownerId, {\n            messageType: MessageType.Response,\n            errorCode: ProtocolErrorCode.NoError,\n            totalMaxSize: options.totalMaxSize,\n            rangesMaxSize: options.rangesMaxSize,\n        });\n        // Non-initiators always respond to provide sync completion feedback,\n        // even when there's nothing to sync.\n        if (!isNonEmptyReadonlyArray(ranges)) {\n            return ok({ type: \"response\", message: output.unwrap() });\n        }\n        const result = sync(deps)(ranges, output, ownerIdBytes);\n        const message = result.ok\n            ? output.unwrap()\n            : createProtocolMessageBuffer(ownerId, {\n                messageType: MessageType.Response,\n                errorCode: result.error,\n            }).unwrap();\n        // Non-initiators always respond to provide sync completion feedback,\n        return ok({ type: \"response\", message });\n    }\n    catch (error) {\n        return err({\n            type: \"ProtocolInvalidDataError\",\n            data: inputMessage,\n            error,\n        });\n    }\n};\nconst decodeVersionAndOwner = (input) => {\n    // This structure must never change across protocol versions. The version\n    // and owner ID must always be the first two fields in every protocol message\n    // to enable version negotiation and owner identification before any other\n    // processing occurs.\n    const version = decodeNonNegativeInt(input);\n    const ownerId = decodeId(input);\n    return [version, ownerId];\n};\n/**\n * Error thrown for internal protocol validation failures, such as invalid data\n * or type errors.\n */\nclass ProtocolDecodeError extends Error {\n    constructor(message) {\n        super(message);\n        this.name = this.constructor.name;\n        Error.captureStackTrace(this, this.constructor);\n    }\n}\nconst decodeMessages = (buffer) => {\n    const timestamps = decodeTimestamps(buffer);\n    const messages = [];\n    for (const timestamp of timestamps) {\n        const changeLength = decodeLength(buffer);\n        const change = buffer.shiftN(changeLength);\n        messages.push({ timestamp, change });\n    }\n    return messages;\n};\nconst sync = (deps) => (ranges, output, ownerIdBytes) => {\n    const outputInitialSize = output.getSize();\n    const storageSize = deps.storage.getSize(ownerIdBytes);\n    if (storageSize == null)\n        return err(ProtocolErrorCode.SyncError);\n    let prevUpperBound = null;\n    let prevIndex = NonNegativeInt.orThrow(0);\n    let skip = false;\n    let nonSkipRangeAdded = false;\n    const skipRange = (range) => {\n        // The last range, if any non skip was added, must have InfiniteUpperBound.\n        if (nonSkipRangeAdded && range.upperBound === InfiniteUpperBound) {\n            output.addRange({\n                type: RangeType.Skip,\n                upperBound: InfiniteUpperBound,\n            });\n        }\n        else {\n            skip = true;\n        }\n    };\n    const coalesceSkipsBeforeAdd = () => {\n        // Set to true because we are going to add a non skip range.\n        nonSkipRangeAdded = true;\n        if (skip) {\n            skip = false;\n            assert(prevUpperBound != null, \"prevUpperBound is null\");\n            // There is always a space for a skip range before adding.\n            output.addRange({\n                type: RangeType.Skip,\n                upperBound: prevUpperBound,\n            });\n        }\n    };\n    // When we don't have a space...\n    const addFingerprintForRemainingRange = (begin) => {\n        const fingerprint = deps.storage.fingerprint(ownerIdBytes, begin, storageSize);\n        if (!fingerprint)\n            return false;\n        // There is always a space for a ramaining range.\n        output.addRange({\n            type: RangeType.Fingerprint,\n            upperBound: InfiniteUpperBound,\n            fingerprint,\n        });\n        return true;\n    };\n    for (const range of ranges) {\n        const currentUpperBound = range.upperBound;\n        const lower = prevIndex;\n        let upper = deps.storage.findLowerBound(ownerIdBytes, prevIndex, storageSize, currentUpperBound);\n        if (upper == null)\n            return err(ProtocolErrorCode.SyncError);\n        switch (range.type) {\n            case RangeType.Skip: {\n                skipRange(range);\n                break;\n            }\n            case RangeType.Fingerprint: {\n                const ourFingerprint = deps.storage.fingerprint(ownerIdBytes, lower, upper);\n                if (ourFingerprint == null)\n                    return err(ProtocolErrorCode.SyncError);\n                if (eqArrayNumber(range.fingerprint, ourFingerprint)) {\n                    skipRange(range);\n                }\n                else {\n                    if (output.canSplitRange()) {\n                        coalesceSkipsBeforeAdd();\n                        splitRange(deps)(ownerIdBytes, lower, upper, currentUpperBound, output);\n                    }\n                    else {\n                        return addFingerprintForRemainingRange(upper)\n                            ? ok(true)\n                            : err(ProtocolErrorCode.SyncError);\n                    }\n                }\n                break;\n            }\n            case RangeType.Timestamps: {\n                let endBound = currentUpperBound;\n                const timestampsWeNeed = new Map(range.timestamps.map((t) => [t.join(), true]));\n                const ourTimestamps = createTimestampsBuffer();\n                let cantReadDbChange = false;\n                let exceeded = false;\n                deps.storage.iterate(ownerIdBytes, lower, upper, (timestamp, index) => {\n                    const timestampString = timestamp.join();\n                    const timestampBinary = timestampBytesToTimestamp(timestamp);\n                    let message = null;\n                    if (timestampsWeNeed.has(timestampString)) {\n                        timestampsWeNeed.delete(timestampString);\n                    }\n                    else {\n                        const dbChange = deps.storage.readDbChange(ownerIdBytes, timestamp);\n                        if (dbChange == null) {\n                            cantReadDbChange = true;\n                            return false;\n                        }\n                        message = {\n                            timestamp: timestampBinary,\n                            change: dbChange,\n                        };\n                    }\n                    if (!output.canAddTimestampsRangeAndMessage(ourTimestamps, message)) {\n                        exceeded = true;\n                        endBound = timestamp;\n                        upper = index;\n                        return false;\n                    }\n                    ourTimestamps.add(timestampBinary);\n                    if (message)\n                        output.addMessage(message);\n                    return true;\n                });\n                if (cantReadDbChange) {\n                    return err(ProtocolErrorCode.SyncError);\n                }\n                const addRange = () => {\n                    coalesceSkipsBeforeAdd();\n                    output.addRange({\n                        type: RangeType.Timestamps,\n                        upperBound: endBound,\n                        timestamps: ourTimestamps,\n                    });\n                };\n                if (exceeded) {\n                    addRange();\n                    if (!addFingerprintForRemainingRange(upper)) {\n                        return err(ProtocolErrorCode.SyncError);\n                    }\n                    return ok(true);\n                }\n                // If we need something, we have to respond with our timestamps.\n                if (timestampsWeNeed.size > 0) {\n                    addRange();\n                }\n                else {\n                    skipRange(range);\n                }\n                break;\n            }\n        }\n        prevIndex = upper;\n        prevUpperBound = currentUpperBound;\n    }\n    // If all ranges were skipped, there are no changes and sync is complete.\n    const hasChange = output.getSize() > outputInitialSize;\n    return ok(hasChange);\n};\nconst splitRange = (deps) => (ownerId, lower, upper, upperBound, buffer) => {\n    const itemCount = NonNegativeInt.orThrow(upper - lower);\n    const buckets = computeBalancedBuckets(itemCount);\n    if (!buckets.ok) {\n        const range = {\n            type: RangeType.Timestamps,\n            upperBound,\n            timestamps: createTimestampsBuffer(),\n        };\n        deps.storage.iterate(ownerId, NonNegativeInt.orThrow(0), itemCount, (timestamp) => {\n            range.timestamps.add(timestampBytesToTimestamp(timestamp));\n            return true;\n        });\n        buffer.addRange(range);\n        return;\n    }\n    // Check Storage.ts `fingerprint` and `fingerprintRanges` docs.\n    const fingerprintRangesBuckets = lower === 0\n        ? buckets.value\n        : [\n            lower,\n            ...buckets.value.map((b) => NonNegativeInt.orThrow(b + lower)),\n        ];\n    const fingerprintRanges = deps.storage.fingerprintRanges(ownerId, fingerprintRangesBuckets, upperBound);\n    // Errors are handled by the storage.\n    if (fingerprintRanges == null)\n        return;\n    const rangesToUse = lower > 0 ? fingerprintRanges.slice(1) : fingerprintRanges;\n    for (const range of rangesToUse) {\n        buffer.addRange(range);\n    }\n};\nconst decodeRanges = (buffer) => {\n    if (buffer.getLength() === 0)\n        return [];\n    const rangesCount = decodeNonNegativeInt(buffer);\n    if (rangesCount === 0)\n        return [];\n    const timestampsCount = NonNegativeInt.orThrow(rangesCount - 1);\n    const timestamps = decodeTimestamps(buffer, timestampsCount);\n    const rangeTypes = [];\n    for (let i = 0; i < rangesCount; i++) {\n        const rangeType = decodeNonNegativeInt(buffer);\n        switch (rangeType) {\n            case RangeType.Fingerprint:\n            case RangeType.Skip:\n            case RangeType.Timestamps:\n                rangeTypes.push(rangeType);\n                break;\n            default:\n                throw new ProtocolDecodeError(`Invalid RangeType: ${rangeType}`);\n        }\n    }\n    const ranges = [];\n    for (let i = 0; i < rangesCount; i++) {\n        const upperBound = i < timestampsCount\n            ? timestampToTimestampBytes(timestamps[i])\n            : InfiniteUpperBound;\n        const rangeType = rangeTypes[i];\n        switch (rangeType) {\n            case RangeType.Skip:\n                ranges.push({ type: RangeType.Skip, upperBound });\n                break;\n            case RangeType.Fingerprint: {\n                const fingerprint = buffer.shiftN(fingerprintSize);\n                ranges.push({\n                    type: RangeType.Fingerprint,\n                    upperBound,\n                    fingerprint,\n                });\n                break;\n            }\n            case RangeType.Timestamps: {\n                const timestamps = decodeTimestamps(buffer).map(timestampToTimestampBytes);\n                ranges.push({\n                    type: RangeType.Timestamps,\n                    upperBound,\n                    timestamps,\n                });\n                break;\n            }\n        }\n    }\n    return ranges;\n};\n/** Decodes an array of sorted timestamps with delta-encoded millis. */\nconst decodeTimestamps = (buffer, length) => {\n    length ??= decodeNonNegativeInt(buffer);\n    let previousMillis = 0;\n    const millises = [];\n    for (let i = 0; i < length; i++) {\n        const deltaMillis = decodeNonNegativeInt(buffer);\n        const millis = Millis.from(previousMillis + deltaMillis);\n        if (!millis.ok)\n            throw new ProtocolDecodeError(millis.error.type);\n        millises.push(millis.value);\n        previousMillis = millis.value;\n    }\n    const counters = [];\n    let counterIndex = 0;\n    while (counterIndex < length) {\n        const counter = Counter.from(decodeNonNegativeInt(buffer));\n        if (!counter.ok)\n            throw new ProtocolDecodeError(counter.error.type);\n        const runLength = decodeNonNegativeInt(buffer);\n        for (let i = 0; i < runLength; i++) {\n            counters.push(counter.value);\n            counterIndex++;\n        }\n    }\n    const nodeIds = [];\n    let nodeIdIndex = 0;\n    while (nodeIdIndex < length) {\n        const nodeId = decodeNodeId(buffer);\n        const runLength = decodeNonNegativeInt(buffer);\n        for (let i = 0; i < runLength; i++) {\n            nodeIds.push(nodeId);\n            nodeIdIndex++;\n        }\n    }\n    const timestamps = [];\n    for (let i = 0; i < length; i++) {\n        timestamps.push({\n            millis: millises[i],\n            counter: counters[i],\n            nodeId: nodeIds[i],\n        });\n    }\n    return timestamps;\n};\nconst decodeId = (buffer) => {\n    const bytes = buffer.shiftN(idBytesTypeValueLength);\n    return idBytesToId(bytes);\n};\n/**\n * Evolu uses MessagePack to handle all number variants except for\n * NonNegativeInt. For NonNegativeInt, Evolu provides more efficient encoding.\n */\nexport const encodeNumber = (buffer, number) => {\n    buffer.extend(packr.pack(number));\n};\nexport const decodeNumber = (buffer) => {\n    let number;\n    let end;\n    packr.unpackMultiple(buffer.unwrap(), (n, _, e) => {\n        number = n;\n        end = e;\n        return false;\n    });\n    const endResult = NonNegativeInt.fromUnknown(end);\n    if (!endResult.ok)\n        throw new ProtocolDecodeError(endResult.error.type);\n    const numberResult = Number.fromUnknown(number);\n    if (!numberResult.ok)\n        throw new ProtocolDecodeError(numberResult.error.type);\n    buffer.shiftN(endResult.value);\n    return numberResult.value;\n};\n/**\n * Encodes an array of boolean flags into a single byte.\n *\n * Each element in the array corresponds to a bit (0-7). Array can have 0-8\n * elements.\n *\n * ### Example\n *\n * ```ts\n * encodeFlags(buffer, [true, false, true]); // Encodes bits 0, 1, 2\n * ```\n */\nexport const encodeFlags = (buffer, flags) => {\n    let byte = 0;\n    for (let i = 0; i < flags.length && i < 8; i++) {\n        if (flags[i]) {\n            byte |= 1 << i;\n        }\n    }\n    buffer.extend([byte]);\n};\n/**\n * Decodes a byte into an array of boolean flags.\n *\n * ### Example\n *\n * ```ts\n * const flags = decodeFlags(buffer, 3); // Decode 3 flags\n * ```\n */\nexport const decodeFlags = (buffer, count) => {\n    const byte = buffer.shift();\n    const flags = [];\n    for (let i = 0; i < count && i < 8; i++) {\n        flags.push((byte & (1 << i)) !== 0);\n    }\n    return flags;\n};\n/**\n * Encodes and encrypts a {@link DbChange} using the provided owner's encryption\n * key. Returns an encrypted binary representation as {@link EncryptedDbChange}.\n *\n * The format includes the protocol version for backward compatibility and the\n * timestamp for tamper-proof verification that the timestamp matches the change\n * data.\n */\nexport const encodeAndEncryptDbChange = (deps) => (message, key) => {\n    const buffer = createBuffer();\n    encodeNonNegativeInt(buffer, protocolVersion);\n    // Encode the timestamp to prevent tampering (e.g., a malicious relay\n    // assigning this EncryptedDbChange to a different EncryptedCrdtMessage)\n    buffer.extend(timestampToTimestampBytes(message.timestamp));\n    encodeFlags(buffer, [\n        message.change.isInsert,\n        message.change.isDelete != null,\n        message.change.isDelete ?? false,\n    ]);\n    encodeString(buffer, message.change.table);\n    buffer.extend(idToIdBytes(message.change.id));\n    const entries = objectToEntries(message.change.values);\n    encodeLength(buffer, entries);\n    for (const [column, value] of entries) {\n        encodeString(buffer, column);\n        encodeSqliteValue(buffer, value);\n    }\n    // Add PADM padding (ignored during decoding)\n    buffer.extend(createPadmePadding(buffer.getLength()));\n    const { nonce, ciphertext } = deps.symmetricCrypto.encrypt(buffer.unwrap(), key);\n    buffer.reset();\n    buffer.extend(nonce);\n    encodeLength(buffer, ciphertext);\n    buffer.extend(ciphertext);\n    return buffer.unwrap();\n};\n/**\n * Decrypts and decodes an {@link EncryptedCrdtMessage} using the provided\n * owner's encryption key. Verifies that the embedded timestamp matches the\n * expected timestamp to ensure message integrity.\n */\nexport const decryptAndDecodeDbChange = (deps) => (message, key) => {\n    try {\n        const buffer = createBuffer(message.change);\n        const nonce = buffer.shiftN(deps.symmetricCrypto.nonceLength);\n        const ciphertext = buffer.shiftN(decodeLength(buffer));\n        const plaintextBytes = deps.symmetricCrypto.decrypt(ciphertext, key, nonce);\n        if (!plaintextBytes.ok)\n            return plaintextBytes;\n        buffer.reset();\n        buffer.extend(plaintextBytes.value);\n        // Decode version (for future compatibility, not need yet)\n        decodeNonNegativeInt(buffer);\n        const timestamp = timestampBytesToTimestamp(buffer.shiftN(timestampBytesLength));\n        if (!eqTimestamp(timestamp, message.timestamp)) {\n            return err({\n                type: \"ProtocolTimestampMismatchError\",\n                expected: message.timestamp,\n                timestamp,\n            });\n        }\n        const flags = decodeFlags(buffer, PositiveInt.orThrow(3));\n        const table = decodeString(buffer);\n        const id = decodeId(buffer);\n        const length = decodeLength(buffer);\n        const values = createRecord();\n        for (let i = 0; i < length; i++) {\n            const column = decodeString(buffer);\n            const value = decodeSqliteValue(buffer);\n            values[column] = value;\n        }\n        const dbChange = DbChange.orThrow({\n            table,\n            id,\n            values,\n            isInsert: flags[0],\n            isDelete: flags[1] ? flags[2] : null,\n        });\n        return ok(dbChange);\n    }\n    catch (error) {\n        return err({\n            type: \"ProtocolInvalidDataError\",\n            data: message.change,\n            error,\n        });\n    }\n};\n/**\n * Encodes a non-negative integer into a variable-length integer format. It's\n * more efficient than encoding via {@link encodeNumber}.\n *\n * https://en.wikipedia.org/wiki/Variable-length_quantity\n */\nexport const encodeNonNegativeInt = (buffer, int) => {\n    if (int === 0) {\n        buffer.extend([0]);\n        return;\n    }\n    let remaining = BigInt(int);\n    const bytes = [];\n    while (remaining !== 0n) {\n        const byte = globalThis.Number(remaining & 127n);\n        bytes.push(byte);\n        remaining >>= 7n;\n    }\n    for (let i = 0; i < bytes.length - 1; i++) {\n        bytes[i] |= 128;\n    }\n    buffer.extend(bytes);\n};\n/**\n * Decodes a non-negative integer from a variable-length integer format.\n *\n * https://en.wikipedia.org/wiki/Variable-length_quantity\n */\nexport const decodeNonNegativeInt = (buffer) => {\n    let result = 0n;\n    let shift = 0n;\n    let byte;\n    // 8 is the smallest required count\n    for (let byteCount = 0; byteCount < 8; byteCount++) {\n        byte = buffer.shift();\n        result |= BigInt(byte & 127) << shift;\n        if ((byte & 128) === 0)\n            break;\n        shift += 7n;\n    }\n    const int = NonNegativeInt.from(globalThis.Number(result));\n    if (!int.ok)\n        throw new ProtocolDecodeError(int.error.type);\n    return int.value;\n};\nexport const encodeLength = (buffer, value) => {\n    encodeNonNegativeInt(buffer, NonNegativeInt.orThrow(value.length));\n};\nexport const decodeLength = decodeNonNegativeInt;\nexport const encodeString = (buffer, value) => {\n    const bytes = utf8ToBytes(value);\n    encodeLength(buffer, bytes);\n    buffer.extend(bytes);\n};\nexport const decodeString = (buffer) => {\n    const length = decodeLength(buffer);\n    const bytes = buffer.shiftN(length);\n    return bytesToUtf8(bytes);\n};\nexport const encodeNodeId = (buffer, nodeId) => {\n    buffer.extend(hexToBytes(nodeId));\n};\nexport const decodeNodeId = (buffer) => {\n    const bytes = buffer.shiftN(NonNegativeInt.orThrow(8));\n    return bytesToHex(bytes);\n};\n// Small ints are encoded into ProtocolValueType, saving one byte per int.\nconst isSmallInt = (value) => value >= 0 && value < 20;\nexport const ProtocolValueType = {\n    // 0-19 small ints\n    // SQLite types\n    String: NonNegativeInt.orThrow(20),\n    Number: NonNegativeInt.orThrow(21),\n    Null: NonNegativeInt.orThrow(22),\n    Bytes: NonNegativeInt.orThrow(23),\n    // We can add more types for other DBs or anything else later.\n    // Optimized types\n    NonNegativeInt: NonNegativeInt.orThrow(30),\n    // String optimizations\n    EmptyString: NonNegativeInt.orThrow(31), // 1 byte vs 2 bytes (50% reduction)\n    Base64Url: NonNegativeInt.orThrow(32),\n    Id: NonNegativeInt.orThrow(33),\n    Json: NonNegativeInt.orThrow(34),\n    // new Date().toISOString()   - 24 bytes\n    // encoded with fixed length  - 8 bytes\n    // encode as NonNegativeInt   - 6 bytes (additional 25% reduction)\n    DateIsoWithNonNegativeTime: NonNegativeInt.orThrow(35),\n    DateIsoWithNegativeTime: NonNegativeInt.orThrow(36), // 9 bytes\n    // TODO: Operations (from 40)\n    // Increment, Decrement, Patch, whatever.\n};\nexport const encodeSqliteValue = (buffer, value) => {\n    if (value === null) {\n        encodeNonNegativeInt(buffer, ProtocolValueType.Null);\n        return;\n    }\n    switch (typeof value) {\n        case \"string\": {\n            if (value === \"\") {\n                encodeNonNegativeInt(buffer, ProtocolValueType.EmptyString);\n                return;\n            }\n            const dateIso = DateIso.fromParent(value);\n            if (dateIso.ok) {\n                const time = new Date(dateIso.value).getTime();\n                if (NonNegativeInt.is(time)) {\n                    encodeNonNegativeInt(buffer, ProtocolValueType.DateIsoWithNonNegativeTime);\n                    encodeNonNegativeInt(buffer, time);\n                }\n                else {\n                    encodeNonNegativeInt(buffer, ProtocolValueType.DateIsoWithNegativeTime);\n                    encodeNumber(buffer, time);\n                }\n                return;\n            }\n            const id = Id.fromParent(value);\n            if (id.ok) {\n                encodeNonNegativeInt(buffer, ProtocolValueType.Id);\n                buffer.extend(idToIdBytes(id.value));\n                return;\n            }\n            const json = Json.fromParent(value);\n            // Only encode as Json if it survives JSON.parse/JSON.stringify round-trip.\n            // Some valid JSON strings like \"-0E0\" get normalized to \"0\" during parsing,\n            // which would cause data corruption if we don't verify round-trip safety.\n            if (json.ok && JSON.stringify(jsonToJsonValue(json.value)) === value) {\n                const jsonBytes = packr.pack(jsonToJsonValue(json.value));\n                encodeNonNegativeInt(buffer, ProtocolValueType.Json);\n                encodeLength(buffer, jsonBytes);\n                buffer.extend(jsonBytes);\n                return;\n            }\n            const base64Url = Base64Url.fromParent(value);\n            if (base64Url.ok) {\n                encodeNonNegativeInt(buffer, ProtocolValueType.Base64Url);\n                const bytes = base64UrlToUint8Array(base64Url.value);\n                encodeLength(buffer, bytes);\n                buffer.extend(bytes);\n                return;\n            }\n            encodeNonNegativeInt(buffer, ProtocolValueType.String);\n            encodeString(buffer, value);\n            return;\n        }\n        case \"number\": {\n            if (NonNegativeInt.is(value)) {\n                if (isSmallInt(value)) {\n                    encodeNonNegativeInt(buffer, value);\n                    return;\n                }\n                encodeNonNegativeInt(buffer, ProtocolValueType.NonNegativeInt);\n                encodeNonNegativeInt(buffer, value);\n                return;\n            }\n            encodeNonNegativeInt(buffer, ProtocolValueType.Number);\n            encodeNumber(buffer, value);\n            return;\n        }\n    }\n    encodeNonNegativeInt(buffer, ProtocolValueType.Bytes);\n    encodeLength(buffer, value);\n    buffer.extend(value);\n};\nexport const decodeSqliteValue = (buffer) => {\n    const type = decodeNonNegativeInt(buffer);\n    if (isSmallInt(type)) {\n        return type;\n    }\n    switch (type) {\n        case ProtocolValueType.String:\n            return decodeString(buffer);\n        case ProtocolValueType.Number:\n            return decodeNumber(buffer);\n        case ProtocolValueType.Null:\n            return null;\n        case ProtocolValueType.Bytes: {\n            const length = decodeLength(buffer);\n            return buffer.shiftN(length);\n        }\n        case ProtocolValueType.Id:\n            return decodeId(buffer);\n        case ProtocolValueType.NonNegativeInt:\n            return decodeNonNegativeInt(buffer);\n        case ProtocolValueType.Json: {\n            const length = decodeLength(buffer);\n            const bytes = buffer.shiftN(length);\n            return JSON.stringify(packr.unpack(bytes));\n        }\n        case ProtocolValueType.DateIsoWithNonNegativeTime:\n        case ProtocolValueType.DateIsoWithNegativeTime: {\n            const time = type === ProtocolValueType.DateIsoWithNonNegativeTime\n                ? decodeNonNegativeInt(buffer)\n                : decodeNumber(buffer);\n            const dateIso = DateIso.fromParent(new Date(time).toISOString());\n            if (!dateIso.ok)\n                throw new ProtocolDecodeError(dateIso.error.type);\n            return dateIso.value;\n        }\n        case ProtocolValueType.EmptyString:\n            return \"\";\n        case ProtocolValueType.Base64Url: {\n            const length = decodeLength(buffer);\n            const bytes = buffer.shiftN(length);\n            return uint8ArrayToBase64Url(bytes);\n        }\n        default:\n            throw new ProtocolDecodeError(\"invalid ProtocolValueType\");\n    }\n};\n/**\n * Decodes a ProtocolMessage into a readable JSON object for debugging.\n *\n * Note: This is a stub for future implementation. It should use:\n *\n * - DecodeVersionAndOwner\n * - DecodeError or decodeWriteKeys (depending on context)\n * - DecodeMessages\n * - DecodeRanges\n *\n * If you want to help, please contribute to this function.\n */\nexport const decodeProtocolMessageToJson = (_protocolMessage, _isInitiator) => {\n    // TODO: Implement using\n    // - decodeVersionAndOwner\n    // -- decodeError or decodeWriteKeys (should be refactored out),\n    // -- decodeMessages, and decodeRanges.\n    // This is a stub for PRs and community contributions.\n    throw new Error(\"decodeProtocolMessageToJson is not implemented yet.\");\n};\n", "import { bytesToHex, hexToBytes } from \"../Buffer.js\";\nimport { createRandomBytes } from \"../Crypto.js\";\nimport { createRecord, isPlainObject, objectToEntries, } from \"../Object.js\";\nimport { ok } from \"../Result.js\";\nimport { eqSqliteValue, explainSqliteQueryPlan, } from \"../Sqlite.js\";\nimport { createId, String } from \"../Type.js\";\n/**\n * Evolu serializes {@link SqliteQuery} into a string to be easily used as a key\n * and for comparison.\n */\nexport const serializeQuery = (query) => {\n    const params = query.parameters.map((v) => v instanceof Uint8Array\n        ? [\"b\", bytesToHex(v)]\n        : [\"j\", v]);\n    const options = query.options\n        ? objectToEntries(query.options).toSorted(([a], [b]) => a.localeCompare(b))\n        : [];\n    return JSON.stringify([query.sql, params, options]);\n};\nexport const deserializeQuery = (query) => {\n    const [sql, paramsArr, optionsArr] = JSON.parse(query);\n    const parameters = paramsArr.map(([type, value]) => type === \"b\" ? hexToBytes(value) : value);\n    const options = optionsArr.length\n        ? Object.fromEntries(optionsArr)\n        : undefined;\n    return {\n        sql,\n        parameters,\n        ...(options !== undefined && { options }),\n    };\n};\n// To preserve identity.\nexport const emptyRows = [];\nexport const createSubscribedQueries = (rowsStore) => {\n    const subscribedQueryMap = new Map();\n    const subscribedQueries = {\n        subscribe: (query) => (listener) => {\n            subscribedQueryMap.set(query, (subscribedQueryMap.get(query) ?? 0) + 1);\n            const unsubscribe = rowsStore.subscribe(listener);\n            return () => {\n                const count = subscribedQueryMap.get(query);\n                if (count != null && count > 1) {\n                    subscribedQueryMap.set(query, count - 1);\n                }\n                else {\n                    subscribedQueryMap.delete(query);\n                }\n                unsubscribe();\n            };\n        },\n        get: () => [...subscribedQueryMap.keys()],\n        has: (query) => subscribedQueryMap.has(query),\n    };\n    return subscribedQueries;\n};\nexport const createGetQueryRowsCache = () => {\n    const tabQueryRowsCacheMap = new Map();\n    return (tabId) => {\n        let cache = tabQueryRowsCacheMap.get(tabId);\n        if (!cache) {\n            let queryRowsCache = new Map();\n            cache = {\n                set: (queriesRows) => {\n                    queryRowsCache = new Map([...queryRowsCache, ...queriesRows]);\n                },\n                get: () => queryRowsCache,\n            };\n            tabQueryRowsCacheMap.set(tabId, cache);\n        }\n        return cache;\n    };\n};\nexport const loadQueries = (deps) => (tabId, queries) => {\n    const queriesRows = [];\n    for (const query of queries) {\n        const sqlQuery = deserializeQuery(query);\n        const result = deps.sqlite.exec(sqlQuery);\n        if (!result.ok)\n            return result;\n        queriesRows.push([query, result.value.rows]);\n        if (sqlQuery.options?.logExplainQueryPlan) {\n            explainSqliteQueryPlan(deps)(sqlQuery);\n        }\n    }\n    const queryRowsCache = deps.getQueryRowsCache(tabId);\n    const previousState = queryRowsCache.get();\n    queryRowsCache.set(queriesRows);\n    const currentState = queryRowsCache.get();\n    const queryPatchesArray = queries.map((query) => ({\n        query,\n        patches: makePatches(previousState.get(query), currentState.get(query) ?? emptyRows),\n    }));\n    return ok(queryPatchesArray);\n};\n/**\n * We detect only changes in the whole result and in-place edits. In the future,\n * we will add more heuristics. We will probably not implement the Myers diff\n * algorithm because it's faster to rerender all than to compute many detailed\n * patches. We will only implement logic a developer would implement manually,\n * if necessary.\n */\nexport const makePatches = (previousRows, nextRows) => {\n    if (previousRows === undefined)\n        return [{ op: \"replaceAll\", value: nextRows }];\n    // TODO: Detect prepend and append, it's cheap.\n    if (previousRows.length !== nextRows.length) {\n        return [{ op: \"replaceAll\", value: nextRows }];\n    }\n    const length = previousRows.length;\n    const replaceAtPatches = [];\n    for (let i = 0; i < length; i++) {\n        const previousRow = previousRows[i];\n        const nextRow = nextRows[i];\n        // We expect the same shape for both rows.\n        for (const key in previousRow)\n            if (!eqSqliteValue(previousRow[key], nextRow[key])) {\n                replaceAtPatches.push({ op: \"replaceAt\", value: nextRow, index: i });\n                break;\n            }\n    }\n    if (length > 0 && replaceAtPatches.length === length) {\n        return [{ op: \"replaceAll\", value: nextRows }];\n    }\n    return replaceAtPatches;\n};\nexport const applyPatches = (patches, current) => patches.reduce((next, patch) => {\n    switch (patch.op) {\n        case \"replaceAll\":\n            return parseSqliteJsonArray(patch.value);\n        case \"replaceAt\": {\n            const parsedRow = parseSqliteJsonArray([patch.value])[0];\n            return next.toSpliced(patch.index, 1, parsedRow);\n        }\n    }\n}, current);\n/**\n * A unique identifier prepended to JSON-encoded strings. This allows safe\n * detection and parsing of only those columns that require JSON.parse.\n *\n * The identifier is a cryptographically random Evolu Id, ensuring uniqueness\n * and preventing malicious actors from inserting fake data that could be\n * misinterpreted as JSON by the application.\n *\n * Note: The same queries created by different browser tabs will have different\n * identifiers and thus be considered different and cached separately. This is\n * usually not a big deal, but if needed, the DB cache can be optimized by\n * passing the kyselyJsonIdentifier into the DB worker during initialization,\n * allowing queries to be grouped and recognized across tabs or sessions.\n *\n * See: https://github.com/kysely-org/kysely/issues/1372#issuecomment-2702773948\n */\nexport const kyselyJsonIdentifier = createId({\n    randomBytes: createRandomBytes(),\n});\nexport const parseSqliteJsonArray = (arr) => {\n    const result = new Array(arr.length);\n    for (let i = 0; i < arr.length; ++i) {\n        result[i] = parse(arr[i]);\n    }\n    return result;\n};\nconst parse = (obj) => {\n    if (String.is(obj) && obj.startsWith(kyselyJsonIdentifier)) {\n        return JSON.parse(obj.slice(kyselyJsonIdentifier.length));\n    }\n    if (Array.isArray(obj)) {\n        return parseSqliteJsonArray(obj);\n    }\n    if (isPlainObject(obj)) {\n        return parseObject(obj);\n    }\n    return obj;\n};\nconst parseObject = (obj) => {\n    const result = createRecord();\n    for (const key in obj) {\n        result[key] = parse(obj[key]);\n    }\n    return result;\n};\n", "import { err, ok } from \"./Result.js\";\nimport { PositiveInt } from \"./Type.js\";\n/**\n * Creates {@link Resources}.\n *\n * This tracks which consumers are using which resources and maintains reference\n * counts to know when it's safe to dispose resources. Resources are created\n * on-demand and disposed with a configurable delay to avoid churn.\n *\n * ### Example Usage\n *\n * ```ts\n * // WebSocket connections\n * interface WebSocketConfig {\n *   readonly url: WebSocketUrl;\n * }\n *\n * type WebSocketUrl = string & Brand<\"WebSocketUrl\">;\n * type UserId = string & Brand<\"UserId\">;\n *\n * const webSockets = createResources<\n *   WebSocket,\n *   WebSocketUrl,\n *   WebSocketConfig,\n *   User,\n *   UserId\n * >({\n *   createResource: (config) => new WebSocket(config.url),\n *   getResourceKey: (config) => config.url,\n *   getConsumerId: (user) => user.id,\n *   disposalDelay: 1000,\n * });\n *\n * // Add users to WebSocket connections\n * webSockets.addConsumer(user1, [\n *   { url: \"ws://server1.com\" as WebSocketUrl },\n *   { url: \"ws://server2.com\" as WebSocketUrl },\n * ]);\n * webSockets.addConsumer(user2, [\n *   { url: \"ws://server1.com\" as WebSocketUrl },\n * ]);\n *\n * // Remove users - server1 stays alive (user2 still using it)\n * webSockets.removeConsumer(user1, [\n *   { url: \"ws://server1.com\" as WebSocketUrl },\n *   { url: \"ws://server2.com\" as WebSocketUrl },\n * ]);\n *\n * // server2 gets disposed after delay, server1 stays alive\n * ```\n */\nexport const createResources = (config) => {\n    let isDisposed = false;\n    const resourcesMap = new Map();\n    const consumerCounts = new Map();\n    const consumers = new Map();\n    const disposalTimeouts = new Map();\n    const disposalDelay = config.disposalDelay ?? 100;\n    const ensureResource = (resourceConfig) => {\n        const key = config.getResourceKey(resourceConfig);\n        const timeout = disposalTimeouts.get(key);\n        if (timeout) {\n            clearTimeout(timeout);\n            disposalTimeouts.delete(key);\n        }\n        if (!resourcesMap.has(key)) {\n            const resource = config.createResource(resourceConfig);\n            resourcesMap.set(key, resource);\n        }\n    };\n    const scheduleDisposal = (key) => {\n        const timeout = setTimeout(() => {\n            const resource = resourcesMap.get(key);\n            if (resource) {\n                resource[Symbol.dispose]();\n                resourcesMap.delete(key);\n            }\n            disposalTimeouts.delete(key);\n        }, disposalDelay);\n        disposalTimeouts.set(key, timeout);\n    };\n    const resources = {\n        addConsumer: (consumer, resourceConfigs) => {\n            if (isDisposed)\n                return;\n            const consumerId = config.getConsumerId(consumer);\n            // Store consumer (last added consumer for this ID)\n            consumers.set(consumerId, consumer);\n            for (const resourceConfig of resourceConfigs) {\n                ensureResource(resourceConfig);\n                const resourceKey = config.getResourceKey(resourceConfig);\n                let counts = consumerCounts.get(resourceKey);\n                if (!counts) {\n                    counts = new Map();\n                    consumerCounts.set(resourceKey, counts);\n                }\n                const currentCount = counts.get(consumerId) ?? 0;\n                const newCount = currentCount + 1;\n                counts.set(consumerId, PositiveInt.orThrow(newCount));\n                // Call onConsumerAdded callback only when consumer is added for the first time (0 -> 1)\n                if (currentCount === 0 && config.onConsumerAdded) {\n                    const resource = resourcesMap.get(resourceKey);\n                    if (resource) {\n                        config.onConsumerAdded(consumer, resource, resourceKey);\n                    }\n                }\n            }\n        },\n        removeConsumer: (consumer, resourceConfigs) => {\n            if (isDisposed)\n                return ok();\n            const consumerId = config.getConsumerId(consumer);\n            for (const resourceConfig of resourceConfigs) {\n                const key = config.getResourceKey(resourceConfig);\n                const counts = consumerCounts.get(key);\n                if (!counts) {\n                    return err({ type: \"ResourceNotFoundError\", resourceKey: key });\n                }\n                const currentCount = counts.get(consumerId);\n                if (currentCount == null) {\n                    return err({\n                        type: \"ConsumerNotFoundError\",\n                        consumerId: consumerId,\n                        resourceKey: key,\n                    });\n                }\n                if (currentCount === 1) {\n                    counts.delete(consumerId);\n                    // Call onConsumerRemoved callback only when consumer is completely removed (1 -> 0)\n                    if (config.onConsumerRemoved) {\n                        const resource = resourcesMap.get(key);\n                        if (resource) {\n                            config.onConsumerRemoved(consumer, resource, key);\n                        }\n                    }\n                    if (counts.size === 0) {\n                        consumerCounts.delete(key);\n                        scheduleDisposal(key);\n                    }\n                }\n                else {\n                    counts.set(consumerId, PositiveInt.orThrow(currentCount - 1));\n                }\n            }\n            if (!resources.hasConsumerAnyResource(consumer)) {\n                consumers.delete(consumerId);\n            }\n            return ok();\n        },\n        getResource: (key) => {\n            if (isDisposed)\n                return null;\n            return resourcesMap.get(key) ?? null;\n        },\n        getConsumersForResource: (key) => {\n            if (isDisposed)\n                return [];\n            const counts = consumerCounts.get(key);\n            return counts ? Array.from(counts.keys()) : [];\n        },\n        hasConsumerAnyResource: (consumer) => {\n            if (isDisposed)\n                return false;\n            const consumerId = config.getConsumerId(consumer);\n            // If slow, can be optimized with reverse index\n            return Array.from(consumerCounts.values()).some((counts) => counts.has(consumerId));\n        },\n        getConsumer: (consumerId) => {\n            if (isDisposed)\n                return null;\n            const consumer = consumers.get(consumerId);\n            if (!consumer)\n                return null;\n            // Only return consumer if it's currently using any resources\n            if (!resources.hasConsumerAnyResource(consumer)) {\n                return null;\n            }\n            return consumer;\n        },\n        [Symbol.dispose]: () => {\n            if (isDisposed)\n                return;\n            isDisposed = true;\n            for (const timeout of disposalTimeouts.values()) {\n                clearTimeout(timeout);\n            }\n            disposalTimeouts.clear();\n            for (const resource of resourcesMap.values()) {\n                resource[Symbol.dispose]();\n            }\n            resourcesMap.clear();\n            consumerCounts.clear();\n            consumers.clear();\n        },\n    };\n    return resources;\n};\n", "import { assert } from \"./Assert.js\";\nimport { DateIso, NonNegativeInt } from \"./Type.js\";\n/**\n * Creates a {@link Time} using Date.now().\n *\n * If the system clock is misconfigured (out of allowed range), the application\n * will fail with an assertion error. This is intentional - there's no\n * reasonable fallback when the system clock is fundamentally wrong.\n */\nexport const createTime = () => {\n    const time = {\n        now: () => {\n            const iso = time.nowIso();\n            return new globalThis.Date(iso).getTime();\n        },\n        nowIso: () => {\n            const iso = new globalThis.Date().toISOString();\n            assert(DateIso.is(iso), \"System clock returned invalid ISO date\");\n            return iso;\n        },\n    };\n    return time;\n};\n/**\n * Creates a {@link Time} that returns a monotonically increasing number based on\n * a queueMicrotask.\n */\nexport const createTestTime = () => {\n    let now = 0;\n    const time = {\n        now: () => {\n            const current = now;\n            queueMicrotask(() => {\n                now++;\n            });\n            return current;\n        },\n        nowIso: () => DateIso.orThrow(new globalThis.Date(time.now()).toISOString()),\n    };\n    return time;\n};\n/**\n * Converts a duration to milliseconds.\n *\n * Accepts either a {@link DurationString} (e.g., \"5m\", \"1h 30m\") or milliseconds\n * as {@link NonNegativeInt}.\n *\n * ### Example\n *\n * ```ts\n * durationToNonNegativeInt(\"0ms\"); // 0 \n * durationToNonNegativeInt(\"500ms\"); // 500 \n * durationToNonNegativeInt(\"30s\"); // 30000 \n * durationToNonNegativeInt(\"5m\"); // 300000 \n * durationToNonNegativeInt(\"12h\"); // 43200000 \n * durationToNonNegativeInt(\"7d\"); // 604800000 \n * durationToNonNegativeInt(\"2h 45m\"); // 9900000 \n * durationToNonNegativeInt(5000); // 5000  (already milliseconds)\n * ```\n */\nexport const durationToNonNegativeInt = (duration) => {\n    // If it's already a NonNegativeInt (milliseconds), return as-is\n    if (typeof duration === \"number\") {\n        return duration;\n    }\n    // Parse duration string without regex to avoid ReDoS vulnerabilities\n    const units = {\n        ms: 1,\n        s: 1000,\n        m: 60000,\n        h: 3600000,\n        d: 86400000, // 24 * 60 * 60 * 1000\n    };\n    let total = 0;\n    let i = 0;\n    while (i < duration.length) {\n        // Skip whitespace\n        while (i < duration.length && duration[i] === \" \") {\n            i++;\n        }\n        if (i >= duration.length)\n            break;\n        // Parse number\n        let numStr = \"\";\n        while (i < duration.length && duration[i] >= \"0\" && duration[i] <= \"9\") {\n            numStr += duration[i];\n            i++;\n        }\n        if (numStr === \"\")\n            break;\n        // Parse unit (ms or single char s/m/h/d)\n        let unit = \"\";\n        if (i < duration.length) {\n            if (duration[i] === \"m\" &&\n                i + 1 < duration.length &&\n                duration[i + 1] === \"s\") {\n                unit = \"ms\";\n                i += 2;\n            }\n            else if (duration[i] === \"s\" ||\n                duration[i] === \"m\" ||\n                duration[i] === \"h\" ||\n                duration[i] === \"d\") {\n                unit = duration[i];\n                i++;\n            }\n        }\n        if (unit === \"\")\n            break;\n        const value = parseInt(numStr, 10);\n        total += value * units[unit];\n    }\n    return NonNegativeInt.orThrow(total);\n};\n", "import { isNonEmptyArray, shiftArray } from \"./Array.js\";\nimport { err, ok } from \"./Result.js\";\nimport { durationToNonNegativeInt } from \"./Time.js\";\nimport { NonNegativeInt, PositiveInt } from \"./Type.js\";\n/** Narrower check to detect AbortError objects at runtime. */\nconst isAbortError = (error) => typeof error === \"object\" &&\n    error !== null &&\n    error.type === \"AbortError\";\n// For React Native\nif (typeof AbortSignal.any !== \"function\") {\n    AbortSignal.any = function (signals) {\n        const controller = new AbortController();\n        const onAbort = (event) => {\n            controller.abort(event.target.reason);\n            cleanup();\n        };\n        const cleanup = () => {\n            for (const s of signals)\n                s.removeEventListener(\"abort\", onAbort);\n        };\n        for (const s of signals) {\n            if (s.aborted) {\n                controller.abort(s.reason);\n                return controller.signal;\n            }\n            s.addEventListener(\"abort\", onAbort);\n        }\n        return controller.signal;\n    };\n}\n/**\n * Combines user signal from context with an internal signal.\n *\n * If the context has a signal, combines both signals using AbortSignal.any().\n * Otherwise, returns just the internal signal.\n */\nconst combineSignal = (context, internalSignal) => context?.signal\n    ? AbortSignal.any([context.signal, internalSignal])\n    : internalSignal;\n/**\n * Converts async function returning {@link Result} to a {@link Task}.\n *\n * ### Example\n *\n * ```ts\n * interface FetchError {\n *   readonly type: \"FetchError\";\n *   readonly error: unknown;\n * }\n *\n * // Task version of fetch with proper error handling and cancellation support.\n * const fetch = (url: string) =>\n *   toTask((context) =>\n *     tryAsync(\n *       () => globalThis.fetch(url, { signal: context?.signal ?? null }),\n *       (error): FetchError => ({ type: \"FetchError\", error }),\n *     ),\n *   );\n *\n * // `satisfies` shows the expected type signature.\n * fetch satisfies (url: string) => Task<Response, FetchError>;\n *\n * const result1 = await fetch(\"https://api.example.com/data\")();\n * result1 satisfies Result<Response, FetchError>;\n *\n * // With AbortController\n * const controller = new AbortController();\n * const result2 = await fetch(\"https://api.example.com/data\")(controller);\n * result2 satisfies Result<Response, FetchError | AbortError>;\n * ```\n */\nexport const toTask = (fn) => \n// Note: Not using async to avoid Promise wrapper overhead in fast path\n((context) => {\n    const signal = context?.signal;\n    // Fast path when no signal  return promise directly\n    if (!signal) {\n        // Preserve future context fields (e.g., tracing) even without a signal\n        return fn(context);\n    }\n    if (signal.aborted) {\n        return Promise.resolve(err({ type: \"AbortError\", reason: signal.reason }));\n    }\n    // Use Promise.withResolvers for clean abort handling and cleanup\n    const { promise: abortPromise, resolve: resolveAbort } = Promise.withResolvers();\n    const handleAbort = () => {\n        resolveAbort(err({ type: \"AbortError\", reason: signal.reason }));\n    };\n    signal.addEventListener(\"abort\", handleAbort, { once: true });\n    // No finally: we expect no throws in normal flow; Result path removes listener.\n    // Unexpected throws indicate a bug and are allowed to crash (no recovery here).\n    return Promise.race([\n        abortPromise,\n        fn(context).then((result) => {\n            signal.removeEventListener(\"abort\", handleAbort);\n            return result;\n        }),\n    ]);\n});\n// For React Native\nif (typeof AbortSignal.timeout !== \"function\") {\n    AbortSignal.timeout = function (ms) {\n        const controller = new AbortController();\n        const id = setTimeout(() => {\n            controller.abort();\n        }, ms);\n        // clear timeout if aborted early\n        controller.signal.addEventListener(\"abort\", () => {\n            clearTimeout(id);\n        });\n        return controller.signal;\n    };\n}\n/**\n * Creates a {@link Task} that waits for the specified duration.\n *\n * ### Example\n *\n * ```ts\n * const result1 = await wait(\"10ms\")();\n * result1 satisfies Result<void, never>;\n *\n * // With AbortController\n * const controller = new AbortController();\n * const result2 = await wait(\"10ms\")(controller);\n * result2 satisfies Result<void, AbortError>;\n * ```\n */\nexport const wait = (duration) => toTask((context) => new Promise((resolve) => {\n    const ms = durationToNonNegativeInt(duration);\n    const timeoutSignal = AbortSignal.timeout(ms);\n    const signal = combineSignal(context, timeoutSignal);\n    // Listen for abort - either from timeout completion or external abort\n    signal.addEventListener(\"abort\", () => {\n        resolve(ok());\n    }, { once: true });\n}));\n/**\n * Adds timeout behavior to a {@link Task}.\n *\n * ### Example\n *\n * ```ts\n * interface FetchError {\n *   readonly type: \"FetchError\";\n *   readonly error: unknown;\n * }\n *\n * // Task version of fetch with proper error handling and cancellation support.\n * const fetch = (url: string) =>\n *   toTask((context) =>\n *     tryAsync(\n *       () => globalThis.fetch(url, { signal: context?.signal ?? null }),\n *       (error): FetchError => ({ type: \"FetchError\", error }),\n *     ),\n *   );\n *\n * // `satisfies` shows the expected type signature.\n * fetch satisfies (url: string) => Task<Response, FetchError>;\n *\n * const fetchWithTimeout = (url: string) => timeout(\"2m\", fetch(url));\n *\n * const result1 = await fetchWithTimeout(\"https://api.example.com/data\")();\n * result1 satisfies Result<Response, FetchError | TimeoutError>;\n *\n * // With AbortController\n * const controller = new AbortController();\n * const result2 = await fetchWithTimeout(\"https://api.example.com/data\")(\n *   controller,\n * );\n * result2 satisfies Result<\n *   Response,\n *   FetchError | TimeoutError | AbortError\n * >;\n * ```\n */\nexport const timeout = (duration, task) => toTask(async (context) => {\n    const timeoutMs = durationToNonNegativeInt(duration);\n    const timeoutSignal = AbortSignal.timeout(timeoutMs);\n    const signal = combineSignal(context, timeoutSignal);\n    const result = await task({ signal });\n    if (timeoutSignal.aborted) {\n        return err({ type: \"TimeoutError\", timeoutMs });\n    }\n    return result;\n});\n/**\n * Adds retry logic with exponential backoff and jitter to a {@link Task}.\n *\n * ### Example\n *\n * ```ts\n * interface FetchError {\n *   readonly type: \"FetchError\";\n *   readonly error: unknown;\n * }\n *\n * // Task version of fetch with proper error handling and cancellation support.\n * const fetch = (url: string) =>\n *   toTask((context) =>\n *     tryAsync(\n *       () => globalThis.fetch(url, { signal: context?.signal ?? null }),\n *       (error): FetchError => ({ type: \"FetchError\", error }),\n *     ),\n *   );\n *\n * // `satisfies` shows the expected type signature.\n * fetch satisfies (url: string) => Task<Response, FetchError>;\n *\n * const fetchWithRetry = (url: string) =>\n *   retry({ retries: PositiveInt.orThrow(3) }, fetch(url));\n *\n * const result1 = await fetchWithRetry(\"https://api.example.com/data\")();\n * result1 satisfies Result<Response, FetchError | RetryError<FetchError>>;\n *\n * // With AbortController\n * const controller = new AbortController();\n * const result2 = await fetchWithRetry(\"https://api.example.com/data\")(\n *   controller,\n * );\n * result2 satisfies Result<\n *   Response,\n *   FetchError | RetryError<FetchError> | AbortError\n * >;\n * ```\n */\nexport const retry = ({ retries, initialDelay = \"1s\", maxDelay = \"30s\", factor = 2, jitter = 0.5, retryable = (error) => !isAbortError(error), onRetry, }, task) => toTask(async (context) => {\n    const initialDelayMs = durationToNonNegativeInt(initialDelay);\n    const maxDelayMs = durationToNonNegativeInt(maxDelay);\n    const maxRetries = PositiveInt.orThrow(retries);\n    let attempt = 0;\n    // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n    while (true) {\n        const result = await task(context);\n        if (result.ok) {\n            return result;\n        }\n        // Never retry on AbortError; propagate it directly\n        if (isAbortError(result.error)) {\n            return err(result.error);\n        }\n        attempt += 1;\n        if (attempt > maxRetries || !retryable(result.error)) {\n            return err({\n                type: \"RetryError\",\n                cause: result.error,\n                attempts: attempt,\n            });\n        }\n        // Calculate delay with exponential backoff\n        const exponentialDelay = initialDelayMs * Math.pow(factor, attempt - 1);\n        const cappedDelay = Math.min(exponentialDelay, maxDelayMs);\n        // Apply jitter to prevent thundering herd problem\n        const randomFactor = 1 - jitter + Math.random() * jitter * 2;\n        const delay = Math.floor(cappedDelay * randomFactor);\n        if (onRetry) {\n            onRetry(result.error, attempt, delay);\n        }\n        // Wait before retry\n        {\n            const result = await wait(NonNegativeInt.orThrow(delay))(context);\n            if (!result.ok) {\n                // If delay was aborted, return AbortError (will be handled by toTask)\n                return result;\n            }\n        }\n    }\n});\n/**\n * Creates a semaphore that limits concurrent async Tasks to the specified\n * count.\n *\n * A semaphore controls access to a resource by maintaining a count of available\n * permits. Tasks acquire a permit before executing and release it when\n * complete.\n *\n * For mutual exclusion (exactly one Task at a time), consider using\n * {@link createMutex} instead.\n *\n * ### Example\n *\n * ```ts\n * // Allow maximum 3 concurrent Tasks\n * const semaphore = createSemaphore(PositiveInt.orThrow(3));\n *\n * let currentConcurrent = 0;\n * const events: Array<string> = [];\n *\n * const fetchData = (id: number) =>\n *   toTask<number, never>(async (context) => {\n *     currentConcurrent++;\n *     events.push(`start ${id} (concurrent: ${currentConcurrent})`);\n *\n *     await wait(\"10ms\")(context);\n *\n *     currentConcurrent--;\n *     events.push(`end ${id} (concurrent: ${currentConcurrent})`);\n *     return ok(id * 10);\n *   });\n *\n * // These will execute with at most 3 running concurrently\n * const results = await Promise.all([\n *   semaphore.withPermit(fetchData(1))(),\n *   semaphore.withPermit(fetchData(2))(),\n *   semaphore.withPermit(fetchData(3))(),\n *   semaphore.withPermit(fetchData(4))(), // waits for one above to complete\n *   semaphore.withPermit(fetchData(5))(), // waits for permit\n * ]);\n *\n * expect(results.map(getOrThrow)).toEqual([10, 20, 30, 40, 50]);\n * expect(events).toMatchInlineSnapshot(`\n *   [\n *     \"start 1 (concurrent: 1)\",\n *     \"start 2 (concurrent: 2)\",\n *     \"start 3 (concurrent: 3)\",\n *     \"end 1 (concurrent: 2)\",\n *     \"start 4 (concurrent: 3)\",\n *     \"end 2 (concurrent: 2)\",\n *     \"start 5 (concurrent: 3)\",\n *     \"end 3 (concurrent: 2)\",\n *     \"end 4 (concurrent: 1)\",\n *     \"end 5 (concurrent: 0)\",\n *   ]\n * `);\n * ```\n */\nexport const createSemaphore = (maxConcurrent) => {\n    let isDisposed = false;\n    let availablePermits = maxConcurrent;\n    const waitingQueue = [];\n    const semaphoreController = new AbortController();\n    const acquire = () => {\n        if (availablePermits > 0) {\n            availablePermits--;\n            return Promise.resolve();\n        }\n        return new Promise((resolve) => {\n            waitingQueue.push(resolve);\n        });\n    };\n    const release = () => {\n        if (isNonEmptyArray(waitingQueue)) {\n            shiftArray(waitingQueue)();\n        }\n        else {\n            availablePermits++;\n        }\n    };\n    return {\n        withPermit: (task) => toTask(async (context) => {\n            await acquire();\n            // Check if semaphore was disposed while waiting\n            if (isDisposed) {\n                return err({\n                    type: \"AbortError\",\n                    reason: \"Semaphore disposed\",\n                });\n            }\n            const signal = combineSignal(context, semaphoreController.signal);\n            const result = await task({ signal });\n            release();\n            return result;\n        }),\n        [Symbol.dispose]: () => {\n            if (isDisposed)\n                return;\n            isDisposed = true;\n            // Cancel all running and waiting tasks\n            semaphoreController.abort(\"Semaphore disposed\");\n            // Release all waiting tasks so they can continue and check isDisposed\n            while (isNonEmptyArray(waitingQueue)) {\n                shiftArray(waitingQueue)();\n            }\n        },\n    };\n};\n/**\n * Creates a new mutex for ensuring mutual exclusion.\n *\n * A mutex is a {@link createSemaphore} with exactly one permit, ensuring that\n * only one Task can execute at a time.\n *\n * ### Example\n *\n * ```ts\n * const mutex = createMutex();\n *\n * const updateTask = (id: number) =>\n *   toTask((context) =>\n *     tryAsync(\n *       () => updateSharedResource(id, context),\n *       (error): UpdateError => ({ type: \"UpdateError\", error }),\n *     ),\n *   );\n *\n * // These Tasks will execute one at a time\n * const results = await Promise.all([\n *   mutex.withLock(updateTask(1))(),\n *   mutex.withLock(updateTask(2))(),\n *   mutex.withLock(updateTask(3))(),\n * ]);\n * ```\n */\nexport const createMutex = () => {\n    const mutex = createSemaphore(PositiveInt.orThrow(1));\n    return {\n        withLock: mutex.withPermit,\n        [Symbol.dispose]: mutex[Symbol.dispose],\n    };\n};\n/**\n * Schedule a task to run after all interactions (animations, gestures,\n * navigation) have completed.\n *\n * This uses `requestIdleCallback` when available, otherwise falls back to\n * `setTimeout(0)` for cross-platform compatibility.\n *\n * ### Example\n *\n * ```ts\n * const processDataTask: Task<void, ProcessError> = toTask(async () => {\n *   // Heavy processing work\n *   return ok();\n * });\n *\n * // Schedule the task to run when idle\n * void requestIdleTask(processDataTask)();\n * ```\n */\nexport const requestIdleTask = (task) => toTask(async (context) => new Promise((resolve) => {\n    idleCallback(() => {\n        void task(context).then(resolve);\n    });\n}));\nconst idleCallback = typeof globalThis.requestIdleCallback === \"function\"\n    ? globalThis.requestIdleCallback\n    : (callback) => setTimeout(callback, 0);\n/**\n * Type guard to check if a {@link MaybeAsync} value is async (a promise).\n *\n * This function narrows the type of a {@link MaybeAsync} value, allowing you to\n * conditionally `await` only when necessary.\n *\n * ### Example\n *\n * ```ts\n * const getData = (id: string): MaybeAsync<Data> => {\n *   const cached = cache.get(id);\n *   if (cached) return cached; // Sync path\n *   return fetchData(id); // Async path\n * };\n *\n * const result = getData(id);\n * const data = isAsync(result) ? await result : result;\n * // No microtask overhead when cached!\n * ```\n */\nexport const isAsync = (value) => \n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\ntypeof value?.then === \"function\";\n// TODO: Add tracing support\n// - Extend TaskContext with optional tracing field\n// - Add traced(name, task) helper that wraps Task execution\n// - Collect span data (name, timing, parent-child relationships, status)\n// - Support OpenTelemetry export format with proper traceId/spanId generation\n// - Automatic parent-child span relationships through context propagation\n", "import { appendToArray, firstInArray, isNonEmptyReadonlyArray, } from \"../Array.js\";\nimport { assertNonEmptyReadonlyArray } from \"../Assert.js\";\nimport { createTransferableError } from \"../Error.js\";\nimport { constFalse, constTrue } from \"../Function.js\";\nimport { createRecord, getProperty, objectToEntries } from \"../Object.js\";\nimport { createResources } from \"../Resources.js\";\nimport { err, ok } from \"../Result.js\";\nimport { booleanToSqliteBoolean, sql, SqliteBoolean, sqliteBooleanToBoolean, } from \"../Sqlite.js\";\nimport { createMutex } from \"../Task.js\";\nimport { idBytesToId, idToIdBytes, } from \"../Type.js\";\nimport { ownerIdBytesToOwnerId, ownerIdToOwnerIdBytes, } from \"./Owner.js\";\nimport { applyProtocolMessageAsClient, createProtocolMessageForSync, createProtocolMessageForUnsubscribe, createProtocolMessageFromCrdtMessages, decryptAndDecodeDbChange, encodeAndEncryptDbChange, SubscriptionFlags, } from \"./Protocol.js\";\nimport { systemColumns } from \"./Schema.js\";\nimport { createBaseSqliteStorage, DbChange, getOwnerUsage, getTimestampInsertStrategy, updateOwnerUsage, } from \"./Storage.js\";\nimport { createInitialTimestamp, receiveTimestamp, sendTimestamp, timestampBytesToTimestamp, timestampToDateIso, timestampToTimestampBytes, } from \"./Timestamp.js\";\nexport const createSync = (deps) => (config) => {\n    let isDisposed = false;\n    /** Returns owner data only if actively assigned to at least one transport. */\n    const getSyncOwner = (ownerId) => {\n        if (isDisposed)\n            return null;\n        return resources.getConsumer(ownerId);\n    };\n    const storageResult = createClientStorage({\n        ...deps,\n        getSyncOwner,\n    })(config);\n    if (!storageResult.ok)\n        return storageResult;\n    const storage = storageResult.value;\n    const createResource = (transport) => {\n        const transportKey = createTransportKey(transport);\n        deps.console.log(\"[sync]\", \"createWebSocket\", {\n            transportKey,\n            url: transport.url,\n        });\n        return deps.createWebSocket(transport.url, {\n            binaryType: \"arraybuffer\",\n            onOpen: () => {\n                if (isDisposed)\n                    return;\n                const webSocket = resources.getResource(transportKey);\n                if (!webSocket)\n                    return;\n                const ownerIds = resources.getConsumersForResource(transportKey);\n                deps.console.log(\"[sync]\", \"onOpen\", { transportKey, ownerIds });\n                for (const ownerId of ownerIds) {\n                    const message = createProtocolMessageForSync({ storage })(ownerId, SubscriptionFlags.Subscribe);\n                    if (!message)\n                        continue;\n                    deps.console.log(\"[sync]\", \"send\", { message });\n                    webSocket.send(message);\n                }\n            },\n            onClose: (event) => {\n                deps.console.log(\"[sync]\", \"onClose\", {\n                    transportKey,\n                    code: event.code,\n                    reason: event.reason,\n                    wasClean: event.wasClean,\n                });\n            },\n            onError: (error) => {\n                deps.console.warn(\"[sync]\", \"onError\", { transportKey, error });\n            },\n            onMessage: (data) => {\n                // Only handle ArrayBuffer data for sync messages\n                if (isDisposed || !(data instanceof ArrayBuffer))\n                    return;\n                const webSocket = resources.getResource(transportKey);\n                if (!webSocket)\n                    return;\n                const input = new Uint8Array(data);\n                deps.console.log(\"[sync]\", \"onMessage\", {\n                    transportKey,\n                    message: input,\n                });\n                applyProtocolMessageAsClient({ storage })(input, {\n                    // No write key, no sync (for a case when an owner was unused).\n                    getWriteKey: (ownerId) => getSyncOwner(ownerId)?.writeKey ?? null,\n                })\n                    .then((message) => {\n                    if (!message.ok) {\n                        config.onError(message.error);\n                        return;\n                    }\n                    switch (message.value.type) {\n                        case \"response\":\n                            webSocket.send(message.value.message);\n                            break;\n                        case \"no-response\":\n                            // Sync complete, no response needed\n                            break;\n                        case \"broadcast\":\n                            // This was a broadcast message, don't affect sync counter\n                            break;\n                    }\n                })\n                    .catch((error) => {\n                    config.onError(createTransferableError(error));\n                });\n            },\n        });\n    };\n    const resources = createResources({\n        createResource,\n        getResourceKey: createTransportKey,\n        getConsumerId: (owner) => owner.id,\n        disposalDelay: config.disposalDelayMs ?? 100,\n        onConsumerAdded: (owner, webSocket) => {\n            deps.console.log(\"[sync]\", \"onConsumerAdded\", {\n                ownerId: owner.id,\n                isOpen: webSocket.isOpen(),\n            });\n            // The onOpen handler will sync it.\n            if (!webSocket.isOpen())\n                return;\n            const message = createProtocolMessageForSync({ storage })(owner.id, SubscriptionFlags.Subscribe);\n            if (message)\n                webSocket.send(message);\n        },\n        onConsumerRemoved: (owner, webSocket) => {\n            deps.console.log(\"[sync]\", \"onConsumerRemoved\", {\n                ownerId: owner.id,\n                isOpen: webSocket.isOpen(),\n            });\n            const message = createProtocolMessageForUnsubscribe(owner.id);\n            webSocket.send(message);\n        },\n    });\n    const sync = {\n        useOwner: (use, owner) => {\n            if (isDisposed) {\n                deps.console.warn(\"[sync]\", \"useOwner called on disposed Sync instance\", { owner });\n                return;\n            }\n            deps.console.log(\"[sync]\", \"useOwner\", { use, owner });\n            const transports = owner.transports ?? config.transports;\n            if (use) {\n                resources.addConsumer(owner, transports);\n            }\n            else {\n                const result = resources.removeConsumer(owner, transports);\n                if (!result.ok) {\n                    deps.console.warn(\"[sync]\", \"Failed to remove consumer\", {\n                        transports,\n                        ownerId: owner.id,\n                        error: result.error,\n                    });\n                }\n            }\n        },\n        applyChanges: (changes) => {\n            deps.console.log(\"[sync]\", \"applyChanges\", { changes });\n            let clockTimestamp = deps.clock.get();\n            const ownerMessages = new Map();\n            for (const change of changes) {\n                const nextTimestamp = sendTimestamp(deps)(clockTimestamp);\n                if (!nextTimestamp.ok)\n                    return nextTimestamp;\n                clockTimestamp = nextTimestamp.value;\n                const { ownerId = config.appOwner.id, ...dbChange } = change;\n                const message = {\n                    timestamp: clockTimestamp,\n                    change: dbChange,\n                };\n                const messages = ownerMessages.get(ownerId);\n                if (messages)\n                    messages.push(message);\n                else\n                    ownerMessages.set(ownerId, [message]);\n            }\n            for (const [ownerId, messages] of ownerMessages) {\n                const result = applyMessages({ ...deps, storage })(ownerId, messages);\n                if (!result.ok)\n                    return result;\n                const owner = getSyncOwner(ownerId);\n                if (!owner?.writeKey)\n                    continue;\n                const message = createProtocolMessageFromCrdtMessages(deps)({\n                    id: owner.id,\n                    encryptionKey: owner.encryptionKey,\n                    writeKey: owner.writeKey,\n                }, messages);\n                const transports = owner.transports ?? config.transports;\n                // Send message to all transports for this owner\n                for (const transport of transports) {\n                    const transportKey = createTransportKey(transport);\n                    const webSocket = resources.getResource(transportKey);\n                    if (!webSocket)\n                        continue;\n                    if (webSocket.isOpen()) {\n                        deps.console.log(\"[sync]\", \"send\", { transportKey, message });\n                        webSocket.send(message);\n                    }\n                }\n            }\n            return deps.clock.save(clockTimestamp);\n        },\n        [Symbol.dispose]: () => {\n            if (isDisposed)\n                return;\n            isDisposed = true;\n            resources[Symbol.dispose]();\n        },\n    };\n    return ok(sync);\n};\nexport const createClock = (deps) => (initialTimestamp = createInitialTimestamp(deps)) => {\n    let currentTimestamp = initialTimestamp;\n    return {\n        get: () => currentTimestamp,\n        save: (timestamp) => {\n            currentTimestamp = timestamp;\n            const result = deps.sqlite.exec(sql.prepared `\n          update evolu_config\n          set \"clock\" = ${timestampToTimestampBytes(timestamp)};\n        `);\n            if (!result.ok)\n                return result;\n            return ok();\n        },\n    };\n};\nconst createClientStorage = (deps) => (config) => {\n    const sqliteStorageBase = createBaseSqliteStorage(deps)({\n        onStorageError: config.onError,\n        isOwnerWithinQuota: constTrue, // Clients don't have quota limits\n    });\n    // TODO: Mutex per OwnerId\n    const mutex = createMutex();\n    const storage = {\n        ...sqliteStorageBase,\n        // Not implemented yet.\n        validateWriteKey: constFalse,\n        setWriteKey: constFalse,\n        writeMessages: async (ownerIdBytes, encryptedMessages) => {\n            const ownerId = ownerIdBytesToOwnerId(ownerIdBytes);\n            // Everything is sync now, but we will need async crypto in the future.\n            const result = await mutex.withLock(async () => {\n                const owner = deps.getSyncOwner(ownerId);\n                // Owner can be removed during syncing.\n                // `ok(true)` means success, we just skipped the write.\n                if (!owner)\n                    return ok(true);\n                // TODO: Add quota checking for collaborative scenarios.\n                // When receiving messages from other owners via relay broadcast,\n                // check if this owner is within quota before accepting the data.\n                // This prevents an owner from exceeding storage limits when receiving\n                // data shared by other collaborators.\n                const messages = [];\n                for (const message of encryptedMessages) {\n                    const change = decryptAndDecodeDbChange(deps)(message, owner.encryptionKey);\n                    if (!change.ok)\n                        return change;\n                    messages.push({\n                        timestamp: message.timestamp,\n                        change: change.value,\n                    });\n                }\n                const transaction = deps.sqlite.transaction(() => {\n                    let clockTimestamp = deps.clock.get();\n                    for (const message of messages) {\n                        const nextTimestamp = receiveTimestamp(deps)(clockTimestamp, message.timestamp);\n                        if (!nextTimestamp.ok)\n                            return nextTimestamp;\n                        clockTimestamp = nextTimestamp.value;\n                    }\n                    if (isNonEmptyReadonlyArray(messages)) {\n                        const result = applyMessages({ ...deps, storage })(owner.id, messages);\n                        if (!result.ok)\n                            return result;\n                    }\n                    return deps.clock.save(clockTimestamp);\n                });\n                if (!transaction.ok)\n                    return transaction;\n                return ok(true);\n            })();\n            if (!result.ok) {\n                if (result.error.type !== \"AbortError\") {\n                    config.onError(result.error);\n                }\n                return err({ type: \"StorageWriteError\", ownerId });\n            }\n            config.onReceive();\n            return ok();\n        },\n        readDbChange: (ownerId, timestamp) => {\n            const owner = deps.getSyncOwner(ownerIdBytesToOwnerId(ownerId));\n            // Owner can be removed to stop syncing.\n            if (!owner)\n                return null;\n            const result = deps.sqlite.exec(sql `\n          select \"table\", \"id\", \"column\", \"value\"\n          from evolu_history\n          where \"ownerId\" = ${ownerId} and \"timestamp\" = ${timestamp}\n          union all\n          select \"table\", \"id\", \"column\", \"value\"\n          from evolu_message_quarantine\n          where \"ownerId\" = ${ownerId} and \"timestamp\" = ${timestamp};\n        `);\n            if (!result.ok) {\n                config.onError(result.error);\n                return null;\n            }\n            const { rows } = result.value;\n            assertNonEmptyReadonlyArray(rows, \"Every timestamp must have rows\");\n            const firstRow = firstInArray(rows);\n            const values = createRecord();\n            let isInsert = false;\n            let isDelete = null;\n            for (const r of rows) {\n                switch (r.column) {\n                    case \"createdAt\":\n                        isInsert = true;\n                        break;\n                    case \"updatedAt\":\n                        isInsert = false;\n                        break;\n                    case \"isDeleted\":\n                        if (SqliteBoolean.is(r.value)) {\n                            isDelete = sqliteBooleanToBoolean(r.value);\n                        }\n                        break;\n                    default:\n                        values[r.column] = r.value;\n                }\n            }\n            const message = {\n                timestamp: timestampBytesToTimestamp(timestamp),\n                change: DbChange.orThrow({\n                    table: firstRow.table,\n                    id: idBytesToId(firstRow.id),\n                    values,\n                    isInsert,\n                    isDelete,\n                }),\n            };\n            return encodeAndEncryptDbChange(deps)(message, owner.encryptionKey);\n        },\n    };\n    return ok(storage);\n};\n/** Creates a unique identifier for a {@link OwnerTransport}. */\nconst createTransportKey = (transport) => {\n    return `${transport.type}:${transport.url}`;\n};\nconst dbChangeToColumns = (change, now) => {\n    let values = objectToEntries(change.values);\n    // SystemColumns are not encoded in change.values.\n    values = appendToArray(values, [\n        change.isInsert ? \"createdAt\" : \"updatedAt\",\n        now,\n    ]);\n    if (change.isDelete != null) {\n        values = appendToArray(values, [\n            \"isDeleted\",\n            booleanToSqliteBoolean(change.isDelete),\n        ]);\n    }\n    return values;\n};\nexport const applyLocalOnlyChange = (deps) => (change) => {\n    if (change.isDelete) {\n        const result = deps.sqlite.exec(sql `\n        delete from ${sql.identifier(change.table)}\n        where id = ${change.id};\n      `);\n        if (!result.ok)\n            return result;\n    }\n    else {\n        const ownerId = deps.appOwner.id;\n        const columns = dbChangeToColumns(change, deps.time.nowIso());\n        for (const [column, value] of columns) {\n            const result = deps.sqlite.exec(sql.prepared `\n          insert into ${sql.identifier(change.table)}\n            (\"ownerId\", \"id\", ${sql.identifier(column)})\n          values (${ownerId}, ${change.id}, ${value})\n          on conflict (\"ownerId\", \"id\") do update\n            set ${sql.identifier(column)} = ${value};\n        `);\n            if (!result.ok)\n                return result;\n        }\n    }\n    return ok();\n};\nconst applyMessages = (deps) => (ownerId, messages) => {\n    const ownerIdBytes = ownerIdToOwnerIdBytes(ownerId);\n    const usage = getOwnerUsage(deps)(ownerIdBytes, timestampToTimestampBytes(firstInArray(messages).timestamp));\n    if (!usage.ok)\n        return usage;\n    let { firstTimestamp, lastTimestamp } = usage.value;\n    for (const { timestamp, change } of messages) {\n        const columns = dbChangeToColumns(change, timestampToDateIso(timestamp));\n        const idBytes = idToIdBytes(change.id);\n        const timestampBytes = timestampToTimestampBytes(timestamp);\n        for (const [column, value] of columns) {\n            if (validateColumnValue(deps)(change.table, column, value)) {\n                const result = applyColumnChange(deps)(ownerIdBytes, ownerId, change.table, idBytes, change.id, column, value, timestampBytes);\n                if (!result.ok)\n                    return result;\n            }\n            else {\n                const result = deps.sqlite.exec(sql.prepared `\n            insert into evolu_message_quarantine\n              (\"ownerId\", \"timestamp\", \"table\", \"id\", \"column\", \"value\")\n            values\n              (\n                ${ownerIdBytes},\n                ${timestampBytes},\n                ${change.table},\n                ${idBytes},\n                ${column},\n                ${value}\n              )\n            on conflict do nothing;\n          `);\n                if (!result.ok)\n                    return result;\n            }\n        }\n        let strategy;\n        [strategy, firstTimestamp, lastTimestamp] = getTimestampInsertStrategy(timestampBytes, firstTimestamp, lastTimestamp);\n        const result = deps.storage.insertTimestamp(ownerIdBytes, timestampBytes, strategy);\n        if (!result.ok)\n            return result;\n    }\n    /**\n     * TODO: Implement proper storedBytes tracking for client using received and\n     * sent encrypted message sizes.\n     */\n    return updateOwnerUsage(deps)(ownerIdBytes, 1, // Placeholder until proper tracking implemented\n    firstTimestamp, lastTimestamp);\n};\n/**\n * System columns that can appear in sync messages. Excludes `ownerId` because\n * it's handled separately (stored per-row, not per-column in messages).\n */\nconst systemColumnsWithoutOwnerId = systemColumns.difference(new Set([\"ownerId\"]));\nconst validateColumnValue = (deps) => (table, column, _value) => {\n    const schemaColumns = getProperty(deps.dbSchema.tables, table);\n    return (schemaColumns != null &&\n        (systemColumnsWithoutOwnerId.has(column) || schemaColumns.has(column)));\n};\nconst applyColumnChange = (deps) => (ownerIdBytes, ownerId, table, idBytes, id, column, value, timestampBytes) => {\n    const result = deps.sqlite.exec(sql.prepared `\n      with\n        existingTimestamp as (\n          select 1\n          from evolu_history\n          where\n            \"ownerId\" = ${ownerIdBytes}\n            and \"table\" = ${table}\n            and \"id\" = ${idBytes}\n            and \"column\" = ${column}\n            and \"timestamp\" >= ${timestampBytes}\n          limit 1\n        )\n      insert into ${sql.identifier(table)}\n        (\"ownerId\", \"id\", ${sql.identifier(column)})\n      select ${ownerId}, ${id}, ${value}\n      where not exists (select 1 from existingTimestamp)\n      on conflict (\"ownerId\", \"id\") do update\n        set ${sql.identifier(column)} = ${value}\n        where not exists (select 1 from existingTimestamp);\n    `);\n    if (!result.ok)\n        return result;\n    {\n        const result = deps.sqlite.exec(sql.prepared `\n        insert into evolu_history\n          (\"ownerId\", \"table\", \"id\", \"column\", \"value\", \"timestamp\")\n        values\n          (\n            ${ownerIdBytes},\n            ${table},\n            ${idBytes},\n            ${column},\n            ${value},\n            ${timestampBytes}\n          )\n        on conflict do nothing;\n      `);\n        if (!result.ok)\n            return result;\n    }\n    return ok();\n};\n/**\n * Attempts to apply quarantined messages that may now be valid after a schema\n * update. Messages are quarantined when they reference tables or columns that\n * don't exist in the current schema (e.g., from a newer app version).\n */\nexport const tryApplyQuarantinedMessages = (deps) => () => {\n    const rows = deps.sqlite.exec(sql `\n      select \"ownerId\", \"timestamp\", \"table\", \"id\", \"column\", \"value\"\n      from evolu_message_quarantine;\n    `);\n    if (!rows.ok)\n        return rows;\n    for (const row of rows.value.rows) {\n        if (!validateColumnValue(deps)(row.table, row.column, row.value))\n            continue;\n        const result = applyColumnChange(deps)(row.ownerId, ownerIdBytesToOwnerId(row.ownerId), row.table, row.id, idBytesToId(row.id), row.column, row.value, row.timestamp);\n        if (!result.ok)\n            return result;\n        {\n            const result = deps.sqlite.exec(sql `\n          delete from evolu_message_quarantine\n          where\n            \"ownerId\" = ${row.ownerId}\n            and \"timestamp\" = ${row.timestamp}\n            and \"table\" = ${row.table}\n            and \"id\" = ${row.id}\n            and \"column\" = ${row.column};\n        `);\n            if (!result.ok)\n                return result;\n        }\n    }\n    return ok();\n};\nexport const initialSyncState = { type: \"SyncStateInitial\" };\n", "import { firstInArray, isNonEmptyArray, } from \"../Array.js\";\nimport { assertNonEmptyReadonlyArray } from \"../Assert.js\";\nimport { createSymmetricCrypto, } from \"../Crypto.js\";\nimport { ok } from \"../Result.js\";\nimport { createSqlite, sql, } from \"../Sqlite.js\";\nimport { SimpleName } from \"../Type.js\";\nimport { createInitializedWorkerWithHandlers, } from \"../Worker.js\";\nimport { createAppOwner, createOwnerSecret, mnemonicToOwnerSecret, } from \"./Owner.js\";\nimport { protocolVersion } from \"./Protocol.js\";\nimport { createGetQueryRowsCache, loadQueries, } from \"./Query.js\";\nimport { ensureDbSchema, getDbSchema, } from \"./Schema.js\";\nimport { createBaseSqliteStorageTables } from \"./Storage.js\";\nimport { applyLocalOnlyChange, createClock, createSync, tryApplyQuarantinedMessages, } from \"./Sync.js\";\nimport { timestampBytesToTimestamp, timestampToTimestampBytes, } from \"./Timestamp.js\";\nexport const defaultDbConfig = {\n    name: SimpleName.orThrow(\"Evolu\"),\n    transports: [{ type: \"WebSocket\", url: \"wss://free.evoluhq.com\" }],\n    maxDrift: 5 * 60 * 1000,\n    enableLogging: false,\n};\nexport const createDbWorkerForPlatform = (platformDeps) => createInitializedWorkerWithHandlers({\n    init: async (initMessage, postMessage) => {\n        platformDeps.console.enabled = initMessage.config.enableLogging ?? false;\n        const deps = await createDbWorkerDeps(platformDeps, initMessage, postMessage);\n        if (!deps.ok) {\n            postMessage({ type: \"onError\", error: deps.error });\n            return null;\n        }\n        return deps.value;\n    },\n    handlers,\n});\nconst createDbWorkerDeps = async (platformDeps, initMessage, postMessage) => {\n    const sqlite = await createSqlite(platformDeps)(initMessage.config.name, {\n        memory: initMessage.config.inMemory ?? false,\n        encryptionKey: initMessage.config.encryptionKey ?? undefined,\n    });\n    if (!sqlite.ok)\n        return sqlite;\n    const deps = { ...platformDeps, sqlite: sqlite.value };\n    return deps.sqlite.transaction(() => {\n        const dbSchema = getDbSchema(deps)();\n        if (!dbSchema.ok)\n            return dbSchema;\n        const dbIsInitialized = \"evolu_version\" in dbSchema.value.tables;\n        let appOwner;\n        let clock;\n        if (dbIsInitialized) {\n            const currentVersion = deps.sqlite.exec(sql `select protocolVersion from evolu_version limit 1;`);\n            if (!currentVersion.ok)\n                return currentVersion;\n            const configResult = deps.sqlite.exec(sql `\n        select\n          clock,\n          appOwnerId,\n          appOwnerEncryptionKey,\n          appOwnerWriteKey,\n          appOwnerMnemonic\n        from evolu_config\n        limit 1;\n      `);\n            if (!configResult.ok)\n                return configResult;\n            assertNonEmptyReadonlyArray(configResult.value.rows);\n            const config = firstInArray(configResult.value.rows);\n            appOwner = {\n                type: \"AppOwner\",\n                id: config.appOwnerId,\n                encryptionKey: config.appOwnerEncryptionKey,\n                writeKey: config.appOwnerWriteKey,\n                mnemonic: config.appOwnerMnemonic,\n            };\n            clock = createClock(deps)(timestampBytesToTimestamp(config.clock));\n        }\n        else {\n            appOwner =\n                initMessage.config.externalAppOwner ??\n                    createAppOwner(createOwnerSecret(platformDeps));\n            clock = createClock(deps)();\n            const result = initializeDb(deps)(appOwner, clock.get());\n            if (!result.ok)\n                return result;\n        }\n        {\n            const result = ensureDbSchema(deps)(initMessage.dbSchema, dbSchema.value);\n            if (!result.ok)\n                return result;\n        }\n        {\n            const result = ensureMessageQuarantineTable(deps);\n            if (!result.ok)\n                return result;\n        }\n        const sync = createSync({\n            ...deps,\n            clock,\n            symmetricCrypto: createSymmetricCrypto(platformDeps),\n            timestampConfig: initMessage.config,\n            dbSchema: initMessage.dbSchema,\n        })({\n            appOwner,\n            transports: initMessage.config.transports,\n            onError: (error) => {\n                postMessage({ type: \"onError\", error });\n            },\n            onReceive: () => {\n                postMessage({ type: \"refreshQueries\" });\n            },\n        });\n        if (!sync.ok)\n            return sync;\n        {\n            const result = tryApplyQuarantinedMessages({\n                ...deps,\n                dbSchema: initMessage.dbSchema,\n            })();\n            if (!result.ok)\n                return result;\n        }\n        sync.value.useOwner(true, appOwner);\n        return ok({\n            ...deps,\n            getQueryRowsCache: createGetQueryRowsCache(),\n            postMessage,\n            sync: sync.value,\n            appOwner,\n        });\n    });\n};\nconst initializeDb = (deps) => (initialAppOwner, initialClock) => {\n    for (const query of [\n        // Never change structure to ensure all versions can read it.\n        sql `\n        create table evolu_version (\n          \"protocolVersion\" integer not null\n        )\n        strict;\n      `,\n        sql `\n        insert into evolu_version (\"protocolVersion\")\n        values (${protocolVersion});\n      `,\n        sql `\n        create table evolu_config (\n          \"clock\" blob not null,\n          \"appOwnerId\" text not null,\n          \"appOwnerEncryptionKey\" blob not null,\n          \"appOwnerWriteKey\" blob not null,\n          \"appOwnerMnemonic\" text\n        )\n        strict;\n      `,\n        sql `\n        insert into evolu_config\n          (\n            \"clock\",\n            \"appOwnerId\",\n            \"appOwnerEncryptionKey\",\n            \"appOwnerWriteKey\",\n            \"appOwnerMnemonic\"\n          )\n        values\n          (\n            ${timestampToTimestampBytes(initialClock)},\n            ${initialAppOwner.id},\n            ${initialAppOwner.encryptionKey},\n            ${initialAppOwner.writeKey},\n            ${initialAppOwner.mnemonic ?? null}\n          );\n      `,\n        /**\n         * The History table stores all values per ownerId, timestamp, table, id,\n         * and column for conflict-free merging using last-write-win CRDT.\n         * Denormalizes Timestamp and DbChange for covering index performance.\n         * Time travel is available when last-write-win isn't desired. Future\n         * optimization will store history more efficiently.\n         */\n        sql `\n        create table evolu_history (\n          \"ownerId\" blob not null,\n          \"table\" text not null,\n          \"id\" blob not null,\n          \"column\" text not null,\n          \"timestamp\" blob not null,\n          \"value\" any\n        )\n        strict;\n      `,\n        // Index for reading database changes by owner and timestamp.\n        sql `\n        create index evolu_history_ownerId_timestamp on evolu_history (\n          \"ownerId\",\n          \"timestamp\"\n        );\n      `,\n        sql `\n        create unique index evolu_history_ownerId_table_id_column_timestampDesc on evolu_history (\n          \"ownerId\",\n          \"table\",\n          \"id\",\n          \"column\",\n          \"timestamp\" desc\n        );\n      `,\n    ]) {\n        const result = deps.sqlite.exec(query);\n        if (!result.ok)\n            return result;\n    }\n    const result = createBaseSqliteStorageTables(deps);\n    if (!result.ok)\n        return result;\n    return ok();\n};\n/**\n * Ensures the quarantine table exists for storing messages with unknown schema.\n *\n * When a device receives sync messages containing tables or columns that don't\n * exist in its current schema (e.g., from a newer app version), those messages\n * are stored here instead of being discarded. This enables forward\n * compatibility:\n *\n * 1. Unknown data is preserved and can be applied when the app is updated\n * 2. Messages are still propagated to other devices that may understand them\n * 3. Partial messages work - known columns go to app tables, unknown to quarantine\n *\n * The `union all` query in `readDbChange` combines `evolu_history` and this\n * table, ensuring all data (known and unknown) is included when syncing to\n * other devices.\n */\nconst ensureMessageQuarantineTable = (deps) => {\n    const result = deps.sqlite.exec(sql `\n    create table if not exists evolu_message_quarantine (\n      \"ownerId\" blob not null,\n      \"timestamp\" blob not null,\n      \"table\" text not null,\n      \"id\" blob not null,\n      \"column\" text not null,\n      \"value\" any,\n      primary key (\"ownerId\", \"timestamp\", \"table\", \"id\", \"column\")\n    )\n    strict;\n  `);\n    if (!result.ok)\n        return result;\n    return ok();\n};\nconst handlers = {\n    getAppOwner: (deps) => () => {\n        deps.postMessage({\n            type: \"onGetAppOwner\",\n            appOwner: deps.appOwner,\n        });\n    },\n    mutate: (deps) => (message) => {\n        const mutate = deps.sqlite.transaction(() => {\n            const syncChanges = [];\n            for (const change of message.changes) {\n                const isLocalOnlyChange = change.table.startsWith(\"_\");\n                if (isLocalOnlyChange) {\n                    const result = applyLocalOnlyChange(deps)(change);\n                    if (!result.ok)\n                        return result;\n                }\n                else {\n                    syncChanges.push(change);\n                }\n            }\n            if (isNonEmptyArray(syncChanges)) {\n                const result = deps.sync.applyChanges(syncChanges);\n                if (!result.ok)\n                    return result;\n            }\n            // Read writes before commit to update UI ASAP\n            const queryPatches = loadQueries(deps)(message.tabId, message.subscribedQueries);\n            if (!queryPatches.ok)\n                return queryPatches;\n            // Update the tab that performed the mutation.\n            deps.postMessage({\n                type: \"onQueryPatches\",\n                tabId: message.tabId,\n                queryPatches: queryPatches.value,\n                onCompleteIds: message.onCompleteIds,\n            });\n            // Notify other tabs to refresh their queries.\n            deps.postMessage({ type: \"refreshQueries\", tabId: message.tabId });\n            return ok();\n        });\n        if (!mutate.ok) {\n            deps.postMessage({ type: \"onError\", error: mutate.error });\n            return;\n        }\n    },\n    query: (deps) => (message) => {\n        const queryPatches = loadQueries(deps)(message.tabId, message.queries);\n        if (!queryPatches.ok) {\n            deps.postMessage({ type: \"onError\", error: queryPatches.error });\n            return;\n        }\n        deps.postMessage({\n            type: \"onQueryPatches\",\n            tabId: message.tabId,\n            queryPatches: queryPatches.value,\n            onCompleteIds: [],\n        });\n    },\n    reset: (deps) => (message) => {\n        const result = deps.sqlite.transaction(() => {\n            const dbSchema = getDbSchema(deps)();\n            if (!dbSchema.ok)\n                return dbSchema;\n            for (const tableName in dbSchema.value.tables) {\n                /**\n                 * The dropped table is completely removed from the database schema and\n                 * the disk file. The table can not be recovered. All indices and\n                 * triggers associated with the table are also deleted.\n                 * https://sqlite.org/lang_droptable.html\n                 */\n                const result = deps.sqlite.exec(sql `\n          drop table ${sql.identifier(tableName)};\n        `);\n                if (!result.ok)\n                    return result;\n            }\n            if (message.restore) {\n                const result = ensureDbSchema(deps)(message.restore.dbSchema);\n                if (!result.ok)\n                    return result;\n                const secret = mnemonicToOwnerSecret(message.restore.mnemonic);\n                const appOwner = createAppOwner(secret);\n                const clock = createClock(deps)();\n                return initializeDb(deps)(appOwner, clock.get());\n            }\n            return ok();\n        });\n        if (!result.ok) {\n            deps.postMessage({ type: \"onError\", error: result.error });\n            return;\n        }\n        deps.postMessage({\n            type: \"onReset\",\n            onCompleteId: message.onCompleteId,\n            reload: message.reload,\n        });\n    },\n    ensureDbSchema: (deps) => (message) => {\n        const result = deps.sqlite.transaction(() => ensureDbSchema(deps)(message.dbSchema));\n        if (!result.ok) {\n            deps.postMessage({ type: \"onError\", error: result.error });\n            return;\n        }\n    },\n    export: (deps) => (message) => {\n        const file = deps.sqlite.export();\n        if (!file.ok) {\n            deps.postMessage({ type: \"onError\", error: file.error });\n            return;\n        }\n        deps.postMessage({\n            type: \"onExport\",\n            onCompleteId: message.onCompleteId,\n            file: file.value,\n        });\n    },\n    useOwner: (deps) => (message) => {\n        deps.sync.useOwner(message.use, message.owner);\n    },\n};\n", "import { pack } from \"msgpackr\";\nimport { dedupeArray, isNonEmptyArray, isNonEmptyReadonlyArray, } from \"../Array.js\";\nimport { assert, assertNonEmptyReadonlyArray } from \"../Assert.js\";\nimport { createCallbacks } from \"../Callbacks.js\";\nimport { eqArrayNumber } from \"../Eq.js\";\nimport { exhaustiveCheck } from \"../Function.js\";\nimport { createInstances } from \"../Instances.js\";\nimport { err, ok } from \"../Result.js\";\nimport { isSqlMutation, SqliteBoolean, sqliteBooleanToBoolean, } from \"../Sqlite.js\";\nimport { createStore } from \"../Store.js\";\nimport { createId, } from \"../Type.js\";\nimport { defaultDbConfig } from \"./Db.js\";\nimport { applyPatches, createSubscribedQueries, emptyRows, serializeQuery, } from \"./Query.js\";\nimport { evoluSchemaToDbSchema, insertable, kysely, updateable, upsertable, } from \"./Schema.js\";\nimport { DbChange } from \"./Storage.js\";\nimport { initialSyncState } from \"./Sync.js\";\nconst evoluInstances = createInstances();\n/**\n * Unique identifier for the current browser tab or app instance, lazily\n * initialized on first use to distinguish between multiple tabs.\n */\nlet tabId = null;\n/**\n * Creates an {@link Evolu} instance for a platform configured with the specified\n * {@link EvoluSchema} and optional {@link EvoluConfig} providing a typed\n * interface for querying, mutating, and syncing your application's data.\n *\n * ### Example\n *\n * ```ts\n * const TodoId = id(\"Todo\");\n * type TodoId = InferType<typeof TodoId>;\n *\n * const TodoCategoryId = id(\"TodoCategory\");\n * type TodoCategoryId = InferType<typeof TodoCategoryId>;\n *\n * const NonEmptyString50 = maxLength(50, NonEmptyString);\n * type NonEmptyString50 = InferType<typeof NonEmptyString50>;\n *\n * const Schema = {\n *   todo: {\n *     id: TodoId,\n *     title: NonEmptyString1000,\n *     isCompleted: nullOr(SqliteBoolean),\n *     categoryId: nullOr(TodoCategoryId),\n *   },\n *   todoCategory: {\n *     id: TodoCategoryId,\n *     name: NonEmptyString50,\n *   },\n * };\n *\n * const evolu = createEvolu(evoluReactDeps)(Schema);\n * ```\n *\n * ### Instance Caching\n *\n * `createEvolu` caches instances using {@link Instances} by {@link EvoluConfig}\n * name to enable hot reloading and prevent database corruption from multiple\n * connections. For testing, use unique instance names to ensure proper\n * isolation.\n */\nexport const createEvolu = (deps) => (schema, config) => evoluInstances.ensure(config?.name ?? defaultDbConfig.name, () => createEvoluInstance(deps)(schema, config), (evolu) => {\n    // Hot reloading. Note that indexes are intentionally omitted.\n    evolu.ensureSchema(schema);\n});\nconst createEvoluInstance = (deps) => (schema, config) => {\n    deps.console.enabled = config?.enableLogging ?? false;\n    const { indexes, reloadUrl = \"/\", ...partialDbConfig } = config ?? {};\n    const dbConfig = { ...defaultDbConfig, ...partialDbConfig };\n    deps.console.log(\"[evolu]\", \"createEvoluInstance\", {\n        name: dbConfig.name,\n    });\n    const errorStore = createStore(null);\n    const rowsStore = createStore(new Map());\n    const { promise: appOwner, resolve: resolveAppOwner } = Promise.withResolvers();\n    if (config?.externalAppOwner) {\n        resolveAppOwner(config.externalAppOwner);\n    }\n    // TODO: Update it for the owner-api\n    const _syncStore = createStore(initialSyncState);\n    const subscribedQueries = createSubscribedQueries(rowsStore);\n    const loadingPromises = createLoadingPromises(subscribedQueries);\n    const onCompleteCallbacks = createCallbacks(deps);\n    const exportCallbacks = createCallbacks(deps);\n    const dbWorker = deps.createDbWorker(dbConfig.name);\n    const getTabId = () => {\n        tabId ??= createId(deps);\n        return tabId;\n    };\n    // Worker responses are delivered to all tabs. Each case must handle this\n    // properly (e.g., AppOwner promise resolves only once, tabId filtering).\n    dbWorker.onMessage((message) => {\n        switch (message.type) {\n            case \"onError\": {\n                errorStore.set(message.error);\n                break;\n            }\n            case \"onGetAppOwner\": {\n                resolveAppOwner(message.appOwner);\n                break;\n            }\n            case \"onQueryPatches\": {\n                if (message.tabId !== getTabId())\n                    return;\n                const state = rowsStore.get();\n                const nextState = new Map([\n                    ...state,\n                    ...message.queryPatches.map(({ query, patches }) => [\n                        query,\n                        applyPatches(patches, state.get(query) ?? emptyRows),\n                    ]),\n                ]);\n                for (const { query } of message.queryPatches) {\n                    loadingPromises.resolve(query, nextState.get(query) ?? emptyRows);\n                }\n                if (deps.flushSync && message.onCompleteIds.length > 0) {\n                    deps.flushSync(() => {\n                        rowsStore.set(nextState);\n                    });\n                }\n                else {\n                    rowsStore.set(nextState);\n                }\n                for (const id of message.onCompleteIds) {\n                    onCompleteCallbacks.execute(id);\n                }\n                break;\n            }\n            case \"refreshQueries\": {\n                if (message.tabId && message.tabId === getTabId())\n                    return;\n                const loadingPromisesQueries = loadingPromises.getQueries();\n                loadingPromises.releaseUnsubscribedOnMutation();\n                const queries = dedupeArray([\n                    ...loadingPromisesQueries,\n                    ...subscribedQueries.get(),\n                ]);\n                if (isNonEmptyReadonlyArray(queries)) {\n                    dbWorker.postMessage({ type: \"query\", tabId: getTabId(), queries });\n                }\n                break;\n            }\n            case \"onReset\": {\n                if (message.reload) {\n                    deps.reloadApp(reloadUrl);\n                }\n                else {\n                    onCompleteCallbacks.execute(message.onCompleteId);\n                }\n                break;\n            }\n            case \"onExport\": {\n                exportCallbacks.execute(message.onCompleteId, message.file);\n                break;\n            }\n            default:\n                exhaustiveCheck(message);\n        }\n    });\n    const dbSchema = evoluSchemaToDbSchema(schema, indexes);\n    const mutationTypesCache = new Map();\n    // Lazy create mutation Types like this: `insertable(Schema.todo)`\n    const getMutationType = (table, kind) => {\n        let types = mutationTypesCache.get(kind);\n        if (!types) {\n            types = new Map();\n            mutationTypesCache.set(kind, types);\n        }\n        let type = types.get(table);\n        if (!type) {\n            type = { insert: insertable, update: updateable, upsert: upsertable }[kind](schema[table]);\n            types.set(table, type);\n        }\n        return type;\n    };\n    dbWorker.postMessage({ type: \"init\", config: dbConfig, dbSchema });\n    // We can't use `init` to get AppOwner because `init` runs only once per n tabs.\n    dbWorker.postMessage({ type: \"getAppOwner\" });\n    const loadQueryMicrotaskQueue = [];\n    const mutateMicrotaskQueue = [];\n    const useOwnerMicrotaskQueue = [];\n    const createMutation = (kind) => (table, props, options) => {\n        const result = getMutationType(table, kind).fromUnknown(props);\n        const id = kind === \"insert\"\n            ? createId(deps)\n            : props.id;\n        if (options?.onlyValidate !== true) {\n            if (!result.ok) {\n                // Mark the transaction as invalid by pushing null\n                mutateMicrotaskQueue.push([null, undefined]);\n            }\n            else {\n                const { id: _, isDeleted, ...values } = result.value;\n                const dbChange = {\n                    table,\n                    id,\n                    values,\n                    isInsert: kind === \"insert\" || kind === \"upsert\",\n                    isDelete: SqliteBoolean.is(isDeleted)\n                        ? sqliteBooleanToBoolean(isDeleted)\n                        : null,\n                };\n                assert(DbChange.is(dbChange), `Invalid DbChange for table '${table}': Please check schema type errors.`);\n                mutateMicrotaskQueue.push([\n                    { ...dbChange, ownerId: options?.ownerId },\n                    options?.onComplete,\n                ]);\n            }\n            if (mutateMicrotaskQueue.length === 1) {\n                queueMicrotask(processMutationQueue);\n            }\n        }\n        if (result.ok)\n            return ok({ id });\n        return err(result.error);\n    };\n    const processMutationQueue = () => {\n        const changes = [];\n        const onCompletes = [];\n        for (const [change, onComplete] of mutateMicrotaskQueue) {\n            if (change !== null)\n                changes.push(change);\n            if (onComplete)\n                onCompletes.push(onComplete);\n        }\n        const queueLength = mutateMicrotaskQueue.length;\n        mutateMicrotaskQueue.length = 0;\n        // Don't process any mutations if there was a validation error.\n        // All mutations within a queue run as a single transaction.\n        if (changes.length !== queueLength) {\n            return;\n        }\n        const onCompleteIds = onCompletes.map(onCompleteCallbacks.register);\n        loadingPromises.releaseUnsubscribedOnMutation();\n        if (!isNonEmptyArray(changes))\n            return;\n        dbWorker.postMessage({\n            type: \"mutate\",\n            tabId: getTabId(),\n            changes,\n            onCompleteIds,\n            subscribedQueries: subscribedQueries.get(),\n        });\n    };\n    const evolu = {\n        subscribeError: errorStore.subscribe,\n        getError: errorStore.get,\n        createQuery,\n        loadQuery: (query) => {\n            const { promise, isNew } = loadingPromises.get(query);\n            if (isNew) {\n                loadQueryMicrotaskQueue.push(query);\n                if (loadQueryMicrotaskQueue.length === 1) {\n                    queueMicrotask(() => {\n                        const queries = dedupeArray(loadQueryMicrotaskQueue);\n                        loadQueryMicrotaskQueue.length = 0;\n                        assertNonEmptyReadonlyArray(queries);\n                        deps.console.log(\"[evolu]\", \"loadQuery\", { queries });\n                        dbWorker.postMessage({\n                            type: \"query\",\n                            tabId: getTabId(),\n                            queries,\n                        });\n                    });\n                }\n            }\n            return promise;\n        },\n        loadQueries: (queries) => queries.map(evolu.loadQuery),\n        subscribeQuery: (query) => (listener) => {\n            // Call the listener only if the result has been changed.\n            let previousRows = null;\n            const unsubscribe = subscribedQueries.subscribe(query)(() => {\n                const rows = evolu.getQueryRows(query);\n                if (previousRows === rows)\n                    return;\n                previousRows = rows;\n                listener();\n            });\n            return () => {\n                previousRows = null;\n                unsubscribe();\n            };\n        },\n        getQueryRows: (query) => (rowsStore.get().get(query) ?? emptyRows),\n        appOwner,\n        // TODO: Update it for the owner-api\n        // subscribeSyncState: syncStore.subscribe,\n        // getSyncState: syncStore.get,\n        insert: createMutation(\"insert\"),\n        update: createMutation(\"update\"),\n        upsert: createMutation(\"upsert\"),\n        resetAppOwner: (options) => {\n            const { promise, resolve } = Promise.withResolvers();\n            const onCompleteId = onCompleteCallbacks.register(resolve);\n            dbWorker.postMessage({\n                type: \"reset\",\n                onCompleteId,\n                reload: options?.reload ?? true,\n            });\n            return promise;\n        },\n        restoreAppOwner: (mnemonic, options) => {\n            const { promise, resolve } = Promise.withResolvers();\n            const onCompleteId = onCompleteCallbacks.register(resolve);\n            dbWorker.postMessage({\n                type: \"reset\",\n                onCompleteId,\n                reload: options?.reload ?? true,\n                restore: { mnemonic, dbSchema },\n            });\n            return promise;\n        },\n        reloadApp: () => {\n            deps.reloadApp(reloadUrl);\n        },\n        ensureSchema: (schema) => {\n            mutationTypesCache.clear();\n            const dbSchema = evoluSchemaToDbSchema(schema);\n            dbWorker.postMessage({ type: \"ensureDbSchema\", dbSchema });\n        },\n        exportDatabase: () => {\n            const { promise, resolve } = Promise.withResolvers();\n            const onCompleteId = exportCallbacks.register(resolve);\n            dbWorker.postMessage({ type: \"export\", onCompleteId });\n            return promise;\n        },\n        useOwner: (owner) => {\n            const scheduleOwnerQueueProcessing = () => {\n                if (useOwnerMicrotaskQueue.length !== 1)\n                    return;\n                queueMicrotask(() => {\n                    const queue = [...useOwnerMicrotaskQueue];\n                    useOwnerMicrotaskQueue.length = 0;\n                    const result = [];\n                    const skipIndices = new Set();\n                    for (let i = 0; i < queue.length; i++) {\n                        if (skipIndices.has(i))\n                            continue;\n                        const [currentOwner, currentUse, currentOwnerSerialized] = queue[i];\n                        // Look for opposite action with same owner\n                        for (let j = i + 1; j < queue.length; j++) {\n                            if (skipIndices.has(j))\n                                continue;\n                            const [, otherUse, otherOwnerSerialized] = queue[j];\n                            if (currentUse !== otherUse &&\n                                eqArrayNumber(currentOwnerSerialized, otherOwnerSerialized)) {\n                                // Found cancel-out pair, skip both\n                                skipIndices.add(i).add(j);\n                                break;\n                            }\n                        }\n                        if (!skipIndices.has(i)) {\n                            result.push([currentOwner, currentUse, currentOwnerSerialized]);\n                        }\n                    }\n                    for (const [owner, use] of result) {\n                        dbWorker.postMessage({ type: \"useOwner\", owner, use });\n                    }\n                });\n            };\n            useOwnerMicrotaskQueue.push([owner, true, pack(owner)]);\n            scheduleOwnerQueueProcessing();\n            const unuse = () => {\n                useOwnerMicrotaskQueue.push([owner, false, pack(owner)]);\n                scheduleOwnerQueueProcessing();\n            };\n            return unuse;\n        },\n        /** Disposal is not implemented yet. */\n        [Symbol.dispose]: () => {\n            throw new Error(\"Evolu instance disposal is not yet implemented\");\n        },\n    };\n    return evolu;\n};\nexport const createQuery = (queryCallback, options) => {\n    const compiledQuery = queryCallback(kysely).compile();\n    if (isSqlMutation(compiledQuery.sql))\n        throw new Error(\"SQL mutation (INSERT, UPDATE, DELETE, etc.) isn't allowed in the Evolu `createQuery` function. Kysely suggests it because there is no read-only Kysely yet, and removing such an API is not possible. For mutations, use Evolu Mutation API.\");\n    return serializeQuery({\n        sql: compiledQuery.sql,\n        parameters: compiledQuery.parameters,\n        ...(options && { options }),\n    });\n};\nconst createLoadingPromises = (subscribedQueries) => {\n    const loadingPromiseMap = new Map();\n    return {\n        get: (query) => {\n            let loadingPromise = loadingPromiseMap.get(query);\n            const isNew = !loadingPromise;\n            if (!loadingPromise) {\n                const { promise, resolve } = Promise.withResolvers();\n                loadingPromise = { resolve, promise, releaseOnResolve: false };\n                loadingPromiseMap.set(query, loadingPromise);\n            }\n            return {\n                promise: loadingPromise.promise,\n                isNew,\n            };\n        },\n        resolve: (query, rows) => {\n            const loadingPromise = loadingPromiseMap.get(query);\n            if (!loadingPromise)\n                return;\n            if (loadingPromise.promise.status !== \"fulfilled\") {\n                loadingPromise.resolve(rows);\n            }\n            else {\n                loadingPromise.promise = Promise.resolve(rows);\n            }\n            // Set status and value fields for React's `use` Hook to unwrap synchronously.\n            // While undocumented in React docs, React still uses these properties internally,\n            // and Evolu's own promise caching logic depends on checking `promise.status`.\n            // https://github.com/acdlite/rfcs/blob/first-class-promises/text/0000-first-class-support-for-promises.md\n            void Object.assign(loadingPromise.promise, {\n                status: \"fulfilled\",\n                value: rows,\n            });\n            if (loadingPromise.releaseOnResolve) {\n                loadingPromiseMap.delete(query);\n            }\n        },\n        releaseUnsubscribedOnMutation: () => {\n            [...loadingPromiseMap.entries()]\n                .filter(([query]) => !subscribedQueries.has(query))\n                .forEach(([query, loadingPromise]) => {\n                if (loadingPromise.promise.status === \"fulfilled\") {\n                    loadingPromiseMap.delete(query);\n                }\n                else {\n                    loadingPromise.releaseOnResolve = true;\n                }\n            });\n        },\n        getQueries: () => Array.from(loadingPromiseMap.keys()),\n    };\n};\n", "import { createAppOwner, createOwnerSecret, mnemonicToOwnerSecret, OwnerEncryptionKey, OwnerWriteKey, } from \"./Owner.js\";\n/**\n * Creates a local auth using the given secure storage implementation. This\n * factory function allows each platform to provide its own storage layer while\n * sharing the common auth logic.\n */\nexport const createLocalAuth = (deps) => {\n    const setLastOwnerId = async (id, options) => {\n        await deps.secureStorage.setItem(localAuthMetakeyLastOwner, id, {\n            ...buildAuthOptions(options),\n            accessControl: \"none\",\n        });\n    };\n    const getLastOwnerId = async (options) => {\n        const item = await deps.secureStorage.getItem(localAuthMetakeyLastOwner, {\n            ...buildAuthOptions(options),\n            accessControl: \"none\",\n        });\n        return item?.value;\n    };\n    const getOwnerNames = async (options) => {\n        const item = await deps.secureStorage.getItem(localAuthMetakeyOwnerNames, {\n            ...buildAuthOptions(options),\n            accessControl: \"none\",\n        });\n        let names = {};\n        if (item?.value) {\n            names = JSON.parse(item.value);\n        }\n        return names;\n    };\n    const setOwnerName = async (id, username, options) => {\n        const names = await getOwnerNames(options);\n        names[id] = username;\n        await deps.secureStorage.setItem(localAuthMetakeyOwnerNames, JSON.stringify(names), {\n            ...buildAuthOptions(options),\n            accessControl: \"none\",\n        });\n    };\n    const deleteOwnerName = async (id, options) => {\n        const { [id]: _, ...names } = await getOwnerNames(options);\n        await deps.secureStorage.setItem(localAuthMetakeyOwnerNames, JSON.stringify(names), {\n            ...buildAuthOptions(options),\n            accessControl: \"none\",\n        });\n    };\n    const getOwnerIds = async (options) => {\n        const items = await deps.secureStorage.getAllItems({\n            ...buildAuthOptions(options),\n            includeValues: false,\n        });\n        return items\n            .filter(Boolean)\n            .filter((i) => i.key !== localAuthMetakeyLastOwner &&\n            i.key !== localAuthMetakeyOwnerNames)\n            .map((i) => i.key);\n    };\n    const clearAuthStore = (options) => deps.secureStorage.clearService(buildAuthOptions(options));\n    const buildAuthOptions = (options, username) => {\n        const newOptions = {\n            ...localAuthDefaultOptions,\n            ...(username && { webAuthnUsername: username }),\n            ...options,\n        };\n        return {\n            ...newOptions,\n            authenticationPrompt: {\n                title: replaceMessageTokens(newOptions.authenticationPrompt?.title ?? \"\", username),\n                cancel: replaceMessageTokens(newOptions.authenticationPrompt?.cancel ?? \"\", username),\n                subtitle: replaceMessageTokens(newOptions.authenticationPrompt?.subtitle ?? \"\", username),\n                description: replaceMessageTokens(newOptions.authenticationPrompt?.description ?? \"\", username),\n            },\n        };\n    };\n    const replaceMessageTokens = (text, username) => {\n        if (!username)\n            return text;\n        return text.replace(\"|USERNAME|\", username);\n    };\n    return {\n        login: async (ownerId, options) => {\n            // Lookup the associated username\n            const names = await getOwnerNames(options);\n            const username = names[ownerId] ?? \"\";\n            // Currently a reload is needed. This avoids authentication\n            // it needs to be handled on next page load.\n            // We set the last owner so we know what the target is.\n            // It is the applications's responsibility to reload and trigger login.\n            await setLastOwnerId(ownerId, options);\n            return { owner: undefined, username };\n        },\n        register: async (username, options) => {\n            // Create an owner with a new secret or use specified mnemonic\n            const owner = createAppOwner(options?.mnemonic\n                ? mnemonicToOwnerSecret(options.mnemonic)\n                : createOwnerSecret(deps));\n            // Store owner, associated username, and update last owner\n            await Promise.all([\n                // setOwnerItem\n                deps.secureStorage.setItem(owner.id, JSON.stringify({ owner }), buildAuthOptions(options, username)),\n                setOwnerName(owner.id, username, options),\n                setLastOwnerId(owner.id, options),\n            ]);\n            // Return the owner and associated username\n            return { owner, username };\n        },\n        unregister: async (ownerId, options) => {\n            // Delete the owner and associated username\n            await Promise.all([\n                // deleteOwnerItem\n                deps.secureStorage.deleteItem(ownerId, buildAuthOptions(options)),\n                deleteOwnerName(ownerId, options),\n            ]);\n            // If the owner was the last owner then set to\n            // the next owner based on metadata timestamp\n            const lastOwnerId = await getLastOwnerId(options);\n            if (lastOwnerId === ownerId) {\n                const ids = await getOwnerIds(options);\n                if (ids.length > 0) {\n                    await setLastOwnerId(ids[0], options);\n                }\n            }\n        },\n        getOwner: async (options) => {\n            const ownerId = await getLastOwnerId(options);\n            if (!ownerId)\n                return null;\n            const names = await getOwnerNames(options);\n            const username = names[ownerId] ?? \"\";\n            // Retrieve and decrypt the owner (this will trigger device authentication)\n            const account = await deps.secureStorage.getItem(ownerId, buildAuthOptions(options, username));\n            if (!account?.value)\n                return null;\n            // Unserialize the values (TODO: save these as base64 instead of json serializing)\n            const result = JSON.parse(account.value);\n            const writeKey = OwnerWriteKey.orThrow(new Uint8Array(Object.values(result.owner.writeKey)));\n            const encryptionKey = OwnerEncryptionKey.orThrow(new Uint8Array(Object.values(result.owner.encryptionKey)));\n            const owner = { ...result.owner, writeKey, encryptionKey };\n            // Update the last owner for future login attempts\n            await setLastOwnerId(ownerId, options);\n            // Return the owner and associated username\n            return { owner, username };\n        },\n        getProfiles: async (options) => {\n            // Get all owner ids and associated usernames\n            const [ids, names] = await Promise.all([\n                getOwnerIds(options),\n                getOwnerNames(options),\n            ]);\n            // Return the list of profiles (usually used for login UX)\n            return ids.map((ownerId) => ({\n                ownerId,\n                username: names[ownerId] ?? \"\",\n            }));\n        },\n        clearAll: async (options) => {\n            // Delete all owners and associated metadata (scoped to the service)\n            await clearAuthStore(options);\n        },\n    };\n};\nexport const localAuth_Namespace = \"evolu\";\nexport const localAuthDefaultOptions = {\n    service: localAuth_Namespace,\n    keychainGroup: localAuth_Namespace,\n    androidBiometricsStrongOnly: true,\n    iosSynchronizable: true,\n    webAuthnUsername: \"Evolu User\",\n    authenticationPrompt: {\n        title: \"Authenticate as |USERNAME|\",\n    },\n};\nconst localAuthMetakeyLastOwner = \"_last_owner\";\nconst localAuthMetakeyOwnerNames = \"_owner_names\";\n", "import { AliasNode, ColumnNode, ExpressionWrapper, IdentifierNode, ReferenceNode, sql, TableNode, ValueNode, } from \"kysely\";\nimport { kyselyJsonIdentifier } from \"./Query.js\";\nexport { sql } from \"kysely\";\n/**\n * A SQLite helper for aggregating a subquery into a JSON array.\n *\n * ### Examples\n *\n * ```ts\n * import { kysely } from \"@evolu/common\";\n *\n * // TODO: Update for Evolu\n * const result = await db\n *   .selectFrom(\"person\")\n *   .select((eb) => [\n *     \"id\",\n *     kysely\n *       .jsonArrayFrom(\n *         eb\n *           .selectFrom(\"pet\")\n *           .select([\"pet.id as pet_id\", \"pet.name\"])\n *           .whereRef(\"pet.owner_id\", \"=\", \"person.id\")\n *           .orderBy(\"pet.name\"),\n *       )\n *       .as(\"pets\"),\n *   ])\n *   .execute();\n *\n * result[0]?.id;\n * result[0]?.pets[0].pet_id;\n * result[0]?.pets[0].name;\n * ```\n *\n * The generated SQL (SQLite):\n *\n * ```sql\n * select \"id\", (\n *   select coalesce(json_group_array(json_object(\n *     'pet_id', \"agg\".\"pet_id\",\n *     'name', \"agg\".\"name\"\n *   )), '[]') from (\n *     select \"pet\".\"id\" as \"pet_id\", \"pet\".\"name\"\n *     from \"pet\"\n *     where \"pet\".\"owner_id\" = \"person\".\"id\"\n *     order by \"pet\".\"name\"\n *   ) as \"agg\"\n * ) as \"pets\"\n * from \"person\"\n * ```\n */\n// Kysely expects strict AST.\n// prettier-ignore\nexport function jsonArrayFrom(expr) {\n    return sql `(select ${sql.lit(kyselyJsonIdentifier)} || coalesce(json_group_array(json_object(${sql.join(getSqliteJsonObjectArgs(expr.toOperationNode(), 'agg'))})), '[]') from ${expr} as agg)`;\n}\n/**\n * A SQLite helper for turning a subquery into a JSON object.\n *\n * The subquery must only return one row.\n *\n * ### Examples\n *\n * ```ts\n * import { kysely } from \"@evolu/common\";\n *\n * // TODO: Update for Evolu\n * const result = await db\n *   .selectFrom(\"person\")\n *   .select((eb) => [\n *     \"id\",\n *     jsonObjectFrom(\n *       eb\n *         .selectFrom(\"pet\")\n *         .select([\"pet.id as pet_id\", \"pet.name\"])\n *         .whereRef(\"pet.owner_id\", \"=\", \"person.id\")\n *         .where(\"pet.is_favorite\", \"=\", true),\n *     ).as(\"favorite_pet\"),\n *   ])\n *   .execute();\n *\n * result[0]?.id;\n * result[0]?.favorite_pet?.pet_id;\n * result[0]?.favorite_pet?.name;\n * ```\n *\n * The generated SQL (SQLite):\n *\n * ```sql\n * select \"id\", (\n *   select json_object(\n *     'pet_id', \"obj\".\"pet_id\",\n *     'name', \"obj\".\"name\"\n *   ) from (\n *     select \"pet\".\"id\" as \"pet_id\", \"pet\".\"name\"\n *     from \"pet\"\n *     where \"pet\".\"owner_id\" = \"person\".\"id\"\n *     and \"pet\".\"is_favorite\" = ?\n *   ) as obj\n * ) as \"favorite_pet\"\n * from \"person\";\n * ```\n */\n// Kysely expects strict AST.\n// prettier-ignore\nexport function jsonObjectFrom(expr) {\n    return sql `(select ${sql.lit(kyselyJsonIdentifier)} || json_object(${sql.join(getSqliteJsonObjectArgs(expr.toOperationNode(), 'obj'))}) from ${expr} as obj)`;\n}\n/**\n * The SQLite `json_object` function.\n *\n * ### Examples\n *\n * ```ts\n * import { kysely } from \"@evolu/common\";\n *\n * // TODO: Update for Evolu\n * const result = await db\n *   .selectFrom(\"person\")\n *   .select((eb) => [\n *     \"id\",\n *     kysely\n *       .jsonBuildObject({\n *         first: eb.ref(\"first_name\"),\n *         last: eb.ref(\"last_name\"),\n *         full: kysely.sql<string>`first_name || ' ' || last_name`,\n *       })\n *       .as(\"name\"),\n *   ])\n *   .execute();\n *\n * result[0]?.id;\n * result[0]?.name.first;\n * result[0]?.name.last;\n * result[0]?.name.full;\n * ```\n *\n * The generated SQL (SQLite):\n *\n * ```sql\n * select \"id\", json_object(\n *   'first', first_name,\n *   'last', last_name,\n *   'full', \"first_name\" || ' ' || \"last_name\"\n * ) as \"name\"\n * from \"person\"\n * ```\n */\n// Kysely expects strict AST.\n// prettier-ignore\nexport function jsonBuildObject(obj) {\n    return sql `${sql.lit(kyselyJsonIdentifier)} || json_object(${sql.join(Object.keys(obj).flatMap((k) => [sql.lit(k), obj[k]]))})`;\n}\nfunction getSqliteJsonObjectArgs(node, table) {\n    try {\n        return getJsonObjectArgs(node, table);\n    }\n    catch {\n        throw new Error(\"SQLite jsonArrayFrom and jsonObjectFrom functions can only handle explicit selections due to limitations of the json_object function. selectAll() is not allowed in the subquery.\");\n    }\n}\nexport function getJsonObjectArgs(node, table) {\n    const args = [];\n    for (const { selection: s } of node.selections ?? []) {\n        if (ReferenceNode.is(s) && ColumnNode.is(s.column)) {\n            args.push(colName(s.column.column.name), colRef(table, s.column.column.name));\n        }\n        else if (ColumnNode.is(s)) {\n            args.push(colName(s.column.name), colRef(table, s.column.name));\n        }\n        else if (AliasNode.is(s) && IdentifierNode.is(s.alias)) {\n            args.push(colName(s.alias.name), colRef(table, s.alias.name));\n        }\n        else {\n            throw new Error(`can't extract column names from the select query node`);\n        }\n    }\n    return args;\n}\nfunction colName(col) {\n    return new ExpressionWrapper(ValueNode.createImmediate(col));\n}\nfunction colRef(table, col) {\n    return new ExpressionWrapper(ReferenceNode.create(ColumnNode.create(col), TableNode.create(table)));\n}\n", "export abstract class RNG {\n  abstract get name(): string\n\n  abstract next(): number\n\n  abstract clone(): RNG\n}\n", "import type { RNGFn } from '../types'\nimport { RNG } from '../rng'\n\nexport class FunctionRNG extends RNG {\n  _name: string\n  _rngFn: RNGFn\n\n  constructor(rngFn: RNGFn) {\n    super()\n\n    this._name = rngFn.name ?? 'function'\n    this._rngFn = rngFn\n  }\n\n  override get name() {\n    return this._name\n  }\n\n  override next() {\n    return this._rngFn()\n  }\n\n  override clone() {\n    return new FunctionRNG(this._rngFn)\n  }\n}\n", "import type { Seed, SeedOrRNG } from './types'\nimport { ARC4RNG } from './generators/arc4'\nimport { FunctionRNG } from './generators/function'\nimport { RNG } from './rng'\n\nexport function createRNG(seedOrRNG?: SeedOrRNG) {\n  switch (typeof seedOrRNG) {\n    case 'object':\n      if (seedOrRNG instanceof RNG) {\n        return seedOrRNG\n      }\n      break\n\n    case 'function':\n      return new FunctionRNG(seedOrRNG)\n\n    default:\n      return new ARC4RNG(seedOrRNG)\n  }\n\n  throw new Error(`invalid RNG seed or instance \"${seedOrRNG}\"`)\n}\n\n/**\n * Mixes a string seed into a key that is an array of integers, and returns a\n * shortened string seed that is equivalent to the result key.\n */\nexport function mixKey(seed: Seed, key: number[]): number[] {\n  const seedStr = `${seed}`\n  let smear = 0\n  let j = 0\n\n  while (j < seedStr.length) {\n    key[0xff & j] =\n      0xff & ((smear ^= (key[0xff & j] ?? 0) * 19) + seedStr.charCodeAt(j++))\n  }\n\n  if (!key.length) {\n    return [0]\n  }\n\n  return key\n}\n\nexport function shuffleInPlace<T>(gen: RNG, array: Array<T>) {\n  for (let i = array.length - 1; i > 0; i -= 1) {\n    const j = Math.floor(gen.next() * (i + 1))\n    const tmp = array[i]\n    array[i] = array[j] as T\n    array[j] = tmp as T\n  }\n}\n\n/**\n * Fisher-Yates sampling without replacement\n * O(k) time and space, by using a hash table instead of a full copy of the array\n * see https://arxiv.org/pdf/2104.05091 Algorithm 2\n */\nexport function sparseFisherYates<T>(\n  gen: RNG,\n  array: Array<T>,\n  k: number\n): T[] {\n  const H = new Map<number, number>() // stores swapped indices\n  const lastIndex = array.length - 1\n  const result: T[] = Array.from({ length: k })\n\n  for (let i = 0; i < k; i++) {\n    const remaining = lastIndex - i + 1\n    const r = Math.floor(gen.next() * remaining)\n    result[i] = array[H.get(r) ?? r]!\n    // move the element at the end of the active range into slot r\n    H.set(r, H.get(lastIndex - i) ?? lastIndex - i)\n  }\n\n  return result\n}\n", "import type { Seed } from '../types'\nimport { RNG } from '../rng'\nimport { mixKey } from '../utils'\n\n//\n// ARC4\n//\n// An ARC4 implementation. The constructor takes a key in the form of an array\n// of at most (width) integers that should be 0 <= x < (width).\n//\n// The g(count) method returns a pseudorandom integer that concatenates the\n// next (count) outputs from ARC4. Its return value is a number x that is in\n// the range 0 <= x < (width ^ count).\n\n// The following constants are related to IEEE 754 limits.\n// const width = 256 // each RC4 output is 0 <= x < 256\n// const chunks = 6 // at least six RC4 outputs for each double\nconst _arc4_startdenom = 281_474_976_710_656 // 256 ** 6 == width ** chunks\nconst _arc4_significance = 4_503_599_627_370_496 // 2 ** 52 significant digits in a double\nconst _arc4_overflow = 9_007_199_254_740_992 // 2 ** 53 == significance * 2\n\nexport class ARC4RNG extends RNG {\n  protected readonly _seed: Seed\n\n  i: number\n  j: number\n  S: number[]\n\n  constructor(seed: Seed = crypto.randomUUID()) {\n    super()\n\n    this._seed = seed\n    const key = mixKey(seed, [])\n\n    const S: number[] = []\n    const keylen = key.length\n    this.i = 0\n    this.j = 0\n    this.S = S\n\n    // Set up S using the standard key scheduling algorithm.\n    let i = 0\n    while (i <= 0xff) {\n      S[i] = i++\n    }\n\n    for (let i = 0, j = 0; i <= 0xff; i++) {\n      const t = S[i]!\n      j = 0xff & (j + key[i % keylen]! + t)\n      S[i] = S[j]!\n      S[j] = t\n    }\n\n    // For more robust unpredictability, the function call below discards an\n    // initial batch of values. This is called RC4-drop.\n    this.g(256)\n  }\n\n  override get name() {\n    return 'arc4'\n  }\n\n  override next() {\n    // This function returns a random double in [0, 1) that contains\n    // randomness in every bit of the mantissa of the IEEE 754 value.\n\n    let n = this.g(6) // Start with a numerator n < 2 ^ 48\n    let d = _arc4_startdenom // and denominator d = 2 ^ 48.\n    let x = 0 // and no 'extra last byte'.\n\n    while (n < _arc4_significance) {\n      // Fill up all significant digits (2 ** 52)\n      n = (n + x) * 256 // by shifting numerator and\n      d *= 256 // denominator and generating a\n      x = this.g(1) // new least-significant-byte.\n    }\n\n    while (n >= _arc4_overflow) {\n      // To avoid rounding past overflow, before adding\n      n /= 2 // last byte, shift everything\n      d /= 2 // right using integer math until\n      x >>>= 1 // we have exactly the desired bits.\n    }\n\n    return (n + x) / d // Form the number within [0, 1).\n  }\n\n  g(count: number) {\n    const { S } = this\n    let { i, j } = this\n    let r = 0\n\n    while (count--) {\n      i = 0xff & (i + 1)\n      const t = S[i]!\n      S[j] = t\n      j = 0xff & (j + t)\n      S[i] = S[j]!\n      r = r * 256 + S[0xff & (S[i]! + t)]!\n    }\n\n    this.i = i\n    this.j = j\n\n    return r\n  }\n\n  override clone() {\n    return new ARC4RNG(this._seed)\n  }\n}\n", "import { RNG } from '../rng'\n\nexport class MathRandomRNG extends RNG {\n  override get name() {\n    return 'Math.random'\n  }\n\n  override next() {\n    return Math.random()\n  }\n\n  override clone() {\n    return new MathRandomRNG()\n  }\n}\n", "import type { Seed } from '../types'\nimport { RNG } from '../rng'\n\nexport class XOR128RNG extends RNG {\n  protected readonly _seed: Seed\n\n  x: number\n  y: number\n  z: number\n  w: number\n\n  constructor(seed: Seed = crypto.randomUUID()) {\n    super()\n\n    this._seed = seed\n    this.x = 0\n    this.y = 0\n    this.z = 0\n    this.w = 0\n\n    let strSeed: string = ''\n\n    if (typeof seed === 'number') {\n      this.x = seed\n    } else {\n      strSeed += `${seed}`\n    }\n\n    // Mix in string seed, then discard an initial batch of 64 values.\n    for (let i = 0; i < strSeed.length + 64; ++i) {\n      this.x ^= strSeed.charCodeAt(i) | 0\n      this.next()\n    }\n  }\n\n  override get name() {\n    return 'xor128'\n  }\n\n  override next() {\n    const t = this.x ^ (this.x << 11)\n    this.x = this.y\n    this.y = this.z\n    this.z = this.w\n    this.w = this.w ^ ((this.w >>> 19) ^ t ^ (t >>> 8))\n    return (this.w >>> 0) / 0x1_00_00_00_00\n  }\n\n  override clone() {\n    return new XOR128RNG(this._seed)\n  }\n}\n", "export function numberValidator(num: number) {\n  return new NumberValidator(num)\n}\n\nexport class NumberValidator {\n  private n: number\n  constructor(num: number) {\n    this.n = num\n  }\n\n  public isInt = (): this => {\n    if (Number.isInteger(this.n)) {\n      return this\n    }\n    throw new Error(`Expected number to be an integer, got ${this.n}`)\n  }\n\n  public isPositive = (): this => {\n    if (this.n > 0) {\n      return this\n    }\n    throw new Error(`Expected number to be positive, got ${this.n}`)\n  }\n\n  public lessThan = (v: number): this => {\n    if (this.n < v) {\n      return this\n    }\n    throw new Error(`Expected number to be less than ${v}, got ${this.n}`)\n  }\n\n  public lessThanOrEqual = (v: number): this => {\n    if (this.n <= v) {\n      return this\n    }\n    throw new Error(\n      `Expected number to be less than or equal to ${v}, got ${this.n}`\n    )\n  }\n\n  public greaterThanOrEqual = (v: number): this => {\n    if (this.n >= v) {\n      return this\n    }\n    throw new Error(\n      `Expected number to be greater than or equal to ${v}, got ${this.n}`\n    )\n  }\n\n  public greaterThan = (v: number): this => {\n    if (this.n > v) {\n      return this\n    }\n    throw new Error(`Expected number to be greater than ${v}, got ${this.n}`)\n  }\n}\n", "import type { Random } from '../random'\nimport { numberValidator } from '../validation'\n\nexport function bates(random: Random, n = 1) {\n  numberValidator(n).isInt().isPositive()\n  const irwinHall = random.irwinHall(n)\n\n  return () => {\n    return irwinHall() / n\n  }\n}\n", "import type { Random } from '../random'\nimport { numberValidator } from '../validation'\n\nexport function bernoulli(random: Random, p = 0.5) {\n  numberValidator(p).greaterThanOrEqual(0).lessThanOrEqual(1)\n\n  return () => {\n    return Math.min(1, Math.floor(random.next() + p))\n  }\n}\n", "import type { Random } from '../random'\nimport { numberValidator } from '../validation'\n\nexport function binomial(random: Random, n = 1, p = 0.5) {\n  numberValidator(n).isInt().isPositive()\n  numberValidator(p).greaterThanOrEqual(0).lessThan(1)\n\n  return () => {\n    let i = 0\n    let x = 0\n\n    while (i++ < n) {\n      if (random.next() < p) {\n        x++\n      }\n    }\n    return x\n  }\n}\n", "import type { Random } from '../random'\nimport { numberValidator } from '../validation'\n\nexport function exponential(random: Random, lambda = 1) {\n  numberValidator(lambda).isPositive()\n\n  return () => {\n    return -Math.log(1 - random.next()) / lambda\n  }\n}\n", "import type { Random } from '../random'\nimport { numberValidator } from '../validation'\n\nexport function geometric(random: Random, p = 0.5) {\n  numberValidator(p).greaterThan(0).lessThan(1)\n  const invLogP = 1.0 / Math.log(1.0 - p)\n\n  return () => {\n    return Math.floor(1 + Math.log(random.next()) * invLogP)\n  }\n}\n", "import type { Random } from '../random'\nimport { numberValidator } from '../validation'\n\nexport function irwinHall(random: Random, n = 1) {\n  numberValidator(n).isInt().greaterThanOrEqual(0)\n\n  return () => {\n    let sum = 0\n    for (let i = 0; i < n; ++i) {\n      sum += random.next()\n    }\n\n    return sum\n  }\n}\n", "import type { Random } from '../random'\n\nexport function logNormal(random: Random, mu = 0, sigma = 1) {\n  const normal = random.normal(mu, sigma)\n  return () => {\n    return Math.exp(normal())\n  }\n}\n", "import type { Random } from '../random'\n\nexport function normal(random: Random, mu = 0, sigma = 1) {\n  return () => {\n    let x: number, y: number, r: number\n\n    do {\n      x = random.next() * 2 - 1\n      y = random.next() * 2 - 1\n      r = x * x + y * y\n    } while (!r || r > 1)\n\n    return mu + sigma * y * Math.sqrt((-2 * Math.log(r)) / r)\n  }\n}\n", "import type { Random } from '../random'\nimport { numberValidator } from '../validation'\n\nexport function pareto(random: Random, alpha = 1) {\n  numberValidator(alpha).greaterThanOrEqual(0)\n  const invAlpha = 1.0 / alpha\n\n  return () => {\n    return 1.0 / Math.pow(1.0 - random.next(), invAlpha)\n  }\n}\n", "import type { Random } from '../random'\nimport { numberValidator } from '../validation'\n\nconst logFactorialTable = [\n  0.0, 0.0, 0.693_147_180_559_945_29, 1.791_759_469_228_055,\n  3.178_053_830_347_945_8, 4.787_491_742_782_045_8, 6.579_251_212_010_101_2,\n  8.525_161_361_065_414_7, 10.604_602_902_745_251, 12.801_827_480_081_469\n]\n\nconst logFactorial = (k: number) => {\n  return logFactorialTable[k]\n}\n\nconst logSqrt2PI = 0.918_938_533_204_672_67\n\nexport function poisson(random: Random, lambda = 1) {\n  numberValidator(lambda).isPositive()\n\n  if (lambda < 10) {\n    // inversion method\n    const expMean = Math.exp(-lambda)\n\n    return () => {\n      let p = expMean\n      let x = 0\n      let u = random.next()\n\n      while (u > p) {\n        u = u - p\n        p = (lambda * p) / ++x\n      }\n\n      return x\n    }\n  } else {\n    // generative method\n    const smu = Math.sqrt(lambda)\n    const b = 0.931 + 2.53 * smu\n    const a = -0.059 + 0.024_83 * b\n    const invAlpha = 1.1239 + 1.1328 / (b - 3.4)\n    const vR = 0.9277 - 3.6224 / (b - 2)\n\n    return () => {\n      while (true) {\n        let u\n        let v = random.next()\n\n        if (v <= 0.86 * vR) {\n          u = v / vR - 0.43\n          return Math.floor(\n            ((2 * a) / (0.5 - Math.abs(u)) + b) * u + lambda + 0.445\n          )\n        }\n\n        if (v >= vR) {\n          u = random.next() - 0.5\n        } else {\n          u = v / vR - 0.93\n          u = (u < 0 ? -0.5 : 0.5) - u\n          v = random.next() * vR\n        }\n\n        const us = 0.5 - Math.abs(u)\n        if (us < 0.013 && v > us) {\n          continue\n        }\n\n        const k = Math.floor(((2 * a) / us + b) * u + lambda + 0.445)\n        v = (v * invAlpha) / (a / (us * us) + b)\n\n        if (k >= 10) {\n          const t =\n            (k + 0.5) * Math.log(lambda / k) -\n            lambda -\n            logSqrt2PI +\n            k -\n            (1 / 12.0 - (1 / 360.0 - 1 / (1260.0 * k * k)) / (k * k)) / k\n\n          if (Math.log(v * smu) <= t) {\n            return k\n          }\n        } else if (k >= 0) {\n          const f = logFactorial(k) ?? 0\n\n          if (Math.log(v) <= k * Math.log(lambda) - lambda - f) {\n            return k\n          }\n        }\n      }\n    }\n  }\n}\n", "import type { Random } from '../random'\n\nexport function uniform(random: Random, min = 0, max = 1) {\n  return () => {\n    return random.next() * (max - min) + min\n  }\n}\n", "import type { Random } from '../random'\n\nexport function uniformBoolean(random: Random) {\n  return () => {\n    return random.next() >= 0.5\n  }\n}\n", "import type { Random } from '../random'\nimport { numberValidator } from '../validation'\n\nexport function uniformInt(random: Random, min = 0, max = 1) {\n  if (max === undefined) {\n    max = min === undefined ? 1 : min\n    min = 0\n  }\n\n  numberValidator(min).isInt()\n  numberValidator(max).isInt()\n\n  return () => {\n    return Math.floor(random.next() * (max - min + 1) + min)\n  }\n}\n", "import type { Random } from '../random'\nimport { numberValidator } from '../validation'\n\nexport function weibull(random: Random, lambda: number, k: number) {\n  numberValidator(lambda).greaterThan(0.0)\n  numberValidator(k).greaterThan(0.0)\n  return () => {\n    const u = 1.0 - random.next()\n    return lambda * Math.pow(-Math.log(u), 1.0 / k)\n  }\n}\n", "import type { RNG } from './rng'\nimport type { SeedOrRNG } from './types'\nimport { bates } from './distributions/bates'\nimport { bernoulli } from './distributions/bernoulli'\nimport { binomial } from './distributions/binomial'\nimport { exponential } from './distributions/exponential'\nimport { geometric } from './distributions/geometric'\nimport { irwinHall } from './distributions/irwin-hall'\nimport { logNormal } from './distributions/log-normal'\nimport { normal } from './distributions/normal'\nimport { pareto } from './distributions/pareto'\nimport { poisson } from './distributions/poisson'\nimport { uniform } from './distributions/uniform'\nimport { uniformBoolean } from './distributions/uniform-boolean'\nimport { uniformInt } from './distributions/uniform-int'\nimport { weibull } from './distributions/weibull'\nimport { MathRandomRNG } from './generators/math-random'\nimport { createRNG, shuffleInPlace, sparseFisherYates } from './utils'\n\n/**\n * Distribution function\n */\ntype IDistFn<R> = (random: Random, ...argv: any) => R\n\n/**\n * Distribution\n */\ntype IDist<R> = () => R\n\n/**\n * Keyed cache entry\n */\ninterface ICacheEntry<T> {\n  key: string\n  distribution: () => T\n}\n\n/**\n * Seedable random number generator supporting many common distributions.\n *\n * @name Random\n * @class\n *\n * @param {RNG|function|string|number} [rng=Math.random] - Underlying random number generator or a seed for the default PRNG. Defaults to `Math.random`.\n */\nexport class Random {\n  protected _rng!: RNG\n  protected _cache: {\n    [k: string]: ICacheEntry<any>\n  } = {}\n\n  constructor(seedOrRNG: SeedOrRNG = new MathRandomRNG()) {\n    this._rng = createRNG(seedOrRNG)\n  }\n\n  /**\n   * @member {RNG} rng - Underlying pseudo-random number generator.\n   */\n  get rng() {\n    return this._rng\n  }\n\n  /**\n   * Creates a new `Random` instance, optionally specifying parameters to\n   * set a new seed.\n   */\n  clone(seedOrRNG: SeedOrRNG = this.rng.clone()): Random {\n    return new Random(seedOrRNG)\n  }\n\n  /**\n   * Sets the underlying pseudorandom number generator.\n   *\n   * @example\n   * ```ts\n   * import random from 'random'\n   *\n   * random.use('example-seed')\n   * // or\n   * random.use(Math.random)\n   * ```\n   */\n  use(seedOrRNG: SeedOrRNG) {\n    this._rng = createRNG(seedOrRNG)\n    this._cache = {}\n  }\n\n  // --------------------------------------------------------------------------\n  // Uniform utility functions\n  // --------------------------------------------------------------------------\n\n  /**\n   * Convenience wrapper around `this.rng.next()`\n   *\n   * Returns a floating point number in [0, 1).\n   *\n   * @return {number}\n   */\n  next(): number {\n    return this._rng.next()\n  }\n\n  /**\n   * Samples a uniform random floating point number, optionally specifying\n   * lower and upper bounds.\n   *\n   * Convenience wrapper around `random.uniform()`\n   *\n   * @param {number} [min=0] - Lower bound (float, inclusive)\n   * @param {number} [max=1] - Upper bound (float, exclusive)\n   */\n  float(min?: number, max?: number): number {\n    return this.uniform(min, max)()\n  }\n\n  /**\n   * Samples a uniform random integer, optionally specifying lower and upper\n   * bounds.\n   *\n   * Convenience wrapper around `random.uniformInt()`\n   *\n   * @param {number} [min=0] - Lower bound (integer, inclusive)\n   * @param {number} [max=1] - Upper bound (integer, inclusive)\n   */\n  int(min?: number, max?: number): number {\n    return this.uniformInt(min, max)()\n  }\n\n  /**\n   * Samples a uniform random integer, optionally specifying lower and upper\n   * bounds.\n   *\n   * Convenience wrapper around `random.uniformInt()`\n   *\n   * @alias `random.int`\n   *\n   * @param {number} [min=0] - Lower bound (integer, inclusive)\n   * @param {number} [max=1] - Upper bound (integer, inclusive)\n   */\n  integer(min?: number, max?: number): number {\n    return this.uniformInt(min, max)()\n  }\n\n  /**\n   * Samples a uniform random boolean value.\n   *\n   * Convenience wrapper around `random.uniformBoolean()`\n   *\n   * @alias `random.boolean`\n   */\n  bool(): boolean {\n    return this.uniformBoolean()()\n  }\n\n  /**\n   * Samples a uniform random boolean value.\n   *\n   * Convenience wrapper around `random.uniformBoolean()`\n   */\n  boolean(): boolean {\n    return this.uniformBoolean()()\n  }\n\n  /**\n   * Returns an item chosen uniformly at random from the given array.\n   *\n   * Convenience wrapper around `random.uniformInt()`\n   *\n   * @param {Array<T>} [array] - Input array\n   */\n  choice<T>(array: Array<T>): T | undefined {\n    if (!Array.isArray(array)) {\n      throw new TypeError(\n        `Random.choice expected input to be an array, got ${typeof array}`\n      )\n    }\n\n    const length = array.length\n\n    if (length > 0) {\n      const index = this.uniformInt(0, length - 1)()\n      return array[index]\n    } else {\n      return undefined\n    }\n  }\n\n  /**\n   * Returns a random subset of k items from the given array (without replacement).\n   *\n   * @param {Array<T>} [array] - Input array\n   */\n  sample<T>(array: Array<T>, k: number): Array<T> {\n    if (!Array.isArray(array)) {\n      throw new TypeError(\n        `Random.sample expected input to be an array, got ${typeof array}`\n      )\n    }\n    if (k < 0 || k > array.length) {\n      throw new Error(\n        `Random.sample: k must be between 0 and array.length (${array.length}), got ${k}`\n      )\n    }\n    return sparseFisherYates(this.rng, array, k)\n  }\n\n  /**\n   * Generates a thunk which returns samples of size k from the given array.\n   *\n   * This is for convenience only; there is no gain in efficiency.\n   *\n   * @param {Array<T>} [array] - Input array\n   */\n  sampler<T>(array: Array<T>, k: number): () => Array<T> {\n    if (!Array.isArray(array)) {\n      throw new TypeError(\n        `Random.sampler expected input to be an array, got ${typeof array}`\n      )\n    }\n    if (k < 0 || k > array.length) {\n      throw new Error(\n        `Random.sampler: k must be between 0 and array.length (${array.length}), got ${k}`\n      )\n    }\n\n    const gen = this.rng\n\n    return () => {\n      return sparseFisherYates(gen, array, k)\n    }\n  }\n\n  /**\n   * Returns a shuffled copy of the given array.\n   *\n   * @param {Array<T>} [array] - Input array\n   */\n  shuffle<T>(array: Array<T>): Array<T> {\n    if (!Array.isArray(array)) {\n      throw new TypeError(\n        `Random.shuffle expected input to be an array, got ${typeof array}`\n      )\n    }\n\n    const copy = [...array]\n    shuffleInPlace(this.rng, copy)\n\n    return copy\n  }\n\n  /**\n   * Generates a thunk which returns shuffled copies of the given array.\n   *\n   * @param {Array<T>} [array] - Input array\n   */\n  shuffler<T>(array: Array<T>): () => Array<T> {\n    if (!Array.isArray(array)) {\n      throw new TypeError(\n        `Random.shuffler expected input to be an array, got ${typeof array}`\n      )\n    }\n\n    const gen = this.rng\n    const copy = [...array]\n\n    return () => {\n      shuffleInPlace(gen, copy)\n      return [...copy]\n    }\n  }\n\n  // --------------------------------------------------------------------------\n  // Uniform distributions\n  // --------------------------------------------------------------------------\n\n  /**\n   * Generates a [Continuous uniform distribution](https://en.wikipedia.org/wiki/Uniform_distribution_(continuous)).\n   *\n   * @param {number} [min=0] - Lower bound (float, inclusive)\n   * @param {number} [max=1] - Upper bound (float, exclusive)\n   */\n  uniform(min?: number, max?: number): IDist<number> {\n    return this._memoize<number>('uniform', uniform, min, max)\n  }\n\n  /**\n   * Generates a [Discrete uniform distribution](https://en.wikipedia.org/wiki/Discrete_uniform_distribution).\n   *\n   * @param {number} [min=0] - Lower bound (integer, inclusive)\n   * @param {number} [max=1] - Upper bound (integer, inclusive)\n   */\n  uniformInt(min?: number, max?: number): IDist<number> {\n    return this._memoize<number>('uniformInt', uniformInt, min, max)\n  }\n\n  /**\n   * Generates a [Discrete uniform distribution](https://en.wikipedia.org/wiki/Discrete_uniform_distribution),\n   * with two possible outcomes, `true` or `false.\n   *\n   * This method is analogous to flipping a coin.\n   */\n  uniformBoolean(): IDist<boolean> {\n    return this._memoize<boolean>('uniformBoolean', uniformBoolean)\n  }\n\n  // --------------------------------------------------------------------------\n  // Normal distributions\n  // --------------------------------------------------------------------------\n\n  /**\n   * Generates a [Normal distribution](https://en.wikipedia.org/wiki/Normal_distribution).\n   *\n   * @param {number} [mu=0] - Mean\n   * @param {number} [sigma=1] - Standard deviation\n   */\n  normal(mu?: number, sigma?: number): IDist<number> {\n    return normal(this, mu, sigma)\n  }\n\n  /**\n   * Generates a [Log-normal distribution](https://en.wikipedia.org/wiki/Log-normal_distribution).\n   *\n   * @param {number} [mu=0] - Mean of underlying normal distribution\n   * @param {number} [sigma=1] - Standard deviation of underlying normal distribution\n   */\n  logNormal(mu?: number, sigma?: number): IDist<number> {\n    return logNormal(this, mu, sigma)\n  }\n\n  // --------------------------------------------------------------------------\n  // Bernoulli distributions\n  // --------------------------------------------------------------------------\n\n  /**\n   * Generates a [Bernoulli distribution](https://en.wikipedia.org/wiki/Bernoulli_distribution).\n   *\n   * @param {number} [p=0.5] - Success probability of each trial.\n   */\n  bernoulli(p?: number): IDist<number> {\n    return bernoulli(this, p)\n  }\n\n  /**\n   * Generates a [Binomial distribution](https://en.wikipedia.org/wiki/Binomial_distribution).\n   *\n   * @param {number} [n=1] - Number of trials.\n   * @param {number} [p=0.5] - Success probability of each trial.\n   */\n  binomial(n?: number, p?: number): IDist<number> {\n    return binomial(this, n, p)\n  }\n\n  /**\n   * Generates a [Geometric distribution](https://en.wikipedia.org/wiki/Geometric_distribution).\n   *\n   * @param {number} [p=0.5] - Success probability of each trial.\n   */\n  geometric(p?: number): IDist<number> {\n    return geometric(this, p)\n  }\n\n  // --------------------------------------------------------------------------\n  // Poisson distributions\n  // --------------------------------------------------------------------------\n\n  /**\n   * Generates a [Poisson distribution](https://en.wikipedia.org/wiki/Poisson_distribution).\n   *\n   * @param {number} [lambda=1] - Mean (lambda > 0)\n   */\n  poisson(lambda?: number): IDist<number> {\n    return poisson(this, lambda)\n  }\n\n  /**\n   * Generates an [Exponential distribution](https://en.wikipedia.org/wiki/Exponential_distribution).\n   *\n   * @param {number} [lambda=1] - Inverse mean (lambda > 0)\n   */\n  exponential(lambda?: number): IDist<number> {\n    return exponential(this, lambda)\n  }\n\n  // --------------------------------------------------------------------------\n  // Misc distributions\n  // --------------------------------------------------------------------------\n\n  /**\n   * Generates an [Irwin Hall distribution](https://en.wikipedia.org/wiki/Irwin%E2%80%93Hall_distribution).\n   *\n   * @param {number} [n=1] - Number of uniform samples to sum (n >= 0)\n   */\n  irwinHall(n?: number): IDist<number> {\n    return irwinHall(this, n)\n  }\n\n  /**\n   * Generates a [Bates distribution](https://en.wikipedia.org/wiki/Bates_distribution).\n   *\n   * @param {number} [n=1] - Number of uniform samples to average (n >= 1)\n   */\n  bates(n?: number): IDist<number> {\n    return bates(this, n)\n  }\n\n  /**\n   * Generates a [Pareto distribution](https://en.wikipedia.org/wiki/Pareto_distribution).\n   *\n   * @param {number} [alpha=1] - Alpha\n   */\n  pareto(alpha?: number): IDist<number> {\n    return pareto(this, alpha)\n  }\n\n  /**\n   * Generates a [Weibull distribution](https://en.wikipedia.org/wiki/Weibull_distribution).\n   *\n   * @param {number} [lambda] - Lambda, the scale parameter\n   * @param {number} [k] - k, the shape parameter\n   */\n  weibull(lambda: number, k: number) {\n    return weibull(this, lambda, k)\n  }\n\n  // --------------------------------------------------------------------------\n  // Internal\n  // --------------------------------------------------------------------------\n\n  /**\n   * Memoizes distributions to ensure they're only created when necessary.\n   *\n   * Returns a thunk which that returns independent, identically distributed\n   * samples from the specified distribution.\n   *\n   * @internal\n   *\n   * @param {string} label - Name of distribution\n   * @param {function} getter - Function which generates a new distribution\n   * @param {...*} args - Distribution-specific arguments\n   */\n  protected _memoize<T>(\n    label: string,\n    getter: IDistFn<any>,\n    ...args: any[]\n  ): IDist<T> {\n    // return getter(this, ...args)\n    const key = `${args.join(';')}`\n    let value = this._cache[label]\n\n    if (value === undefined || value.key !== key) {\n      value = {\n        key,\n        distribution: getter(this, ...args)\n      }\n      this._cache[label] = value\n    }\n\n    return value.distribution\n  }\n}\n\nexport default new Random()\n", "import { Random as RandomLib } from \"random\";\n/** Creates a {@link Random} using Math.random(). */\nexport const createRandom = () => ({\n    next: () => Math.random(),\n});\n/**\n * Creates {@link Random} using {@link RandomLibDep} with a seed which is useful\n * for tests.\n */\nexport const createRandomWithSeed = (seed) => {\n    const random = new RandomLib(seed);\n    return {\n        next: () => random.next(),\n    };\n};\n/** Creates a `RandomLib` using the NPM `random` package. */\nexport const createRandomLib = () => new RandomLib();\n/**\n * Creates {@link RandomLibDep} using the NPM `random` package with a seed which\n * is useful for tests.\n */\nexport const createRandomLibWithSeed = (seed) => ({\n    random: new RandomLib(seed),\n});\n", "import { assert } from \"./Assert.js\";\n/** Creates a {@link Redacted} wrapper for a sensitive value. */\nexport const createRedacted = (value) => {\n    const redacted = Object.create(proto);\n    registry.set(redacted, value);\n    return redacted;\n};\nconst proto = {\n    toString: () => redactedString,\n    toJSON: () => redactedString,\n    [Symbol.for(\"nodejs.util.inspect.custom\")]: () => redactedString,\n    [Symbol.dispose]() {\n        registry.delete(this);\n    },\n};\nconst redactedString = \"<redacted>\";\nconst registry = new WeakMap();\n/**\n * Reveals the original value from a {@link Redacted} wrapper.\n *\n * This is a separate function rather than a method on {@link Redacted} to make\n * access visually explicit and easy to grep in code reviews. Accessing\n * sensitive values should feel intentional, not convenient.\n */\nexport const revealRedacted = (redacted) => {\n    assert(registry.has(redacted), \"Redacted value was not in registry\");\n    return registry.get(redacted);\n};\n/** Checks if a value is a {@link Redacted} wrapper. */\nexport const isRedacted = (value) => typeof value === \"object\" &&\n    value !== null &&\n    Object.getPrototypeOf(value) === proto;\n/**\n * Creates an {@link Eq} for {@link Redacted} values based on an equality function\n * for the underlying type.\n *\n * ### Example\n *\n * ```ts\n * type ApiKey = string & Brand<\"ApiKey\">;\n * const eqRedactedApiKey = createEqRedacted<ApiKey>(eqString);\n *\n * const a = createRedacted(\"x\" as ApiKey);\n * const b = createRedacted(\"x\" as ApiKey);\n * eqRedactedApiKey(a, b); // true\n * ```\n */\nexport const createEqRedacted = (eq) => (x, y) => eq(revealRedacted(x), revealRedacted(y));\n", "/** Creates a {@link Ref} with the given initial state. */\nexport const createRef = (initialState) => {\n    let currentState = initialState;\n    return {\n        get: () => currentState,\n        set: (state) => {\n            currentState = state;\n        },\n        modify: (updater) => {\n            currentState = updater(currentState);\n        },\n    };\n};\n", "import { assert } from \"./Assert.js\";\n/** Creates a {@link Relation}. */\nexport const createRelation = () => {\n    const aToB = new Map();\n    const bToA = new Map();\n    let sizeInternal = 0;\n    const relation = {\n        add(a, b) {\n            let bSet = aToB.get(a);\n            if (bSet?.has(b))\n                return false;\n            if (!bSet) {\n                bSet = new Set();\n                aToB.set(a, bSet);\n            }\n            bSet.add(b);\n            let aSet = bToA.get(b);\n            if (!aSet) {\n                aSet = new Set();\n                bToA.set(b, aSet);\n            }\n            aSet.add(a);\n            sizeInternal++;\n            return true;\n        },\n        remove(a, b) {\n            const bSet = aToB.get(a);\n            if (!bSet?.has(b))\n                return false;\n            bSet.delete(b);\n            if (bSet.size === 0) {\n                aToB.delete(a);\n            }\n            const aSet = bToA.get(b);\n            assert(aSet, \"Relation mapping inconsistency\");\n            aSet.delete(a);\n            if (aSet.size === 0) {\n                bToA.delete(b);\n            }\n            sizeInternal--;\n            return true;\n        },\n        getB(a) {\n            return aToB.get(a);\n        },\n        getA(b) {\n            return bToA.get(b);\n        },\n        forEach(callback) {\n            for (const [a, bSet] of aToB) {\n                for (const b of bSet)\n                    callback(a, b);\n            }\n        },\n        [Symbol.iterator]() {\n            const iterator = function* () {\n                for (const [a, bSet] of aToB) {\n                    for (const b of bSet) {\n                        yield [a, b];\n                    }\n                }\n            };\n            return iterator();\n        },\n        has(a, b) {\n            const bSet = aToB.get(a);\n            return bSet?.has(b) ?? false;\n        },\n        hasA(a) {\n            return aToB.has(a);\n        },\n        hasB(b) {\n            return bToA.has(b);\n        },\n        deleteA(a) {\n            const bSet = aToB.get(a);\n            if (!bSet)\n                return false;\n            const removed = bSet.size;\n            for (const b of bSet) {\n                const aSet = bToA.get(b);\n                if (aSet) {\n                    aSet.delete(a);\n                    if (aSet.size === 0) {\n                        bToA.delete(b);\n                    }\n                }\n            }\n            aToB.delete(a);\n            sizeInternal -= removed;\n            return true;\n        },\n        deleteB(b) {\n            const aSet = bToA.get(b);\n            if (!aSet)\n                return false;\n            const removed = aSet.size;\n            for (const a of aSet) {\n                const bSet = aToB.get(a);\n                if (bSet) {\n                    bSet.delete(b);\n                    if (bSet.size === 0) {\n                        aToB.delete(a);\n                    }\n                }\n            }\n            bToA.delete(b);\n            sizeInternal -= removed;\n            return true;\n        },\n        clear() {\n            aToB.clear();\n            bToA.clear();\n            sizeInternal = 0;\n        },\n        aCount() {\n            return aToB.size;\n        },\n        bCount() {\n            return bToA.size;\n        },\n        size() {\n            return sizeInternal;\n        },\n    };\n    return relation;\n};\n", "import { err, ok } from \"./Result.js\";\nimport { retry } from \"./Task.js\";\nimport { maxPositiveInt } from \"./Type.js\";\n/**\n * Create a new {@link WebSocket}.\n *\n * The default behavior is that WebSocket tries to reconnect repeatedly in case\n * the application is offline, because online events (both web and native) are\n * not reliable. Once it connects and the connection is closed, it tries to\n * reconnect again. Retrying the connection can be controlled using the\n * retryOptions retryable predicate.\n *\n * ### How Binary Messages Work in WebSockets\n *\n * The Server Chooses the Message Type:\n *\n * - Text (0x1)  Sent as UTF-8 encoded text (always received as a string in the\n *   browser).\n * - Binary (0x2)  Sent as raw binary data (received as a Blob or ArrayBuffer,\n *   depending on binaryType).\n *\n * The Client's binaryType Controls How Binary Data is Processed:\n *\n * - If the server sends a text frame (0x1), the browser always delivers\n *   event.data as a string, regardless of binaryType.\n * - If the server sends a binary frame (0x2), the browser delivers event.data as:\n *\n *   - A Blob (default: \"blob\")\n *   - An ArrayBuffer (\"arraybuffer\")\n *\n * ### Example\n *\n * TODO:\n */\nexport const createWebSocket = (url, { protocols, binaryType, onOpen, onClose, onMessage, onError, retryOptions, WebSocketConstructor = globalThis.WebSocket, } = {}) => {\n    let isDisposed = false;\n    const reconnectController = new AbortController();\n    const defaultRetryOptions = {\n        retries: maxPositiveInt, // Practically infinite retries\n    };\n    let socket = null;\n    const disposeSocket = () => {\n        if (!socket)\n            return;\n        // Remove all listeners before closing\n        socket.onopen = null;\n        socket.onclose = null;\n        socket.onmessage = null;\n        socket.onerror = null;\n        if (socket.readyState !== socket.CLOSING &&\n            socket.readyState !== socket.CLOSED) {\n            socket.close();\n        }\n        socket = null;\n    };\n    // To prevent a memory leak from pending connection promise.\n    let disposePromise = null;\n    /**\n     * This promise represents continuous connection which:\n     *\n     * - Is rejected when a connection cannot be established.\n     * - Is rejected when a connection is closed.\n     * - Is resolved when WebSocket is disposed().\n     */\n    void retry({\n        ...defaultRetryOptions,\n        ...retryOptions,\n    }, () => new Promise((resolve) => {\n        disposePromise = () => {\n            resolve(ok());\n        };\n        if (isDisposed)\n            disposePromise();\n        disposeSocket();\n        socket = new WebSocketConstructor(url, protocols);\n        if (binaryType)\n            socket.binaryType = binaryType;\n        let isOpen = false;\n        socket.onopen = () => {\n            isOpen = true;\n            onOpen?.();\n        };\n        socket.onerror = (event) => {\n            const error = isOpen\n                ? { type: \"WebSocketConnectionError\", event }\n                : { type: \"WebSocketConnectError\", event };\n            onError?.(error);\n            // Trigger reconnect only on WebSocketConnectError.\n            if (error.type === \"WebSocketConnectError\") {\n                resolve(err(error));\n            }\n        };\n        socket.onclose = (event) => {\n            onClose?.(event);\n            resolve(err({ type: \"WebSocketConnectionCloseError\", event }));\n        };\n        socket.onmessage = (event) => {\n            onMessage?.(event.data);\n        };\n    }))(reconnectController).then((result) => {\n        if (result.ok || result.error.type === \"AbortError\")\n            return;\n        onError?.(result.error);\n    });\n    return {\n        send: (data) => {\n            // https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n            if (!socket || socket.readyState === socket.CONNECTING) {\n                return err({ type: \"WebSocketSendError\" });\n            }\n            socket.send(data);\n            return ok();\n        },\n        getReadyState: () => socket ? nativeToStringState[socket.readyState] : \"connecting\",\n        isOpen: () => (socket ? socket.readyState === socket.OPEN : false),\n        [Symbol.dispose]() {\n            if (isDisposed)\n                return;\n            isDisposed = true;\n            reconnectController.abort();\n            disposeSocket();\n            disposePromise?.();\n        },\n    };\n};\nconst nativeToStringState = {\n    [WebSocket.CONNECTING]: \"connecting\",\n    [WebSocket.OPEN]: \"open\",\n    [WebSocket.CLOSING]: \"closing\",\n    [WebSocket.CLOSED]: \"closed\",\n};\n"],
  "mappings": "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",
  "names": ["array", "min", "max", "id", "id", "object", "array", "length", "readObject", "length", "length", "array", "object", "id", "decode", "target", "length", "position", "bundledStrings", "referenceMap", "packr", "pack", "maxBytes", "json", "array", "object", "key", "newPosition", "target", "targetView", "set", "regex", "encode", "id", "packr", "record", "hasNodeBuffer", "String", "Number", "BigInt", "Boolean", "Function", "Uint8Array", "Date", "min", "max", "hasNodeBuffer", "id", "utf8ToBytes", "record", "errors", "error", "err", "length", "id", "object", "console", "Uint8Array", "length", "err", "id", "errors", "String", "Number", "Uint8Array", "strings", "sql", "message", "min", "max", "sql", "trim", "length", "id", "set", "trim", "createType", "id", "trim", "err", "sql", "array", "sql", "err", "err", "PRIVATE_RELEASE_METHOD", "err", "PRIVATE_RELEASE_METHOD", "err", "String", "String", "Uint8Array", "String", "Boolean", "String", "timeout", "id", "result", "id", "schema", "dbSchema", "owner", "id", "sql", "sql", "array", "i", "irwinHall", "normal", "min", "max", "array", "length"]
}
